/*! For license information please see jianghu-ui.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("JianghuUI",[],e):"object"==typeof exports?exports.JianghuUI=e():t.JianghuUI=e()}("undefined"!=typeof self?self:this,()=>(()=>{"use strict";var t={d:(e,n)=>{for(var i in n)t.o(n,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:n[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};t.d(e,{default:()=>Me});var n=function(){var t=this,e=t._self._c;return e("div",[t.hideDrawers?t._e():e("v-navigation-drawer",{staticClass:"jh-page-nav-bar hidden-md-and-up",attrs:{app:"",clipped:"",temporary:t.temporary},model:{value:t.mobileMenuDrawer,callback:function(e){t.mobileMenuDrawer=e},expression:"mobileMenuDrawer"}},[e("v-toolbar-title",{staticClass:"px-3 jh-toolbar-title"},[e("span",{staticClass:"text-base font-medium"},[t._v(t._s(t.appTitle))])]),t._v(" "),e("v-divider",{staticClass:"jh-divider"}),t._v(" "),e("v-list",{staticClass:"py-0",attrs:{flat:""}},[e("v-list-item-group",{attrs:{value:t.currentMenuIndex}},[t._l(t.menuList,function(n,i){return[n.children&&n.children.length>0?[e("v-list-group",{key:i,staticClass:"px-4",attrs:{value:n.active},scopedSlots:t._u([{key:"activator",fn:function(){return[e("v-list-item",{staticClass:"pl-0",attrs:{ripple:!1}},[e("v-list-item-content",[e("v-list-item-title",[t._v(t._s(n.title))])],1)],1)]},proxy:!0},{key:"appendIcon",fn:function(){return[e("v-icon",{attrs:{size:"18"}},[t._v("mdi-chevron-down")])]},proxy:!0}],null,!0)},[t._v(" "),t._v(" "),t._l(n.children,function(n,r){return[n.children&&n.children.length>0?[e("v-list-group",{key:r,staticClass:"px-0",attrs:{value:n.active},scopedSlots:t._u([{key:"activator",fn:function(){return[e("v-list-item",{staticClass:"pl-0",attrs:{ripple:!1}},[e("v-list-item-content",[e("v-list-item-title",{staticClass:"pl-6 pl-sm-4"},[t._v(t._s(n.title))])],1)],1)]},proxy:!0},{key:"appendIcon",fn:function(){return[e("v-icon",{attrs:{size:"16"}},[t._v("mdi-chevron-down")])]},proxy:!0}],null,!0)},[t._v(" "),t._v(" "),t._l(n.children,function(n,r){return e("v-list-item",{key:r,class:{"second-active":t.currentSecondMenuId===n.id&&t.currentMenuIndex===i},on:{click:function(e){return t.handleMenuClick(n,i)}}},[e("v-list-item-content",[e("v-list-item-title",{staticClass:"pl-10 pl-sm-8"},[t._v(t._s(n.title))])],1)],1)})],2)]:e("v-list-item",{key:r,class:{"second-active":t.currentSecondMenuId===n.id&&t.currentMenuIndex===i},on:{click:function(e){return t.handleMenuClick(n,i)}}},[e("v-list-item-content",[e("v-list-item-title",{staticClass:"pl-6 pl-sm-4"},[t._v(t._s(n.title))])],1)],1)]})],2)]:e("v-list-item",{key:i,staticClass:"px-4",class:{"second-active":t.currentMenuIndex===i},on:{click:function(e){return t.handleMenuClick(n,i)}}},[e("v-list-item-content",{staticClass:"pl-0"},[e("v-list-item-title",[t._v(t._s(n.title))])],1),t._v(" "),e("v-list-item-icon",{staticClass:"my-3"},[e("v-icon",{attrs:{size:"18"}},[t._v("mdi-chevron-right")])],1)],1)]})],2)],1),t._v(" "),e("v-btn",{staticClass:"jh-menu-drawer-close-float-btn",attrs:{elevation:"0",color:"success",fab:"",absolute:"",top:"",left:"",small:"",tile:""},on:{click:function(e){t.mobileMenuDrawer=!1}}},[e("v-icon",[t._v("mdi-close")])],1)],1),t._v(" "),!t.hideDrawers&&t.showAvatar?e("v-navigation-drawer",{staticClass:"jh-page-nav-bar hidden-md-and-up",attrs:{app:"",clipped:"",temporary:t.temporary,right:""},model:{value:t.mobileUserMenuDrawer,callback:function(e){t.mobileUserMenuDrawer=e},expression:"mobileUserMenuDrawer"}},[e("div",{staticClass:"d-flex flex-column",staticStyle:{height:"calc(100vh - 20px)"}},[e("div",[e("v-toolbar-title",{staticClass:"px-4",staticStyle:{"min-height":"110px"}},[e("div",{staticClass:"d-flex flex-column pt-3",staticStyle:{gap:"12px"}},[e("div",{staticClass:"success--text text-xs text-center",staticStyle:{cursor:"pointer"},on:{click:function(e){t.mobileUserMenuDrawer=!1}}},[e("v-icon",{staticClass:"success--text",attrs:{size:"22"}},[t._v("mdi-window-close")]),t._v(" "),e("div",{staticClass:"success--text",staticStyle:{"margin-top":"-2px"}},[t._v("关闭")])],1),t._v(" "),e("div",{staticClass:"d-flex align-start mb-2",staticStyle:{gap:"4px"}},[e("v-icon",{attrs:{size:36}},[t._v("mdi-account-circle")]),t._v(" "),e("div",{staticClass:"flex-1"},[e("div",{staticClass:"text-xs"},[t._v("\n                  "+t._s(t.userInfo.username)+"\n                  "),e("span",{staticClass:"text-caption grey--text"},[t._v(t._s(t.userInfo.userId))])]),t._v(" "),e("div",{staticClass:"d-flex flex-wrap",staticStyle:{gap:"4px"}},t._l(t.userInfo.roles,function(n,i){return e("span",{key:i,staticClass:"text-caption px-1 grey--text",staticStyle:{border:"1px solid #ccc","border-radius":"4px"}},[t._v("\n                    "+t._s(n)+"\n                  ")])}),0)])],1)])]),t._v(" "),e("v-divider",{staticClass:"jh-divider"})],1),t._v(" "),e("v-list",{staticClass:"flex-1",attrs:{nav:"",dense:""}},t._l(t.avatarMenuList,function(n,i){return e("v-list-item",{key:i,on:{click:function(e){return t.handleMenuClick(n)}}},[e("v-list-item-icon",{staticClass:"mr-1 mt-1"},[e("v-icon",{attrs:{size:"16",color:"grey darken-3"}},[t._v("mdi-account-cog-outline")])],1),t._v(" "),e("v-list-item-content",[e("v-list-item-title",{attrs:{color:"grey darken-3"}},[t._v(t._s(n.title))])],1)],1)}),1),t._v(" "),e("div",{staticClass:"px-4"},[e("v-btn",{attrs:{block:"",elevation:"0",small:"",color:"error"},on:{click:t.handleLogout}},[e("v-icon",{attrs:{size:"16"}},[t._v("mdi-logout")]),t._v(" "),e("span",{staticClass:"ml-2"},[t._v("登出")])],1)],1)],1)]):t._e(),t._v(" "),e("v-app-bar",{staticClass:"jh-page-header px-8",attrs:{app:"","clipped-left":"",height:"52",flat:""}},[!t.hideDrawers&&t.isMobile?e("div",{staticClass:"hidden-md-and-up d-flex flex-column justify-center align-start",staticStyle:{width:"60px",cursor:"pointer"},on:{click:function(e){t.mobileMenuDrawer=!t.mobileMenuDrawer}}},[e("span",{staticClass:"success--text text-caption"},[e("v-icon",{staticClass:"success--text",attrs:{size:"24"}},[t._v("mdi-menu")]),t._v(" "),e("div",{staticClass:"text-xs",staticStyle:{"margin-top":"-2px"}},[t._v("目录")])],1)]):t._e(),t._v(" "),e("v-toolbar-title",{staticClass:"pl-0"},[e("span",{staticClass:"hidden-sm-and-down text-h6 font-weight-bold"},[t._t("title",function(){return[t._v(t._s(t.appTitle))]})],2),t._v(" "),e("span",{staticClass:"hidden-md-and-up font-weight-medium text-center"},[e("div",{staticClass:"text-base"},[t._v(t._s(t.appTitle))]),t._v(" "),e("div",{staticClass:"text-xs grey--text text--darken-2",staticStyle:{"margin-top":"-2px"}},[t._t("subtitle")],2)])]),t._v(" "),e("v-spacer",{staticClass:"hidden-sm-and-down"}),t._v(" "),t.hideDrawers?t._e():e("v-tabs",{staticClass:"hidden-sm-and-down",attrs:{"show-arrows":"","slider-size":"0",color:"success"}},[t._l(t.menuList,function(n,i){return[n.children&&0!==n.children.length?[e("v-menu",{key:i,attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(r){var a=r.on,o=r.attrs;return[e("v-tab",t._g(t._b({staticClass:"px-2 mx-1 jh-header-tab",class:{"jh-header-tab-active":t.currentMenuIndex===i}},"v-tab",o,!1),a),[t._v("\n                "+t._s(n.title)+"\n                "),e("v-icon",{attrs:{size:"12"}},[t._v("mdi-chevron-down")])],1)]}}],null,!0)},[t._v(" "),e("v-list",{attrs:{nav:"",dense:""}},[t._l(n.children,function(n,r){return[n.children&&n.children.length>0?[e("v-menu",{key:r,attrs:{"offset-x":"",right:""},scopedSlots:t._u([{key:"activator",fn:function(i){var r=i.on,a=i.attrs;return[e("v-list-item",t._g(t._b({},"v-list-item",a,!1),r),[e("v-list-item-content",[e("v-list-item-title",{staticStyle:{color:"#41434f"}},[t._v(t._s(n.title))])],1),t._v(" "),e("v-list-item-action",[e("v-icon",[t._v("mdi-chevron-right")])],1)],1)]}}],null,!0)},[t._v(" "),e("v-list",{attrs:{nav:"",dense:""}},t._l(n.children,function(n,r){return e("v-list-item",{key:r,class:{"second-active":t.currentSecondMenuId===n.id&&t.currentMenuIndex===i},on:{click:function(e){return t.handleMenuClick(n,i)}}},[e("v-list-item-content",[e("v-list-item-title",{staticStyle:{color:"#41434f"}},[t._v(t._s(n.title))])],1)],1)}),1)],1)]:e("v-list-item",{key:r,class:{"second-active":t.currentSecondMenuId===n.id&&t.currentMenuIndex===i},on:{click:function(e){return t.handleMenuClick(n,i)}}},[e("v-list-item-content",[e("v-list-item-title",{staticStyle:{color:"#41434f"}},[t._v(t._s(n.title))])],1)],1)]})],2)],1)]:[e("v-tab",{key:i,staticClass:"px-2 mx-1 jh-header-tab",class:{"jh-header-tab-active":t.currentMenuIndex===i},on:{click:function(e){return t.handleMenuClick(n,i)}}},[t._v("\n            "+t._s(n.title)+"\n          ")])]]})],2),t._v(" "),e("div",{staticClass:"d-flex align-center",staticStyle:{"white-space":"nowrap"}},[t.rightMenuList.length>0?e("div",{staticClass:"d-flex align-center mr-2"},t._l(t.rightMenuList,function(n,i){return e("div",{key:i,staticClass:"d-flex align-center ml-4 jh-right-menu",staticStyle:{cursor:"pointer"},on:{click:function(e){return t.handleMenuClick(n)}}},[n.icon?e("v-icon",{attrs:{size:"20"}},[t._v(t._s(n.icon))]):t._e(),t._v(" "),e("div",{class:{"ml-1":n.icon}},[t._v(t._s(n.title))])],1)}),0):t._e(),t._v(" "),t.rightMenuList.length>0?e("v-divider",{staticClass:"mx-3 jh-divider",attrs:{vertical:""}}):t._e(),t._v(" "),t.showAvatar?[t.isMobile?e("div",{staticClass:"jh-avatar-menu-btn d-flex flex-column justify-center align-end hidden-sm-and-up",on:{click:function(e){t.mobileUserMenuDrawer=!t.mobileUserMenuDrawer}}},[e("div",{staticClass:"text-center"},[e("v-icon",{attrs:{size:24,color:"success"}},[t._v("mdi-account-circle")]),t._v(" "),e("div",{staticStyle:{"margin-top":"-2px"}},[e("p",{staticClass:"text-xs success--text mb-0",staticStyle:{"max-width":"60px",overflow:"hidden","text-overflow":"ellipsis"}},[t._v("\n                "+t._s(t.userInfo.username)+"\n              ")])])],1)]):t._e(),t._v(" "),e("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(n){var i=n.on,r=n.attrs;return[t.isMobile?t._e():e("div",t._g(t._b({staticClass:"jh-avatar-menu-btn d-flex align-center px-1 hidden-xs-only"},"div",r,!1),i),[e("v-icon",{attrs:{size:32,color:"grey lighten-2"}},[t._v("mdi-account-circle")]),t._v(" "),e("div",{staticClass:"ml-1"},[e("p",{staticClass:"caption black--text mb-0"},[t._v(t._s(t.userInfo.username))])])],1)]}}],null,!1,2365689925)},[t._v(" "),e("v-list",{attrs:{nav:"",dense:""}},[e("v-list-item",[e("v-list-item-content",[e("p",{staticClass:"caption black--text mb-0"},[t._v(t._s(t.userInfo.username))]),t._v(" "),e("p",{staticClass:"caption grey--text mb-0",staticStyle:{"font-size":"10px"}},[t._v(t._s(t.userInfo.userId))])])],1),t._v(" "),t.userInfo.roles&&t.userInfo.roles.length>0?e("div",{staticStyle:{"max-width":"220px",padding:"0 16px"}},t._l(t.userInfo.roles,function(n,i){return e("v-chip",{key:i,staticClass:"mr-1 mb-1",staticStyle:{"font-size":"10px"},attrs:{label:"","x-small":"",outlined:""}},[t._v("\n                "+t._s(n)+"\n              ")])}),1):t._e(),t._v(" "),t.userInfo.roles&&t.userInfo.roles.length>0?e("v-divider",{staticClass:"my-1 jh-divider"}):t._e(),t._v(" "),t._l(t.avatarMenuList,function(n,i){return e("v-list-item",{key:i,on:{click:function(e){return t.handleMenuClick(n)}}},[e("v-list-item-icon",{staticClass:"mr-1 mt-1"},[e("v-icon",{attrs:{size:"16",color:"grey darken-3"}},[t._v("mdi-account-cog-outline")])],1),t._v(" "),e("v-list-item-content",[e("v-list-item-title",{attrs:{color:"grey darken-3"}},[t._v(t._s(n.title))])],1)],1)}),t._v(" "),e("v-list-item",{on:{click:t.handleLogout}},[e("v-list-item-icon",{staticClass:"mr-1 mt-1"},[e("v-icon",{attrs:{size:"16",color:"grey darken-3"}},[t._v("mdi-logout")])],1),t._v(" "),e("v-list-item-content",[e("v-list-item-title",{attrs:{color:"grey darken-3"}},[t._v("登出")])],1)],1)],2)],1)]:t._e()],2)],1)],1)};function i(t,e,n,i,r,a,o,l){var s,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0),i&&(c.functional=!0),a&&(c._scopeId="data-v-"+a),o?(s=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},c._ssrRegister=s):r&&(s=l?function(){r.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:r),s)if(c.functional){c._injectStyles=s;var u=c.render;c.render=function(t,e){return s.call(e),u(t,e)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,s):[s]}return{exports:t,options:c}}n._withStripped=!0;const r=i({name:"JhMenu",props:{appTitle:{type:String,default:"JianghuJS"},menuList:{type:Array,default:function(){return[]}},rightMenuList:{type:Array,default:function(){return[]}},avatarMenuList:{type:Array,default:function(){return[]}},userInfo:{type:Object,default:function(){return{username:"Guest",userId:"",roles:[]}}},showAvatar:{type:Boolean,default:!0},activeMenuIndex:{type:Number,default:-1},activeSecondMenuId:{type:String,default:null},temporary:{type:Boolean,default:!0},hideDrawers:{type:Boolean,default:!1}},data:function(){return{mobileMenuDrawer:!1,mobileUserMenuDrawer:!1,currentMenuIndex:this.activeMenuIndex,currentSecondMenuId:this.activeSecondMenuId,isMobile:window.innerWidth<600}},watch:{activeMenuIndex:function(t){this.currentMenuIndex=t},activeSecondMenuId:function(t){this.currentSecondMenuId=t}},methods:{handleMenuClick:function(t,e){void 0!==e&&(this.currentMenuIndex=e),t.id&&(this.currentSecondMenuId=t.id),this.mobileMenuDrawer=!1,this.mobileUserMenuDrawer=!1,this.$emit("menu-click",t,e)},handleLogout:function(){this.mobileUserMenuDrawer=!1,this.$emit("logout")}}},n,[],!1,null,"73ddcbb9",null).exports;var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"jh-scene"},[e("v-row",{staticClass:"ma-0"},[e("v-btn-toggle",{class:{"mr-md-2":t.showActionBtn},attrs:{value:t.currentSceneIndex,mandatory:"",dense:"",color:"success"},on:{change:t.handleSceneChange}},t._l(t.sceneList,function(n,i){return e("v-btn",{key:i,attrs:{small:""}},[t._v(t._s(n.name))])}),1),t._v(" "),t.showActionBtn?e("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(n){var i=n.on,r=n.attrs;return[e("v-btn-toggle",{attrs:{dense:"",color:"white"}},[e("v-btn",t._g(t._b({attrs:{small:""}},"v-btn",r,!1),i),[e("v-icon",{staticClass:"mx-0",attrs:{small:""}},[t._v("mdi-chevron-down")])],1)],1)]}}],null,!1,1121844081),model:{value:t.isSceneOperationShown,callback:function(e){t.isSceneOperationShown=e},expression:"isSceneOperationShown"}},[t._v(" "),e("v-list",{staticClass:"pb-0",attrs:{dense:""}},[e("v-list-item",{on:{click:t.openCreateSceneDialog}},[e("v-list-item-title",{staticClass:"success--text"},[e("v-icon",{staticClass:"success--text",attrs:{small:""}},[t._v("mdi-plus")]),t._v(" "),e("span",{staticClass:"success--text"},[t._v("新建场景")])],1)],1),t._v(" "),e("v-list-item",{on:{click:t.openSceneListDialog}},[e("v-list-item-title",{staticClass:"success--text"},[e("v-icon",{staticClass:"success--text",attrs:{small:""}},[t._v("mdi-cog-outline")]),t._v(" "),e("span",{staticClass:"success--text"},[t._v("场景管理")])],1)],1)],1)],1):t._e()],1),t._v(" "),e("v-dialog",{attrs:{persistent:"",width:"360px"},model:{value:t.isCreateSceneDialogShown,callback:function(e){t.isCreateSceneDialogShown=e},expression:"isCreateSceneDialogShown"}},[e("v-card",[e("v-card-title",[e("v-row",{staticClass:"ma-0"},[e("div",{staticStyle:{"font-size":"16px"}},[t._v("新建场景")]),t._v(" "),e("v-spacer"),t._v(" "),e("v-btn",{staticClass:"elevation-0",attrs:{fab:"","x-small":""},on:{click:t.closeCreateSceneDialog}},[e("v-icon",{attrs:{dark:""}},[t._v("mdi-close")])],1)],1)],1),t._v(" "),e("v-card-text",[e("div",{staticClass:"mb-2"},[e("span",{staticClass:"jh-input-label"},[t._v("场景名称")]),t._v(" "),e("v-text-field",{staticClass:"jh-v-input",attrs:{dense:"","single-line":"",filled:"","hide-details":"",placeholder:"场景名称，最多10个字符",rules:t.validationRules.requireRules},model:{value:t.createItem.name,callback:function(e){t.$set(t.createItem,"name",e)},expression:"createItem.name"}})],1),t._v(" "),t.hasFormSlot?e("div",{staticClass:"mb-2"},[e("span",{staticClass:"jh-input-label"},[t._v("筛选条件")]),t._v(" "),t._t("form",null,{form:t.createItem.form})],2):t._e()]),t._v(" "),e("v-card-actions",{staticClass:"pb-4"},[e("v-row",{staticClass:"ma-0 pa-6 pt-2 justify-end"},[e("v-btn",{staticClass:"ml-2",attrs:{small:"",color:"success"},on:{click:t.doCreateScene}},[t._v("保存")]),t._v(" "),e("v-btn",{staticClass:"ml-2",attrs:{small:""},on:{click:t.closeCreateSceneDialog}},[t._v("取消")])],1)],1)],1)],1),t._v(" "),e("v-dialog",{attrs:{persistent:"",width:"360px"},model:{value:t.isSceneListShown,callback:function(e){t.isSceneListShown=e},expression:"isSceneListShown"}},[e("v-card",{staticClass:"scene-manage"},[e("v-card-title",[e("v-row",{staticClass:"ma-0"},[e("div",{staticStyle:{"font-size":"16px"}},[t._v("场景管理")]),t._v(" "),e("v-spacer"),t._v(" "),e("v-btn",{staticClass:"elevation-0",attrs:{fab:"","x-small":""},on:{click:t.closeSceneListDialog}},[e("v-icon",{attrs:{dark:""}},[t._v("mdi-close")])],1)],1)],1),t._v(" "),e("v-card-text",{staticClass:"pb-2"},[e("v-card",{attrs:{outlined:""}},[e("v-list",{staticClass:"scene-list",attrs:{dense:""}},[t.sceneCustomList&&t.sceneCustomList.length?t._l(t.sceneCustomList,function(n){return e("v-list-item",{key:n.id,staticClass:"scene-item px-2"},[e("v-list-item-content",[t._v(t._s(n.name))]),t._v(" "),e("v-list-item-icon",{on:{click:function(e){return e.stopPropagation(),t.doDeleteScene(n)}}},[e("v-icon",{attrs:{size:"22"}},[t._v("mdi-delete")])],1)],1)}):[e("div",{staticClass:"text-center grey--text",staticStyle:{"line-height":"100px"}},[t._v("暂无自定义场景")])]],2)],1)],1),t._v(" "),e("v-card-actions",{staticClass:"pb-4"},[e("v-row",{staticClass:"ma-0 pa-6 pt-2 justify-end"},[e("v-btn",{staticClass:"ml-2",attrs:{small:"",color:"success"},on:{click:t.changeToCreateDialog}},[t._v("新建场景")]),t._v(" "),e("v-btn",{staticClass:"ml-2",attrs:{small:""},on:{click:t.closeSceneListDialog}},[t._v("取消")])],1)],1)],1)],1)],1)};function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach(function(e){c(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function c(t,e,n){return(e=function(t){var e=function(t){if("object"!=o(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==o(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u(t){return function(t){if(Array.isArray(t))return d(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return d(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}a._withStripped=!0;const f=i({name:"JhScene",props:{initFormData:{type:Object,default:function(){return{}}},storageKey:{type:String,default:"jh-scene-list"},scenes:{type:Array,default:function(){return[]}},currentSceneId:{type:String,default:null},showActionBtn:{type:Boolean,default:!0},useLocalStorage:{type:Boolean,default:!1}},data:function(){return{validationRules:{requireRules:[function(t){return!!t||"此项必填"}]},sceneList:[],sceneCustomList:[],deleteItem:{},createItem:{name:"",form:{}},isCreateSceneDialogShown:!1,isSceneOperationShown:!1,isSceneListShown:!1,currentSceneIndex:0}},computed:{hasFormSlot:function(){return!!this.$scopedSlots.form}},watch:{scenes:{handler:function(t){t&&t.length>0&&(this.sceneList=u(t),this.updateCustomSceneList())},immediate:!0}},created:function(){this.initSceneList()},methods:{initSceneList:function(){this.useLocalStorage?this.getSceneListFromStorage():this.scenes&&this.scenes.length>0&&(this.sceneList=u(this.scenes)),this.updateCustomSceneList(),this.useDefaultScene()},getSceneListFromStorage:function(){var t=localStorage.getItem(this.storageKey);null==t&&(t="[]"),t=JSON.parse(t),this.sceneList=t},saveSceneListToStorage:function(){this.useLocalStorage&&localStorage.setItem(this.storageKey,JSON.stringify(this.sceneList))},updateCustomSceneList:function(){this.sceneCustomList=this.sceneList.filter(function(t){return!t.system})},useDefaultScene:function(){var t=this.sceneList.find(function(t){return!0===t.default});!t&&this.sceneList.length>0&&(t=this.sceneList[0]),t&&(this.currentSceneIndex=this.sceneList.findIndex(function(e){return e.id===t.id}),this.useScene(t))},useScene:function(t){this.$emit("scene-change",t)},handleSceneChange:function(t){this.currentSceneIndex=t,this.sceneList[t]&&this.useScene(this.sceneList[t])},getUUID:function(t){for(var e=[],n="0123456789abcdef",i=0;i<10;i++)e[i]=n.substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]=n.substr(3&e[19]|8,1),t+"-"+e.join("")},prepareCreateSceneData:function(){this.createItem={name:"",form:s({},this.initFormData),id:this.getUUID("scene")}},openCreateSceneDialog:function(){this.prepareCreateSceneData(),this.isCreateSceneDialogShown=!0,this.isSceneOperationShown=!1},closeCreateSceneDialog:function(){this.isCreateSceneDialogShown=!1},validateSceneName:function(){var t=this.createItem.name;if(!t)throw new Error("场景名称不能为空");if(this.sceneList.some(function(e){return e.name===t}))throw new Error("场景名称重复")},doCreateScene:function(){try{this.validateSceneName();var t=s({},this.createItem);this.sceneList.push(t),this.saveSceneListToStorage(),this.updateCustomSceneList(),this.closeCreateSceneDialog(),this.currentSceneIndex=this.sceneList.length-1,this.useScene(t),this.$emit("scene-created",t)}catch(t){this.$emit("error",t.message)}},openSceneListDialog:function(){this.isSceneListShown=!0,this.isSceneOperationShown=!1},closeSceneListDialog:function(){this.isSceneListShown=!1},changeToCreateDialog:function(){this.closeSceneListDialog(),this.openCreateSceneDialog()},doDeleteScene:function(t){var e;this.deleteItem=s({},t),(null===(e=this.sceneList[this.currentSceneIndex])||void 0===e?void 0:e.id)===t.id&&this.useDefaultScene(),this.sceneList=this.sceneList.filter(function(e){return e.id!==t.id}),this.saveSceneListToStorage(),this.updateCustomSceneList(),this.$emit("scene-deleted",t)}}},a,[],!1,null,"50ab6d9d",null).exports;var p=function(){var t=this,e=t._self._c;return e("div",{staticClass:"date-range-picker-container"},[e("v-menu",{attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto","max-width":"600"},scopedSlots:t._u([{key:"activator",fn:function(n){var i=n.on,r=n.attrs;return[e("v-text-field",t._g(t._b({attrs:{prefix:t.prefix,"prepend-inner-icon":"mdi-calendar",readonly:"",filled:t.filled,dense:t.dense,outlined:t.outlined,"hide-details":t.hideDetails,clearable:t.clearable},on:{"click:clear":t.clearDateRange},model:{value:t.dateRangeText,callback:function(e){t.dateRangeText=e},expression:"dateRangeText"}},"v-text-field",r,!1),i))]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[t._v(" "),e("v-card",[e("v-card-text",{staticClass:"pa-0"},[e("div",{staticClass:"d-flex"},[e("v-list",{staticClass:"quick-select-list",attrs:{dense:"",nav:""}},[e("v-list-item",{class:{"v-item--active v-list-item--active primary--text":t.isLast7Days},on:{click:function(e){return t.quickSelect(7)}}},[e("v-list-item-title",[t._v("最近7天")])],1),t._v(" "),e("v-list-item",{class:{"v-item--active v-list-item--active primary--text":t.isLast30Days},on:{click:function(e){return t.quickSelect(30)}}},[e("v-list-item-title",[t._v("最近30天")])],1),t._v(" "),e("v-list-item",{class:{"v-item--active v-list-item--active primary--text":t.isLast90Days},on:{click:function(e){return t.quickSelect(90)}}},[e("v-list-item-title",[t._v("最近90天")])],1),t._v(" "),e("v-list-item",{class:{"v-item--active v-list-item--active primary--text":t.isThisMonth},on:{click:t.selectThisMonth}},[e("v-list-item-title",[t._v("本月")])],1),t._v(" "),e("v-list-item",{class:{"v-item--active v-list-item--active primary--text":t.isLastMonth},on:{click:t.selectLastMonth}},[e("v-list-item-title",[t._v("上月")])],1),t._v(" "),e("v-list-item",{class:{"v-item--active v-list-item--active primary--text":t.isLast365Days},on:{click:function(e){return t.quickSelect(365)}}},[e("v-list-item-title",[t._v("最近一年")])],1)],1),t._v(" "),e("v-date-picker",{attrs:{"no-title":"",range:"",color:"primary"},model:{value:t.tempDateRange,callback:function(e){t.tempDateRange=e},expression:"tempDateRange"}})],1)]),t._v(" "),e("v-divider"),t._v(" "),e("v-card-actions",[e("v-spacer"),t._v(" "),e("v-btn",{attrs:{text:"",color:"grey"},on:{click:t.cancelDateRange}},[t._v("取消")]),t._v(" "),e("v-btn",{attrs:{text:"",color:"primary"},on:{click:t.confirmDateRange}},[t._v("确认")])],1)],1)],1)],1)};function h(t){return function(t){if(Array.isArray(t))return m(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return m(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}p._withStripped=!0;const v=i({name:"JhDateRangePicker",props:{value:{type:Array,default:function(){return[]}},prefix:{type:String,default:""},filled:{type:Boolean,default:!0},dense:{type:Boolean,default:!0},outlined:{type:Boolean,default:!1},hideDetails:{type:Boolean,default:!0},clearable:{type:Boolean,default:!0}},data:function(){return{menu:!1,dateRange:[],tempDateRange:[]}},computed:{dateRangeText:function(){return this.dateRange&&2===this.dateRange.length?"".concat(this.formatDate(this.dateRange[0])," ~ ").concat(this.formatDate(this.dateRange[1])):""},isLast7Days:function(){if(!this.tempDateRange||2!==this.tempDateRange.length)return!1;var t=this.getToday(),e=this.subtractDays(7);return this.tempDateRange[0]===e&&this.tempDateRange[1]===t},isLast30Days:function(){if(!this.tempDateRange||2!==this.tempDateRange.length)return!1;var t=this.getToday(),e=this.subtractDays(30);return this.tempDateRange[0]===e&&this.tempDateRange[1]===t},isLast90Days:function(){if(!this.tempDateRange||2!==this.tempDateRange.length)return!1;var t=this.getToday(),e=this.subtractDays(90);return this.tempDateRange[0]===e&&this.tempDateRange[1]===t},isThisMonth:function(){if(!this.tempDateRange||2!==this.tempDateRange.length)return!1;var t=this.getToday(),e=this.getStartOfMonth();return this.tempDateRange[0]===e&&this.tempDateRange[1]===t},isLastMonth:function(){if(!this.tempDateRange||2!==this.tempDateRange.length)return!1;var t=this.getStartOfLastMonth(),e=this.getEndOfLastMonth();return this.tempDateRange[0]===t&&this.tempDateRange[1]===e},isLast365Days:function(){if(!this.tempDateRange||2!==this.tempDateRange.length)return!1;var t=this.getToday(),e=this.subtractDays(365);return this.tempDateRange[0]===e&&this.tempDateRange[1]===t}},watch:{value:{handler:function(t){t&&Array.isArray(t)&&2===t.length&&(this.dateRange=h(t),this.tempDateRange=h(t))},immediate:!0},menu:function(t){t&&(this.tempDateRange=2===this.dateRange.length?h(this.dateRange):[])}},mounted:function(){this.value&&Array.isArray(this.value)&&2===this.value.length&&(this.dateRange=h(this.value),this.tempDateRange=h(this.value))},methods:{formatDate:function(t){return t||""},getToday:function(){var t=new Date;return this.toDateString(t)},subtractDays:function(t){var e=new Date;return e.setDate(e.getDate()-t),this.toDateString(e)},getStartOfMonth:function(){var t=new Date;return this.toDateString(new Date(t.getFullYear(),t.getMonth(),1))},getStartOfLastMonth:function(){var t=new Date;return this.toDateString(new Date(t.getFullYear(),t.getMonth()-1,1))},getEndOfLastMonth:function(){var t=new Date;return this.toDateString(new Date(t.getFullYear(),t.getMonth(),0))},toDateString:function(t){var e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0");return"".concat(e,"-").concat(n,"-").concat(i)},confirmDateRange:function(){if(this.tempDateRange&&2===this.tempDateRange.length){var t=h(this.tempDateRange).sort();this.dateRange=t,this.$emit("input",this.dateRange),this.$emit("change",this.dateRange)}this.menu=!1},cancelDateRange:function(){this.tempDateRange=2===this.dateRange.length?h(this.dateRange):[],this.menu=!1},clearDateRange:function(){this.dateRange=[],this.tempDateRange=[],this.$emit("input",[]),this.$emit("change",[])},quickSelect:function(t){var e=this.getToday(),n=this.subtractDays(t);this.tempDateRange=[n,e]},selectThisMonth:function(){var t=this.getToday(),e=this.getStartOfMonth();this.tempDateRange=[e,t]},selectLastMonth:function(){var t=this.getStartOfLastMonth(),e=this.getEndOfLastMonth();this.tempDateRange=[t,e]}}},p,[],!1,null,"f2799a5a",null).exports;var y=function(){var t=this,e=t._self._c;return e("div",{staticClass:"jh-query-filter"},[e("v-form",{ref:"queryForm",on:{submit:function(e){return e.preventDefault(),t.handleSearch.apply(null,arguments)}}},[e("v-row",{class:t.rowClass},[t._l(t.visibleFields,function(n,i){return[e("v-col",{key:n.key,class:n.colClass,attrs:{cols:n.cols||t.colSpan.xs||12,sm:n.sm||t.colSpan.sm||12,md:n.md||t.colSpan.md||8,lg:n.lg||t.colSpan.lg||6}},[n.label&&t.showLabels?e("span",{class:t.labelClass},[t._v("\n            "+t._s(n.label)+"\n          ")]):t._e(),t._v(" "),"text"!==n.type&&n.type?"number"===n.type?e("v-text-field",t._b({class:t.inputClass,attrs:{type:"number",dense:t.getDense(n),"single-line":t.getSingleLine(n),filled:t.getFilled(n),outlined:t.getOutlined(n),disabled:n.disabled,placeholder:n.placeholder,"hide-details":!0,clearable:""},on:{input:function(e){return t.handleFieldChange(n.key,e)},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleSearch.apply(null,arguments)}},model:{value:t.formData[n.key],callback:function(e){t.$set(t.formData,n.key,e)},expression:"formData[field.key]"}},"v-text-field",n.props,!1)):"select"===n.type?e("v-select",t._b({class:t.inputClass,attrs:{dense:t.getDense(n),filled:t.getFilled(n),outlined:t.getOutlined(n),items:n.options||[],disabled:n.disabled,placeholder:n.placeholder,"item-text":n.itemText||"text","item-value":n.itemValue||"value",multiple:n.multiple,chips:n.chips,"hide-details":!0,clearable:""},on:{change:function(e){return t.handleFieldChange(n.key,e)}},model:{value:t.formData[n.key],callback:function(e){t.$set(t.formData,n.key,e)},expression:"formData[field.key]"}},"v-select",n.props,!1)):"autocomplete"===n.type?e("v-autocomplete",t._b({class:t.inputClass,attrs:{dense:t.getDense(n),filled:t.getFilled(n),outlined:t.getOutlined(n),items:n.options||[],disabled:n.disabled,placeholder:n.placeholder,"item-text":n.itemText||"text","item-value":n.itemValue||"value","hide-details":!0,clearable:""},on:{change:function(e){return t.handleFieldChange(n.key,e)}},model:{value:t.formData[n.key],callback:function(e){t.$set(t.formData,n.key,e)},expression:"formData[field.key]"}},"v-autocomplete",n.props,!1)):"date"===n.type?e("v-menu",{attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(i){var r=i.on,a=i.attrs;return[e("v-text-field",t._g(t._b({class:t.inputClass,attrs:{dense:t.getDense(n),filled:t.getFilled(n),outlined:t.getOutlined(n),disabled:n.disabled,placeholder:n.placeholder,"hide-details":!0,clearable:"",readonly:""},model:{value:t.formData[n.key],callback:function(e){t.$set(t.formData,n.key,e)},expression:"formData[field.key]"}},"v-text-field",a,!1),r))]}}],null,!0),model:{value:t.dateMenus[n.key],callback:function(e){t.$set(t.dateMenus,n.key,e)},expression:"dateMenus[field.key]"}},[t._v(" "),e("v-date-picker",t._b({attrs:{locale:n.locale||"zh-cn"},on:{input:function(e){t.dateMenus[n.key]=!1,t.handleFieldChange(n.key,t.formData[n.key])}},model:{value:t.formData[n.key],callback:function(e){t.$set(t.formData,n.key,e)},expression:"formData[field.key]"}},"v-date-picker",n.pickerProps,!1))],1):"daterange"===n.type?e("v-menu",{attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(i){var r=i.on,a=i.attrs;return[e("v-text-field",t._g(t._b({class:t.inputClass,attrs:{dense:t.getDense(n),filled:t.getFilled(n),outlined:t.getOutlined(n),value:t.formatDateRange(n.key),disabled:n.disabled,placeholder:n.placeholder,"hide-details":!0,clearable:"",readonly:""},on:{"click:clear":function(e){return t.clearDateRange(n.key)}}},"v-text-field",a,!1),r))]}}],null,!0),model:{value:t.dateMenus[n.key],callback:function(e){t.$set(t.dateMenus,n.key,e)},expression:"dateMenus[field.key]"}},[t._v(" "),e("v-date-picker",t._b({attrs:{range:"",locale:n.locale||"zh-cn"},on:{input:function(e){return t.handleFieldChange(n.key,t.formData[n.key])}},model:{value:t.formData[n.key],callback:function(e){t.$set(t.formData,n.key,e)},expression:"formData[field.key]"}},"v-date-picker",n.pickerProps,!1))],1):"slot"===n.type?t._t("field-".concat(n.key),null,{field:n,formData:t.formData,updateField:t.updateField}):t._e():e("v-text-field",t._b({class:t.inputClass,attrs:{dense:t.getDense(n),"single-line":t.getSingleLine(n),filled:t.getFilled(n),outlined:t.getOutlined(n),disabled:n.disabled,placeholder:n.placeholder,prefix:n.prefix,suffix:n.suffix,"hide-details":!0,clearable:""},on:{input:function(e){return t.handleFieldChange(n.key,e)},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleSearch.apply(null,arguments)}},model:{value:t.formData[n.key],callback:function(e){t.$set(t.formData,n.key,e)},expression:"formData[field.key]"}},"v-text-field",n.props,!1))],2)]}),t._v(" "),e("v-col",{staticClass:"d-flex align-end pb-2",class:t.buttonColumnClass,attrs:{cols:t.colSpan.xs||12,sm:t.colSpan.sm||12,md:t.colSpan.md||8,lg:t.colSpan.lg||6}},[t._t("buttons",function(){return[e("div",{staticClass:"jh-query-filter-buttons",class:t.buttonClass},[e("v-btn",{staticClass:"jh-query-filter-search-btn",attrs:{color:"primary",small:"small"===t.buttonSize,dense:"small"===t.buttonSize,depressed:"",loading:t.searching},on:{click:t.handleSearch}},[e("v-icon",{attrs:{left:"",small:""}},[t._v("mdi-magnify")]),t._v("\n              "+t._s(t.searchText)+"\n            ")],1),t._v(" "),e("v-btn",{staticClass:"jh-query-filter-reset-btn",attrs:{outlined:"",small:"small"===t.buttonSize,dense:"small"===t.buttonSize},on:{click:t.handleReset}},[e("v-icon",{attrs:{left:"",small:""}},[t._v("mdi-refresh")]),t._v("\n              "+t._s(t.resetText)+"\n            ")],1),t._v(" "),t.collapsible&&t.fields.length>t.defaultVisibleCount?e("v-btn",{staticClass:"jh-query-filter-collapse-btn",attrs:{text:"",small:"small"===t.buttonSize,dense:"small"===t.buttonSize,color:"primary"},on:{click:t.toggleCollapse}},[t._v("\n              "+t._s(t.collapsed?t.expandText:t.collapseText)+"\n              "),e("v-icon",{attrs:{right:"",small:""}},[t._v(t._s(t.collapsed?"mdi-chevron-down":"mdi-chevron-up"))])],1):t._e()],1)]},{formData:t.formData,search:t.handleSearch,reset:t.handleReset})],2)],2)],1)],1)};function g(t){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g(t)}function b(){var t,e,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",r=n.toStringTag||"@@toStringTag";function a(n,i,r,a){var s=i&&i.prototype instanceof l?i:l,c=Object.create(s.prototype);return _(c,"_invoke",function(n,i,r){var a,l,s,c=0,u=r||[],d=!1,f={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return a=e,l=0,s=t,f.n=n,o}};function p(n,i){for(l=n,s=i,e=0;!d&&c&&!r&&e<u.length;e++){var r,a=u[e],p=f.p,h=a[2];n>3?(r=h===i)&&(s=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=t):a[0]<=p&&((r=n<2&&p<a[1])?(l=0,f.v=i,f.n=a[1]):p<h&&(r=n<3||a[0]>i||i>h)&&(a[4]=n,a[5]=i,f.n=h,l=0))}if(r||n>1)return o;throw d=!0,i}return function(r,u,h){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&p(u,h),l=u,s=h;(e=l<2?t:s)||!d;){a||(l?l<3?(l>1&&(f.n=-1),p(l,s)):f.n=s:f.v=s);try{if(c=2,a){if(l||(r="next"),e=a[r]){if(!(e=e.call(a,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,l<2&&(l=0)}else 1===l&&(e=a.return)&&e.call(a),l<2&&(s=TypeError("The iterator does not provide a '"+r+"' method"),l=1);a=t}else if((e=(d=f.n<0)?s:n.call(i,f))!==o)break}catch(e){a=t,l=1,s=e}finally{c=1}}return{value:e,done:d}}}(n,r,a),!0),c}var o={};function l(){}function s(){}function c(){}e=Object.getPrototypeOf;var u=[][i]?e(e([][i]())):(_(e={},i,function(){return this}),e),d=c.prototype=l.prototype=Object.create(u);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,_(t,r,"GeneratorFunction")),t.prototype=Object.create(d),t}return s.prototype=c,_(d,"constructor",c),_(c,"constructor",s),s.displayName="GeneratorFunction",_(c,r,"GeneratorFunction"),_(d),_(d,r,"Generator"),_(d,i,function(){return this}),_(d,"toString",function(){return"[object Generator]"}),(b=function(){return{w:a,m:f}})()}function _(t,e,n,i){var r=Object.defineProperty;try{r({},"",{})}catch(t){r=0}_=function(t,e,n,i){function a(e,n){_(t,e,function(t){return this._invoke(e,n,t)})}e?r?r(t,e,{value:n,enumerable:!i,configurable:!i,writable:!i}):t[e]=n:(a("next",0),a("throw",1),a("return",2))},_(t,e,n,i)}function x(t,e,n,i,r,a,o){try{var l=t[a](o),s=l.value}catch(t){return void n(t)}l.done?e(s):Promise.resolve(s).then(i,r)}function w(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function S(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?w(Object(n),!0).forEach(function(e){k(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function k(t,e,n){return(e=function(t){var e=function(t){if("object"!=g(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==g(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}y._withStripped=!0;const C=i({name:"JhQueryFilter",props:{fields:{type:Array,default:function(){return[]}},initialValues:{type:Object,default:function(){return{}}},collapsible:{type:Boolean,default:!0},defaultCollapsed:{type:Boolean,default:!0},defaultVisibleCount:{type:Number,default:3},colSpan:{type:Object,default:function(){return{xs:24,sm:12,md:6,lg:4}}},showLabels:{type:Boolean,default:!0},dense:{type:Boolean,default:!0},filled:{type:Boolean,default:!0},outlined:{type:Boolean,default:!1},singleLine:{type:Boolean,default:!0},searchText:{type:String,default:"查询"},resetText:{type:String,default:"重置"},expandText:{type:String,default:"展开"},collapseText:{type:String,default:"收起"},buttonSize:{type:String,default:"small",validator:function(t){return["small","default","large"].includes(t)}},buttonAlign:{type:String,default:"left",validator:function(t){return["left","right","center"].includes(t)}},loading:{type:Boolean,default:!1},labelClass:{type:String,default:"jh-input-label"},inputClass:{type:String,default:"jh-v-input"},rowClass:{type:String,default:"ma-0"},buttonClass:{type:String,default:"gap-2"},buttonColumnClass:{type:String,default:""}},data:function(){return{formData:{},collapsed:this.defaultCollapsed,dateMenus:{},searching:!1}},computed:{visibleFields:function(){return this.collapsible&&this.collapsed?this.fields.slice(0,this.defaultVisibleCount):this.fields}},watch:{initialValues:{handler:function(t){this.formData=S({},t)},immediate:!0,deep:!0},loading:function(t){this.searching=t}},mounted:function(){this.initFormData()},methods:{initFormData:function(){var t=S({},this.initialValues);this.fields.forEach(function(e){void 0!==e.defaultValue&&void 0===t[e.key]&&(t[e.key]=e.defaultValue)}),this.formData=t},getDense:function(t){return void 0!==t.dense?t.dense:this.dense},getFilled:function(t){return void 0!==t.filled?t.filled:this.filled},getOutlined:function(t){return void 0!==t.outlined?t.outlined:this.outlined},getSingleLine:function(t){return void 0!==t.singleLine?t.singleLine:this.singleLine},formatDateRange:function(t){var e=this.formData[t];return Array.isArray(e)&&2===e.length?"".concat(e[0]," ~ ").concat(e[1]):""},clearDateRange:function(t){this.$set(this.formData,t,[]),this.handleFieldChange(t,[])},handleFieldChange:function(t,e){var n;this.$emit("field-change",{key:t,value:e,formData:this.formData}),null!==(n=this.fields.find(function(e){return e.key===t}))&&void 0!==n&&n.realtime&&this.handleSearch()},updateField:function(t,e){this.$set(this.formData,t,e),this.handleFieldChange(t,e)},toggleCollapse:function(){this.collapsed=!this.collapsed,this.$emit("collapse-change",this.collapsed)},handleSearch:function(){var t,e=this;return(t=b().m(function t(){var n;return b().w(function(t){for(;;)switch(t.n){case 0:e.searching=!0;try{n={},Object.keys(e.formData).forEach(function(t){var i=e.formData[t];if(null!=i&&""!==i){if(Array.isArray(i)&&0===i.length)return;n[t]=i}}),e.$emit("search",n)}finally{e.loading||(e.searching=!1)}case 1:return t.a(2)}},t)}),function(){var e=this,n=arguments;return new Promise(function(i,r){var a=t.apply(e,n);function o(t){x(a,i,r,o,l,"next",t)}function l(t){x(a,i,r,o,l,"throw",t)}o(void 0)})})()},handleReset:function(){var t=this;this.initFormData(),this.fields.forEach(function(e){t.$set(t.formData,e.key,void 0!==e.defaultValue?e.defaultValue:"")}),this.$emit("reset"),this.handleSearch()},getFormData:function(){return S({},this.formData)},setFieldsValue:function(t){this.formData=S(S({},this.formData),t)},setFieldValue:function(t,e){this.$set(this.formData,t,e)}}},y,[],!1,null,"1371a82a",null).exports;var D=function(){var t=this,e=t._self._c;return e("div",{staticClass:"jh-pro-table rounded-lg elevation-0"},[t.showFilter&&t.filterFields&&t.filterFields.length>0?e("jh-query-filter",{ref:"queryFilterRef",staticClass:"px-md-0",attrs:{fields:t.filterFields,"initial-values":t.filterInitialValues,collapsible:t.filterCollapsible,"default-collapsed":t.filterDefaultCollapsed,"default-visible-count":t.filterDefaultVisibleCount,"col-span":t.filterColSpan,dense:!0,outlined:!0,"show-labels":!0,"search-text":t.filterSearchText,"reset-text":t.filterResetText},on:{search:t.handleFilterSearch,reset:t.handleFilterReset},scopedSlots:t._u([t._l(t.filterFields,function(e){return{key:"field-".concat(e.key),fn:function(n){return[t._t("filter-field-".concat(e.key),null,null,n)]}}}),{key:"buttons",fn:function(e){return[t._t("filter-buttons",null,null,e)]}}],null,!0)}):t._e(),t._v(" "),!1!==t.toolbar?e("v-row",{staticClass:"ma-0 pb-3 pa-3 pa-md-0",attrs:{align:"center"}},[e("div",{staticClass:"flex items-center gap-2"},[t._t("toolbar-actions",function(){return[t.showCreateButton?e("v-btn",{staticClass:"mr-2",attrs:{color:"success",small:""},on:{click:function(e){return e.stopPropagation(),t.$emit("create-click")}}},[e("v-icon",{attrs:{left:"",small:""}},[t._v("mdi-plus")]),t._v(" "),e("span",{staticClass:"d-none d-sm-inline"},[t._v("新增")])],1):t._e()]})],2),t._v(" "),e("v-spacer"),t._v(" "),e("div",{staticClass:"flex items-center gap-2 justify-end flex-wrap"},[t.toolbarConfig.search?e("v-text-field",{staticClass:"jh-v-input jh-toolbar-search",attrs:{prefix:t.isMobile?"":"筛选",placeholder:t.isMobile?"筛选":"",dense:"",filled:"","single-line":"","hide-details":"",clearable:""},model:{value:t.searchInputInternal,callback:function(e){t.searchInputInternal=e},expression:"searchInputInternal"}}):t._e(),t._v(" "),t.toolbarConfig.refresh?e("v-btn",{attrs:{icon:"",small:"",title:"刷新"},on:{click:t.handleRefresh}},[e("v-icon",[t._v("mdi-refresh")])],1):t._e(),t._v(" "),t.toolbarConfig.density?e("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(n){var i=n.on,r=n.attrs;return[e("v-btn",t._g(t._b({attrs:{icon:"",small:"",title:"密度"}},"v-btn",r,!1),i),[e("v-icon",[t._v("mdi-format-line-spacing")])],1)]}}],null,!1,1668111094)},[t._v(" "),e("v-list",{attrs:{dense:""}},[e("v-list-item",{on:{click:function(e){t.currentDensity="default"}}},[e("v-list-item-title",["default"===t.currentDensity?e("v-icon",{attrs:{small:"",left:""}},[t._v("mdi-check")]):t._e(),t._v("\n              默认\n            ")],1)],1),t._v(" "),e("v-list-item",{on:{click:function(e){t.currentDensity="medium"}}},[e("v-list-item-title",["medium"===t.currentDensity?e("v-icon",{attrs:{small:"",left:""}},[t._v("mdi-check")]):t._e(),t._v("\n              中等\n            ")],1)],1),t._v(" "),e("v-list-item",{on:{click:function(e){t.currentDensity="compact"}}},[e("v-list-item-title",["compact"===t.currentDensity?e("v-icon",{attrs:{small:"",left:""}},[t._v("mdi-check")]):t._e(),t._v("\n              紧凑\n            ")],1)],1)],1)],1):t._e(),t._v(" "),t.toolbarConfig.setting?e("v-menu",{attrs:{"offset-y":"",left:"","max-height":"400"},scopedSlots:t._u([{key:"activator",fn:function(n){var i=n.on,r=n.attrs;return[e("v-btn",t._g(t._b({attrs:{icon:"",small:"",title:"列设置"}},"v-btn",r,!1),i),[e("v-icon",[t._v("mdi-cog-outline")])],1)]}}],null,!1,911125755)},[t._v(" "),e("v-card",{attrs:{"min-width":"200"}},[e("v-card-text",{staticClass:"pa-2"},[e("div",{staticClass:"text-caption font-weight-bold mb-2"},[t._v("列显示")]),t._v(" "),e("v-list",{attrs:{dense:""}},t._l(t.internalColumns,function(n){return e("v-list-item",{key:n.value,staticClass:"px-2",on:{click:function(e){return t.toggleColumn(n)}}},[e("v-list-item-action",{staticClass:"mr-2"},[e("v-checkbox",{attrs:{"input-value":!1!==n.visible,"hide-details":"",dense:""},on:{click:function(e){return e.stopPropagation(),t.toggleColumn(n)}}})],1),t._v(" "),e("v-list-item-content",[e("v-list-item-title",{staticClass:"text-body-2"},[t._v(t._s(n.text||n.title))])],1)],1)}),1),t._v(" "),e("v-divider",{staticClass:"my-2"}),t._v(" "),e("v-btn",{attrs:{text:"",small:"",block:""},on:{click:t.resetColumns}},[t._v("重置")])],1)],1)],1):t._e(),t._v(" "),t.toolbarConfig.fullscreen?e("v-btn",{attrs:{icon:"",small:"",title:t.isFullscreen?"退出全屏":"全屏"},on:{click:t.toggleFullscreen}},[e("v-icon",[t._v(t._s(t.isFullscreen?"mdi-fullscreen-exit":"mdi-fullscreen"))])],1):t._e(),t._v(" "),t._t("toolbar-extra")],2)],1):t._e(),t._v(" "),e("v-data-table",{ref:"dataTable",staticClass:"jh-fixed-table-height elevation-0 mb-xs-4 mx-3 mx-md-0 mt-3",class:[t.tableClassComputed,t.densityClass],attrs:{headers:t.visibleHeaders,items:t.currentItems,search:t.searchInputInternal,"footer-props":t.currentFooterProps,"items-per-page":t.currentItemsPerPage,page:t.currentPage,"server-items-length":t.serverItemsLength,"mobile-breakpoint":t.mobileBreakpoint,loading:t.currentLoading,"checkbox-color":t.checkboxColor,"fixed-header":t.fixedHeader,"show-select":t.showSelect,"single-select":t.singleSelect,value:t.selectedItems},on:{"update:page":[function(e){t.currentPage=e},t.handlePageChange],"click:row":t.handleRowClick,input:t.handleSelectionChange,"update:items-per-page":t.handleItemsPerPageChange},scopedSlots:t._u([t._l(t.customHeaderSlots,function(e){return{key:"header.".concat(e.value),fn:function(n){var i=n.header;return[t._t("header.".concat(e.value),function(){return[t._v(t._s(i.text||i.title))]},{header:i})]}}}),t._l(t.visibleHeaders,function(n){return{key:"item.".concat(n.value),fn:function(i){var r=i.item,a=i.value;return["action"===n.value?[t._t("item.action",function(){return[t.isMobile?t._e():e("div",{staticClass:"flex items-center gap-1"},[t.actionColumn&&t.actionColumn.buttons?[t._l(t.getVisibleButtons(r),function(n,i){return[n.tooltip?e("v-tooltip",{key:i,attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(i){var a=i.on,o=i.attrs;return[e("v-btn",t._g(t._b({attrs:{"x-small":"",text:"link"===n.type,icon:"icon"===n.type,color:n.color||"primary"},on:{click:function(e){return e.stopPropagation(),t.handleActionClick(n,r)}}},"v-btn",o,!1),a),[n.icon?e("v-icon",{attrs:{small:""}},[t._v(t._s(n.icon))]):t._e(),t._v(" "),"icon"!==n.type?e("span",[t._v(t._s(n.text))]):t._e()],1)]}}],null,!0)},[t._v(" "),e("span",[t._v(t._s(n.tooltip))])]):e("v-btn",{key:i,attrs:{"x-small":"",text:"link"===n.type,icon:"icon"===n.type,color:n.color||"primary"},on:{click:function(e){return e.stopPropagation(),t.handleActionClick(n,r)}}},[n.icon?e("v-icon",{attrs:{small:""}},[t._v(t._s(n.icon))]):t._e(),t._v(" "),"icon"!==n.type?e("span",[t._v(t._s(n.text))]):t._e()],1)]})]:[t.showUpdateAction?e("span",{staticClass:"success--text font-weight-medium font-size-2 mr-2 cursor-pointer",attrs:{role:"button"},on:{click:function(e){return e.stopPropagation(),t.$emit("update-click",r)}}},[e("v-icon",{staticClass:"success--text",attrs:{size:"16"}},[t._v("mdi-note-edit-outline")]),t._v("详情\n              ")],1):t._e(),t._v(" "),t.showDeleteAction?e("span",{staticClass:"error--text font-weight-medium font-size-2 mr-2 cursor-pointer",attrs:{role:"button"},on:{click:function(e){return e.stopPropagation(),t.$emit("delete-click",r)}}},[e("v-icon",{staticClass:"error--text",attrs:{size:"16"}},[t._v("mdi-trash-can-outline")]),t._v("删除\n              ")],1):t._e()]],2),t._v(" "),t.isMobile?e("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(n){var i=n.on,r=n.attrs;return[e("span",t._g(t._b({staticClass:"success--text font-weight-medium font-size-2",attrs:{role:"button"}},"span",r,!1),i),[e("v-icon",{staticClass:"success--text",attrs:{size:"20"}},[t._v("mdi-chevron-down")]),t._v("操作\n              ")],1)]}}],null,!0)},[t._v(" "),e("v-list",{attrs:{dense:""}},[t.actionColumn&&t.actionColumn.buttons?t._l(t.getVisibleButtons(r),function(n,i){return e("v-list-item",{key:i,on:{click:function(e){return e.stopPropagation(),t.handleActionClick(n,r)}}},[n.icon?e("v-list-item-icon",[e("v-icon",{attrs:{small:""}},[t._v(t._s(n.icon))])],1):t._e(),t._v(" "),e("v-list-item-title",[t._v(t._s(n.text))])],1)}):[t.showUpdateAction?e("v-list-item",{on:{click:function(e){return e.stopPropagation(),t.$emit("update-click",r)}}},[e("v-list-item-title",[t._v("详情")])],1):t._e(),t._v(" "),t.showDeleteAction?e("v-list-item",{on:{click:function(e){return e.stopPropagation(),t.$emit("delete-click",r)}}},[e("v-list-item-title",[t._v("删除")])],1):t._e()]],2)],1):t._e()]},{item:r})]:[n.slot||t.$scopedSlots["item.".concat(n.value)]?t._t("item.".concat(n.value),null,{item:r,value:a}):e("div",{staticClass:"d-flex align-center"},[n.ellipsis&&a&&a.length>20?e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(n){var i=n.on,r=n.attrs;return[e("span",t._g(t._b({staticClass:"text-truncate d-inline-block",staticStyle:{"max-width":"200px"}},"span",r,!1),i),[t._v("\n                "+t._s(a)+"\n              ")])]}}],null,!0)},[t._v(" "),e("span",[t._v(t._s(a))])]):e("span",[t._v(t._s(a))]),t._v(" "),n.copyable&&a?e("v-btn",{staticClass:"ml-1",attrs:{icon:"","x-small":""},on:{click:function(e){return e.stopPropagation(),t.copyToClipboard(a)}}},[e("v-icon",{attrs:{"x-small":""}},[t._v("mdi-content-copy")])],1):t._e()],1)]]}}}),{key:"loading",fn:function(){return[e("div",{staticClass:"jh-no-data pa-6"},[e("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}}),t._v(" "),e("div",{staticClass:"mt-2"},[t._v("数据加载中...")])],1)]},proxy:!0},{key:"no-data",fn:function(){return[e("div",{staticClass:"jh-no-data pa-6"},[e("v-icon",{attrs:{large:"",color:"grey lighten-1"}},[t._v("mdi-inbox-outline")]),t._v(" "),e("div",{staticClass:"mt-2 text-body-2 grey--text"},[t._v("暂无数据")])],1)]},proxy:!0},{key:"no-results",fn:function(){return[e("div",{staticClass:"jh-no-data pa-6"},[e("v-icon",{attrs:{large:"",color:"grey lighten-1"}},[t._v("mdi-magnify")]),t._v(" "),e("div",{staticClass:"mt-2 text-body-2 grey--text"},[t._v("未找到匹配的数据")])],1)]},proxy:!0},{key:"footer.page-text",fn:function(n){return[e("span",[t._v(t._s(n.pageStart)+"-"+t._s(n.pageStop))]),t._v(" "),e("span",{staticClass:"ml-1"},[t._v("共"+t._s(n.itemsLength)+"条")])]}}],null,!0)})],1)};function j(){var t,e,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",r=n.toStringTag||"@@toStringTag";function a(n,i,r,a){var s=i&&i.prototype instanceof l?i:l,c=Object.create(s.prototype);return O(c,"_invoke",function(n,i,r){var a,l,s,c=0,u=r||[],d=!1,f={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return a=e,l=0,s=t,f.n=n,o}};function p(n,i){for(l=n,s=i,e=0;!d&&c&&!r&&e<u.length;e++){var r,a=u[e],p=f.p,h=a[2];n>3?(r=h===i)&&(s=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=t):a[0]<=p&&((r=n<2&&p<a[1])?(l=0,f.v=i,f.n=a[1]):p<h&&(r=n<3||a[0]>i||i>h)&&(a[4]=n,a[5]=i,f.n=h,l=0))}if(r||n>1)return o;throw d=!0,i}return function(r,u,h){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&p(u,h),l=u,s=h;(e=l<2?t:s)||!d;){a||(l?l<3?(l>1&&(f.n=-1),p(l,s)):f.n=s:f.v=s);try{if(c=2,a){if(l||(r="next"),e=a[r]){if(!(e=e.call(a,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,l<2&&(l=0)}else 1===l&&(e=a.return)&&e.call(a),l<2&&(s=TypeError("The iterator does not provide a '"+r+"' method"),l=1);a=t}else if((e=(d=f.n<0)?s:n.call(i,f))!==o)break}catch(e){a=t,l=1,s=e}finally{c=1}}return{value:e,done:d}}}(n,r,a),!0),c}var o={};function l(){}function s(){}function c(){}e=Object.getPrototypeOf;var u=[][i]?e(e([][i]())):(O(e={},i,function(){return this}),e),d=c.prototype=l.prototype=Object.create(u);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,O(t,r,"GeneratorFunction")),t.prototype=Object.create(d),t}return s.prototype=c,O(d,"constructor",c),O(c,"constructor",s),s.displayName="GeneratorFunction",O(c,r,"GeneratorFunction"),O(d),O(d,r,"Generator"),O(d,i,function(){return this}),O(d,"toString",function(){return"[object Generator]"}),(j=function(){return{w:a,m:f}})()}function O(t,e,n,i){var r=Object.defineProperty;try{r({},"",{})}catch(t){r=0}O=function(t,e,n,i){function a(e,n){O(t,e,function(t){return this._invoke(e,n,t)})}e?r?r(t,e,{value:n,enumerable:!i,configurable:!i,writable:!i}):t[e]=n:(a("next",0),a("throw",1),a("return",2))},O(t,e,n,i)}function I(t,e,n,i,r,a,o){try{var l=t[a](o),s=l.value}catch(t){return void n(t)}l.done?e(s):Promise.resolve(s).then(i,r)}function F(t){return function(){var e=this,n=arguments;return new Promise(function(i,r){var a=t.apply(e,n);function o(t){I(a,i,r,o,l,"next",t)}function l(t){I(a,i,r,o,l,"throw",t)}o(void 0)})}}function P(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function T(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?P(Object(n),!0).forEach(function(e){$(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function $(t,e,n){return(e=function(t){var e=function(t){if("object"!=M(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=M(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==M(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function M(t){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},M(t)}D._withStripped=!0;const L=i({name:"JhTable",components:{JhQueryFilter:C},props:{headers:{type:Array,required:!0,default:function(){return[]}},items:{type:Array,default:function(){return[]}},request:{type:Function,default:null},showFilter:{type:Boolean,default:!1},filterFields:{type:Array,default:function(){return[]}},filterInitialValues:{type:Object,default:function(){return{}}},filterCollapsible:{type:Boolean,default:!0},filterDefaultCollapsed:{type:Boolean,default:!0},filterDefaultVisibleCount:{type:Number,default:3},filterColSpan:{type:Object,default:function(){return{xs:24,sm:12,md:6,lg:4}}},filterSearchText:{type:String,default:"查询"},filterResetText:{type:String,default:"重置"},toolbar:{type:[Object,Boolean],default:function(){return{search:!0,refresh:!0,setting:!0,density:!0,fullscreen:!1}}},showSearch:{type:Boolean,default:!0},searchInput:{type:String,default:null},showCreateButton:{type:Boolean,default:!0},showUpdateAction:{type:Boolean,default:!0},showDeleteAction:{type:Boolean,default:!0},actionColumn:{type:[Object,Boolean],default:null},pagination:{type:[Object,Boolean],default:function(){return{current:1,pageSize:20,pageSizeOptions:[10,20,50,100],showTotal:!0}}},itemsPerPage:{type:Number,default:20},rowSelection:{type:[Object,Boolean],default:null},showSelect:{type:Boolean,default:!1},singleSelect:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},rowKey:{type:String,default:"id"},size:{type:String,default:"default",validator:function(t){return["default","medium","compact"].includes(t)}},footerProps:{type:Object,default:function(){return{itemsPerPageOptions:[10,20,50,100],itemsPerPageText:"每页",itemsPerPageAllText:"所有",showFirstLastPage:!0,showCurrentPage:!0}}},mobileBreakpoint:{type:Number,default:600},checkboxColor:{type:String,default:"success"},tableClass:{type:[String,Object,Array],default:function(){return{zebraLine:!0}}},fixedHeader:{type:Boolean,default:!0},dense:{type:Boolean,default:!1}},data:function(){return{isMobile:window.innerWidth<500,searchInputInternal:this.searchInput,currentLoading:this.loading,currentItems:this.items||[],currentPage:this.pagination&&this.pagination.current||1,currentItemsPerPage:this.itemsPerPage,serverItemsLength:-1,internalColumns:[],currentDensity:this.size,isFullscreen:!1,selectedItems:[],filterValues:{}}},computed:{toolbarConfig:function(){return!1===this.toolbar?{}:"object"===M(this.toolbar)?T({search:this.showSearch,refresh:!0,setting:!0,density:!0,fullscreen:!1},this.toolbar):{search:this.showSearch,refresh:!0,setting:!0,density:!0,fullscreen:!1}},visibleHeaders:function(){return this.internalColumns.filter(function(t){return!1!==t.visible})},customHeaderSlots:function(){var t=this;return this.internalColumns.filter(function(e){return t.$scopedSlots["header.".concat(e.value)]})},tableClassComputed:function(){return[this.tableClass,{"jh-table-fullscreen":this.isFullscreen}]},densityClass:function(){return{"jh-table-default":"default"===this.currentDensity,"jh-table-medium":"medium"===this.currentDensity,"jh-table-compact":"compact"===this.currentDensity}},currentFooterProps:function(){return T(T({},{itemsPerPageOptions:[10,20,50,100],itemsPerPageText:"每页",itemsPerPageAllText:"所有",showFirstLastPage:!0,showCurrentPage:!0}),this.footerProps)}},watch:{headers:{immediate:!0,handler:function(t){this.initColumns(t)}},items:function(t){this.request||(this.currentItems=t||[])},loading:function(t){this.currentLoading=t},searchInput:function(t){this.searchInputInternal=t},searchInputInternal:function(t){this.$emit("update:searchInput",t),this.request&&this.reload()},size:function(t){this.currentDensity=t}},mounted:function(){window.addEventListener("resize",this.handleResize),this.request&&this.reload()},beforeDestroy:function(){window.removeEventListener("resize",this.handleResize)},methods:{initColumns:function(t){this.internalColumns=t.map(function(t){return T(T({},t),{},{visible:!1!==t.visible,text:t.text||t.title,value:t.value||t.dataIndex||t.key})})},toggleColumn:function(t){t.visible=!t.visible,this.$forceUpdate()},resetColumns:function(){this.internalColumns.forEach(function(t){t.visible=!0}),this.$forceUpdate()},handleRefresh:function(){var t=this;return F(j().m(function e(){return j().w(function(e){for(;;)switch(e.n){case 0:if(t.$emit("refresh"),!t.request){e.n=1;break}return e.n=1,t.reload();case 1:return e.a(2)}},e)}))()},toggleFullscreen:function(){var t,e,n,i;this.isFullscreen=!this.isFullscreen,this.isFullscreen?null===(t=(e=this.$el).requestFullscreen)||void 0===t||t.call(e):null===(n=(i=document).exitFullscreen)||void 0===n||n.call(i)},getVisibleButtons:function(t){return this.actionColumn&&this.actionColumn.buttons?this.actionColumn.buttons.filter(function(e){return"function"==typeof e.visible?e.visible(t):!1!==e.visible}):[]},handleActionClick:function(t,e){return F(j().m(function n(){return j().w(function(n){for(;;)switch(n.n){case 0:if(!t.confirm){n.n=1;break}if(confirm(t.confirm)){n.n=1;break}return n.a(2);case 1:if(!t.onClick){n.n=2;break}return n.n=2,t.onClick(e);case 2:return n.a(2)}},n)}))()},copyToClipboard:function(t){var e=this;if(navigator.clipboard)navigator.clipboard.writeText(t).then(function(){e.$emit("copy-success",t),console.log("已复制:",t)});else{var n=document.createElement("textarea");n.value=t,document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n),this.$emit("copy-success",t),console.log("已复制:",t)}},handleRowClick:function(t,e){this.$emit("row-click",t,e)},handleSelectionChange:function(t){var e=this;this.selectedItems=t,this.$emit("selection-change",{selectedRowKeys:t.map(function(t){return t[e.rowKey]}),selectedRows:t})},handlePageChange:function(t){this.currentPage=t,this.request&&this.reload()},handleItemsPerPageChange:function(t){this.currentItemsPerPage=t,this.currentPage=1,this.request&&this.reload()},handleFilterSearch:function(t){this.filterValues=t,this.currentPage=1,this.$emit("filter-search",t),this.request&&this.reload()},handleFilterReset:function(){this.filterValues={},this.currentPage=1,this.$emit("filter-reset"),this.request&&this.reload()},reload:function(){var t=this;return F(j().m(function e(){var n,i,r;return j().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t.request){e.n=1;break}return e.a(2);case 1:return t.currentLoading=!0,e.p=2,n={page:t.currentPage,pageSize:t.currentItemsPerPage,search:t.searchInputInternal,sorter:{},filters:t.filterValues},e.n=3,t.request(n);case 3:(i=e.v)&&!1!==i.success&&(t.currentItems=i.data||i.list||[],t.serverItemsLength=i.total||i.totalCount||t.currentItems.length),e.n=5;break;case 4:e.p=4,r=e.v,console.error("Failed to load data:",r),t.$emit("request-error",r);case 5:return e.p=5,t.currentLoading=!1,e.f(5);case 6:return e.a(2)}},e,null,[[2,4,5,6]])}))()},reset:function(){this.currentPage=1,this.reload()},clearSelection:function(){var t,e;this.selectedItems=[],null===(t=this.$refs.dataTable)||void 0===t||null===(e=t.clearSelection)||void 0===e||e.call(t)},getSelectedRows:function(){return this.selectedItems},handleResize:function(){this.isMobile=window.innerWidth<500}}},D,[],!1,null,"e091fec8",null).exports;var B=function(){var t=this,e=t._self._c;return e("div",[e("v-app",{attrs:{"mobile-breakpoint":"sm"}},[t._t("menu"),t._v(" "),e("v-main",{staticClass:"mt-15"},[e("div",{staticClass:"jh-page-second-bar px-3 px-sm-8"},[e("v-row",{staticClass:"align-center",attrs:{"no-gutters":""}},[e("v-col",{attrs:{cols:"12",sm:"12",md:"4",xl:"3"}},[e("div",{staticClass:"py-4 text-body-1 font-weight-bold align-center d-flex align-center"},[t._v("\n            "+t._s(t.pageName)+"\n            "),t._v(" "),t.showHelpButton?e("v-icon",{staticClass:"black--text ml-1",attrs:{size:"15"},on:{click:function(e){return t.$emit("help-click")}}},[t._v("\n              mdi-help-circle\n            ")]):t._e()],1)]),t._v(" "),e("v-spacer"),t._v(" "),e("v-col",{staticClass:"pl-md-2 mb-2 mb-md-0 flex justify-end",attrs:{cols:"12",xs:"12",sm:"12",md:"8",xl:"9"}},[t._t("search-bar")],2)],1)],1),t._v(" "),e("div",{staticClass:"jh-page-body-container px-sm-8"},[e("v-row",{staticClass:"pa-0 ma-0"},[e("v-col",{staticClass:"pa-0",attrs:{cols:12}},[t._t("content")],2)],1)],1),t._v(" "),t._t("default")],2)],2),t._v(" "),e("jh-toast"),t._v(" "),e("jh-mask"),t._v(" "),e("jh-confirm-dialog")],1)};B._withStripped=!0;const A=i({name:"JhPageContainer",props:{pageName:{type:String,required:!0,default:"页面标题"},showHelpButton:{type:Boolean,default:!0}}},B,[],!1,null,null,null).exports;var R=function(){var t=this,e=t._self._c;return e("v-overlay",{attrs:{value:t.value,opacity:t.opacity,color:t.color,"z-index":t.zIndex},on:{click:t.handleClick}},[t._t("default",function(){return[t.showLoading?e("v-progress-circular",{attrs:{size:t.loadingSize,width:t.loadingWidth,color:t.loadingColor,indeterminate:""}}):t._e()]})],2)};R._withStripped=!0;const E=i({name:"JhMask",props:{value:{type:Boolean,default:!1},color:{type:String,default:"#e3e3e3"},opacity:{type:[Number,String],default:.8,validator:function(t){var e=parseFloat(t);return e>=0&&e<=1}},zIndex:{type:[Number,String],default:300},showLoading:{type:Boolean,default:!1},loadingSize:{type:[Number,String],default:64},loadingWidth:{type:[Number,String],default:7},loadingColor:{type:String,default:"primary"},closeOnClick:{type:Boolean,default:!1},timeout:{type:Number,default:0}},data:function(){return{timer:null}},watch:{value:function(t){t&&this.timeout>0?this.startTimer():t||this.clearTimer()}},beforeDestroy:function(){this.clearTimer()},methods:{handleClick:function(){this.closeOnClick&&(this.$emit("input",!1),this.$emit("click"))},startTimer:function(){var t=this;this.clearTimer(),this.timer=setTimeout(function(){t.$emit("input",!1),t.$emit("timeout")},this.timeout)},clearTimer:function(){this.timer&&(clearTimeout(this.timer),this.timer=null)}}},R,[],!1,null,"79554ce9",null).exports;var V=function(){var t=this,e=t._self._c;return e("v-snackbar",{class:["jh-toast","jh-toast--".concat(t.type)],attrs:{color:t.currentColor,timeout:t.currentTimeout,top:t.position.includes("top"),bottom:t.position.includes("bottom"),left:t.position.includes("left"),right:t.position.includes("right"),vertical:t.vertical,elevation:t.elevation},on:{input:t.handleInput},scopedSlots:t._u([{key:"action",fn:function(n){var i=n.attrs;return[t.showCloseButton?e("v-btn",t._b({attrs:{color:t.closeButtonColor,text:"",small:""},on:{click:t.close}},"v-btn",i,!1),[t._v("\n      "+t._s(t.closeButtonText)+"\n    ")]):t._e(),t._v(" "),t.actionText?e("v-btn",t._b({attrs:{color:t.actionButtonColor,text:"",small:""},on:{click:t.handleAction}},"v-btn",i,!1),[t._v("\n      "+t._s(t.actionText)+"\n    ")]):t._e()]}}]),model:{value:t.isVisible,callback:function(e){t.isVisible=e},expression:"isVisible"}},[e("div",{staticClass:"jh-toast__content"},["loading"===t.type?e("v-progress-circular",{staticClass:"jh-toast__icon",attrs:{size:18,width:3,color:"white",indeterminate:""}}):t.currentIcon?e("v-icon",{staticClass:"jh-toast__icon",attrs:{color:t.iconColor}},[t._v("\n      "+t._s(t.currentIcon)+"\n    ")]):t._e(),t._v(" "),e("span",{staticClass:"jh-toast__message"},[t._v(t._s(t.currentMessage))])],1)])};V._withStripped=!0;const z=i({name:"JhToast",props:{value:{type:Boolean,default:!1},message:{type:String,default:""},type:{type:String,default:"success",validator:function(t){return["success","error","warning","info","loading"].includes(t)}},position:{type:String,default:"top",validator:function(t){return["top","bottom","top-left","top-right","bottom-left","bottom-right"].includes(t)}},timeout:{type:Number,default:3e3},color:{type:String,default:""},icon:{type:String,default:""},iconColor:{type:String,default:"white"},showCloseButton:{type:Boolean,default:!0},closeButtonText:{type:String,default:"关闭"},closeButtonColor:{type:String,default:"white"},actionText:{type:String,default:""},actionButtonColor:{type:String,default:"white"},vertical:{type:Boolean,default:!1},elevation:{type:[Number,String],default:24},maxLength:{type:Number,default:100}},data:function(){return{isVisible:!1}},computed:{currentMessage:function(){var t=this.message||"";return t.length>this.maxLength&&(t=t.substring(0,this.maxLength)+"..."),t},currentColor:function(){return this.color?this.color:{success:"success",error:"error",warning:"warning",info:"info",loading:"primary"}[this.type]||"success"},currentIcon:function(){return this.icon?this.icon:"loading"===this.type?"":{success:"mdi-check-circle",error:"mdi-alert-circle",warning:"mdi-alert",info:"mdi-information"}[this.type]||"mdi-check-circle"},currentTimeout:function(){return"loading"===this.type?-1:this.timeout}},watch:{value:function(t){this.isVisible=t},isVisible:function(t){t||this.$emit("input",!1)}},mounted:function(){this.isVisible=this.value},methods:{handleInput:function(t){this.$emit("input",t),t||this.$emit("close")},close:function(){this.isVisible=!1},handleAction:function(){this.$emit("action")}}},V,[],!1,null,"0da7bef5",null).exports;var J=function(){var t=this,e=t._self._c;return e("v-dialog",{attrs:{"max-width":t.maxWidth,persistent:t.persistent},on:{"click:outside":t.handleClickOutside},model:{value:t.isVisible,callback:function(e){t.isVisible=e},expression:"isVisible"}},[e("v-card",[t.title||t.$slots.title?e("v-card-title",[t._t("title",function(){return[t._v(t._s(t.title))]})],2):t._e(),t._v(" "),t.content||t.$slots.default?e("v-card-text",{class:t.contentClass},[t._t("default",function(){return[e("div",{domProps:{innerHTML:t._s(t.content)}})]})],2):t._e(),t._v(" "),e("v-card-actions",[e("v-spacer"),t._v(" "),t.showCancelButton?e("v-btn",{attrs:{color:t.cancelButtonColor,text:""!==t.cancelButtonText,disabled:t.loading},on:{click:t.handleCancel}},[t._v("\n        "+t._s(t.cancelButtonText||"取消")+"\n      ")]):t._e(),t._v(" "),e("v-btn",{attrs:{color:t.confirmButtonColor,text:""!==t.confirmButtonText,loading:t.loading},on:{click:t.handleConfirm}},[t._v("\n        "+t._s(t.confirmButtonText||"确定")+"\n      ")])],1)],1)],1)};function N(){var t,e,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",r=n.toStringTag||"@@toStringTag";function a(n,i,r,a){var s=i&&i.prototype instanceof l?i:l,c=Object.create(s.prototype);return G(c,"_invoke",function(n,i,r){var a,l,s,c=0,u=r||[],d=!1,f={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return a=e,l=0,s=t,f.n=n,o}};function p(n,i){for(l=n,s=i,e=0;!d&&c&&!r&&e<u.length;e++){var r,a=u[e],p=f.p,h=a[2];n>3?(r=h===i)&&(s=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=t):a[0]<=p&&((r=n<2&&p<a[1])?(l=0,f.v=i,f.n=a[1]):p<h&&(r=n<3||a[0]>i||i>h)&&(a[4]=n,a[5]=i,f.n=h,l=0))}if(r||n>1)return o;throw d=!0,i}return function(r,u,h){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&p(u,h),l=u,s=h;(e=l<2?t:s)||!d;){a||(l?l<3?(l>1&&(f.n=-1),p(l,s)):f.n=s:f.v=s);try{if(c=2,a){if(l||(r="next"),e=a[r]){if(!(e=e.call(a,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,l<2&&(l=0)}else 1===l&&(e=a.return)&&e.call(a),l<2&&(s=TypeError("The iterator does not provide a '"+r+"' method"),l=1);a=t}else if((e=(d=f.n<0)?s:n.call(i,f))!==o)break}catch(e){a=t,l=1,s=e}finally{c=1}}return{value:e,done:d}}}(n,r,a),!0),c}var o={};function l(){}function s(){}function c(){}e=Object.getPrototypeOf;var u=[][i]?e(e([][i]())):(G(e={},i,function(){return this}),e),d=c.prototype=l.prototype=Object.create(u);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,G(t,r,"GeneratorFunction")),t.prototype=Object.create(d),t}return s.prototype=c,G(d,"constructor",c),G(c,"constructor",s),s.displayName="GeneratorFunction",G(c,r,"GeneratorFunction"),G(d),G(d,r,"Generator"),G(d,i,function(){return this}),G(d,"toString",function(){return"[object Generator]"}),(N=function(){return{w:a,m:f}})()}function G(t,e,n,i){var r=Object.defineProperty;try{r({},"",{})}catch(t){r=0}G=function(t,e,n,i){function a(e,n){G(t,e,function(t){return this._invoke(e,n,t)})}e?r?r(t,e,{value:n,enumerable:!i,configurable:!i,writable:!i}):t[e]=n:(a("next",0),a("throw",1),a("return",2))},G(t,e,n,i)}function U(t,e,n,i,r,a,o){try{var l=t[a](o),s=l.value}catch(t){return void n(t)}l.done?e(s):Promise.resolve(s).then(i,r)}function q(t){return function(){var e=this,n=arguments;return new Promise(function(i,r){var a=t.apply(e,n);function o(t){U(a,i,r,o,l,"next",t)}function l(t){U(a,i,r,o,l,"throw",t)}o(void 0)})}}J._withStripped=!0;const K=i({name:"JhConfirmDialog",props:{value:{type:Boolean,default:!1},title:{type:String,default:"提示"},content:{type:String,default:""},contentClass:{type:String,default:"pa-6 text-pre-line"},maxWidth:{type:[String,Number],default:420},showCancelButton:{type:Boolean,default:!0},confirmButtonText:{type:String,default:"确定"},cancelButtonText:{type:String,default:"取消"},confirmButtonColor:{type:String,default:"primary"},cancelButtonColor:{type:String,default:"default"},persistent:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},beforeConfirm:{type:Function,default:null},beforeCancel:{type:Function,default:null}},data:function(){return{isVisible:!1}},watch:{value:function(t){this.isVisible=t},isVisible:function(t){t!==this.value&&this.$emit("input",t)}},mounted:function(){this.isVisible=this.value},methods:{handleConfirm:function(){var t=this;return q(N().m(function e(){return N().w(function(e){for(;;)switch(e.n){case 0:if(!t.beforeConfirm){e.n=2;break}return e.n=1,t.beforeConfirm();case 1:if(!1!==e.v){e.n=2;break}return e.a(2);case 2:t.$emit("confirm"),t.loading||t.close();case 3:return e.a(2)}},e)}))()},handleCancel:function(){var t=this;return q(N().m(function e(){return N().w(function(e){for(;;)switch(e.n){case 0:if(!t.beforeCancel){e.n=2;break}return e.n=1,t.beforeCancel();case 1:if(!1!==e.v){e.n=2;break}return e.a(2);case 2:t.$emit("cancel"),t.close();case 3:return e.a(2)}},e)}))()},handleClickOutside:function(){this.persistent||(this.$emit("click-outside"),this.$emit("cancel"))},close:function(){this.isVisible=!1},open:function(){this.isVisible=!0}}},J,[],!1,null,"4d697b30",null).exports;var H=function(){var t=this,e=t._self._c;return e("v-form",{ref:t.formRef,class:t.formClasses,attrs:{"lazy-validation":t.lazyValidation}},[e("v-row",{class:t.rowClass},[t._l(t.visibleFields,function(n,i){return["group"===n.type?e("v-col",{key:"group-".concat(i),attrs:{cols:"12"}},[e("div",{staticClass:"jh-form-group-title",class:n.titleClass},[n.divider&&i>0?e("v-divider",{staticClass:"mb-4"}):t._e(),t._v(" "),n.title?e("h3",{staticClass:"text-h6 mb-2"},[t._v(t._s(n.title))]):t._e(),t._v(" "),n.description?e("p",{staticClass:"text-caption grey--text mb-3"},[t._v(t._s(n.description))]):t._e()],1)]):e("v-col",{key:n.key,class:t.getFieldColClass(n),attrs:{cols:t.getFieldCols(n),sm:t.getFieldSm(n),md:t.getFieldMd(n),lg:t.getFieldLg(n),xl:t.getFieldXl(n)}},[e("div",{class:t.getFieldWrapperClass(n)},[n.label&&t.showLabels&&("horizontal"===t.layout||"horizontal"===n.layout)?e("div",{class:t.getHorizontalLabelClass(n),style:t.getHorizontalLabelStyle(n)},[n.required&&t.showRequiredMark?e("span",{staticClass:"error--text mr-1"},[t._v("*")]):t._e(),t._v("\n            "+t._s(n.label)+"\n          ")]):t._e(),t._v(" "),e("div",{class:t.getFieldInputClass(n)},[n.label&&t.showLabels&&"horizontal"!==t.layout&&"horizontal"!==n.layout?e("div",{class:t.getVerticalLabelClass(n)},[n.required&&t.showRequiredMark?e("span",{staticClass:"error--text"},[t._v("*")]):t._e(),t._v("\n              "+t._s(n.label)+"\n            ")]):t._e(),t._v(" "),t.isFieldReadonly(n)?e("div",{staticClass:"jh-form-readonly-text"},[t._v("\n              "+t._s(t.getReadonlyValue(n))+"\n            ")]):["text"!==n.type&&n.type?"textarea"===n.type?e("v-textarea",t._b({class:t.inputClass,attrs:{dense:t.getDense(n),filled:t.getFilled(n),outlined:t.getOutlined(n),rules:t.getRules(n),disabled:t.getFieldDisabled(n),readonly:n.readonly,placeholder:n.placeholder,rows:n.rows||3,"hide-details":n.hideDetails||t.hideDetails},on:{input:function(e){return t.handleInput(n.key,e)},change:function(e){return t.handleChange(n.key,e)},blur:function(e){return t.handleBlur(n.key,e)}},model:{value:t.formData[n.key],callback:function(e){t.$set(t.formData,n.key,e)},expression:"formData[field.key]"}},"v-textarea",n.props,!1)):"number"===n.type?e("v-text-field",t._b({class:t.inputClass,attrs:{type:"number",dense:t.getDense(n),"single-line":t.getSingleLine(n),filled:t.getFilled(n),outlined:t.getOutlined(n),rules:t.getRules(n),disabled:t.getFieldDisabled(n),readonly:n.readonly,placeholder:n.placeholder,"hide-details":n.hideDetails||t.hideDetails},on:{input:function(e){return t.handleInput(n.key,e)},change:function(e){return t.handleChange(n.key,e)},blur:function(e){return t.handleBlur(n.key,e)}},model:{value:t.formData[n.key],callback:function(e){t.$set(t.formData,n.key,e)},expression:"formData[field.key]"}},"v-text-field",n.props,!1)):"select"===n.type?e("v-select",t._b({class:t.inputClass,attrs:{dense:t.getDense(n),filled:t.getFilled(n),outlined:t.getOutlined(n),items:n.options||[],rules:t.getRules(n),disabled:t.getFieldDisabled(n),readonly:n.readonly,placeholder:n.placeholder,"item-text":n.itemText||"text","item-value":n.itemValue||"value",multiple:n.multiple,chips:n.chips,"hide-details":n.hideDetails||t.hideDetails},on:{input:function(e){return t.handleInput(n.key,e)},change:function(e){return t.handleChange(n.key,e)},blur:function(e){return t.handleBlur(n.key,e)}},model:{value:t.formData[n.key],callback:function(e){t.$set(t.formData,n.key,e)},expression:"formData[field.key]"}},"v-select",n.props,!1)):"autocomplete"===n.type?e("v-autocomplete",t._b({class:t.inputClass,attrs:{dense:t.getDense(n),filled:t.getFilled(n),outlined:t.getOutlined(n),items:n.options||[],rules:t.getRules(n),disabled:t.getFieldDisabled(n),readonly:n.readonly,placeholder:n.placeholder,"item-text":n.itemText||"text","item-value":n.itemValue||"value","hide-details":n.hideDetails||t.hideDetails},on:{input:function(e){return t.handleInput(n.key,e)},change:function(e){return t.handleChange(n.key,e)},blur:function(e){return t.handleBlur(n.key,e)}},model:{value:t.formData[n.key],callback:function(e){t.$set(t.formData,n.key,e)},expression:"formData[field.key]"}},"v-autocomplete",n.props,!1)):"date"===n.type?e("v-menu",{attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(i){var r=i.on,a=i.attrs;return[e("v-text-field",t._g(t._b({class:t.inputClass,attrs:{dense:t.getDense(n),filled:t.getFilled(n),outlined:t.getOutlined(n),rules:t.getRules(n),disabled:t.getFieldDisabled(n),placeholder:n.placeholder,"hide-details":n.hideDetails||t.hideDetails,readonly:""},model:{value:t.formData[n.key],callback:function(e){t.$set(t.formData,n.key,e)},expression:"formData[field.key]"}},"v-text-field",a,!1),r))]}}],null,!0),model:{value:t.dateMenus[n.key],callback:function(e){t.$set(t.dateMenus,n.key,e)},expression:"dateMenus[field.key]"}},[t._v(" "),e("v-date-picker",t._b({attrs:{locale:n.locale||"zh-cn"},on:{input:function(e){t.dateMenus[n.key]=!1,t.handleInput(n.key,t.formData[n.key])}},model:{value:t.formData[n.key],callback:function(e){t.$set(t.formData,n.key,e)},expression:"formData[field.key]"}},"v-date-picker",n.pickerProps,!1))],1):"time"===n.type?e("v-menu",{attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(i){var r=i.on,a=i.attrs;return[e("v-text-field",t._g(t._b({class:t.inputClass,attrs:{dense:t.getDense(n),filled:t.getFilled(n),outlined:t.getOutlined(n),rules:t.getRules(n),disabled:t.getFieldDisabled(n),placeholder:n.placeholder,"hide-details":n.hideDetails||t.hideDetails,readonly:""},model:{value:t.formData[n.key],callback:function(e){t.$set(t.formData,n.key,e)},expression:"formData[field.key]"}},"v-text-field",a,!1),r))]}}],null,!0),model:{value:t.timeMenus[n.key],callback:function(e){t.$set(t.timeMenus,n.key,e)},expression:"timeMenus[field.key]"}},[t._v(" "),e("v-time-picker",t._b({attrs:{format:"24hr"},on:{input:function(e){t.timeMenus[n.key]=!1,t.handleInput(n.key,t.formData[n.key])}},model:{value:t.formData[n.key],callback:function(e){t.$set(t.formData,n.key,e)},expression:"formData[field.key]"}},"v-time-picker",n.pickerProps,!1))],1):"switch"===n.type?e("v-switch",t._b({attrs:{label:n.switchLabel,disabled:t.getFieldDisabled(n),readonly:n.readonly,color:n.color||"success","hide-details":n.hideDetails||t.hideDetails},on:{change:function(e){return t.handleChange(n.key,e)}},model:{value:t.formData[n.key],callback:function(e){t.$set(t.formData,n.key,e)},expression:"formData[field.key]"}},"v-switch",n.props,!1)):"checkbox"===n.type?e("v-checkbox",t._b({attrs:{label:n.checkboxLabel,disabled:t.getFieldDisabled(n),readonly:n.readonly,color:n.color||"success","hide-details":n.hideDetails||t.hideDetails},on:{change:function(e){return t.handleChange(n.key,e)}},model:{value:t.formData[n.key],callback:function(e){t.$set(t.formData,n.key,e)},expression:"formData[field.key]"}},"v-checkbox",n.props,!1)):"radio"===n.type?e("v-radio-group",t._b({attrs:{rules:t.getRules(n),disabled:t.getFieldDisabled(n),readonly:n.readonly,row:!1!==n.row,"hide-details":n.hideDetails||t.hideDetails},on:{change:function(e){return t.handleChange(n.key,e)}},model:{value:t.formData[n.key],callback:function(e){t.$set(t.formData,n.key,e)},expression:"formData[field.key]"}},"v-radio-group",n.props,!1),t._l(n.options,function(t){return e("v-radio",{key:t.value,attrs:{label:t.text,value:t.value,color:n.color||"success"}})}),1):"slot"===n.type?t._t("field-".concat(n.key),null,{field:n,formData:t.formData,updateField:t.updateField}):t._e():e("v-text-field",t._b({class:t.inputClass,attrs:{dense:t.getDense(n),"single-line":t.getSingleLine(n),filled:t.getFilled(n),outlined:t.getOutlined(n),rules:t.getRules(n),disabled:t.getFieldDisabled(n),readonly:n.readonly,placeholder:n.placeholder,prefix:n.prefix,suffix:n.suffix,"hide-details":n.hideDetails||t.hideDetails},on:{input:function(e){return t.handleInput(n.key,e)},change:function(e){return t.handleChange(n.key,e)},blur:function(e){return t.handleBlur(n.key,e)}},model:{value:t.formData[n.key],callback:function(e){t.$set(t.formData,n.key,e)},expression:"formData[field.key]"}},"v-text-field",n.props,!1))]],2)])])]})],2),t._v(" "),t._t("actions",null,{formData:t.formData,validate:t.validate,resetForm:t.resetForm})],2)};function W(){var t,e,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",r=n.toStringTag||"@@toStringTag";function a(n,i,r,a){var s=i&&i.prototype instanceof l?i:l,c=Object.create(s.prototype);return X(c,"_invoke",function(n,i,r){var a,l,s,c=0,u=r||[],d=!1,f={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return a=e,l=0,s=t,f.n=n,o}};function p(n,i){for(l=n,s=i,e=0;!d&&c&&!r&&e<u.length;e++){var r,a=u[e],p=f.p,h=a[2];n>3?(r=h===i)&&(s=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=t):a[0]<=p&&((r=n<2&&p<a[1])?(l=0,f.v=i,f.n=a[1]):p<h&&(r=n<3||a[0]>i||i>h)&&(a[4]=n,a[5]=i,f.n=h,l=0))}if(r||n>1)return o;throw d=!0,i}return function(r,u,h){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&p(u,h),l=u,s=h;(e=l<2?t:s)||!d;){a||(l?l<3?(l>1&&(f.n=-1),p(l,s)):f.n=s:f.v=s);try{if(c=2,a){if(l||(r="next"),e=a[r]){if(!(e=e.call(a,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,l<2&&(l=0)}else 1===l&&(e=a.return)&&e.call(a),l<2&&(s=TypeError("The iterator does not provide a '"+r+"' method"),l=1);a=t}else if((e=(d=f.n<0)?s:n.call(i,f))!==o)break}catch(e){a=t,l=1,s=e}finally{c=1}}return{value:e,done:d}}}(n,r,a),!0),c}var o={};function l(){}function s(){}function c(){}e=Object.getPrototypeOf;var u=[][i]?e(e([][i]())):(X(e={},i,function(){return this}),e),d=c.prototype=l.prototype=Object.create(u);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,X(t,r,"GeneratorFunction")),t.prototype=Object.create(d),t}return s.prototype=c,X(d,"constructor",c),X(c,"constructor",s),s.displayName="GeneratorFunction",X(c,r,"GeneratorFunction"),X(d),X(d,r,"Generator"),X(d,i,function(){return this}),X(d,"toString",function(){return"[object Generator]"}),(W=function(){return{w:a,m:f}})()}function X(t,e,n,i){var r=Object.defineProperty;try{r({},"",{})}catch(t){r=0}X=function(t,e,n,i){function a(e,n){X(t,e,function(t){return this._invoke(e,n,t)})}e?r?r(t,e,{value:n,enumerable:!i,configurable:!i,writable:!i}):t[e]=n:(a("next",0),a("throw",1),a("return",2))},X(t,e,n,i)}function Y(t,e,n,i,r,a,o){try{var l=t[a](o),s=l.value}catch(t){return void n(t)}l.done?e(s):Promise.resolve(s).then(i,r)}function Q(t){return function(){var e=this,n=arguments;return new Promise(function(i,r){var a=t.apply(e,n);function o(t){Y(a,i,r,o,l,"next",t)}function l(t){Y(a,i,r,o,l,"throw",t)}o(void 0)})}}function Z(t){return function(t){if(Array.isArray(t))return tt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return tt(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tt(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function et(t){return et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},et(t)}function nt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function it(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?nt(Object(n),!0).forEach(function(e){rt(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nt(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function rt(t,e,n){return(e=function(t){var e=function(t){if("object"!=et(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=et(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==et(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}H._withStripped=!0;const at=i({name:"JhForm",props:{fields:{type:Array,default:function(){return[]}},initialData:{type:Object,default:function(){return{}}},formRef:{type:String,default:"jhForm"},lazyValidation:{type:Boolean,default:!0},layout:{type:String,default:"vertical",validator:function(t){return["horizontal","vertical","inline","grid"].includes(t)}},showLabels:{type:Boolean,default:!0},labelPosition:{type:String,default:"top",validator:function(t){return["top","left"].includes(t)}},labelWidth:{type:[Number,String],default:"auto"},labelAlign:{type:String,default:"right",validator:function(t){return["left","right","center"].includes(t)}},showRequiredMark:{type:Boolean,default:!0},readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},defaultDense:{type:Boolean,default:!0},defaultFilled:{type:Boolean,default:!0},defaultOutlined:{type:Boolean,default:!1},defaultSingleLine:{type:Boolean,default:!0},defaultColsMd:{type:Number,default:6},hideDetails:{type:[Boolean,String],default:!1},labelClass:{type:String,default:"jh-input-label"},inputClass:{type:String,default:"jh-v-input"},rowClass:{type:String,default:""},validationRules:{type:Object,default:function(){return{require:[function(t){return!!t||"必填"}],email:[function(t){return!t||/.+@.+\..+/.test(t)||"邮箱格式不正确"}],phone:[function(t){return!t||/^1[3-9]\d{9}$/.test(t)||"手机号格式不正确"}],number:[function(t){return!t||!isNaN(t)||"请输入数字"}],integer:[function(t){return!t||Number.isInteger(Number(t))||"请输入整数"}]}}}},data:function(){return{formData:{},dateMenus:{},timeMenus:{}}},computed:{formClasses:function(){return rt(rt(rt({"jh-form":!0},"jh-form--".concat(this.layout),!0),"jh-form--readonly",this.readonly),"jh-form--disabled",this.disabled)},visibleFields:function(){var t=this;return this.fields.filter(function(e){return"function"==typeof e.visible?e.visible(t.formData):void 0===e.visible||e.visible})}},watch:{initialData:{handler:function(t){this.formData=it({},t)},immediate:!0,deep:!0}},mounted:function(){this.initFormData()},methods:{initFormData:function(){var t=it({},this.initialData);this.fields.forEach(function(e){void 0!==e.defaultValue&&void 0===t[e.key]&&(t[e.key]=e.defaultValue)}),this.formData=t},getFieldCols:function(t){return"inline"===this.layout?"auto":t.cols?"object"===et(t.cols)&&t.cols.xs||t.cols:12},getFieldSm:function(t){return"inline"===this.layout?"auto":t.cols&&"object"===et(t.cols)?t.cols.sm:12},getFieldMd:function(t){return"inline"===this.layout?"auto":t.cols&&"object"===et(t.cols)?t.cols.md||this.defaultColsMd:t.cols||this.defaultColsMd},getFieldLg:function(t){return"inline"===this.layout?"auto":t.cols&&"object"===et(t.cols)?t.cols.lg||t.cols.md||this.defaultColsMd:t.cols||this.defaultColsMd},getFieldXl:function(t){return"inline"===this.layout?"auto":t.cols&&"object"===et(t.cols)?t.cols.xl||t.cols.md||this.defaultColsMd:t.cols||this.defaultColsMd},getFieldColClass:function(t){return t.colClass||""},getFieldWrapperClass:function(t){var e=t.layout||this.layout;return"jh-field-wrapper ".concat("horizontal"===e?"d-flex align-center":"")},getHorizontalLabelClass:function(t){var e=t.labelAlign||this.labelAlign;return"jh-field-label jh-field-label--horizontal text-".concat(e," flex-shrink-0")},getHorizontalLabelStyle:function(t){var e=t.labelWidth||this.labelWidth;return{width:"number"==typeof e?"".concat(e,"px"):e,minWidth:"number"==typeof e?"".concat(e,"px"):e}},getVerticalLabelClass:function(t){return"jh-field-label jh-field-label--vertical mb-1"},getFieldInputClass:function(t){return"horizontal"===(t.layout||this.layout)?"jh-field-input flex-grow-1":"jh-field-input"},getFieldDisabled:function(t){return"function"==typeof t.disabled?t.disabled(this.formData):void 0!==t.disabled?t.disabled:this.disabled},isFieldReadonly:function(t){return"function"==typeof t.readonly?t.readonly(this.formData):void 0!==t.readonly?t.readonly:this.readonly},getReadonlyValue:function(t){var e=this.formData[t.key];if("function"==typeof t.readonlyRender)return t.readonlyRender(e,this.formData);if(("select"===t.type||"radio"===t.type)&&t.options){if(t.multiple&&Array.isArray(e))return e.map(function(e){var n=t.options.find(function(t){return t.value===e});return n?n.text:e}).join(", ");var n=t.options.find(function(t){return t.value===e});return n?n.text:e}return"switch"===t.type||"checkbox"===t.type?e?"是":"否":e||"-"},getDense:function(t){return void 0!==t.dense?t.dense:this.defaultDense},getFilled:function(t){return void 0!==t.filled?t.filled:this.defaultFilled},getOutlined:function(t){return void 0!==t.outlined?t.outlined:this.defaultOutlined},getSingleLine:function(t){return void 0!==t.singleLine?t.singleLine:this.defaultSingleLine},getRules:function(t){var e=this,n=[];return t.required&&n.push(function(e){return!!e||"".concat(t.label||"此字段","为必填项")}),t.rules&&(Array.isArray(t.rules)?n.push.apply(n,Z(t.rules)):"string"==typeof t.rules&&t.rules.split("|").forEach(function(t){var i=t.trim();e.validationRules[i]&&n.push.apply(n,Z(e.validationRules[i]))})),n},handleInput:function(t,e){this.$emit("input",t,e,this.formData),this.$emit("field-change",{key:t,value:e,formData:this.formData})},handleChange:function(t,e){this.$emit("change",t,e,this.formData),this.$emit("field-change",{key:t,value:e,formData:this.formData})},handleBlur:function(t,e){this.$emit("blur",t,e,this.formData)},updateField:function(t,e){this.$set(this.formData,t,e),this.handleChange(t,e)},getForm:function(){return this.$refs[this.formRef]},getFormData:function(){return it({},this.formData)},setFieldsValue:function(t){this.formData=it(it({},this.formData),t)},setFieldValue:function(t,e){this.$set(this.formData,t,e)},resetForm:function(){var t=this.$refs[this.formRef];t&&t.reset(),this.initFormData(),this.$emit("reset",this.formData)},resetValidation:function(){var t=this.$refs[this.formRef];t&&t.resetValidation()},validate:function(){var t=this;return Q(W().m(function e(){var n,i;return W().w(function(e){for(;;)switch(e.n){case 0:if(!(n=t.$refs[t.formRef])){e.n=2;break}return e.n=1,n.validate();case 1:return i=e.v,t.$emit("validate",i,t.formData),e.a(2,i);case 2:return e.a(2,!0)}},e)}))()},submit:function(){var t=this;return Q(W().m(function e(){var n;return W().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,t.validate();case 1:return(n=e.v)&&t.$emit("submit",t.formData),e.a(2,n)}},e)}))()}}},H,[],!1,null,"264c7ce0",null).exports;var ot=function(){var t=this,e=t._self._c;return e("v-dialog",{attrs:{"max-width":t.width,persistent:t.persistent,fullscreen:t.fullscreen},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.handleCancel.apply(null,arguments)}},model:{value:t.isShownInternal,callback:function(e){t.isShownInternal=e},expression:"isShownInternal"}},[e("v-card",[e("v-card-title",{staticClass:"d-flex align-center justify-space-between pa-4"},[e("span",{staticClass:"text-h6"},[t._v(t._s(t.title))]),t._v(" "),t.closable?e("v-btn",{attrs:{icon:"",small:""},on:{click:t.handleCancel}},[e("v-icon",[t._v("mdi-close")])],1):t._e()],1),t._v(" "),e("v-divider"),t._v(" "),e("v-card-text",{staticClass:"pa-6"},[t._t("content",function(){return[e("jh-form",{ref:"jhForm",attrs:{"form-ref":t.formRef,fields:t.fields,"initial-data":t.initialData,"validation-rules":t.validationRules,"default-cols-md":6},on:{"field-change":t.handleFieldChange},scopedSlots:t._u([t._l(t.slotFields,function(e){return{key:"field-".concat(e.key),fn:function(n){return[t._t("field-".concat(e.key),null,null,n)]}}})],null,!0)})]})],2),t._v(" "),e("v-divider"),t._v(" "),e("v-card-actions",{staticClass:"pa-4"},[e("v-spacer"),t._v(" "),e("v-btn",{attrs:{text:""},on:{click:t.handleCancel}},[t._v("\n        "+t._s(t.cancelText)+"\n      ")]),t._v(" "),t.showConfirmButton?e("v-btn",{attrs:{color:"success"},on:{click:t.handleConfirm}},[t._v("\n        "+t._s(t.confirmText)+"\n      ")]):t._e()],1)],1)],1)};function lt(){var t,e,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",r=n.toStringTag||"@@toStringTag";function a(n,i,r,a){var s=i&&i.prototype instanceof l?i:l,c=Object.create(s.prototype);return st(c,"_invoke",function(n,i,r){var a,l,s,c=0,u=r||[],d=!1,f={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return a=e,l=0,s=t,f.n=n,o}};function p(n,i){for(l=n,s=i,e=0;!d&&c&&!r&&e<u.length;e++){var r,a=u[e],p=f.p,h=a[2];n>3?(r=h===i)&&(s=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=t):a[0]<=p&&((r=n<2&&p<a[1])?(l=0,f.v=i,f.n=a[1]):p<h&&(r=n<3||a[0]>i||i>h)&&(a[4]=n,a[5]=i,f.n=h,l=0))}if(r||n>1)return o;throw d=!0,i}return function(r,u,h){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&p(u,h),l=u,s=h;(e=l<2?t:s)||!d;){a||(l?l<3?(l>1&&(f.n=-1),p(l,s)):f.n=s:f.v=s);try{if(c=2,a){if(l||(r="next"),e=a[r]){if(!(e=e.call(a,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,l<2&&(l=0)}else 1===l&&(e=a.return)&&e.call(a),l<2&&(s=TypeError("The iterator does not provide a '"+r+"' method"),l=1);a=t}else if((e=(d=f.n<0)?s:n.call(i,f))!==o)break}catch(e){a=t,l=1,s=e}finally{c=1}}return{value:e,done:d}}}(n,r,a),!0),c}var o={};function l(){}function s(){}function c(){}e=Object.getPrototypeOf;var u=[][i]?e(e([][i]())):(st(e={},i,function(){return this}),e),d=c.prototype=l.prototype=Object.create(u);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,st(t,r,"GeneratorFunction")),t.prototype=Object.create(d),t}return s.prototype=c,st(d,"constructor",c),st(c,"constructor",s),s.displayName="GeneratorFunction",st(c,r,"GeneratorFunction"),st(d),st(d,r,"Generator"),st(d,i,function(){return this}),st(d,"toString",function(){return"[object Generator]"}),(lt=function(){return{w:a,m:f}})()}function st(t,e,n,i){var r=Object.defineProperty;try{r({},"",{})}catch(t){r=0}st=function(t,e,n,i){function a(e,n){st(t,e,function(t){return this._invoke(e,n,t)})}e?r?r(t,e,{value:n,enumerable:!i,configurable:!i,writable:!i}):t[e]=n:(a("next",0),a("throw",1),a("return",2))},st(t,e,n,i)}function ct(t,e,n,i,r,a,o){try{var l=t[a](o),s=l.value}catch(t){return void n(t)}l.done?e(s):Promise.resolve(s).then(i,r)}function ut(t){return function(){var e=this,n=arguments;return new Promise(function(i,r){var a=t.apply(e,n);function o(t){ct(a,i,r,o,l,"next",t)}function l(t){ct(a,i,r,o,l,"throw",t)}o(void 0)})}}ot._withStripped=!0;const dt=i({name:"JhModalForm",components:{JhForm:at},props:{value:{type:Boolean,default:!1},title:{type:String,default:"表单"},fields:{type:Array,default:function(){return[]}},initialData:{type:Object,default:function(){return{}}},width:{type:[Number,String],default:600},fullscreen:{type:Boolean,default:!1},persistent:{type:Boolean,default:!0},closable:{type:Boolean,default:!0},showConfirmButton:{type:Boolean,default:!0},confirmText:{type:String,default:"确认"},cancelText:{type:String,default:"取消"},formRef:{type:String,default:"modalForm"},validateBeforeConfirm:{type:Boolean,default:!0},validationRules:{type:Object,default:function(){return{require:[function(t){return!!t||"必填"}],email:[function(t){return!t||/.+@.+\..+/.test(t)||"邮箱格式不正确"}],phone:[function(t){return!t||/^1[3-9]\d{9}$/.test(t)||"手机号格式不正确"}],number:[function(t){return!t||!isNaN(t)||"请输入数字"}],integer:[function(t){return!t||Number.isInteger(Number(t))||"请输入整数"}]}}}},data:function(){return{isShownInternal:this.value}},computed:{slotFields:function(){return this.fields.filter(function(t){return"slot"===t.type})}},watch:{value:function(t){var e=this;this.isShownInternal=t,t&&this.$nextTick(function(){e.resetForm()})},isShownInternal:function(t){t||(this.$emit("input",!1),this.$emit("close"))}},methods:{handleCancel:function(){this.$emit("cancel"),this.isShownInternal=!1},handleConfirm:function(){var t=this;return ut(lt().m(function e(){return lt().w(function(e){for(;;)switch(e.n){case 0:if(!t.validateBeforeConfirm){e.n=2;break}return e.n=1,t.validate();case 1:if(e.v){e.n=2;break}return e.a(2);case 2:t.$emit("confirm",t.getFormData());case 3:return e.a(2)}},e)}))()},handleFieldChange:function(t){this.$emit("field-change",t)},getJhForm:function(){return this.$refs.jhForm},getForm:function(){var t=this.getJhForm();return t?t.getForm():null},getFormData:function(){var t=this.getJhForm();return t?t.getFormData():{}},setFieldsValue:function(t){var e=this.getJhForm();e&&e.setFieldsValue(t)},setFieldValue:function(t,e){var n=this.getJhForm();n&&n.setFieldValue(t,e)},resetForm:function(){var t=this.getJhForm();t&&t.resetForm()},resetValidation:function(){var t=this.getJhForm();t&&t.resetValidation()},validate:function(){var t=this;return ut(lt().m(function e(){var n;return lt().w(function(e){for(;;)switch(e.n){case 0:if(!(n=t.getJhForm())){e.n=2;break}return e.n=1,n.validate();case 1:return e.a(2,e.v);case 2:return e.a(2,!0)}},e)}))()}}},ot,[],!1,null,"9ad4133c",null).exports;var ft=function(){var t=this,e=t._self._c;return e("v-navigation-drawer",{staticClass:"elevation-24",attrs:{fixed:"",temporary:"",right:"right"===t.position,left:"left"===t.position,width:t.width},model:{value:t.isShownInternal,callback:function(e){t.isShownInternal=e},expression:"isShownInternal"}},[e("v-row",{staticClass:"jh-drawer-header px-4 bg-white",attrs:{"no-gutters":"",align:"center"}},[e("span",{staticClass:"text-h7 font-weight-bold py-4"},[t._v(t._s(t.title))]),t._v(" "),e("v-spacer"),t._v(" "),e("div",{staticClass:"jh-drawer-action-btn-group"},[e("v-btn",{staticClass:"elevation-0 grey lighten-4",attrs:{small:""},on:{click:t.handleCancel}},[t._v("\n        "+t._s(t.cancelText)+"\n      ")]),t._v(" "),t._t("actions",function(){return[t.showConfirmButton?e("v-btn",{staticClass:"ml-2",attrs:{color:"success",small:""},on:{click:t.handleConfirm}},[t._v("\n          "+t._s(t.confirmText)+"\n        ")]):t._e()]})],2)],1),t._v(" "),e("v-divider",{staticClass:"jh-divider"}),t._v(" "),e("div",{staticClass:"px-4 pb-4"},[t._t("content",function(){return[e("jh-form",{ref:"jhForm",attrs:{"form-ref":t.formRef,fields:t.fields,"initial-data":t.initialData,"validation-rules":t.validationRules,"default-cols-md":3,"row-class":t.rowClass},on:{"field-change":t.handleFieldChange},scopedSlots:t._u([t._l(t.slotFields,function(e){return{key:"field-".concat(e.key),fn:function(n){return[t._t("field-".concat(e.key),null,null,n)]}}})],null,!0)})]})],2),t._v(" "),e("v-btn",{staticClass:"drawer-close-float-btn",attrs:{elevation:"0",color:"success",fab:"",absolute:"",top:"",left:"",small:"",tile:""},on:{click:t.handleCancel}},[e("v-icon",[t._v("mdi-close")])],1)],1)};function pt(){var t,e,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",r=n.toStringTag||"@@toStringTag";function a(n,i,r,a){var s=i&&i.prototype instanceof l?i:l,c=Object.create(s.prototype);return ht(c,"_invoke",function(n,i,r){var a,l,s,c=0,u=r||[],d=!1,f={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return a=e,l=0,s=t,f.n=n,o}};function p(n,i){for(l=n,s=i,e=0;!d&&c&&!r&&e<u.length;e++){var r,a=u[e],p=f.p,h=a[2];n>3?(r=h===i)&&(s=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=t):a[0]<=p&&((r=n<2&&p<a[1])?(l=0,f.v=i,f.n=a[1]):p<h&&(r=n<3||a[0]>i||i>h)&&(a[4]=n,a[5]=i,f.n=h,l=0))}if(r||n>1)return o;throw d=!0,i}return function(r,u,h){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&p(u,h),l=u,s=h;(e=l<2?t:s)||!d;){a||(l?l<3?(l>1&&(f.n=-1),p(l,s)):f.n=s:f.v=s);try{if(c=2,a){if(l||(r="next"),e=a[r]){if(!(e=e.call(a,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,l<2&&(l=0)}else 1===l&&(e=a.return)&&e.call(a),l<2&&(s=TypeError("The iterator does not provide a '"+r+"' method"),l=1);a=t}else if((e=(d=f.n<0)?s:n.call(i,f))!==o)break}catch(e){a=t,l=1,s=e}finally{c=1}}return{value:e,done:d}}}(n,r,a),!0),c}var o={};function l(){}function s(){}function c(){}e=Object.getPrototypeOf;var u=[][i]?e(e([][i]())):(ht(e={},i,function(){return this}),e),d=c.prototype=l.prototype=Object.create(u);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,ht(t,r,"GeneratorFunction")),t.prototype=Object.create(d),t}return s.prototype=c,ht(d,"constructor",c),ht(c,"constructor",s),s.displayName="GeneratorFunction",ht(c,r,"GeneratorFunction"),ht(d),ht(d,r,"Generator"),ht(d,i,function(){return this}),ht(d,"toString",function(){return"[object Generator]"}),(pt=function(){return{w:a,m:f}})()}function ht(t,e,n,i){var r=Object.defineProperty;try{r({},"",{})}catch(t){r=0}ht=function(t,e,n,i){function a(e,n){ht(t,e,function(t){return this._invoke(e,n,t)})}e?r?r(t,e,{value:n,enumerable:!i,configurable:!i,writable:!i}):t[e]=n:(a("next",0),a("throw",1),a("return",2))},ht(t,e,n,i)}function mt(t,e,n,i,r,a,o){try{var l=t[a](o),s=l.value}catch(t){return void n(t)}l.done?e(s):Promise.resolve(s).then(i,r)}function vt(t){return function(){var e=this,n=arguments;return new Promise(function(i,r){var a=t.apply(e,n);function o(t){mt(a,i,r,o,l,"next",t)}function l(t){mt(a,i,r,o,l,"throw",t)}o(void 0)})}}ft._withStripped=!0;const yt=i({name:"JhDrawerForm",components:{JhForm:at},props:{value:{type:Boolean,default:!1},title:{type:String,default:"表单"},position:{type:String,default:"right",validator:function(t){return["left","right"].includes(t)}},width:{type:String,default:"90%"},showConfirmButton:{type:Boolean,default:!0},confirmText:{type:String,default:"确认"},cancelText:{type:String,default:"取消"},formRef:{type:String,default:"drawerForm"},validateBeforeConfirm:{type:Boolean,default:!0},fields:{type:Array,default:function(){return[]}},initialData:{type:Object,default:function(){return{}}},rowClass:{type:String,default:"mt-0"},validationRules:{type:Object,default:function(){return{require:[function(t){return!!t||"必填"}],email:[function(t){return!t||/.+@.+\..+/.test(t)||"邮箱格式不正确"}],phone:[function(t){return!t||/^1[3-9]\d{9}$/.test(t)||"手机号格式不正确"}],number:[function(t){return!t||!isNaN(t)||"请输入数字"}],integer:[function(t){return!t||Number.isInteger(Number(t))||"请输入整数"}]}}}},data:function(){return{isShownInternal:this.value}},computed:{slotFields:function(){return this.fields.filter(function(t){return"slot"===t.type})}},watch:{value:function(t){var e=this;this.isShownInternal=t,t&&this.$nextTick(function(){e.resetForm()})},isShownInternal:function(t){t||(this.$emit("input",!1),this.$emit("close"))}},methods:{handleCancel:function(){this.$emit("cancel"),this.isShownInternal=!1},handleConfirm:function(){var t=this;return vt(pt().m(function e(){return pt().w(function(e){for(;;)switch(e.n){case 0:if(!t.validateBeforeConfirm){e.n=2;break}return e.n=1,t.validate();case 1:if(e.v){e.n=2;break}return e.a(2);case 2:t.$emit("confirm",t.getFormData());case 3:return e.a(2)}},e)}))()},handleFieldChange:function(t){this.$emit("field-change",t)},getJhForm:function(){return this.$refs.jhForm},getForm:function(){var t=this.getJhForm();return t?t.getForm():null},getFormData:function(){var t=this.getJhForm();return t?t.getFormData():{}},setFieldsValue:function(t){var e=this.getJhForm();e&&e.setFieldsValue(t)},setFieldValue:function(t,e){var n=this.getJhForm();n&&n.setFieldValue(t,e)},resetForm:function(){var t=this.getJhForm();t&&t.resetForm()},resetValidation:function(){var t=this.getJhForm();t&&t.resetValidation()},validate:function(){var t=this;return vt(pt().m(function e(){var n;return pt().w(function(e){for(;;)switch(e.n){case 0:if(!(n=t.getJhForm())){e.n=2;break}return e.n=1,n.validate();case 1:return e.a(2,e.v);case 2:return e.a(2,!0)}},e)}))()}}},ft,[],!1,null,"7a237adf",null).exports;var gt=function(){var t=this,e=t._self._c;return e("v-card",{staticClass:"jh-steps-form",attrs:{flat:""}},[e("v-stepper",{attrs:{"alt-labels":t.altLabels,vertical:t.vertical},model:{value:t.currentStepIndex,callback:function(e){t.currentStepIndex=e},expression:"currentStepIndex"}},[t.vertical?t._e():e("v-stepper-header",[t._l(t.steps,function(n,i){return[e("v-stepper-step",{key:"step-".concat(i),attrs:{complete:t.currentStepIndex>i+1,step:i+1,editable:t.editable&&i<t.currentStepIndex},on:{click:function(e){t.editable&&t.handleStepClick(i)}}},[t._v("\n          "+t._s(n.title)+"\n          "),n.subTitle?e("small",[t._v(t._s(n.subTitle))]):t._e()]),t._v(" "),i<t.steps.length-1?e("v-divider",{key:"divider-".concat(i)}):t._e()]})],2),t._v(" "),e("v-stepper-items",t._l(t.steps,function(n,i){return e("v-stepper-content",{key:"content-".concat(i),attrs:{step:i+1}},[t.vertical?e("div",{staticClass:"mb-4"},[e("div",{staticClass:"text-h6"},[t._v(t._s(n.title))]),t._v(" "),n.subTitle?e("div",{staticClass:"text-caption text--secondary"},[t._v(t._s(n.subTitle))]):t._e()]):t._e(),t._v(" "),e("div",{staticClass:"step-content"},[n.slot?t._t(n.slot,null,{step:n,index:i,formData:t.formData}):n.fields?e("jh-form",{ref:"stepForm".concat(i),refInFor:!0,attrs:{fields:n.fields,"initial-data":t.formData["step".concat(i)]||{},"show-buttons":!1,outlined:t.outlined,dense:t.dense},on:{change:function(e){return t.handleStepFormChange(i,e)}}}):e("div",[t._t("default",null,{step:n,index:i,formData:t.formData})],2)],2),t._v(" "),e("div",{staticClass:"step-actions d-flex justify-space-between mt-6"},[i>0?e("v-btn",{attrs:{text:"",disabled:t.submitting},on:{click:t.handlePrevious}},[t._v("\n            "+t._s(t.previousButtonText)+"\n          ")]):e("v-spacer"),t._v(" "),e("div",[i<t.steps.length-1?e("v-btn",{attrs:{color:"primary",loading:t.validating,disabled:t.submitting},on:{click:t.handleNext}},[t._v("\n              "+t._s(t.nextButtonText)+"\n            ")]):e("v-btn",{attrs:{color:"primary",loading:t.submitting},on:{click:t.handleFinish}},[t._v("\n              "+t._s(t.finishButtonText)+"\n            ")])],1)],1)])}),1)],1)],1)};function bt(t){return bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bt(t)}function _t(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function xt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_t(Object(n),!0).forEach(function(e){wt(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_t(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function wt(t,e,n){return(e=function(t){var e=function(t){if("object"!=bt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=bt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==bt(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function St(){var t,e,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",r=n.toStringTag||"@@toStringTag";function a(n,i,r,a){var s=i&&i.prototype instanceof l?i:l,c=Object.create(s.prototype);return kt(c,"_invoke",function(n,i,r){var a,l,s,c=0,u=r||[],d=!1,f={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return a=e,l=0,s=t,f.n=n,o}};function p(n,i){for(l=n,s=i,e=0;!d&&c&&!r&&e<u.length;e++){var r,a=u[e],p=f.p,h=a[2];n>3?(r=h===i)&&(s=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=t):a[0]<=p&&((r=n<2&&p<a[1])?(l=0,f.v=i,f.n=a[1]):p<h&&(r=n<3||a[0]>i||i>h)&&(a[4]=n,a[5]=i,f.n=h,l=0))}if(r||n>1)return o;throw d=!0,i}return function(r,u,h){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&p(u,h),l=u,s=h;(e=l<2?t:s)||!d;){a||(l?l<3?(l>1&&(f.n=-1),p(l,s)):f.n=s:f.v=s);try{if(c=2,a){if(l||(r="next"),e=a[r]){if(!(e=e.call(a,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,l<2&&(l=0)}else 1===l&&(e=a.return)&&e.call(a),l<2&&(s=TypeError("The iterator does not provide a '"+r+"' method"),l=1);a=t}else if((e=(d=f.n<0)?s:n.call(i,f))!==o)break}catch(e){a=t,l=1,s=e}finally{c=1}}return{value:e,done:d}}}(n,r,a),!0),c}var o={};function l(){}function s(){}function c(){}e=Object.getPrototypeOf;var u=[][i]?e(e([][i]())):(kt(e={},i,function(){return this}),e),d=c.prototype=l.prototype=Object.create(u);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,kt(t,r,"GeneratorFunction")),t.prototype=Object.create(d),t}return s.prototype=c,kt(d,"constructor",c),kt(c,"constructor",s),s.displayName="GeneratorFunction",kt(c,r,"GeneratorFunction"),kt(d),kt(d,r,"Generator"),kt(d,i,function(){return this}),kt(d,"toString",function(){return"[object Generator]"}),(St=function(){return{w:a,m:f}})()}function kt(t,e,n,i){var r=Object.defineProperty;try{r({},"",{})}catch(t){r=0}kt=function(t,e,n,i){function a(e,n){kt(t,e,function(t){return this._invoke(e,n,t)})}e?r?r(t,e,{value:n,enumerable:!i,configurable:!i,writable:!i}):t[e]=n:(a("next",0),a("throw",1),a("return",2))},kt(t,e,n,i)}function Ct(t,e,n,i,r,a,o){try{var l=t[a](o),s=l.value}catch(t){return void n(t)}l.done?e(s):Promise.resolve(s).then(i,r)}function Dt(t){return function(){var e=this,n=arguments;return new Promise(function(i,r){var a=t.apply(e,n);function o(t){Ct(a,i,r,o,l,"next",t)}function l(t){Ct(a,i,r,o,l,"throw",t)}o(void 0)})}}gt._withStripped=!0;const jt=i({name:"JhStepsForm",components:{JhForm:at},props:{steps:{type:Array,required:!0,default:function(){return[]}},initialStep:{type:Number,default:0},value:{type:Number,default:null},editable:{type:Boolean,default:!1},vertical:{type:Boolean,default:!1},altLabels:{type:Boolean,default:!1},outlined:{type:Boolean,default:!0},dense:{type:Boolean,default:!1},submitting:{type:Boolean,default:!1},previousButtonText:{type:String,default:"上一步"},nextButtonText:{type:String,default:"下一步"},finishButtonText:{type:String,default:"完成"},validateStep:{type:Function,default:null},transformBeforeFinish:{type:Function,default:null}},data:function(){return{currentStepIndex:null!==this.value?this.value+1:this.initialStep+1,formData:{},validating:!1}},watch:{value:function(t){null!==t&&(this.currentStepIndex=t+1)},currentStepIndex:function(t){this.$emit("input",t-1),this.$emit("step-change",{current:t-1,step:this.steps[t-1]})}},methods:{handleStepClick:function(t){this.editable&&t<this.currentStepIndex-1&&(this.currentStepIndex=t+1)},handleStepFormChange:function(t,e){this.$set(this.formData,"step".concat(t),e),this.$emit("change",this.formData)},handlePrevious:function(){this.currentStepIndex>1&&this.currentStepIndex--},handleNext:function(){var t=this;return Dt(St().m(function e(){var n;return St().w(function(e){for(;;)switch(e.n){case 0:return n=t.currentStepIndex-1,e.n=1,t.validateCurrentStep(n);case 1:e.v&&t.currentStepIndex++;case 2:return e.a(2)}},e)}))()},handleFinish:function(){var t=this;return Dt(St().m(function e(){var n,i;return St().w(function(e){for(;;)switch(e.n){case 0:return n=t.currentStepIndex-1,e.n=1,t.validateCurrentStep(n);case 1:if(e.v){e.n=2;break}return e.a(2);case 2:i=xt({},t.formData),t.transformBeforeFinish&&(i=t.transformBeforeFinish(i)),t.$emit("finish",i);case 3:return e.a(2)}},e)}))()},validateCurrentStep:function(t){var e=this;return Dt(St().m(function n(){var i,r,a;return St().w(function(n){for(;;)switch(n.p=n.n){case 0:if(e.validating=!0,n.p=1,!(i=e.steps[t]).fields){n.n=3;break}if(!(r=e.$refs["stepForm".concat(t)])||!r[0]){n.n=3;break}return n.n=2,r[0].validate();case 2:if(n.v){n.n=3;break}return n.a(2,!1);case 3:if(!e.validateStep){n.n=5;break}return n.n=4,e.validateStep({step:i,stepIndex:t,formData:e.formData});case 4:if(!1!==n.v){n.n=5;break}return n.a(2,!1);case 5:return n.a(2,!0);case 6:return n.p=6,a=n.v,console.error("步骤验证失败:",a),n.a(2,!1);case 7:return n.p=7,e.validating=!1,n.f(7);case 8:return n.a(2)}},n,null,[[1,6,7,8]])}))()},goToStep:function(t){t>=0&&t<this.steps.length&&(this.currentStepIndex=t+1)},reset:function(){var t=this;this.currentStepIndex=this.initialStep+1,this.formData={},this.steps.forEach(function(e,n){if(e.fields){var i=t.$refs["stepForm".concat(n)];i&&i[0]&&i[0].resetForm()}})},getFormData:function(){return xt({},this.formData)},setFormData:function(t){this.formData=xt({},t)}}},gt,[],!1,null,"50ae12f7",null).exports;function Ot(t){return Ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ot(t)}function It(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function Ft(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?It(Object(n),!0).forEach(function(e){Pt(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):It(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function Pt(t,e,n){return(e=function(t){var e=function(t){if("object"!=Ot(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Ot(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ot(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Tt=function(){var t=this,e=t._self._c;return e("div",{class:t.formListClasses},[t.title||t.description||t.$slots.header?e("div",{staticClass:"jh-form-list-header"},[t._t("header",function(){return[t.title?e("h3",{staticClass:"text-h6 mb-2"},[t._v(t._s(t.title))]):t._e(),t._v(" "),t.description?e("p",{staticClass:"text-caption grey--text mb-0"},[t._v(t._s(t.description))]):t._e()]})],2):t._e(),t._v(" "),0===t.listData.length?e("div",{staticClass:"jh-form-list-empty"},[t._t("empty",function(){return[e("v-icon",{attrs:{size:"48",color:"grey lighten-1"}},[t._v("mdi-inbox")]),t._v(" "),e("p",{staticClass:"grey--text mt-2"},[t._v("暂无数据")])]})],2):"card"===t.mode?e("div",{ref:"listBody",staticClass:"jh-form-list-body jh-form-list-body--card"},t._l(t.listData,function(n,i){return e("v-card",t._b({key:n.__id__,staticClass:"jh-form-list-item jh-form-list-item--card mb-4",class:t.getItemClasses(i)},"v-card",t.cardProps,!1),[e("v-card-title",{staticClass:"jh-form-list-item-header py-2 px-4"},[e("div",{staticClass:"d-flex align-center"},[!t.sortable||t.disabled||t.readonly?t._e():e("v-icon",{staticClass:"jh-form-list-drag-handle mr-2",attrs:{small:""}},[t._v("\n            mdi-drag\n          ")]),t._v(" "),t.showIndex?e("span",{staticClass:"jh-form-list-item-index"},[t._v("\n            #"+t._s(i+1)+"\n          ")]):t._e()],1),t._v(" "),e("v-spacer"),t._v(" "),!t.showItemActions||t.disabled||t.readonly?t._e():e("div",{staticClass:"jh-form-list-item-actions"},[t._t("item-actions",function(){return[t.copyable?e("v-btn",{attrs:{icon:"",small:"",title:"复制"},on:{click:function(e){return t.copyItem(i)}}},[e("v-icon",{attrs:{small:""}},[t._v("mdi-content-copy")])],1):t._e(),t._v(" "),e("v-btn",{attrs:{icon:"",small:"",color:"error",disabled:t.listData.length<=t.min,title:"删除"},on:{click:function(e){return t.removeItem(i)}}},[e("v-icon",{attrs:{small:""}},[t._v("mdi-delete")])],1)]},{item:n,index:i,removeItem:t.removeItem,copyItem:t.copyItem})],2)],1),t._v(" "),e("v-divider"),t._v(" "),e("v-card-text",{staticClass:"pa-4"},[t._t("item",function(){return[e("jh-form",{ref:"itemForm_".concat(i),refInFor:!0,attrs:{fields:t.fields,"initial-data":n,layout:t.itemLayout,"label-width":t.itemLabelWidth,dense:t.dense,outlined:t.outlined,disabled:t.disabled,readonly:t.readonly,"hide-details":!1},on:{"field-change":function(e){return t.handleItemFieldChange(i,e)}},scopedSlots:t._u([t._l(t.fields,function(e){return{key:"field-".concat(e.key),fn:function(r){return[t._t("field-".concat(e.key),null,null,Ft(Ft({},r),{},{index:i,item:n}))]}}})],null,!0)})]},{item:n,index:i,fields:t.fields,updateItem:function(e,n){return t.updateItemField(i,e,n)}})],2),t._v(" "),t.validationErrors[i]?e("v-alert",{staticClass:"mx-4 mb-3",attrs:{type:"error",dense:"",text:""}},[t._v("\n        "+t._s(t.validationErrors[i])+"\n      ")]):t._e()],1)}),1):"table"===t.mode?e("div",{staticClass:"jh-form-list-body jh-form-list-body--table"},[e("v-simple-table",{attrs:{dense:t.dense}},[e("thead",[e("tr",[t.showIndex?e("th",{staticClass:"text-center",staticStyle:{width:"60px"}},[t._v("#")]):t._e(),t._v(" "),!t.sortable||t.disabled||t.readonly?t._e():e("th",{staticStyle:{width:"40px"}}),t._v(" "),t._l(t.fields,function(n){return e("th",{key:n.key},[n.required?e("span",{staticClass:"error--text mr-1"},[t._v("*")]):t._e(),t._v("\n            "+t._s(n.label)+"\n          ")])}),t._v(" "),!t.showItemActions||t.disabled||t.readonly?t._e():e("th",{staticClass:"text-center",style:{width:t.actionColumn.width+"px"}},[t._v("\n            操作\n          ")])],2)]),t._v(" "),e("tbody",{ref:"listBody"},t._l(t.listData,function(n,i){return e("tr",{key:n.__id__,class:t.getItemClasses(i)},[t.showIndex?e("td",{staticClass:"text-center"},[t._v(t._s(i+1))]):t._e(),t._v(" "),!t.sortable||t.disabled||t.readonly?t._e():e("td",{staticClass:"text-center"},[e("v-icon",{staticClass:"jh-form-list-drag-handle",attrs:{small:""}},[t._v("mdi-drag")])],1),t._v(" "),t._l(t.fields,function(r){return e("td",{key:r.key},[t._t("field-".concat(r.key),function(){return[e(t.getFieldComponent(r),t._b({tag:"component",attrs:{dense:t.dense,outlined:t.outlined,disabled:t.disabled||t.getFieldDisabled(r,n),readonly:t.readonly,placeholder:r.placeholder,"hide-details":!0},on:{input:function(e){return t.handleItemFieldChange(i,{key:r.key,value:e})}},model:{value:n[r.key],callback:function(e){t.$set(n,r.key,e)},expression:"item[field.key]"}},"component",t.getFieldProps(r),!1))]},{item:n,index:i,field:r,updateItem:function(e,n){return t.updateItemField(i,e,n)}})],2)}),t._v(" "),!t.showItemActions||t.disabled||t.readonly?t._e():e("td",{staticClass:"text-center"},[t._t("item-actions",function(){return[t.copyable?e("v-btn",{staticClass:"mr-1",attrs:{icon:"","x-small":"",title:"复制"},on:{click:function(e){return t.copyItem(i)}}},[e("v-icon",{attrs:{"x-small":""}},[t._v("mdi-content-copy")])],1):t._e(),t._v(" "),e("v-btn",{attrs:{icon:"","x-small":"",color:"error",disabled:t.listData.length<=t.min,title:"删除"},on:{click:function(e){return t.removeItem(i)}}},[e("v-icon",{attrs:{"x-small":""}},[t._v("mdi-delete")])],1)]},{item:n,index:i,removeItem:t.removeItem,copyItem:t.copyItem})],2)],2)}),0)])],1):"inline"===t.mode?e("div",{ref:"listBody",staticClass:"jh-form-list-body jh-form-list-body--inline d-flex flex-wrap align-center"},t._l(t.listData,function(n,i){return e("div",{key:n.__id__,staticClass:"jh-form-list-item jh-form-list-item--inline mr-2 mb-2",class:t.getItemClasses(i)},[t._t("item",function(){return[e("v-chip",{attrs:{close:!t.disabled&&!t.readonly&&t.listData.length>t.min,draggable:t.sortable&&!t.disabled&&!t.readonly},on:{"click:close":function(e){return t.removeItem(i)}}},[!t.sortable||t.disabled||t.readonly?t._e():e("v-icon",{staticClass:"jh-form-list-drag-handle mr-1",attrs:{"x-small":""}},[t._v("\n            mdi-drag\n          ")]),t._v("\n          "+t._s(t.getInlineItemDisplay(n))+"\n        ")],1)]},{item:n,index:i,fields:t.fields,updateItem:function(e,n){return t.updateItemField(i,e,n)}})],2)}),0):t._e(),t._v(" "),t.validationErrors._list?e("v-alert",{staticClass:"mt-3",attrs:{type:"error",dense:"",text:""}},[t._v("\n    "+t._s(t.validationErrors._list)+"\n  ")]):t._e(),t._v(" "),t.disabled||t.readonly?t._e():e("div",{staticClass:"jh-form-list-footer mt-4"},[t._t("footer",function(){return[e("v-btn",t._b({attrs:{color:t.addButtonProps.color||"primary",outlined:!1!==t.addButtonProps.outlined,disabled:!t.canAdd},on:{click:function(e){return t.addItem()}}},"v-btn",t.addButtonProps,!1),[e("v-icon",{attrs:{left:""}},[t._v("mdi-plus")]),t._v("\n        "+t._s(t.addButtonText)+"\n      ")],1)]},{addItem:t.addItem,canAdd:t.canAdd})],2)],1)};Tt._withStripped=!0;var $t=["__id__"],Mt=["__id__"],Lt=["__id__"];function Bt(t){return Bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bt(t)}function At(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return Rt(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rt(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){l=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw a}}}}function Rt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function Et(){var t,e,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",r=n.toStringTag||"@@toStringTag";function a(n,i,r,a){var s=i&&i.prototype instanceof l?i:l,c=Object.create(s.prototype);return Vt(c,"_invoke",function(n,i,r){var a,l,s,c=0,u=r||[],d=!1,f={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return a=e,l=0,s=t,f.n=n,o}};function p(n,i){for(l=n,s=i,e=0;!d&&c&&!r&&e<u.length;e++){var r,a=u[e],p=f.p,h=a[2];n>3?(r=h===i)&&(s=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=t):a[0]<=p&&((r=n<2&&p<a[1])?(l=0,f.v=i,f.n=a[1]):p<h&&(r=n<3||a[0]>i||i>h)&&(a[4]=n,a[5]=i,f.n=h,l=0))}if(r||n>1)return o;throw d=!0,i}return function(r,u,h){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&p(u,h),l=u,s=h;(e=l<2?t:s)||!d;){a||(l?l<3?(l>1&&(f.n=-1),p(l,s)):f.n=s:f.v=s);try{if(c=2,a){if(l||(r="next"),e=a[r]){if(!(e=e.call(a,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,l<2&&(l=0)}else 1===l&&(e=a.return)&&e.call(a),l<2&&(s=TypeError("The iterator does not provide a '"+r+"' method"),l=1);a=t}else if((e=(d=f.n<0)?s:n.call(i,f))!==o)break}catch(e){a=t,l=1,s=e}finally{c=1}}return{value:e,done:d}}}(n,r,a),!0),c}var o={};function l(){}function s(){}function c(){}e=Object.getPrototypeOf;var u=[][i]?e(e([][i]())):(Vt(e={},i,function(){return this}),e),d=c.prototype=l.prototype=Object.create(u);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,Vt(t,r,"GeneratorFunction")),t.prototype=Object.create(d),t}return s.prototype=c,Vt(d,"constructor",c),Vt(c,"constructor",s),s.displayName="GeneratorFunction",Vt(c,r,"GeneratorFunction"),Vt(d),Vt(d,r,"Generator"),Vt(d,i,function(){return this}),Vt(d,"toString",function(){return"[object Generator]"}),(Et=function(){return{w:a,m:f}})()}function Vt(t,e,n,i){var r=Object.defineProperty;try{r({},"",{})}catch(t){r=0}Vt=function(t,e,n,i){function a(e,n){Vt(t,e,function(t){return this._invoke(e,n,t)})}e?r?r(t,e,{value:n,enumerable:!i,configurable:!i,writable:!i}):t[e]=n:(a("next",0),a("throw",1),a("return",2))},Vt(t,e,n,i)}function zt(t,e,n,i,r,a,o){try{var l=t[a](o),s=l.value}catch(t){return void n(t)}l.done?e(s):Promise.resolve(s).then(i,r)}function Jt(t){return function(){var e=this,n=arguments;return new Promise(function(i,r){var a=t.apply(e,n);function o(t){zt(a,i,r,o,l,"next",t)}function l(t){zt(a,i,r,o,l,"throw",t)}o(void 0)})}}function Nt(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(-1!==e.indexOf(i))continue;n[i]=t[i]}return n}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],-1===e.indexOf(n)&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Gt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function Ut(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Gt(Object(n),!0).forEach(function(e){qt(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Gt(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function qt(t,e,n){return(e=function(t){var e=function(t){if("object"!=Bt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Bt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Bt(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const Kt=i({name:"JhFormList",components:{JhForm:at},props:{value:{type:Array,default:function(){return[]}},fields:{type:Array,default:function(){return[]}},mode:{type:String,default:"card",validator:function(t){return["card","table","inline"].includes(t)}},title:{type:String,default:""},description:{type:String,default:""},min:{type:Number,default:0},max:{type:Number,default:1/0},sortable:{type:Boolean,default:!1},copyable:{type:Boolean,default:!0},showIndex:{type:Boolean,default:!0},showItemActions:{type:Boolean,default:!0},defaultValue:{type:[Object,Function],default:function(){return{}}},addButtonText:{type:String,default:"添加"},addButtonProps:{type:Object,default:function(){return{}}},deleteConfirm:{type:Boolean,default:!1},deleteConfirmText:{type:String,default:"确定要删除这一项吗？"},itemLayout:{type:String,default:"horizontal"},itemLabelWidth:{type:[Number,String],default:"auto"},dense:{type:Boolean,default:!0},outlined:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},rules:{type:Array,default:function(){return[]}},actionColumn:{type:Object,default:function(){return{width:100}}},cardProps:{type:Object,default:function(){return{}}},itemClass:{type:String,default:""},inlineDisplayKey:{type:String,default:""}},data:function(){return{listData:[],validationErrors:{},sortableInstance:null}},computed:{formListClasses:function(){return qt(qt(qt({"jh-form-list":!0},"jh-form-list--".concat(this.mode),!0),"jh-form-list--disabled",this.disabled),"jh-form-list--readonly",this.readonly)},canAdd:function(){return this.listData.length<this.max}},watch:{value:{handler:function(t){this.initListData()},immediate:!0,deep:!0},sortable:function(t){var e=this;t?this.$nextTick(function(){e.initSortable()}):this.destroySortable()}},mounted:function(){this.sortable&&this.initSortable()},beforeDestroy:function(){this.destroySortable()},methods:{generateItemId:function(){return"item_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9))},initListData:function(){var t=this;this.listData=(this.value||[]).map(function(e){return Ut(Ut({},e),{},{__id__:e.__id__||t.generateItemId()})})},getCleanData:function(){return this.listData.map(function(t){return t.__id__,Nt(t,$t)})},addItem:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.listData.length>=this.max)this.$emit("max-limit",this.max);else{var n="function"==typeof this.defaultValue?this.defaultValue(this.listData.length):Ut({},this.defaultValue),i=Ut(Ut(Ut({},n),t),{},{__id__:this.generateItemId()});null!==e&&e>=0&&e<=this.listData.length?this.listData.splice(e,0,i):this.listData.push(i),this.emitInput(),this.$emit("add",this.getCleanItem(i),null!=e?e:this.listData.length-1)}},removeItem:function(t){var e=this;return Jt(Et().m(function n(){var i;return Et().w(function(n){for(;;)switch(n.n){case 0:if(!(e.listData.length<=e.min)){n.n=1;break}return e.$emit("min-limit",e.min),n.a(2);case 1:if(!e.deleteConfirm){n.n=3;break}return n.n=2,e.confirm(e.deleteConfirmText);case 2:if(n.v){n.n=3;break}return n.a(2);case 3:i=e.listData[t],e.listData.splice(t,1),delete e.validationErrors[t],e.emitInput(),e.$emit("remove",e.getCleanItem(i),t);case 4:return n.a(2)}},n)}))()},copyItem:function(t){if(this.canAdd){var e=this.listData[t],n=(e.__id__,Ut(Ut({},Nt(e,Mt)),{},{__id__:this.generateItemId()}));this.listData.splice(t+1,0,n),this.emitInput(),this.$emit("copy",this.getCleanItem(e),this.getCleanItem(n))}else this.$emit("max-limit",this.max)},moveItem:function(t,e){var n=this.listData.splice(t,1)[0];this.listData.splice(e,0,n),this.emitInput(),this.$emit("sort",t,e)},updateItemField:function(t,e,n){this.listData[t]&&(this.$set(this.listData[t],e,n),this.emitInput(),this.$emit("item-change",t,this.getCleanItem(this.listData[t])))},handleItemFieldChange:function(t,e){var n=e.key,i=e.value;this.updateItemField(t,n,i)},getCleanItem:function(t){return t.__id__,Nt(t,Lt)},emitInput:function(){this.$emit("input",this.getCleanData()),this.$emit("change",this.getCleanData())},getItemClasses:function(t){var e=[];return this.itemClass&&e.push(this.itemClass),this.validationErrors[t]&&e.push("jh-form-list-item--error"),e.join(" ")},getFieldComponent:function(t){return{text:"v-text-field",textarea:"v-textarea",number:"v-text-field",select:"v-select",autocomplete:"v-autocomplete",switch:"v-switch",checkbox:"v-checkbox"}[t.type]||"v-text-field"},getFieldProps:function(t){var e=Ut({},t.props);return"select"!==t.type&&"autocomplete"!==t.type||(e.items=t.options||[],e.itemText=t.itemText||"text",e.itemValue=t.itemValue||"value"),"number"===t.type&&(e.type="number"),e},getFieldDisabled:function(t,e){return"function"==typeof t.disabled?t.disabled(e):t.disabled||!1},getInlineItemDisplay:function(t){if(this.inlineDisplayKey)return t[this.inlineDisplayKey]||"-";var e=this.fields[0];return e&&t[e.key]||"-"},initSortable:function(){var t=this;this.sortable&&!this.sortableInstance&&this.$nextTick(function(){var e=t.$refs.listBody;e&&("undefined"!=typeof window&&window.Sortable?t.sortableInstance=window.Sortable.create(e,{animation:150,handle:".jh-form-list-drag-handle",ghostClass:"jh-form-list-ghost",dragClass:"jh-form-list-dragging",onEnd:function(e){var n=e.oldIndex,i=e.newIndex;n!==i&&t.moveItem(n,i)}}):console.warn("JhFormList: sortable 功能需要引入 SortableJS 库"))})},destroySortable:function(){this.sortableInstance&&(this.sortableInstance.destroy(),this.sortableInstance=null)},validate:function(){var t=this;return Jt(Et().m(function e(){var n,i,r,a,o,l,s,c;return Et().w(function(e){for(;;)switch(e.p=e.n){case 0:if(n={},i=!0,!t.rules||!t.rules.length){e.n=7;break}r=At(t.rules),e.p=1,r.s();case 2:if((a=r.n()).done){e.n=4;break}if(o=a.value,"string"!=typeof(l=o(t.getCleanData()))){e.n=3;break}return n._list=l,i=!1,e.a(3,4);case 3:e.n=2;break;case 4:e.n=6;break;case 5:e.p=5,c=e.v,r.e(c);case 6:return e.p=6,r.f(),e.f(6);case 7:s=0;case 8:if(!(s<t.listData.length)){e.n=11;break}return e.n=9,t.validateItem(s);case 9:e.v||(i=!1,n[s]="该项存在验证错误");case 10:s++,e.n=8;break;case 11:return t.validationErrors=n,t.$emit("validate",i,n),e.a(2,i)}},e,null,[[1,5,6,7]])}))()},validateItem:function(t){var e=this;return Jt(Et().m(function n(){var i;return Et().w(function(n){for(;;)switch(n.n){case 0:if(!(i=e.$refs["itemForm_".concat(t)])||!i[0]){n.n=2;break}return n.n=1,i[0].validate();case 1:return n.a(2,n.v);case 2:return n.a(2,!0)}},n)}))()},resetValidation:function(){var t=this;this.validationErrors={},this.listData.forEach(function(e,n){var i=t.$refs["itemForm_".concat(n)];i&&i[0]&&i[0].resetValidation()})},reset:function(){this.listData=[],this.validationErrors={},this.emitInput()},getItems:function(){return this.getCleanData()},setItems:function(t){var e=this;this.listData=t.map(function(t){return Ut(Ut({},t),{},{__id__:t.__id__||e.generateItemId()})}),this.emitInput()},getItemValue:function(t){return this.listData[t]?this.getCleanItem(this.listData[t]):null},setItemValue:function(t,e){this.listData[t]&&(this.$set(this.listData,t,Ut(Ut({},e),{},{__id__:this.listData[t].__id__})),this.emitInput())},confirm:function(t){return new Promise(function(e){e(window.confirm(t))})}}},Tt,[],!1,null,"668bef40",null).exports;var Ht=function(){var t=this,e=t._self._c;return e("v-app",[e("v-container",{staticClass:"pa-0",attrs:{fluid:""}},[e("div",{staticClass:"w-full"},[e("div",{staticClass:"grid grid-cols-[repeat(auto-fill,minmax(100px,1fr))] gap-4"},[t.value&&t.isString(t.value)?e("div",{staticClass:"relative aspect-square rounded overflow-hidden"},[e("div",{staticClass:"w-full h-full flex flex-col items-center justify-center p-2 bg-gray-100"},[t.isImage(t.value)?e("img",{staticClass:"max-w-full max-h-full object-contain",attrs:{src:t.getImageUrl(t.value)}}):e("v-icon",{staticClass:"text-gray-500",attrs:{size:"40"}},[t._v("mdi-file-document-outline")])],1),t._v(" "),t.readonly?t._e():e("v-btn",{staticClass:"absolute top-1 right-1 !bg-black/50",attrs:{icon:"","x-small":""},on:{click:t.handleRemoveSingleFile}},[e("v-icon",{attrs:{small:"",color:"white"}},[t._v("mdi-close")])],1)],1):t.value&&Array.isArray(t.value)?t._l(t.value,function(n,i){return e("div",{key:i,staticClass:"relative aspect-square border border-gray-200 rounded overflow-hidden"},[t.isString(n)?e("div",{staticClass:"w-full h-full flex flex-col items-center justify-center p-2 bg-gray-100"},[t.isImage(n)?e("img",{staticClass:"max-w-full max-h-full object-contain",attrs:{src:t.getImageUrl(n)}}):e("v-icon",{staticClass:"text-gray-500",attrs:{size:"40"}},[t._v("mdi-file-document-outline")])],1):e("div",{staticClass:"w-full h-full flex flex-col items-center justify-center p-2 bg-gray-100"},[t.isImage(n)?e("img",{staticClass:"max-w-full max-h-full object-contain",attrs:{src:t.getObjectUrl(n)}}):e("v-icon",{staticClass:"text-gray-500",attrs:{size:"40"}},[t._v("mdi-file-document-outline")])],1),t._v(" "),t.readonly?t._e():e("v-btn",{staticClass:"absolute top-1 right-1 !bg-black/50",attrs:{icon:"","x-small":""},on:{click:function(e){return t.removeFile(i)}}},[e("v-icon",{attrs:{small:"",color:"white"}},[t._v("mdi-close")])],1),t._v(" "),e("div",{staticClass:"absolute top-0 left-2 text-xs bg-green-500 text-white px-1 rounded-b-sm"},[t._v("\n            "+t._s(t.getFileExtension(n))+"\n          ")])],1)}):t._e(),t._v(" "),t.isCanUpload?e("div",{staticClass:"aspect-square border-2 border-dashed border-gray-200 rounded flex items-center justify-center cursor-pointer transition-all hover:border-blue-500 hover:bg-blue-50",on:{click:t.triggerFileInput}},[e("input",{ref:"fileInput",staticClass:"hidden",attrs:{type:"file",multiple:t.multiple,accept:t.accept},on:{change:t.handleFileChange}}),t._v(" "),e("v-icon",{staticClass:"text-gray-500 transition-all group-hover:text-blue-500",attrs:{size:"40"}},[t._v("mdi-plus")])],1):t._e()],2),t._v(" "),t.errorMessage?e("div",{staticClass:"text-red-500 text-xs mt-2 pl-0.5"},[t._v("\n        "+t._s(t.errorMessage)+"\n      ")]):t._e(),t._v(" "),t.isShowUploadLimit?e("div",{staticClass:"text-gray-500 text-xs mt-2 pl-0.5"},[t._v("\n        最多可上传 "+t._s(t.maxFiles)+" 个文件 (已上传 "+t._s(t.isString(t.value)?1:(t.value||[]).length)+" 个)\n      ")]):t._e()])])],1)};function Wt(t){return Wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wt(t)}function Xt(t){if(null!=t){var e=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}throw new TypeError(Wt(t)+" is not iterable")}function Yt(){var t,e,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",r=n.toStringTag||"@@toStringTag";function a(n,i,r,a){var s=i&&i.prototype instanceof l?i:l,c=Object.create(s.prototype);return Qt(c,"_invoke",function(n,i,r){var a,l,s,c=0,u=r||[],d=!1,f={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return a=e,l=0,s=t,f.n=n,o}};function p(n,i){for(l=n,s=i,e=0;!d&&c&&!r&&e<u.length;e++){var r,a=u[e],p=f.p,h=a[2];n>3?(r=h===i)&&(s=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=t):a[0]<=p&&((r=n<2&&p<a[1])?(l=0,f.v=i,f.n=a[1]):p<h&&(r=n<3||a[0]>i||i>h)&&(a[4]=n,a[5]=i,f.n=h,l=0))}if(r||n>1)return o;throw d=!0,i}return function(r,u,h){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&p(u,h),l=u,s=h;(e=l<2?t:s)||!d;){a||(l?l<3?(l>1&&(f.n=-1),p(l,s)):f.n=s:f.v=s);try{if(c=2,a){if(l||(r="next"),e=a[r]){if(!(e=e.call(a,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,l<2&&(l=0)}else 1===l&&(e=a.return)&&e.call(a),l<2&&(s=TypeError("The iterator does not provide a '"+r+"' method"),l=1);a=t}else if((e=(d=f.n<0)?s:n.call(i,f))!==o)break}catch(e){a=t,l=1,s=e}finally{c=1}}return{value:e,done:d}}}(n,r,a),!0),c}var o={};function l(){}function s(){}function c(){}e=Object.getPrototypeOf;var u=[][i]?e(e([][i]())):(Qt(e={},i,function(){return this}),e),d=c.prototype=l.prototype=Object.create(u);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,Qt(t,r,"GeneratorFunction")),t.prototype=Object.create(d),t}return s.prototype=c,Qt(d,"constructor",c),Qt(c,"constructor",s),s.displayName="GeneratorFunction",Qt(c,r,"GeneratorFunction"),Qt(d),Qt(d,r,"Generator"),Qt(d,i,function(){return this}),Qt(d,"toString",function(){return"[object Generator]"}),(Yt=function(){return{w:a,m:f}})()}function Qt(t,e,n,i){var r=Object.defineProperty;try{r({},"",{})}catch(t){r=0}Qt=function(t,e,n,i){function a(e,n){Qt(t,e,function(t){return this._invoke(e,n,t)})}e?r?r(t,e,{value:n,enumerable:!i,configurable:!i,writable:!i}):t[e]=n:(a("next",0),a("throw",1),a("return",2))},Qt(t,e,n,i)}function Zt(t){return function(t){if(Array.isArray(t))return ee(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||te(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(t,e){if(t){if("string"==typeof t)return ee(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ee(t,e):void 0}}function ee(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function ne(t,e,n,i,r,a,o){try{var l=t[a](o),s=l.value}catch(t){return void n(t)}l.done?e(s):Promise.resolve(s).then(i,r)}Ht._withStripped=!0;const ie=i({name:"JhFileInput",props:{value:{type:[Array,String],default:function(){return[]}},maxFiles:{type:Number,default:0},accept:{type:String,default:"*/*"},multiple:{type:Boolean,default:!1},rules:{type:Array,default:function(){return[]}},readonly:{type:Boolean,default:!1},uploadPrefix:{type:String,default:"/upload/"}},data:function(){return{errorMessage:""}},watch:{value:{handler:function(){this.validate()},deep:!0}},computed:{isCanUpload:function(){return!this.readonly&&(this.multiple?!this.maxFiles||(this.value||[]).length<this.maxFiles:(this.value||[]).length<1)},isShowUploadLimit:function(){return!this.readonly&&this.multiple&&this.maxFiles>0}},methods:{isString:function(t){return"string"==typeof t},triggerFileInput:function(){this.$refs.fileInput.click()},handleFileChange:function(t){var e,n=this;return(e=Yt().m(function e(){var i,r,a,o,l;return Yt().w(function(e){for(;;)switch(e.n){case 0:if(i=Array.from(t.target.files),!(n.maxFiles&&(n.value||[]).length+i.length>n.maxFiles)){e.n=1;break}return n.errorMessage="最多只能上传 ".concat(n.maxFiles," 个文件"),e.a(2);case 1:r=Zt(n.value||[]),a=Yt().m(function t(){var e,i;return Yt().w(function(t){for(;;)switch(t.p=t.n){case 0:if(e=l[o],t.p=1,!r.some(function(t){return t.name===e.name&&t.size===e.size})){t.n=2;break}return n.errorMessage="文件 ".concat(e.name," 已存在"),t.a(2,1);case 2:r.push(e),t.n=4;break;case 3:t.p=3,i=t.v,console.error("Upload error:",i),n.errorMessage="上传文件 ".concat(e.name," 失败");case 4:return t.a(2)}},t,null,[[1,3]])}),o=0,l=i;case 2:if(!(o<l.length)){e.n=5;break}return e.d(Xt(a()),3);case 3:if(!e.v){e.n=4;break}return e.a(3,4);case 4:o++,e.n=2;break;case 5:n.$emit("input",r),n.$emit("change",r),n.errorMessage||(n.errorMessage=""),t.target.value="";case 6:return e.a(2)}},e)}),function(){var t=this,n=arguments;return new Promise(function(i,r){var a=e.apply(t,n);function o(t){ne(a,i,r,o,l,"next",t)}function l(t){ne(a,i,r,o,l,"throw",t)}o(void 0)})})()},handleRemoveSingleFile:function(){this.$emit("input",[]),this.$emit("change",[])},removeFile:function(t){var e=Zt(this.value);e.splice(t,1),this.$emit("input",e),this.$emit("change",e)},isImage:function(t){return this.isString(t)?["jpg","jpeg","png","gif","bmp","webp","svg"].includes(t.split(".").pop().toLowerCase()):!!t.type&&t.type.startsWith("image/")},getImageUrl:function(t){return"".concat(this.uploadPrefix).concat(t)},getObjectUrl:function(t){return URL.createObjectURL(t)},getFileExtension:function(t){return this.isString(t)?t.split(".").pop():t.name.split(".").pop()},validate:function(){this.errorMessage="";var t,e=function(t){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=te(t))){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,o=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return a=t.done,t},e:function(t){o=!0,r=t},f:function(){try{a||null==e.return||e.return()}finally{if(o)throw r}}}}(this.rules);try{for(e.s();!(t=e.n()).done;){var n=(0,t.value)(this.value);if(!0!==n)return this.errorMessage=n,!1}}catch(t){e.e(t)}finally{e.f()}return!0}}},Ht,[],!1,null,"708918e6",null).exports;var re=function(){var t=this._self._c;return t("v-app",[t("v-container",{staticClass:"pa-0",attrs:{fluid:""}},[t("div",[t("div",{staticClass:"jsoneditor-vue",style:{height:this.height}})])])],1)};function ae(t){return ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ae(t)}function oe(){var t,e,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",r=n.toStringTag||"@@toStringTag";function a(n,i,r,a){var s=i&&i.prototype instanceof l?i:l,c=Object.create(s.prototype);return le(c,"_invoke",function(n,i,r){var a,l,s,c=0,u=r||[],d=!1,f={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return a=e,l=0,s=t,f.n=n,o}};function p(n,i){for(l=n,s=i,e=0;!d&&c&&!r&&e<u.length;e++){var r,a=u[e],p=f.p,h=a[2];n>3?(r=h===i)&&(s=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=t):a[0]<=p&&((r=n<2&&p<a[1])?(l=0,f.v=i,f.n=a[1]):p<h&&(r=n<3||a[0]>i||i>h)&&(a[4]=n,a[5]=i,f.n=h,l=0))}if(r||n>1)return o;throw d=!0,i}return function(r,u,h){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&p(u,h),l=u,s=h;(e=l<2?t:s)||!d;){a||(l?l<3?(l>1&&(f.n=-1),p(l,s)):f.n=s:f.v=s);try{if(c=2,a){if(l||(r="next"),e=a[r]){if(!(e=e.call(a,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,l<2&&(l=0)}else 1===l&&(e=a.return)&&e.call(a),l<2&&(s=TypeError("The iterator does not provide a '"+r+"' method"),l=1);a=t}else if((e=(d=f.n<0)?s:n.call(i,f))!==o)break}catch(e){a=t,l=1,s=e}finally{c=1}}return{value:e,done:d}}}(n,r,a),!0),c}var o={};function l(){}function s(){}function c(){}e=Object.getPrototypeOf;var u=[][i]?e(e([][i]())):(le(e={},i,function(){return this}),e),d=c.prototype=l.prototype=Object.create(u);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,le(t,r,"GeneratorFunction")),t.prototype=Object.create(d),t}return s.prototype=c,le(d,"constructor",c),le(c,"constructor",s),s.displayName="GeneratorFunction",le(c,r,"GeneratorFunction"),le(d),le(d,r,"Generator"),le(d,i,function(){return this}),le(d,"toString",function(){return"[object Generator]"}),(oe=function(){return{w:a,m:f}})()}function le(t,e,n,i){var r=Object.defineProperty;try{r({},"",{})}catch(t){r=0}le=function(t,e,n,i){function a(e,n){le(t,e,function(t){return this._invoke(e,n,t)})}e?r?r(t,e,{value:n,enumerable:!i,configurable:!i,writable:!i}):t[e]=n:(a("next",0),a("throw",1),a("return",2))},le(t,e,n,i)}function se(t,e,n,i,r,a,o){try{var l=t[a](o),s=l.value}catch(t){return void n(t)}l.done?e(s):Promise.resolve(s).then(i,r)}function ce(t){return function(){var e=this,n=arguments;return new Promise(function(i,r){var a=t.apply(e,n);function o(t){se(a,i,r,o,l,"next",t)}function l(t){se(a,i,r,o,l,"throw",t)}o(void 0)})}}re._withStripped=!0;const ue=i({name:"JhJsonEditor",props:{value:{type:[String,Number,Object,Array],default:function(){return{}}},expandedOnStart:{type:Boolean,default:!1},mode:{type:String,default:"code"},modes:{type:Array,default:function(){return["tree","code","form","text","view"]}},height:{type:String,default:"calc(100vh - 240px)"}},watch:{value:{immediate:!0,handler:function(t){var e=this;return ce(oe().m(function t(){return oe().w(function(t){for(;;)switch(t.n){case 0:if(e.internalChange){t.n=2;break}return t.n=1,e.setEditor();case 1:e.error=!1,e.expandAll();case 2:return t.a(2)}},t)}))()},deep:!0}},data:function(){return{editor:null,error:!1,internalChange:!1,expandedModes:["tree","view","form"]}},computed:{valueType:function(){return ae(this.value)},formatValue:{get:function(){if("string"===this.valueType&&this.value)try{return JSON.parse(this.value)}catch(t){return this.value}return this.value},set:function(t){"string"!==this.valueType&&this.value?this.value=t:this.value=JSON.stringify(t)}}},mounted:function(){this.$emit("has-error",!1),window.JSONEditor?this.init():console.warn("JSONEditor is not loaded. Please include JSONEditor library.")},beforeDestroy:function(){this.editor&&this.editor.destroy()},methods:{init:function(){var t=this,e={mode:this.mode,modes:this.modes,themeColor:"#4caf50",onChange:function(){try{var e=t.editor.get();t.formatValue=e,t.error=!1,t.$emit("has-error",!1),t.internalChange=!0,t.$emit("input",t.value),t.$nextTick(function(){t.internalChange=!1})}catch(e){t.error=!0,t.$emit("has-error",!0)}},onModeChange:function(){t.expandAll()}};window.JSONEditor&&(this.editor=new window.JSONEditor(t.$el.querySelector(".jsoneditor-vue"),e,t.formatValue))},expandAll:function(){this.expandedOnStart&&this.editor&&this.expandedModes.includes(this.editor.getMode())&&this.editor.expandAll()},setEditor:function(){var t=this;return ce(oe().m(function e(){return oe().w(function(e){for(;;)switch(e.n){case 0:t.editor&&t.editor.set(t.formatValue);case 1:return e.a(2)}},e)}))()}}},re,[],!1,null,"2abc02e7",null).exports;var de=function(){var t=this,e=t._self._c;return e("v-app",[e("v-container",{staticClass:"pa-0",attrs:{fluid:""}},[e("div",[e("div",{style:"overflow-y: auto; height: ".concat(t.height)},[e("div",{attrs:{id:t.editorId}},[e("textarea",{staticStyle:{display:"none"}},[t._v(t._s(t.value))])])])])])],1)};de._withStripped=!0;const fe=i({name:"JhMarkdownEditor",props:{value:{type:String,default:""},placeholder:{type:String,default:"请输入内容..."},height:{type:String,default:"calc(100vh - 400px)"},width:{type:Number,default:100},editorPath:{type:String,default:"/public/plugins/editor.md/lib/"},toolbarIcons:{type:Array,default:function(){return["undo","redo","|","watch","preview","|","h1","h2","h3","h4","h5","bold","del","italic","quote","mark","list-ul","list-ol","hr","link","|","image","code","table"]}},readonly:{type:Boolean,default:!1}},data:function(){return{editor:null,isMDChange:!1,editorId:"markdown-editor-".concat(Math.random().toString(36).substr(2,9))}},mounted:function(){var t=this;this.$nextTick(function(){t.initEditorMd()})},beforeDestroy:function(){this.editor&&(this.editor=null)},watch:{value:function(t){this.editor&&!this.isMDChange&&this.editor.setMarkdown(t),this.isMDChange=!1}},methods:{initEditorMd:function(){var t=this,e=document.getElementById(this.editorId);e?window.editormd?(e.innerHTML='<textarea style="display:none;">'.concat(this.value||"","</textarea>"),t.editor=window.editormd(this.editorId,{watch:!this.readonly,saveHTMLToTextarea:!0,path:this.editorPath,toolbarIcons:this.toolbarIcons,placeholder:this.placeholder,readOnly:this.readonly,onchange:function(){t.handleMDChange()}})):console.warn("Editor.md is not loaded. Please include Editor.md library."):console.warn("Editor container not found")},handleMDChange:function(){this.isMDChange=!0;var t=this.editor.getMarkdown();if(this.$emit("input",t),this.$emit("change",t),this.editor.getPreviewedHTML){var e=this.editor.getPreviewedHTML();this.$emit("content-for-seo",e)}},getMarkdown:function(){return this.editor?this.editor.getMarkdown():this.value},setMarkdown:function(t){this.editor&&this.editor.setMarkdown(t)},insertValue:function(t){this.editor&&this.editor.insertValue(t)}}},de,[],!1,null,"71c9380c",null).exports;var pe=function(){var t=this,e=t._self._c;return e("v-app",[e("v-container",{attrs:{fluid:""}},[e("v-row",{staticClass:"draggable-container"},[t.showComponentLibrary?e("v-col",{attrs:{cols:"12",md:"3"}},[e("div",{staticClass:"title"},[t._v(t._s(t.componentLibraryTitle))]),t._v(" "),t.isDraggableLoaded?e("draggable",{attrs:{group:{name:t.groupName,pull:"clone",put:!1},animation:t.animation,"drag-class":t.dragClass,"ghost-class":t.ghostClass,"chosen-class":t.chosenClass},on:{start:t.handleStart,end:t.handleEnd},model:{value:t.componentsInternal,callback:function(e){t.componentsInternal=e},expression:"componentsInternal"}},[e("transition-group",t._l(t.componentsInternal,function(n){return e("div",{key:n.id,staticClass:"draggable-item"},[t._v("\n              "+t._s(n.name)+"\n            ")])}),0)],1):t._e()],1):t._e(),t._v(" "),e("v-col",{attrs:{cols:(t.showComponentLibrary,12),md:t.showComponentLibrary?9:12}},[t.isDraggableLoaded?e("draggable",{attrs:{group:t.groupName,animation:t.animation,"drag-class":t.dragClass,"ghost-class":t.ghostClass,"chosen-class":t.chosenClass},on:{start:t.handleStart,end:t.handleEnd},model:{value:t.designAreaInternal,callback:function(e){t.designAreaInternal=e},expression:"designAreaInternal"}},[e("transition-group",t._l(t.designAreaInternal,function(n){return e("div",{key:n.id,staticClass:"draggable-item"},[t._t("item",function(){return[t._v("\n                "+t._s(n.name)+"\n              ")]},{item:n})],2)}),0)],1):t._e(),t._v(" "),e("v-row",{directives:[{name:"show",rawName:"v-show",value:!t.designAreaInternal.length,expression:"!designAreaInternal.length"}],staticClass:"ma-0 pa-0",staticStyle:{width:"100%"}},[e("v-card",{staticClass:"ma-12",staticStyle:{border:"1px dashed #333333"},attrs:{height:"100",width:"100%",color:"#f5f8fa"}},[t.isDraggableLoaded?e("draggable",{staticClass:"d-flex align-center justify-center",staticStyle:{height:"100%"},attrs:{group:t.groupName,animation:t.animation,"drag-class":t.dragClass,"ghost-class":t.ghostClass},model:{value:t.designAreaInternal,callback:function(e){t.designAreaInternal=e},expression:"designAreaInternal"}},[e("v-card-text",{staticClass:"text-center title draggable-placeholder"},[t._v("\n                "+t._s(t.emptyPlaceholder)+"\n              ")])],1):t._e()],1)],1)],1)],1)],1)],1)};function he(t){return function(t){if(Array.isArray(t))return me(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return me(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?me(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function me(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}pe._withStripped=!0;const ve=i({name:"JhDraggable",props:{components:{type:Array,default:function(){return[]}},value:{type:Array,default:function(){return[]}},showComponentLibrary:{type:Boolean,default:!0},componentLibraryTitle:{type:String,default:"组件"},groupName:{type:String,default:"draggable-group"},animation:{type:Number,default:300},dragClass:{type:String,default:"jh-drag-class"},ghostClass:{type:String,default:"jh-ghost-class"},chosenClass:{type:String,default:"jh-chosen-class"},emptyPlaceholder:{type:String,default:"从左侧拖入或点选组件进行内容设计"}},data:function(){return{drag:!1,componentsInternal:[],designAreaInternal:[],isDraggableLoaded:!1}},watch:{components:{handler:function(t){this.componentsInternal=he(t)},immediate:!0,deep:!0},value:{handler:function(t){this.designAreaInternal=he(t)},immediate:!0,deep:!0},designAreaInternal:{handler:function(t){this.$emit("input",t),this.$emit("change",t)},deep:!0}},mounted:function(){this.checkDraggableLibrary()},methods:{checkDraggableLibrary:function(){this.$options.components.draggable||window.vuedraggable?this.isDraggableLoaded=!0:(console.warn("Vue Draggable library is not loaded. Please include vuedraggable library."),this.isDraggableLoaded=!1)},handleStart:function(){this.drag=!0,this.$emit("start")},handleEnd:function(){this.drag=!1,this.ensureUniqueIds(),this.$emit("end")},ensureUniqueIds:function(){var t=this,e=[].concat(he(this.componentsInternal.map(function(t){return t.id})),he(this.designAreaInternal.map(function(t){return t.id}))),n=Math.max.apply(Math,he(e));this.designAreaInternal.forEach(function(e){t.componentsInternal.some(function(t){return t.id===e.id})&&(e.id=++n)})}}},pe,[],!1,null,"a384b1a0",null).exports;var ye=function(){var t=this,e=t._self._c;return e("v-app",[e("v-container",{attrs:{fluid:""}},[e("v-card",{staticClass:"px-4"},[e("v-row",{staticClass:"ma-0 pt-0 d-flex"},[t.showCreateButton?e("v-btn",{staticClass:"elevation-0 mr-2",attrs:{color:"success",small:"",dark:""},on:{click:t.handleCreateClick}},[t._v("\n          新增附件\n        ")]):t._e(),t._v(" "),e("v-spacer"),t._v(" "),e("v-col",{staticClass:"pa-0 pt-2 pt-sm-0",attrs:{cols:"12",sm:"6",md:"3",xl:"3"}},[e("v-text-field",{staticClass:"jh-v-input",attrs:{color:"success",prefix:"表格过滤：",dense:"",filled:"","single-line":"","hide-details":""},model:{value:t.searchInput,callback:function(e){t.searchInput=e},expression:"searchInput"}})],1)],1),t._v(" "),t._l(t.groupedAttachments,function(n,i){return e("v-card",{key:i,staticClass:"my-2",attrs:{outlined:""}},[e("v-card-title",{staticClass:"pl-4",staticStyle:{"font-size":"20px","font-weight":"500"}},[t._v("\n          "+t._s(i)+"\n        ")]),t._v(" "),e("v-card-text",{staticStyle:{display:"flex","flex-flow":"wrap"}},t._l(n,function(n){return e("v-card",{key:n.id,staticClass:"mr-2 mb-2",attrs:{width:"200px",outlined:""}},[e("v-img",{staticClass:"white--text align-end",attrs:{src:t.getPreviewUrl(n),gradient:"to bottom, rgba(0,0,0,.1), rgba(0,0,0,.5)",height:"120px"}},[e("v-card-title",{staticClass:"text-subtitle-2"},[t._v(t._s(n.filename))])],1),t._v(" "),e("v-card-actions",[e("v-chip",{attrs:{small:""}},[t._v(t._s(n.fileSubtype||t.getFileType(n.filename)))]),t._v(" "),e("v-spacer"),t._v(" "),t.isImage(n.downloadPath||n.filename)?e("v-btn",{attrs:{icon:"",small:"",title:"预览"},on:{click:function(e){return t.handlePreview(n)}}},[e("v-icon",[t._v("mdi-eye")])],1):t._e(),t._v(" "),n.downloadPath?e("v-btn",{attrs:{icon:"",small:"",title:"下载"},on:{click:function(e){return t.handleDownload(n)}}},[e("v-icon",[t._v("mdi-download")])],1):t._e(),t._v(" "),t.readonly?t._e():e("v-btn",{attrs:{icon:"",small:"",title:"删除"},on:{click:function(e){return t.handleDelete(n)}}},[e("v-icon",[t._v("mdi-trash-can-outline")])],1)],1)],1)}),1)],1)}),t._v(" "),e("v-overlay",{attrs:{absolute:"",value:t.loading,color:"#fff"}},[e("v-progress-circular",{attrs:{color:"success",indeterminate:"",size:"32"}})],1),t._v(" "),t.loading||0!==t.filteredAttachments.length?t._e():e("div",{staticClass:"mt-5 text-center"},[t._v("\n        暂无附件\n      ")])],2),t._v(" "),e("v-dialog",{attrs:{"max-width":"90vw"},model:{value:t.previewDialog,callback:function(e){t.previewDialog=e},expression:"previewDialog"}},[e("v-card",[e("v-card-title",[t._v("\n          "+t._s(t.previewItem?t.previewItem.filename:"")+"\n          "),e("v-spacer"),t._v(" "),e("v-btn",{attrs:{icon:""},on:{click:function(e){t.previewDialog=!1}}},[e("v-icon",[t._v("mdi-close")])],1)],1),t._v(" "),e("v-card-text",{staticClass:"pa-0"},[t.previewItem?e("v-img",{attrs:{src:t.getPreviewUrl(t.previewItem),contain:"","max-height":"70vh"}}):t._e()],1)],1)],1)],1)],1)};ye._withStripped=!0;const ge=i({name:"JhTableAttachment",props:{attachments:{type:Array,default:function(){return[]}},showCreateButton:{type:Boolean,default:!0},readonly:{type:Boolean,default:!1},groupBy:{type:String,default:"fileType"},previewPrefix:{type:String,default:"/upload/"},loading:{type:Boolean,default:!1}},data:function(){return{searchInput:"",previewDialog:!1,previewItem:null}},computed:{filteredAttachments:function(){var t=this;return this.searchInput?this.attachments.filter(function(e){return e.filename.toLowerCase().includes(t.searchInput.toLowerCase())||e.fileType&&e.fileType.toLowerCase().includes(t.searchInput.toLowerCase())}):this.attachments},groupedAttachments:function(){var t=this,e={};return this.filteredAttachments.forEach(function(n){var i=n[t.groupBy]||"未分类";e[i]||(e[i]=[]),e[i].push(n)}),e}},methods:{getPreviewUrl:function(t){return t.downloadPath?"".concat(this.previewPrefix).concat(t.downloadPath):"/placeholder-image.jpg"},isImage:function(t){return!!t&&/\.(gif|jpg|jpeg|png|webp|svg|bmp)$/i.test(t)},getFileType:function(t){if(!t)return"";var e=t.split(".").pop();return e?e.toLowerCase():""},handleCreateClick:function(){this.$emit("create-click")},handlePreview:function(t){this.previewItem=t,this.previewDialog=!0,this.$emit("preview",t)},handleDownload:function(t){if(this.$emit("download",t),t.downloadPath){var e=document.createElement("a");e.href=this.getPreviewUrl(t),e.download=t.filename,e.click()}},handleDelete:function(t){this.$emit("delete",t)}}},ye,[],!1,null,"5113d453",null).exports;var be=function(){var t=this,e=t._self._c;return e("div",{staticClass:"jh-editable-table"},[e("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.tableHeaders,items:t.internalData,"items-per-page":t.itemsPerPage,"hide-default-footer":t.hideFooter,dense:t.dense,"disable-sort":!t.sortable},scopedSlots:t._u([t._l(t.editableColumns,function(n){return{key:"item.".concat(n.key),fn:function(i){var r,a,o=i.item;return[e("div",{key:n.key,staticClass:"jh-editable-cell"},[t.isEditing(o)?[n.type&&"text"!==n.type?"number"===n.type?e("v-text-field",{staticClass:"my-1",attrs:{label:n.label,rules:n.rules,type:"number",dense:"","hide-details":"auto"},model:{value:o[n.key],callback:function(e){t.$set(o,n.key,t._n(e))},expression:"item[column.key]"}}):"select"===n.type?e("v-select",{staticClass:"my-1",attrs:{items:n.options,label:n.label,rules:n.rules,dense:"","hide-details":"auto"},model:{value:o[n.key],callback:function(e){t.$set(o,n.key,e)},expression:"item[column.key]"}}):"date"===n.type?e("v-menu",{attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function(i){var r=i.on,a=i.attrs;return[e("v-text-field",t._g(t._b({staticClass:"my-1",attrs:{label:n.label,"prepend-icon":"mdi-calendar",readonly:"",dense:"","hide-details":"auto"},model:{value:o[n.key],callback:function(e){t.$set(o,n.key,e)},expression:"item[column.key]"}},"v-text-field",a,!1),r))]}}],null,!0),model:{value:t.dateMenus[o._uuid+n.key],callback:function(e){t.$set(t.dateMenus,o._uuid+n.key,e)},expression:"dateMenus[item._uuid + column.key]"}},[t._v(" "),e("v-date-picker",{on:{input:function(e){t.dateMenus[o._uuid+n.key]=!1}},model:{value:o[n.key],callback:function(e){t.$set(o,n.key,e)},expression:"item[column.key]"}})],1):"switch"===n.type?e("v-switch",{staticClass:"my-1",attrs:{label:n.label,dense:"","hide-details":"auto"},model:{value:o[n.key],callback:function(e){t.$set(o,n.key,e)},expression:"item[column.key]"}}):"enum"===n.type&&n.enum?e("v-select",{staticClass:"my-1",attrs:{items:t.getEnumOptions(n.enum),label:n.label,rules:n.rules,dense:"","hide-details":"auto"},model:{value:o[n.key],callback:function(e){t.$set(o,n.key,e)},expression:"item[column.key]"}}):t._e():e("v-text-field",{staticClass:"my-1",attrs:{label:n.label,rules:n.rules,placeholder:n.placeholder,dense:"","hide-details":"auto"},model:{value:o[n.key],callback:function(e){t.$set(o,n.key,e)},expression:"item[column.key]"}})]:[t.$scopedSlots["cell.".concat(n.key)]?t._t("cell.".concat(n.key),null,{item:o,value:o[n.key]}):e("span",["enum"===n.type&&n.enum?e("v-chip",{attrs:{color:null===(r=n.enum[o[n.key]])||void 0===r?void 0:r.color,small:""}},[t._v("\n              "+t._s((null===(a=n.enum[o[n.key]])||void 0===a?void 0:a.text)||o[n.key])+"\n            ")]):"switch"===n.type?e("v-icon",{attrs:{color:o[n.key]?"success":"grey"}},[t._v("\n              "+t._s(o[n.key]?"mdi-check-circle":"mdi-circle-outline")+"\n            ")]):e("span",[t._v(t._s(o[n.key]))])],1)]],2)]}}}),{key:"item.actions",fn:function(n){var i=n.item;return[e("div",{staticClass:"jh-editable-actions"},[t.isEditing(i)?[e("v-btn",{attrs:{icon:"",small:"",color:"success",title:"保存"},on:{click:function(e){return t.handleSave(i)}}},[e("v-icon",{attrs:{small:""}},[t._v("mdi-check")])],1),t._v(" "),e("v-btn",{attrs:{icon:"",small:"",color:"error",title:"取消"},on:{click:function(e){return t.handleCancel(i)}}},[e("v-icon",{attrs:{small:""}},[t._v("mdi-close")])],1)]:[t.editable?e("v-btn",{attrs:{icon:"",small:"",color:"primary",title:"编辑"},on:{click:function(e){return t.handleEdit(i)}}},[e("v-icon",{attrs:{small:""}},[t._v("mdi-pencil")])],1):t._e(),t._v(" "),t.deletable?e("v-btn",{attrs:{icon:"",small:"",color:"error",title:"删除"},on:{click:function(e){return t.handleDelete(i)}}},[e("v-icon",{attrs:{small:""}},[t._v("mdi-delete")])],1):t._e(),t._v(" "),t._t("actions",null,{item:i})]],2)]}},t.recordCreator?{key:"footer",fn:function(){return[e("div",{staticClass:"jh-editable-footer pa-3"},[e("v-btn",{attrs:{color:"primary",small:"",disabled:t.hasEditingRow},on:{click:t.handleAddRow}},[e("v-icon",{attrs:{small:"",left:""}},[t._v("mdi-plus")]),t._v("\n          "+t._s(t.recordCreatorProps.creatorButtonText||"添加一行数据")+"\n        ")],1)],1)]},proxy:!0}:null],null,!0)})],1)};be._withStripped=!0;var _e=["_uuid","_isNew"],xe=["_uuid","_isNew"];function we(t){return we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},we(t)}function Se(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(-1!==e.indexOf(i))continue;n[i]=t[i]}return n}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],-1===e.indexOf(n)&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function ke(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return Ce(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ce(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){l=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw a}}}}function Ce(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function De(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function je(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?De(Object(n),!0).forEach(function(e){Oe(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):De(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function Oe(t,e,n){return(e=function(t){var e=function(t){if("object"!=we(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=we(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==we(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ie(t){return Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ie(t)}function Fe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function Pe(t,e,n){return(e=function(t){var e=function(t){if("object"!=Ie(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Ie(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ie(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Te={JhMenu:r,JhScene:f,JhDateRangePicker:v,JhQueryFilter:C,JhTable:L,JhPageContainer:A,JhForm:at,JhModalForm:dt,JhDrawerForm:yt,JhStepsForm:jt,JhFormList:Kt,JhFileInput:ie,JhJsonEditor:ue,JhMarkdownEditor:fe,JhDraggable:ve,JhTableAttachment:ge,JhEditableTable:i({name:"JhEditableTable",props:{value:{type:Array,default:function(){return[]}},columns:{type:Array,required:!0},editable:{type:Boolean,default:!0},deletable:{type:Boolean,default:!0},recordCreator:{type:Boolean,default:!0},recordCreatorProps:{type:Object,default:function(){return{creatorButtonText:"添加一行数据",record:{}}}},itemsPerPage:{type:Number,default:-1},hideFooter:{type:Boolean,default:!0},dense:{type:Boolean,default:!1},sortable:{type:Boolean,default:!1},rowKey:{type:String,default:"id"}},data:function(){return{internalData:[],editingKeys:new Set,originalData:new Map,dateMenus:{}}},computed:{editableColumns:function(){return this.columns.filter(function(t){return!1!==t.editable})},tableHeaders:function(){var t=this,e=this.columns.map(function(e){return{text:e.label||e.key,value:e.key,sortable:!1!==e.sortable&&t.sortable,width:e.width,align:e.align||"start"}});return(this.editable||this.deletable||this.$scopedSlots.actions)&&e.push({text:"操作",value:"actions",sortable:!1,width:120,align:"center"}),e},hasEditingRow:function(){return this.editingKeys.size>0}},watch:{value:{handler:function(t){this.initInternalData(t)},immediate:!0,deep:!0}},methods:{initInternalData:function(t){var e=this;this.internalData=t.map(function(t){return t._uuid||(t._uuid=e.generateUUID()),je({},t)})},generateUUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})},getRowKey:function(t){return t._uuid||t[this.rowKey]},isEditing:function(t){return this.editingKeys.has(this.getRowKey(t))},getEnumOptions:function(t){return Object.keys(t).map(function(e){return{text:t[e].text||e,value:e}})},handleEdit:function(t){var e=this.getRowKey(t);this.originalData.set(e,je({},t)),this.editingKeys.add(e),this.$emit("edit",t)},handleSave:function(t){var e=this.getRowKey(t);this.validateRow(t)&&(this.editingKeys.delete(e),this.originalData.delete(e),this.syncToParent(),this.$emit("save",t),this.$emit("change",this.internalData))},handleCancel:function(t){var e=this,n=this.getRowKey(t);if(t._isNew){var i=this.internalData.findIndex(function(t){return e.getRowKey(t)===n});i>-1&&this.internalData.splice(i,1)}else{var r=this.originalData.get(n);if(r){var a=this.internalData.findIndex(function(t){return e.getRowKey(t)===n});a>-1&&this.internalData.splice(a,1,je({},r))}}this.editingKeys.delete(n),this.originalData.delete(n),this.syncToParent(),this.$emit("cancel",t)},handleDelete:function(t){var e=this,n=this.getRowKey(t),i=this.internalData.findIndex(function(t){return e.getRowKey(t)===n});i>-1&&(this.internalData.splice(i,1),this.syncToParent(),this.$emit("delete",t,i),this.$emit("change",this.internalData))},handleAddRow:function(){var t=this,e=je({_uuid:this.generateUUID(),_isNew:!0},this.recordCreatorProps.record);this.columns.forEach(function(t){t.key&&void 0===e[t.key]&&("switch"===t.type?e[t.key]=!1:"number"===t.type?e[t.key]=0:e[t.key]="")}),this.internalData.push(e),this.$nextTick(function(){t.handleEdit(e)}),this.$emit("add",e)},validateRow:function(t){var e,n=ke(this.columns);try{for(n.s();!(e=n.n()).done;){var i=e.value;if(i.rules&&!1!==i.editable){var r,a=ke(i.rules);try{for(a.s();!(r=a.n()).done;){var o=(0,r.value)(t[i.key]);if("string"==typeof o)return this.$emit("validation-error",{item:t,column:i,message:o}),!1}}catch(t){a.e(t)}finally{a.f()}}}}catch(t){n.e(t)}finally{n.f()}return!0},syncToParent:function(){var t=this.internalData.map(function(t){return t._uuid,t._isNew,Se(t,_e)});this.$emit("input",t)},getData:function(){return this.internalData.map(function(t){return t._uuid,t._isNew,Se(t,xe)})},setData:function(t){this.initInternalData(t),this.syncToParent()},clearData:function(){this.internalData=[],this.editingKeys.clear(),this.originalData.clear(),this.syncToParent()}}},be,[],!1,null,"5a5038f8",null).exports,JhMask:E,JhToast:z,JhConfirmDialog:K},$e=function(t){$e.installed||($e.installed=!0,Object.keys(Te).forEach(function(e){t.component(e,Te[e])}))};"undefined"!=typeof window&&window.Vue&&$e(window.Vue);const Me=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Fe(Object(n),!0).forEach(function(e){Pe(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Fe(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({install:$e},Te);return e.default})());