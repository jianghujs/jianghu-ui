/*! For license information please see jianghu-ui.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("JianghuUI",[],e):"object"==typeof exports?exports.JianghuUI=e():t.JianghuUI=e()}("undefined"!=typeof self?self:this,()=>(()=>{"use strict";var t={d:(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};t.d(e,{default:()=>$n});var n=function(){var t=this,e=t._self._c;return e("div",[t.hideDrawers?t._e():e("v-navigation-drawer",{staticClass:"jh-page-nav-bar hidden-md-and-up",attrs:{app:"",clipped:"",temporary:t.temporary},model:{value:t.mobileMenuDrawer,callback:function(e){t.mobileMenuDrawer=e},expression:"mobileMenuDrawer"}},[e("v-toolbar-title",{staticClass:"px-3 jh-toolbar-title"},[e("span",{staticClass:"text-base font-medium"},[t._v(t._s(t.appTitle))])]),t._v(" "),e("v-divider",{staticClass:"jh-divider"}),t._v(" "),e("v-list",{staticClass:"py-0",attrs:{flat:""}},[e("v-list-item-group",{attrs:{value:t.currentMenuIndex}},[t._l(t.menuList,function(n,r){return[n.children&&n.children.length>0?[e("v-list-group",{key:r,staticClass:"px-4",attrs:{value:n.active},scopedSlots:t._u([{key:"activator",fn:function(){return[e("v-list-item",{staticClass:"pl-0",attrs:{ripple:!1}},[e("v-list-item-content",[e("v-list-item-title",[t._v(t._s(n.title))])],1)],1)]},proxy:!0},{key:"appendIcon",fn:function(){return[e("v-icon",{attrs:{size:"18"}},[t._v("mdi-chevron-down")])]},proxy:!0}],null,!0)},[t._v(" "),t._v(" "),t._l(n.children,function(n,i){return[n.children&&n.children.length>0?[e("v-list-group",{key:i,staticClass:"px-0",attrs:{value:n.active},scopedSlots:t._u([{key:"activator",fn:function(){return[e("v-list-item",{staticClass:"pl-0",attrs:{ripple:!1}},[e("v-list-item-content",[e("v-list-item-title",{staticClass:"pl-6 pl-sm-4"},[t._v(t._s(n.title))])],1)],1)]},proxy:!0},{key:"appendIcon",fn:function(){return[e("v-icon",{attrs:{size:"16"}},[t._v("mdi-chevron-down")])]},proxy:!0}],null,!0)},[t._v(" "),t._v(" "),t._l(n.children,function(n,i){return e("v-list-item",{key:i,class:{"second-active":t.currentSecondMenuId===n.id&&t.currentMenuIndex===r},on:{click:function(e){return t.handleMenuClick(n,r)}}},[e("v-list-item-content",[e("v-list-item-title",{staticClass:"pl-10 pl-sm-8"},[t._v(t._s(n.title))])],1)],1)})],2)]:e("v-list-item",{key:i,class:{"second-active":t.currentSecondMenuId===n.id&&t.currentMenuIndex===r},on:{click:function(e){return t.handleMenuClick(n,r)}}},[e("v-list-item-content",[e("v-list-item-title",{staticClass:"pl-6 pl-sm-4"},[t._v(t._s(n.title))])],1)],1)]})],2)]:e("v-list-item",{key:r,staticClass:"px-4",class:{"second-active":t.currentMenuIndex===r},on:{click:function(e){return t.handleMenuClick(n,r)}}},[e("v-list-item-content",{staticClass:"pl-0"},[e("v-list-item-title",[t._v(t._s(n.title))])],1),t._v(" "),e("v-list-item-icon",{staticClass:"my-3"},[e("v-icon",{attrs:{size:"18"}},[t._v("mdi-chevron-right")])],1)],1)]})],2)],1),t._v(" "),e("v-btn",{staticClass:"jh-menu-drawer-close-float-btn",attrs:{elevation:"0",color:"success",fab:"",absolute:"",top:"",left:"",small:"",tile:""},on:{click:function(e){t.mobileMenuDrawer=!1}}},[e("v-icon",[t._v("mdi-close")])],1)],1),t._v(" "),!t.hideDrawers&&t.showAvatar?e("v-navigation-drawer",{staticClass:"jh-page-nav-bar hidden-md-and-up",attrs:{app:"",clipped:"",temporary:t.temporary,right:""},model:{value:t.mobileUserMenuDrawer,callback:function(e){t.mobileUserMenuDrawer=e},expression:"mobileUserMenuDrawer"}},[e("div",{staticClass:"d-flex flex-column",staticStyle:{height:"calc(100vh - 20px)"}},[e("div",[e("v-toolbar-title",{staticClass:"px-4",staticStyle:{"min-height":"110px"}},[e("div",{staticClass:"d-flex flex-column pt-3",staticStyle:{gap:"12px"}},[e("div",{staticClass:"success--text text-xs text-center",staticStyle:{cursor:"pointer"},on:{click:function(e){t.mobileUserMenuDrawer=!1}}},[e("v-icon",{staticClass:"success--text",attrs:{size:"22"}},[t._v("mdi-window-close")]),t._v(" "),e("div",{staticClass:"success--text",staticStyle:{"margin-top":"-2px"}},[t._v("关闭")])],1),t._v(" "),e("div",{staticClass:"d-flex align-start mb-2",staticStyle:{gap:"4px"}},[e("v-icon",{attrs:{size:36}},[t._v("mdi-account-circle")]),t._v(" "),e("div",{staticClass:"flex-1"},[e("div",{staticClass:"text-xs"},[t._v("\n                  "+t._s(t.userInfo.username)+"\n                  "),e("span",{staticClass:"text-caption grey--text"},[t._v(t._s(t.userInfo.userId))])]),t._v(" "),e("div",{staticClass:"d-flex flex-wrap",staticStyle:{gap:"4px"}},t._l(t.userInfo.roles,function(n,r){return e("span",{key:r,staticClass:"text-caption px-1 grey--text",staticStyle:{border:"1px solid #ccc","border-radius":"4px"}},[t._v("\n                    "+t._s(n)+"\n                  ")])}),0)])],1)])]),t._v(" "),e("v-divider",{staticClass:"jh-divider"})],1),t._v(" "),e("v-list",{staticClass:"flex-1",attrs:{nav:"",dense:""}},t._l(t.avatarMenuList,function(n,r){return e("v-list-item",{key:r,on:{click:function(e){return t.handleMenuClick(n)}}},[e("v-list-item-icon",{staticClass:"mr-1 mt-1"},[e("v-icon",{attrs:{size:"16",color:"grey darken-3"}},[t._v("mdi-account-cog-outline")])],1),t._v(" "),e("v-list-item-content",[e("v-list-item-title",{attrs:{color:"grey darken-3"}},[t._v(t._s(n.title))])],1)],1)}),1),t._v(" "),e("div",{staticClass:"px-4"},[e("v-btn",{attrs:{block:"",elevation:"0",small:"",color:"error"},on:{click:t.handleLogout}},[e("v-icon",{attrs:{size:"16"}},[t._v("mdi-logout")]),t._v(" "),e("span",{staticClass:"ml-2"},[t._v("登出")])],1)],1)],1)]):t._e(),t._v(" "),e("v-app-bar",{staticClass:"jh-page-header px-8",attrs:{app:"","clipped-left":"",height:"52",flat:""}},[!t.hideDrawers&&t.isMobile?e("div",{staticClass:"hidden-md-and-up d-flex flex-column justify-center align-start",staticStyle:{width:"60px",cursor:"pointer"},on:{click:function(e){t.mobileMenuDrawer=!t.mobileMenuDrawer}}},[e("span",{staticClass:"success--text text-caption"},[e("v-icon",{staticClass:"success--text",attrs:{size:"24"}},[t._v("mdi-menu")]),t._v(" "),e("div",{staticClass:"text-xs",staticStyle:{"margin-top":"-2px"}},[t._v("目录")])],1)]):t._e(),t._v(" "),e("v-toolbar-title",{staticClass:"pl-0"},[e("span",{staticClass:"hidden-sm-and-down text-h6 font-weight-bold"},[t._t("title",function(){return[t._v(t._s(t.appTitle))]})],2),t._v(" "),e("span",{staticClass:"hidden-md-and-up font-weight-medium text-center"},[e("div",{staticClass:"text-base"},[t._v(t._s(t.appTitle))]),t._v(" "),e("div",{staticClass:"text-xs grey--text text--darken-2",staticStyle:{"margin-top":"-2px"}},[t._t("subtitle")],2)])]),t._v(" "),e("v-spacer",{staticClass:"hidden-sm-and-down"}),t._v(" "),t.hideDrawers?t._e():e("v-tabs",{staticClass:"hidden-sm-and-down",attrs:{"show-arrows":"","slider-size":"0",color:"success"}},[t._l(t.menuList,function(n,r){return[n.children&&0!==n.children.length?[e("v-menu",{key:r,attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(i){var a=i.on,o=i.attrs;return[e("v-tab",t._g(t._b({staticClass:"px-2 mx-1 jh-header-tab",class:{"jh-header-tab-active":t.currentMenuIndex===r}},"v-tab",o,!1),a),[t._v("\n                "+t._s(n.title)+"\n                "),e("v-icon",{attrs:{size:"12"}},[t._v("mdi-chevron-down")])],1)]}}],null,!0)},[t._v(" "),e("v-list",{attrs:{nav:"",dense:""}},[t._l(n.children,function(n,i){return[n.children&&n.children.length>0?[e("v-menu",{key:i,attrs:{"offset-x":"",right:""},scopedSlots:t._u([{key:"activator",fn:function(r){var i=r.on,a=r.attrs;return[e("v-list-item",t._g(t._b({},"v-list-item",a,!1),i),[e("v-list-item-content",[e("v-list-item-title",{staticStyle:{color:"#41434f"}},[t._v(t._s(n.title))])],1),t._v(" "),e("v-list-item-action",[e("v-icon",[t._v("mdi-chevron-right")])],1)],1)]}}],null,!0)},[t._v(" "),e("v-list",{attrs:{nav:"",dense:""}},t._l(n.children,function(n,i){return e("v-list-item",{key:i,class:{"second-active":t.currentSecondMenuId===n.id&&t.currentMenuIndex===r},on:{click:function(e){return t.handleMenuClick(n,r)}}},[e("v-list-item-content",[e("v-list-item-title",{staticStyle:{color:"#41434f"}},[t._v(t._s(n.title))])],1)],1)}),1)],1)]:e("v-list-item",{key:i,class:{"second-active":t.currentSecondMenuId===n.id&&t.currentMenuIndex===r},on:{click:function(e){return t.handleMenuClick(n,r)}}},[e("v-list-item-content",[e("v-list-item-title",{staticStyle:{color:"#41434f"}},[t._v(t._s(n.title))])],1)],1)]})],2)],1)]:[e("v-tab",{key:r,staticClass:"px-2 mx-1 jh-header-tab",class:{"jh-header-tab-active":t.currentMenuIndex===r},on:{click:function(e){return t.handleMenuClick(n,r)}}},[t._v("\n            "+t._s(n.title)+"\n          ")])]]})],2),t._v(" "),e("div",{staticClass:"d-flex align-center",staticStyle:{"white-space":"nowrap"}},[t.rightMenuList.length>0?e("div",{staticClass:"d-flex align-center mr-2"},t._l(t.rightMenuList,function(n,r){return e("div",{key:r,staticClass:"d-flex align-center ml-4 jh-right-menu",staticStyle:{cursor:"pointer"},on:{click:function(e){return t.handleMenuClick(n)}}},[n.icon?e("v-icon",{attrs:{size:"20"}},[t._v(t._s(n.icon))]):t._e(),t._v(" "),e("div",{class:{"ml-1":n.icon}},[t._v(t._s(n.title))])],1)}),0):t._e(),t._v(" "),t.rightMenuList.length>0?e("v-divider",{staticClass:"mx-3 jh-divider",attrs:{vertical:""}}):t._e(),t._v(" "),t.showAvatar?[t.isMobile?e("div",{staticClass:"jh-avatar-menu-btn d-flex flex-column justify-center align-end hidden-sm-and-up",on:{click:function(e){t.mobileUserMenuDrawer=!t.mobileUserMenuDrawer}}},[e("div",{staticClass:"text-center"},[e("v-icon",{attrs:{size:24,color:"success"}},[t._v("mdi-account-circle")]),t._v(" "),e("div",{staticStyle:{"margin-top":"-2px"}},[e("p",{staticClass:"text-xs success--text mb-0",staticStyle:{"max-width":"60px",overflow:"hidden","text-overflow":"ellipsis"}},[t._v("\n                "+t._s(t.userInfo.username)+"\n              ")])])],1)]):t._e(),t._v(" "),e("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(n){var r=n.on,i=n.attrs;return[t.isMobile?t._e():e("div",t._g(t._b({staticClass:"jh-avatar-menu-btn d-flex align-center px-1 hidden-xs-only"},"div",i,!1),r),[e("v-icon",{attrs:{size:32,color:"grey lighten-2"}},[t._v("mdi-account-circle")]),t._v(" "),e("div",{staticClass:"ml-1"},[e("p",{staticClass:"caption black--text mb-0"},[t._v(t._s(t.userInfo.username))])])],1)]}}],null,!1,2365689925)},[t._v(" "),e("v-list",{attrs:{nav:"",dense:""}},[e("v-list-item",[e("v-list-item-content",[e("p",{staticClass:"caption black--text mb-0"},[t._v(t._s(t.userInfo.username))]),t._v(" "),e("p",{staticClass:"caption grey--text mb-0",staticStyle:{"font-size":"10px"}},[t._v(t._s(t.userInfo.userId))])])],1),t._v(" "),t.userInfo.roles&&t.userInfo.roles.length>0?e("div",{staticStyle:{"max-width":"220px",padding:"0 16px"}},t._l(t.userInfo.roles,function(n,r){return e("v-chip",{key:r,staticClass:"mr-1 mb-1",staticStyle:{"font-size":"10px"},attrs:{label:"","x-small":"",outlined:""}},[t._v("\n                "+t._s(n)+"\n              ")])}),1):t._e(),t._v(" "),t.userInfo.roles&&t.userInfo.roles.length>0?e("v-divider",{staticClass:"my-1 jh-divider"}):t._e(),t._v(" "),t._l(t.avatarMenuList,function(n,r){return e("v-list-item",{key:r,on:{click:function(e){return t.handleMenuClick(n)}}},[e("v-list-item-icon",{staticClass:"mr-1 mt-1"},[e("v-icon",{attrs:{size:"16",color:"grey darken-3"}},[t._v("mdi-account-cog-outline")])],1),t._v(" "),e("v-list-item-content",[e("v-list-item-title",{attrs:{color:"grey darken-3"}},[t._v(t._s(n.title))])],1)],1)}),t._v(" "),e("v-list-item",{on:{click:t.handleLogout}},[e("v-list-item-icon",{staticClass:"mr-1 mt-1"},[e("v-icon",{attrs:{size:"16",color:"grey darken-3"}},[t._v("mdi-logout")])],1),t._v(" "),e("v-list-item-content",[e("v-list-item-title",{attrs:{color:"grey darken-3"}},[t._v("登出")])],1)],1)],2)],1)]:t._e()],2)],1)],1)};function r(t,e,n,r,i,a,o,l){var s,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0),r&&(c.functional=!0),a&&(c._scopeId="data-v-"+a),o?(s=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},c._ssrRegister=s):i&&(s=l?function(){i.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:i),s)if(c.functional){c._injectStyles=s;var u=c.render;c.render=function(t,e){return s.call(e),u(t,e)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,s):[s]}return{exports:t,options:c}}n._withStripped=!0;const i=r({name:"JhMenu",props:{appTitle:{type:String,default:"JianghuJS"},menuList:{type:Array,default:function(){return[]}},rightMenuList:{type:Array,default:function(){return[]}},avatarMenuList:{type:Array,default:function(){return[]}},userInfo:{type:Object,default:function(){return{username:"Guest",userId:"",roles:[]}}},showAvatar:{type:Boolean,default:!0},activeMenuIndex:{type:Number,default:-1},activeSecondMenuId:{type:String,default:null},temporary:{type:Boolean,default:!0},hideDrawers:{type:Boolean,default:!1}},data:function(){return{mobileMenuDrawer:!1,mobileUserMenuDrawer:!1,currentMenuIndex:this.activeMenuIndex,currentSecondMenuId:this.activeSecondMenuId,isMobile:window.innerWidth<600}},watch:{activeMenuIndex:function(t){this.currentMenuIndex=t},activeSecondMenuId:function(t){this.currentSecondMenuId=t}},methods:{handleMenuClick:function(t,e){void 0!==e&&(this.currentMenuIndex=e),t.id&&(this.currentSecondMenuId=t.id),this.mobileMenuDrawer=!1,this.mobileUserMenuDrawer=!1,this.$emit("menu-click",t,e)},handleLogout:function(){this.mobileUserMenuDrawer=!1,this.$emit("logout")}}},n,[],!1,null,"73ddcbb9",null).exports;var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"jh-scene"},[e("v-row",{staticClass:"ma-0"},[e("v-btn-toggle",{class:{"mr-md-2":t.showActionBtn},attrs:{value:t.currentSceneIndex,mandatory:"",dense:"",color:"success"},on:{change:t.handleSceneChange}},t._l(t.sceneList,function(n,r){return e("v-btn",{key:r,attrs:{small:""}},[t._v(t._s(n.name))])}),1),t._v(" "),t.showActionBtn?e("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(n){var r=n.on,i=n.attrs;return[e("v-btn-toggle",{attrs:{dense:"",color:"white"}},[e("v-btn",t._g(t._b({attrs:{small:""}},"v-btn",i,!1),r),[e("v-icon",{staticClass:"mx-0",attrs:{small:""}},[t._v("mdi-chevron-down")])],1)],1)]}}],null,!1,1121844081),model:{value:t.isSceneOperationShown,callback:function(e){t.isSceneOperationShown=e},expression:"isSceneOperationShown"}},[t._v(" "),e("v-list",{staticClass:"pb-0",attrs:{dense:""}},[e("v-list-item",{on:{click:t.openCreateSceneDialog}},[e("v-list-item-title",{staticClass:"success--text"},[e("v-icon",{staticClass:"success--text",attrs:{small:""}},[t._v("mdi-plus")]),t._v(" "),e("span",{staticClass:"success--text"},[t._v("新建场景")])],1)],1),t._v(" "),e("v-list-item",{on:{click:t.openSceneListDialog}},[e("v-list-item-title",{staticClass:"success--text"},[e("v-icon",{staticClass:"success--text",attrs:{small:""}},[t._v("mdi-cog-outline")]),t._v(" "),e("span",{staticClass:"success--text"},[t._v("场景管理")])],1)],1)],1)],1):t._e()],1),t._v(" "),e("v-dialog",{attrs:{persistent:"",width:"360px"},model:{value:t.isCreateSceneDialogShown,callback:function(e){t.isCreateSceneDialogShown=e},expression:"isCreateSceneDialogShown"}},[e("v-card",[e("v-card-title",[e("v-row",{staticClass:"ma-0"},[e("div",{staticStyle:{"font-size":"16px"}},[t._v("新建场景")]),t._v(" "),e("v-spacer"),t._v(" "),e("v-btn",{staticClass:"elevation-0",attrs:{fab:"","x-small":""},on:{click:t.closeCreateSceneDialog}},[e("v-icon",{attrs:{dark:""}},[t._v("mdi-close")])],1)],1)],1),t._v(" "),e("v-card-text",[e("div",{staticClass:"mb-2"},[e("span",{staticClass:"jh-input-label"},[t._v("场景名称")]),t._v(" "),e("v-text-field",{staticClass:"jh-v-input",attrs:{dense:"","single-line":"",filled:"","hide-details":"",placeholder:"场景名称，最多10个字符",rules:t.validationRules.requireRules},model:{value:t.createItem.name,callback:function(e){t.$set(t.createItem,"name",e)},expression:"createItem.name"}})],1),t._v(" "),t.hasFormSlot?e("div",{staticClass:"mb-2"},[e("span",{staticClass:"jh-input-label"},[t._v("筛选条件")]),t._v(" "),t._t("form",null,{form:t.createItem.form})],2):t._e()]),t._v(" "),e("v-card-actions",{staticClass:"pb-4"},[e("v-row",{staticClass:"ma-0 pa-6 pt-2 justify-end"},[e("v-btn",{staticClass:"ml-2",attrs:{small:"",color:"success"},on:{click:t.doCreateScene}},[t._v("保存")]),t._v(" "),e("v-btn",{staticClass:"ml-2",attrs:{small:""},on:{click:t.closeCreateSceneDialog}},[t._v("取消")])],1)],1)],1)],1),t._v(" "),e("v-dialog",{attrs:{persistent:"",width:"360px"},model:{value:t.isSceneListShown,callback:function(e){t.isSceneListShown=e},expression:"isSceneListShown"}},[e("v-card",{staticClass:"scene-manage"},[e("v-card-title",[e("v-row",{staticClass:"ma-0"},[e("div",{staticStyle:{"font-size":"16px"}},[t._v("场景管理")]),t._v(" "),e("v-spacer"),t._v(" "),e("v-btn",{staticClass:"elevation-0",attrs:{fab:"","x-small":""},on:{click:t.closeSceneListDialog}},[e("v-icon",{attrs:{dark:""}},[t._v("mdi-close")])],1)],1)],1),t._v(" "),e("v-card-text",{staticClass:"pb-2"},[e("v-card",{attrs:{outlined:""}},[e("v-list",{staticClass:"scene-list",attrs:{dense:""}},[t.sceneCustomList&&t.sceneCustomList.length?t._l(t.sceneCustomList,function(n){return e("v-list-item",{key:n.id,staticClass:"scene-item px-2"},[e("v-list-item-content",[t._v(t._s(n.name))]),t._v(" "),e("v-list-item-icon",{on:{click:function(e){return e.stopPropagation(),t.doDeleteScene(n)}}},[e("v-icon",{attrs:{size:"22"}},[t._v("mdi-delete")])],1)],1)}):[e("div",{staticClass:"text-center grey--text",staticStyle:{"line-height":"100px"}},[t._v("暂无自定义场景")])]],2)],1)],1),t._v(" "),e("v-card-actions",{staticClass:"pb-4"},[e("v-row",{staticClass:"ma-0 pa-6 pt-2 justify-end"},[e("v-btn",{staticClass:"ml-2",attrs:{small:"",color:"success"},on:{click:t.changeToCreateDialog}},[t._v("新建场景")]),t._v(" "),e("v-btn",{staticClass:"ml-2",attrs:{small:""},on:{click:t.closeSceneListDialog}},[t._v("取消")])],1)],1)],1)],1)],1)};function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach(function(e){c(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function c(t,e,n){return(e=function(t){var e=function(t){if("object"!=o(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==o(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u(t){return function(t){if(Array.isArray(t))return d(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return d(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}a._withStripped=!0;const f=r({name:"JhScene",props:{initFormData:{type:Object,default:function(){return{}}},storageKey:{type:String,default:"jh-scene-list"},scenes:{type:Array,default:function(){return[]}},currentSceneId:{type:String,default:null},showActionBtn:{type:Boolean,default:!0},useLocalStorage:{type:Boolean,default:!1}},data:function(){return{validationRules:{requireRules:[function(t){return!!t||"此项必填"}]},sceneList:[],sceneCustomList:[],deleteItem:{},createItem:{name:"",form:{}},isCreateSceneDialogShown:!1,isSceneOperationShown:!1,isSceneListShown:!1,currentSceneIndex:0}},computed:{hasFormSlot:function(){return!!this.$scopedSlots.form}},watch:{scenes:{handler:function(t){t&&t.length>0&&(this.sceneList=u(t),this.updateCustomSceneList())},immediate:!0}},created:function(){this.initSceneList()},methods:{initSceneList:function(){this.useLocalStorage?this.getSceneListFromStorage():this.scenes&&this.scenes.length>0&&(this.sceneList=u(this.scenes)),this.updateCustomSceneList(),this.useDefaultScene()},getSceneListFromStorage:function(){var t=localStorage.getItem(this.storageKey);null==t&&(t="[]"),t=JSON.parse(t),this.sceneList=t},saveSceneListToStorage:function(){this.useLocalStorage&&localStorage.setItem(this.storageKey,JSON.stringify(this.sceneList))},updateCustomSceneList:function(){this.sceneCustomList=this.sceneList.filter(function(t){return!t.system})},useDefaultScene:function(){var t=this.sceneList.find(function(t){return!0===t.default});!t&&this.sceneList.length>0&&(t=this.sceneList[0]),t&&(this.currentSceneIndex=this.sceneList.findIndex(function(e){return e.id===t.id}),this.useScene(t))},useScene:function(t){this.$emit("scene-change",t)},handleSceneChange:function(t){this.currentSceneIndex=t,this.sceneList[t]&&this.useScene(this.sceneList[t])},getUUID:function(t){for(var e=[],n="0123456789abcdef",r=0;r<10;r++)e[r]=n.substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]=n.substr(3&e[19]|8,1),t+"-"+e.join("")},prepareCreateSceneData:function(){this.createItem={name:"",form:s({},this.initFormData),id:this.getUUID("scene")}},openCreateSceneDialog:function(){this.prepareCreateSceneData(),this.isCreateSceneDialogShown=!0,this.isSceneOperationShown=!1},closeCreateSceneDialog:function(){this.isCreateSceneDialogShown=!1},validateSceneName:function(){var t=this.createItem.name;if(!t)throw new Error("场景名称不能为空");if(this.sceneList.some(function(e){return e.name===t}))throw new Error("场景名称重复")},doCreateScene:function(){try{this.validateSceneName();var t=s({},this.createItem);this.sceneList.push(t),this.saveSceneListToStorage(),this.updateCustomSceneList(),this.closeCreateSceneDialog(),this.currentSceneIndex=this.sceneList.length-1,this.useScene(t),this.$emit("scene-created",t)}catch(t){this.$emit("error",t.message)}},openSceneListDialog:function(){this.isSceneListShown=!0,this.isSceneOperationShown=!1},closeSceneListDialog:function(){this.isSceneListShown=!1},changeToCreateDialog:function(){this.closeSceneListDialog(),this.openCreateSceneDialog()},doDeleteScene:function(t){var e;this.deleteItem=s({},t),(null===(e=this.sceneList[this.currentSceneIndex])||void 0===e?void 0:e.id)===t.id&&this.useDefaultScene(),this.sceneList=this.sceneList.filter(function(e){return e.id!==t.id}),this.saveSceneListToStorage(),this.updateCustomSceneList(),this.$emit("scene-deleted",t)}}},a,[],!1,null,"50ab6d9d",null).exports;var h=function(){var t=this,e=t._self._c;return e("div",{staticClass:"date-range-picker-container"},[e("v-menu",{attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto","max-width":"600"},scopedSlots:t._u([{key:"activator",fn:function(n){var r=n.on,i=n.attrs;return[e("v-text-field",t._g(t._b({attrs:{prefix:t.prefix,"prepend-inner-icon":"mdi-calendar",readonly:"",filled:t.filled,dense:t.dense,outlined:t.outlined,"hide-details":t.hideDetails,clearable:t.clearable},on:{"click:clear":t.clearDateRange},model:{value:t.dateRangeText,callback:function(e){t.dateRangeText=e},expression:"dateRangeText"}},"v-text-field",i,!1),r))]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[t._v(" "),e("v-card",[e("v-card-text",{staticClass:"pa-0"},[e("div",{staticClass:"d-flex"},[e("v-list",{staticClass:"quick-select-list",attrs:{dense:"",nav:""}},[e("v-list-item",{class:{"v-item--active v-list-item--active primary--text":t.isLast7Days},on:{click:function(e){return t.quickSelect(7)}}},[e("v-list-item-title",[t._v("最近7天")])],1),t._v(" "),e("v-list-item",{class:{"v-item--active v-list-item--active primary--text":t.isLast30Days},on:{click:function(e){return t.quickSelect(30)}}},[e("v-list-item-title",[t._v("最近30天")])],1),t._v(" "),e("v-list-item",{class:{"v-item--active v-list-item--active primary--text":t.isLast90Days},on:{click:function(e){return t.quickSelect(90)}}},[e("v-list-item-title",[t._v("最近90天")])],1),t._v(" "),e("v-list-item",{class:{"v-item--active v-list-item--active primary--text":t.isThisMonth},on:{click:t.selectThisMonth}},[e("v-list-item-title",[t._v("本月")])],1),t._v(" "),e("v-list-item",{class:{"v-item--active v-list-item--active primary--text":t.isLastMonth},on:{click:t.selectLastMonth}},[e("v-list-item-title",[t._v("上月")])],1),t._v(" "),e("v-list-item",{class:{"v-item--active v-list-item--active primary--text":t.isLast365Days},on:{click:function(e){return t.quickSelect(365)}}},[e("v-list-item-title",[t._v("最近一年")])],1)],1),t._v(" "),e("v-date-picker",{attrs:{"no-title":"",range:"",color:"primary"},model:{value:t.tempDateRange,callback:function(e){t.tempDateRange=e},expression:"tempDateRange"}})],1)]),t._v(" "),e("v-divider"),t._v(" "),e("v-card-actions",[e("v-spacer"),t._v(" "),e("v-btn",{attrs:{text:"",color:"grey"},on:{click:t.cancelDateRange}},[t._v("取消")]),t._v(" "),e("v-btn",{attrs:{text:"",color:"primary"},on:{click:t.confirmDateRange}},[t._v("确认")])],1)],1)],1)],1)};function p(t){return function(t){if(Array.isArray(t))return v(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return v(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}h._withStripped=!0;const m=r({name:"JhDateRangePicker",props:{value:{type:Array,default:function(){return[]}},prefix:{type:String,default:""},filled:{type:Boolean,default:!0},dense:{type:Boolean,default:!0},outlined:{type:Boolean,default:!1},hideDetails:{type:Boolean,default:!0},clearable:{type:Boolean,default:!0}},data:function(){return{menu:!1,dateRange:[],tempDateRange:[]}},computed:{dateRangeText:function(){return this.dateRange&&2===this.dateRange.length?"".concat(this.formatDate(this.dateRange[0])," ~ ").concat(this.formatDate(this.dateRange[1])):""},isLast7Days:function(){if(!this.tempDateRange||2!==this.tempDateRange.length)return!1;var t=this.getToday(),e=this.subtractDays(7);return this.tempDateRange[0]===e&&this.tempDateRange[1]===t},isLast30Days:function(){if(!this.tempDateRange||2!==this.tempDateRange.length)return!1;var t=this.getToday(),e=this.subtractDays(30);return this.tempDateRange[0]===e&&this.tempDateRange[1]===t},isLast90Days:function(){if(!this.tempDateRange||2!==this.tempDateRange.length)return!1;var t=this.getToday(),e=this.subtractDays(90);return this.tempDateRange[0]===e&&this.tempDateRange[1]===t},isThisMonth:function(){if(!this.tempDateRange||2!==this.tempDateRange.length)return!1;var t=this.getToday(),e=this.getStartOfMonth();return this.tempDateRange[0]===e&&this.tempDateRange[1]===t},isLastMonth:function(){if(!this.tempDateRange||2!==this.tempDateRange.length)return!1;var t=this.getStartOfLastMonth(),e=this.getEndOfLastMonth();return this.tempDateRange[0]===t&&this.tempDateRange[1]===e},isLast365Days:function(){if(!this.tempDateRange||2!==this.tempDateRange.length)return!1;var t=this.getToday(),e=this.subtractDays(365);return this.tempDateRange[0]===e&&this.tempDateRange[1]===t}},watch:{value:{handler:function(t){t&&Array.isArray(t)&&2===t.length&&(this.dateRange=p(t),this.tempDateRange=p(t))},immediate:!0},menu:function(t){t&&(this.tempDateRange=2===this.dateRange.length?p(this.dateRange):[])}},mounted:function(){this.value&&Array.isArray(this.value)&&2===this.value.length&&(this.dateRange=p(this.value),this.tempDateRange=p(this.value))},methods:{formatDate:function(t){return t||""},getToday:function(){var t=new Date;return this.toDateString(t)},subtractDays:function(t){var e=new Date;return e.setDate(e.getDate()-t),this.toDateString(e)},getStartOfMonth:function(){var t=new Date;return this.toDateString(new Date(t.getFullYear(),t.getMonth(),1))},getStartOfLastMonth:function(){var t=new Date;return this.toDateString(new Date(t.getFullYear(),t.getMonth()-1,1))},getEndOfLastMonth:function(){var t=new Date;return this.toDateString(new Date(t.getFullYear(),t.getMonth(),0))},toDateString:function(t){var e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return"".concat(e,"-").concat(n,"-").concat(r)},confirmDateRange:function(){if(this.tempDateRange&&2===this.tempDateRange.length){var t=p(this.tempDateRange).sort();this.dateRange=t,this.$emit("input",this.dateRange),this.$emit("change",this.dateRange)}this.menu=!1},cancelDateRange:function(){this.tempDateRange=2===this.dateRange.length?p(this.dateRange):[],this.menu=!1},clearDateRange:function(){this.dateRange=[],this.tempDateRange=[],this.$emit("input",[]),this.$emit("change",[])},quickSelect:function(t){var e=this.getToday(),n=this.subtractDays(t);this.tempDateRange=[n,e]},selectThisMonth:function(){var t=this.getToday(),e=this.getStartOfMonth();this.tempDateRange=[e,t]},selectLastMonth:function(){var t=this.getStartOfLastMonth(),e=this.getEndOfLastMonth();this.tempDateRange=[t,e]}}},h,[],!1,null,"f2799a5a",null).exports;var y=function(){var t=this,e=t._self._c;return e("div",{staticClass:"jh-query-filter"},[e("v-form",{ref:"queryForm",on:{submit:function(e){return e.preventDefault(),t.handleSearch.apply(null,arguments)}}},[e("v-row",{class:t.rowClass},[e("JhFormFields",{attrs:{fields:t.visibleFieldsWithConfig,showLabels:t.showLabels,labelClass:t.labelClass,inputClass:t.inputClass,defaultDense:t.dense,defaultFilled:t.filled,defaultOutlined:t.outlined,defaultSingleLine:t.singleLine,hideDetails:!0,layout:"vertical"},on:{"field-change":t.handleFieldChange},scopedSlots:t._u([t._l(t.fields,function(e){return{key:"field-".concat(e.key),fn:function(n){return[t._t("field-".concat(e.key),null,null,n)]}}})],null,!0),model:{value:t.formData,callback:function(e){t.formData=e},expression:"formData"}}),t._v(" "),e("v-col",{staticClass:"d-flex align-end flex-column justify-center"},[t.showLabels?e("span",{staticClass:"opacity-0",class:t.labelClass},[t._v("\n          工具栏\n        ")]):t._e(),t._v(" "),t._t("buttons",function(){return[e("div",{staticClass:"jh-query-filter-buttons",class:t.buttonClass},[e("v-btn",{staticClass:"jh-query-filter-search-btn",attrs:{color:"primary",small:"small"===t.buttonSize,dense:"small"===t.buttonSize,depressed:"",loading:t.searching},on:{click:t.handleSearch}},[e("v-icon",{attrs:{left:"",small:""}},[t._v("mdi-magnify")]),t._v("\n              "+t._s(t.searchText)+"\n            ")],1),t._v(" "),e("v-btn",{staticClass:"jh-query-filter-reset-btn",attrs:{outlined:"",small:"small"===t.buttonSize,dense:"small"===t.buttonSize},on:{click:t.handleReset}},[e("v-icon",{attrs:{left:"",small:""}},[t._v("mdi-refresh")]),t._v("\n              "+t._s(t.resetText)+"\n            ")],1),t._v(" "),t.collapsible&&t.fields.length>t.defaultVisibleCount?e("v-btn",{staticClass:"jh-query-filter-collapse-btn",attrs:{text:"",small:"small"===t.buttonSize,dense:"small"===t.buttonSize,color:"primary"},on:{click:t.toggleCollapse}},[t._v("\n              "+t._s(t.collapsed?t.expandText:t.collapseText)+"\n              "),e("v-icon",{attrs:{right:"",small:""}},[t._v(t._s(t.collapsed?"mdi-chevron-down":"mdi-chevron-up"))])],1):t._e()],1)]},{formData:t.formData,search:t.handleSearch,reset:t.handleReset})],2)],1)],1)],1)};y._withStripped=!0;var g=function(){var t=this,e=t._self._c;return e("div",{class:t.formFieldsClasses},[t.title||t.$slots.title?e("div",{staticClass:"jh-form-fields-header"},[t._t("title",function(){return[e("div",{staticClass:"jh-form-fields-title"},[t._v("\n        "+t._s(t.title)+"\n        "),t.tooltip?e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(n){var r=n.on,i=n.attrs;return[e("v-icon",t._g(t._b({staticClass:"ml-1",attrs:{small:""}},"v-icon",i,!1),r),[t._v("mdi-help-circle-outline")])]}}],null,!1,1799656693)},[t._v(" "),e("span",[t._v(t._s(t.tooltip))])]):t._e()],1)]}),t._v(" "),t.description?e("div",{staticClass:"jh-form-fields-description"},[t._v(t._s(t.description))]):t._e()],2):t._e(),t._v(" "),e("v-row",t._b({class:t.rowClass,attrs:{dense:t.dense}},"v-row",t.rowProps,!1),[t._l(t.visibleFields,function(n,r){return["group"===n.type?e("v-col",{key:"group-".concat(r),attrs:{cols:"12"}},[e("div",{staticClass:"jh-form-group-title",class:n.titleClass},[n.divider&&r>0?e("v-divider",{staticClass:"mb-4"}):t._e(),t._v(" "),n.title?e("h3",{staticClass:"text-h6 mb-2"},[t._v(t._s(n.title))]):t._e(),t._v(" "),n.description?e("p",{staticClass:"text-caption grey--text mb-3"},[t._v(t._s(n.description))]):t._e()],1)]):e("v-col",{key:n.key,class:t.getFieldColClass(n),attrs:{cols:t.getFieldCols(n),sm:t.getFieldSm(n),md:t.getFieldMd(n),lg:t.getFieldLg(n),xl:t.getFieldXl(n)}},[e("div",{class:t.getFieldWrapperClass(n)},[n.label&&t.showLabels&&("horizontal"===t.layout||"horizontal"===n.layout)?e("div",{class:t.getHorizontalLabelClass(n),style:t.getHorizontalLabelStyle(n)},[n.required&&t.showRequiredMark?e("span",{staticClass:"error--text mr-1"},[t._v("*")]):t._e(),t._v("\n            "+t._s(n.label)+"\n            "),n.tooltip?e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(n){var r=n.on,i=n.attrs;return[e("v-icon",t._g(t._b({staticClass:"ml-1",attrs:{small:""}},"v-icon",i,!1),r),[t._v("mdi-help-circle-outline")])]}}],null,!0)},[t._v(" "),e("span",[t._v(t._s(n.tooltip))])]):t._e()],1):t._e(),t._v(" "),e("div",{class:t.getFieldInputClass(n)},[n.label&&t.showLabels&&"horizontal"!==t.layout&&"horizontal"!==n.layout?e("div",{class:t.getVerticalLabelClass(n)},[n.required&&t.showRequiredMark?e("span",{staticClass:"error--text"},[t._v("*")]):t._e(),t._v("\n              "+t._s(n.label)+"\n              "),n.tooltip?e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(n){var r=n.on,i=n.attrs;return[e("v-icon",t._g(t._b({staticClass:"ml-1",attrs:{small:""}},"v-icon",i,!1),r),[t._v("mdi-help-circle-outline")])]}}],null,!0)},[t._v(" "),e("span",[t._v(t._s(n.tooltip))])]):t._e()],1):t._e(),t._v(" "),n.extra?e("div",{staticClass:"jh-field-extra text-caption grey--text mb-2"},[t._v("\n              "+t._s(n.extra)+"\n            ")]):t._e(),t._v(" "),t.isFieldReadonly(n)?e("div",{staticClass:"jh-form-readonly-text"},[t._v("\n              "+t._s(t.getReadonlyValue(n))+"\n            ")]):["text"!==n.type&&n.type?"textarea"===n.type?e("v-textarea",t._b({class:t.inputClass,attrs:{dense:t.getDense(n),filled:t.getFilled(n),outlined:t.getOutlined(n),value:t.getFieldValue(n.key),rules:t.getRules(n),disabled:t.getFieldDisabled(n),readonly:n.readonly,placeholder:n.placeholder,rows:n.rows||3,"hide-details":n.hideDetails||t.hideDetails},on:{input:function(e){return t.handleInput(n.key,e)},change:function(e){return t.handleChange(n.key,e)},blur:function(e){return t.handleBlur(n.key,e)}}},"v-textarea",n.props,!1)):"number"===n.type?e("v-text-field",t._b({class:t.inputClass,attrs:{type:"number",dense:t.getDense(n),"single-line":t.getSingleLine(n),filled:t.getFilled(n),outlined:t.getOutlined(n),value:t.getFieldValue(n.key),rules:t.getRules(n),disabled:t.getFieldDisabled(n),readonly:n.readonly,placeholder:n.placeholder,"hide-details":n.hideDetails||t.hideDetails},on:{input:function(e){return t.handleInput(n.key,e)},change:function(e){return t.handleChange(n.key,e)},blur:function(e){return t.handleBlur(n.key,e)}}},"v-text-field",n.props,!1)):"select"===n.type?e("v-select",t._b({class:t.inputClass,attrs:{dense:t.getDense(n),filled:t.getFilled(n),outlined:t.getOutlined(n),value:t.getFieldValue(n.key),items:t.getFieldOptions(n),rules:t.getRules(n),disabled:t.getFieldDisabled(n),readonly:n.readonly,placeholder:n.placeholder,"item-text":n.itemText||"text","item-value":n.itemValue||"value",multiple:n.multiple,chips:n.chips,"hide-details":n.hideDetails||t.hideDetails},on:{input:function(e){return t.handleInput(n.key,e)},change:function(e){return t.handleChange(n.key,e)},blur:function(e){return t.handleBlur(n.key,e)}}},"v-select",n.props,!1)):"autocomplete"===n.type?e("v-autocomplete",t._b({class:t.inputClass,attrs:{dense:t.getDense(n),filled:t.getFilled(n),outlined:t.getOutlined(n),value:t.getFieldValue(n.key),items:t.getFieldOptions(n),rules:t.getRules(n),disabled:t.getFieldDisabled(n),readonly:n.readonly,placeholder:n.placeholder,"item-text":n.itemText||"text","item-value":n.itemValue||"value","hide-details":n.hideDetails||t.hideDetails},on:{input:function(e){return t.handleInput(n.key,e)},change:function(e){return t.handleChange(n.key,e)},blur:function(e){return t.handleBlur(n.key,e)}}},"v-autocomplete",n.props,!1)):"date"===n.type?e("v-menu",{attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(r){var i=r.on,a=r.attrs;return[e("v-text-field",t._g(t._b({class:t.inputClass,attrs:{dense:t.getDense(n),filled:t.getFilled(n),outlined:t.getOutlined(n),value:t.getFieldValue(n.key),rules:t.getRules(n),disabled:t.getFieldDisabled(n),placeholder:n.placeholder,"hide-details":n.hideDetails||t.hideDetails,readonly:""}},"v-text-field",a,!1),i))]}}],null,!0),model:{value:t.dateMenus[n.key],callback:function(e){t.$set(t.dateMenus,n.key,e)},expression:"dateMenus[field.key]"}},[t._v(" "),e("v-date-picker",t._b({attrs:{value:t.getFieldValue(n.key),locale:n.locale||"zh-cn"},on:{input:function(e){t.dateMenus[n.key]=!1,t.handleInput(n.key,e)}}},"v-date-picker",n.pickerProps,!1))],1):"time"===n.type?e("v-menu",{attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(r){var i=r.on,a=r.attrs;return[e("v-text-field",t._g(t._b({class:t.inputClass,attrs:{dense:t.getDense(n),filled:t.getFilled(n),outlined:t.getOutlined(n),value:t.getFieldValue(n.key),rules:t.getRules(n),disabled:t.getFieldDisabled(n),placeholder:n.placeholder,"hide-details":n.hideDetails||t.hideDetails,readonly:""}},"v-text-field",a,!1),i))]}}],null,!0),model:{value:t.timeMenus[n.key],callback:function(e){t.$set(t.timeMenus,n.key,e)},expression:"timeMenus[field.key]"}},[t._v(" "),e("v-time-picker",t._b({attrs:{value:t.getFieldValue(n.key),format:"24hr"},on:{input:function(e){t.timeMenus[n.key]=!1,t.handleInput(n.key,e)}}},"v-time-picker",n.pickerProps,!1))],1):"color"===n.type?e("v-menu",{attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"320px"},scopedSlots:t._u([{key:"activator",fn:function(r){var i=r.on;return r.attrs,[e("v-text-field",t._g(t._b({class:t.inputClass,attrs:{dense:t.getDense(n),filled:t.getFilled(n),outlined:t.getOutlined(n),value:t.getFieldValue(n.key),rules:t.getRules(n),disabled:t.getFieldDisabled(n),placeholder:n.placeholder,"hide-details":n.hideDetails||t.hideDetails,readonly:""},scopedSlots:t._u([{key:"append",fn:function(){return[e("span",{staticClass:"jh-color-preview",style:{backgroundColor:t.getFieldValue(n.key)||n.defaultValue||"#ffffff"}})]},proxy:!0}],null,!0)},"v-text-field",n.props,!1),i))]}}],null,!0),model:{value:t.colorMenus[n.key],callback:function(e){t.$set(t.colorMenus,n.key,e)},expression:"colorMenus[field.key]"}},[t._v(" "),e("v-color-picker",t._b({attrs:{value:t.getFieldValue(n.key)||n.defaultValue||"#000000",flat:"","hide-mode-switch":!1!==n.hideModeSwitch},on:{input:function(e){return t.handleColorInput(n,e)}}},"v-color-picker",n.pickerProps,!1))],1):"slider"===n.type?e("v-slider",t._b({class:t.inputClass,attrs:{value:t.getFieldValue(n.key),rules:t.getRules(n),disabled:t.getFieldDisabled(n),readonly:n.readonly,min:void 0!==n.min?n.min:0,max:void 0!==n.max?n.max:100,step:void 0!==n.step?n.step:1,"thumb-label":n.thumbLabel,ticks:n.ticks,"tick-size":n.tickSize,color:n.color||"primary","hide-details":n.hideDetails||t.hideDetails},on:{input:function(e){return t.handleInput(n.key,e)}}},"v-slider",n.props,!1)):"range-slider"===n.type?e("v-range-slider",t._b({class:t.inputClass,attrs:{value:t.getFieldValue(n.key),rules:t.getRules(n),disabled:t.getFieldDisabled(n),readonly:n.readonly,min:void 0!==n.min?n.min:0,max:void 0!==n.max?n.max:100,step:void 0!==n.step?n.step:1,"thumb-label":n.thumbLabel,ticks:n.ticks,"tick-size":n.tickSize,color:n.color||"primary","hide-details":n.hideDetails||t.hideDetails},on:{input:function(e){return t.handleInput(n.key,e)}}},"v-range-slider",n.props,!1)):"switch"===n.type?e("v-switch",t._b({attrs:{"input-value":t.getFieldValue(n.key),label:n.switchLabel,disabled:t.getFieldDisabled(n),readonly:n.readonly,color:n.color||"success","hide-details":n.hideDetails||t.hideDetails},on:{change:function(e){return t.handleChange(n.key,e)}}},"v-switch",n.props,!1)):"checkbox"===n.type?e("v-checkbox",t._b({attrs:{"input-value":t.getFieldValue(n.key),label:n.checkboxLabel,disabled:t.getFieldDisabled(n),readonly:n.readonly,color:n.color||"success","hide-details":n.hideDetails||t.hideDetails},on:{change:function(e){return t.handleChange(n.key,e)}}},"v-checkbox",n.props,!1)):"radio"===n.type?e("v-radio-group",t._b({attrs:{value:t.getFieldValue(n.key),rules:t.getRules(n),disabled:t.getFieldDisabled(n),readonly:n.readonly,row:!1!==n.row,"hide-details":n.hideDetails||t.hideDetails},on:{change:function(e){return t.handleChange(n.key,e)}}},"v-radio-group",n.props,!1),t._l(t.getFieldOptions(n),function(t){return e("v-radio",{key:t.value,attrs:{label:t.text,value:t.value,color:n.color||"success"}})}),1):"slot"===n.type?t._t("field-".concat(n.key),null,{field:n,value:t.getFieldValue(n.key),values:t.values,updateField:t.updateField}):t._e():e("v-text-field",t._b({class:t.inputClass,attrs:{dense:t.getDense(n),"single-line":t.getSingleLine(n),filled:t.getFilled(n),outlined:t.getOutlined(n),value:t.getFieldValue(n.key),rules:t.getRules(n),disabled:t.getFieldDisabled(n),readonly:n.readonly,placeholder:n.placeholder,prefix:n.prefix,suffix:n.suffix,"hide-details":n.hideDetails||t.hideDetails},on:{input:function(e){return t.handleInput(n.key,e)},change:function(e){return t.handleChange(n.key,e)},blur:function(e){return t.handleBlur(n.key,e)}}},"v-text-field",n.props,!1))]],2)])])]})],2),t._v(" "),t._t("footer",null,{values:t.values})],2)};function b(t){return function(t){if(Array.isArray(t))return _(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return _(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function S(t){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S(t)}function w(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function C(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?w(Object(n),!0).forEach(function(e){x(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function x(t,e,n){return(e=function(t){var e=function(t){if("object"!=S(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=S(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==S(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}g._withStripped=!0;const k=r({name:"JhFormFields",props:{fields:{type:Array,default:function(){return[]}},value:{type:Object,default:function(){return{}}},title:{type:String,default:""},description:{type:String,default:""},tooltip:{type:String,default:""},layout:{type:String,default:"vertical",validator:function(t){return["horizontal","vertical","inline"].includes(t)}},showLabels:{type:Boolean,default:!0},labelWidth:{type:[Number,String],default:"auto"},labelAlign:{type:String,default:"right",validator:function(t){return["left","right","center"].includes(t)}},showRequiredMark:{type:Boolean,default:!0},readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},defaultDense:{type:Boolean,default:!0},defaultFilled:{type:Boolean,default:!0},defaultOutlined:{type:Boolean,default:!1},defaultSingleLine:{type:Boolean,default:!0},defaultColsMd:{type:Number,default:6},hideDetails:{type:[Boolean,String],default:!1},labelClass:{type:String,default:"jh-input-label"},inputClass:{type:String,default:"jh-v-input"},rowClass:{type:String,default:""},rowProps:{type:Object,default:function(){return{}}},validationRules:{type:Object,default:function(){return{require:[function(t){return!!t||"必填"}],email:[function(t){return!t||/.+@.+\..+/.test(t)||"邮箱格式不正确"}],phone:[function(t){return!t||/^1[3-9]\d{9}$/.test(t)||"手机号格式不正确"}],number:[function(t){return!t||!isNaN(t)||"请输入数字"}],integer:[function(t){return!t||Number.isInteger(Number(t))||"请输入整数"}]}}},dense:{type:Boolean,default:!1},bordered:{type:Boolean,default:!1},dependencies:{type:Array,default:function(){return[]}}},data:function(){return{values:{},dateMenus:{},timeMenus:{},colorMenus:{},dependencyWatchers:[]}},computed:{formFieldsClasses:function(){return x({"jh-form-fields":!0,"jh-form-fields--bordered":this.bordered,"jh-form-fields--readonly":this.readonly,"jh-form-fields--disabled":this.disabled},"jh-form-fields--".concat(this.layout),!0)},visibleFields:function(){var t=this;return this.fields.filter(function(e){return"function"==typeof e.visible?e.visible(t.values):void 0===e.visible||e.visible})}},watch:{value:{handler:function(t){this.values=C({},t)},immediate:!0,deep:!0},dependencies:{handler:function(t){this.setupDependencyWatchers(t)},immediate:!0}},mounted:function(){this.initValues(),this.setupFieldDependencies()},beforeDestroy:function(){this.dependencyWatchers.forEach(function(t){return t()}),this.dependencyWatchers=[]},methods:{initValues:function(){var t=C({},this.value);this.fields.forEach(function(e){void 0!==e.defaultValue&&void 0===t[e.key]&&(t[e.key]=e.defaultValue)}),this.values=t},setupFieldDependencies:function(){var t=this;this.fields.forEach(function(e){e.dependencies&&Array.isArray(e.dependencies)&&e.dependencies.forEach(function(n){var r=t.$watch(function(){return t.values[n]},function(r,i){r!==i&&t.handleDependencyChange(e,n,r,i)});t.dependencyWatchers.push(r)})})},setupDependencyWatchers:function(t){var e=this;this.dependencyWatchers.forEach(function(t){return t()}),this.dependencyWatchers=[],t.forEach(function(t){var n=e.$watch(function(){return e.values[t]},function(n,r){n!==r&&e.$emit("dependency-change",{key:t,value:n,oldValue:r,values:e.values})});e.dependencyWatchers.push(n)})},handleDependencyChange:function(t,e,n,r){"function"==typeof t.onDependencyChange&&t.onDependencyChange(e,n,r,this.values),this.$emit("field-dependency-change",{field:t.key,dependency:e,value:n,oldValue:r,values:this.values})},getFieldValue:function(t){return this.values[t]},getFieldOptions:function(t){return"function"==typeof t.options?t.options(this.values):t.options||[]},getFieldCols:function(t){return"inline"===this.layout?"auto":t.cols?"object"===S(t.cols)&&t.cols.xs||t.cols:12},getFieldSm:function(t){return"inline"===this.layout?"auto":t.cols&&"object"===S(t.cols)?t.cols.sm:12},getFieldMd:function(t){return"inline"===this.layout?"auto":t.cols&&"object"===S(t.cols)?t.cols.md||this.defaultColsMd:t.cols||this.defaultColsMd},getFieldLg:function(t){return"inline"===this.layout?"auto":t.cols&&"object"===S(t.cols)?t.cols.lg||t.cols.md||this.defaultColsMd:t.cols||this.defaultColsMd},getFieldXl:function(t){return"inline"===this.layout?"auto":t.cols&&"object"===S(t.cols)?t.cols.xl||t.cols.md||this.defaultColsMd:t.cols||this.defaultColsMd},getFieldColClass:function(t){return t.colClass||""},getFieldWrapperClass:function(t){var e=t.layout||this.layout;return"jh-field-wrapper ".concat("horizontal"===e?"d-flex align-center":"")},getHorizontalLabelClass:function(t){var e=t.labelAlign||this.labelAlign;return"jh-field-label jh-input-label jh-field-label--horizontal text-".concat(e," flex-shrink-0")},getHorizontalLabelStyle:function(t){var e=t.labelWidth||this.labelWidth;return{width:"number"==typeof e?"".concat(e,"px"):e,minWidth:"number"==typeof e?"".concat(e,"px"):e}},getVerticalLabelClass:function(t){return"jh-field-label jh-input-label jh-field-label--vertical mb-1"},getFieldInputClass:function(t){return"horizontal"===(t.layout||this.layout)?"jh-field-input flex-grow-1":"jh-field-input"},getFieldDisabled:function(t){return"function"==typeof t.disabled?t.disabled(this.values):void 0!==t.disabled?t.disabled:this.disabled},isFieldReadonly:function(t){return"function"==typeof t.readonly?t.readonly(this.values):void 0!==t.readonly?t.readonly:this.readonly},getReadonlyValue:function(t){var e=this.values[t.key];if("function"==typeof t.readonlyRender)return t.readonlyRender(e,this.values);if(("select"===t.type||"radio"===t.type)&&t.options){var n=this.getFieldOptions(t);if(t.multiple&&Array.isArray(e))return e.map(function(t){var e=n.find(function(e){return e.value===t});return e?e.text:t}).join(", ");var r=n.find(function(t){return t.value===e});return r?r.text:e}return"switch"===t.type||"checkbox"===t.type?e?"是":"否":"range-slider"===t.type&&Array.isArray(e)?e.join(" ~ "):e||"-"},getDense:function(t){return void 0!==t.dense?t.dense:this.defaultDense},getFilled:function(t){return void 0!==t.filled?t.filled:this.defaultFilled},getOutlined:function(t){return void 0!==t.outlined?t.outlined:this.defaultOutlined},getSingleLine:function(t){return void 0!==t.singleLine?t.singleLine:this.defaultSingleLine},getRules:function(t){var e=this,n=[];return t.required&&n.push(function(e){return!!e||"".concat(t.label||"此字段","为必填项")}),t.rules&&(Array.isArray(t.rules)?n.push.apply(n,b(t.rules)):"string"==typeof t.rules&&t.rules.split("|").forEach(function(t){var r=t.trim();e.validationRules[r]&&n.push.apply(n,b(e.validationRules[r]))})),n},handleInput:function(t,e){this.$set(this.values,t,e),this.$emit("input",this.values),this.$emit("field-input",{key:t,value:e,values:this.values})},handleChange:function(t,e){this.$set(this.values,t,e),this.$emit("input",this.values),this.$emit("field-change",{key:t,value:e,values:this.values})},handleColorInput:function(t,e){this.handleInput(t.key,e),!1!==t.closeOnSelect&&this.$set(this.colorMenus,t.key,!1)},handleBlur:function(t,e){this.$emit("field-blur",{key:t,value:e,values:this.values})},updateField:function(t,e){this.$set(this.values,t,e),this.$emit("input",this.values),this.$emit("field-change",{key:t,value:e,values:this.values})},getValues:function(){return C({},this.values)},setFieldsValue:function(t){this.values=C(C({},this.values),t),this.$emit("input",this.values)},setFieldValue:function(t,e){this.$set(this.values,t,e),this.$emit("input",this.values)},resetFields:function(){var t={};this.fields.forEach(function(e){void 0!==e.defaultValue&&(t[e.key]=e.defaultValue)}),this.values=t,this.$emit("input",this.values),this.$emit("reset",this.values)}}},g,[],!1,null,"666784d9",null).exports;function j(t){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},j(t)}function D(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function a(n,r,i,a){var s=r&&r.prototype instanceof l?r:l,c=Object.create(s.prototype);return O(c,"_invoke",function(n,r,i){var a,l,s,c=0,u=i||[],d=!1,f={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return a=e,l=0,s=t,f.n=n,o}};function h(n,r){for(l=n,s=r,e=0;!d&&c&&!i&&e<u.length;e++){var i,a=u[e],h=f.p,p=a[2];n>3?(i=p===r)&&(s=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=t):a[0]<=h&&((i=n<2&&h<a[1])?(l=0,f.v=r,f.n=a[1]):h<p&&(i=n<3||a[0]>r||r>p)&&(a[4]=n,a[5]=r,f.n=p,l=0))}if(i||n>1)return o;throw d=!0,r}return function(i,u,p){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&h(u,p),l=u,s=p;(e=l<2?t:s)||!d;){a||(l?l<3?(l>1&&(f.n=-1),h(l,s)):f.n=s:f.v=s);try{if(c=2,a){if(l||(i="next"),e=a[i]){if(!(e=e.call(a,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,l<2&&(l=0)}else 1===l&&(e=a.return)&&e.call(a),l<2&&(s=TypeError("The iterator does not provide a '"+i+"' method"),l=1);a=t}else if((e=(d=f.n<0)?s:n.call(r,f))!==o)break}catch(e){a=t,l=1,s=e}finally{c=1}}return{value:e,done:d}}}(n,i,a),!0),c}var o={};function l(){}function s(){}function c(){}e=Object.getPrototypeOf;var u=[][r]?e(e([][r]())):(O(e={},r,function(){return this}),e),d=c.prototype=l.prototype=Object.create(u);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,O(t,i,"GeneratorFunction")),t.prototype=Object.create(d),t}return s.prototype=c,O(d,"constructor",c),O(c,"constructor",s),s.displayName="GeneratorFunction",O(c,i,"GeneratorFunction"),O(d),O(d,i,"Generator"),O(d,r,function(){return this}),O(d,"toString",function(){return"[object Generator]"}),(D=function(){return{w:a,m:f}})()}function O(t,e,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}O=function(t,e,n,r){function a(e,n){O(t,e,function(t){return this._invoke(e,n,t)})}e?i?i(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(a("next",0),a("throw",1),a("return",2))},O(t,e,n,r)}function I(t,e,n,r,i,a,o){try{var l=t[a](o),s=l.value}catch(t){return void n(t)}l.done?e(s):Promise.resolve(s).then(r,i)}function P(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function F(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?P(Object(n),!0).forEach(function(e){T(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function T(t,e,n){return(e=function(t){var e=function(t){if("object"!=j(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=j(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==j(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const A=r({name:"JhQueryFilter",components:{JhFormFields:k},props:{fields:{type:Array,default:function(){return[]}},initialValues:{type:Object,default:function(){return{}}},collapsible:{type:Boolean,default:!0},defaultCollapsed:{type:Boolean,default:!0},defaultVisibleCount:{type:Number,default:3},colSpan:{type:Object,default:function(){return{xs:24,sm:12,md:6,lg:4}}},showLabels:{type:Boolean,default:!0},dense:{type:Boolean,default:!0},filled:{type:Boolean,default:!0},outlined:{type:Boolean,default:!1},singleLine:{type:Boolean,default:!0},searchText:{type:String,default:"查询"},resetText:{type:String,default:"重置"},expandText:{type:String,default:"展开"},collapseText:{type:String,default:"收起"},buttonSize:{type:String,default:"small",validator:function(t){return["small","default","large"].includes(t)}},buttonAlign:{type:String,default:"left",validator:function(t){return["left","right","center"].includes(t)}},loading:{type:Boolean,default:!1},labelClass:{type:String,default:"jh-input-label"},inputClass:{type:String,default:"jh-v-input"},rowClass:{type:String,default:"ma-0"},buttonClass:{type:String,default:"gap-2"},buttonColumnClass:{type:String,default:""}},data:function(){return{formData:{},collapsed:this.defaultCollapsed,searching:!1}},computed:{visibleFields:function(){return this.collapsible&&this.collapsed?this.fields.slice(0,this.defaultVisibleCount):this.fields},visibleFieldsWithConfig:function(){var t=this;return this.visibleFields.map(function(e){return F(F({},e),{},{cols:e.cols||{xs:t.colSpan.xs||12,sm:t.colSpan.sm||12,md:t.colSpan.md||8,lg:t.colSpan.lg||6},props:F({clearable:!0,placeholder:e.placeholder||"请输入".concat(e.text)},e.props)})})}},watch:{initialValues:{handler:function(t){this.formData=F({},t)},immediate:!0,deep:!0},loading:function(t){this.searching=t}},mounted:function(){this.initFormData()},methods:{initFormData:function(){var t=F({},this.initialValues);this.fields.forEach(function(e){void 0!==e.defaultValue&&void 0===t[e.key]&&(t[e.key]=e.defaultValue)}),this.formData=t},handleFieldChange:function(t){var e,n=t.key,r=t.value;this.$emit("field-change",{key:n,value:r,formData:this.formData}),null!==(e=this.fields.find(function(t){return t.key===n}))&&void 0!==e&&e.realtime&&this.handleSearch()},toggleCollapse:function(){this.collapsed=!this.collapsed,this.$emit("collapse-change",this.collapsed)},handleSearch:function(){var t,e=this;return(t=D().m(function t(){var n;return D().w(function(t){for(;;)switch(t.n){case 0:e.searching=!0;try{n={},Object.keys(e.formData).forEach(function(t){var r=e.formData[t];if(null!=r&&""!==r){if(Array.isArray(r)&&0===r.length)return;n[t]=r}}),e.$emit("search",n)}finally{e.loading||(e.searching=!1)}case 1:return t.a(2)}},t)}),function(){var e=this,n=arguments;return new Promise(function(r,i){var a=t.apply(e,n);function o(t){I(a,r,i,o,l,"next",t)}function l(t){I(a,r,i,o,l,"throw",t)}o(void 0)})})()},handleReset:function(){var t=this;this.initFormData(),this.fields.forEach(function(e){t.$set(t.formData,e.key,void 0!==e.defaultValue?e.defaultValue:"")}),this.$emit("reset"),this.handleSearch()},getFormData:function(){return F({},this.formData)},setFieldsValue:function(t){this.formData=F(F({},this.formData),t)},setFieldValue:function(t,e){this.$set(this.formData,t,e)}}},y,[],!1,null,"3f67f486",null).exports;var B=function(){var t=this,e=t._self._c;return e("div",{class:t.wrapperClass,style:t.wrapperStyle},[t.headerTitle||t.$slots["header-title"]||t.$slots["toolbar-extra"]?e("div",{staticClass:"jh-pro-table-header"},[e("div",{staticClass:"jh-pro-table-header-left"},[t.headerTitle||t.$slots["header-title"]?e("div",{staticClass:"jh-pro-table-title"},[t._t("header-title",function(){return[e("span",{staticClass:"jh-pro-table-title-text"},[t._v(t._s(t.headerTitle))]),t._v(" "),t.tooltip?e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(n){var r=n.on,i=n.attrs;return[e("v-icon",t._g(t._b({staticClass:"ml-1",attrs:{small:""}},"v-icon",i,!1),r),[t._v("mdi-help-circle-outline")])]}}],null,!1,1799656693)},[t._v(" "),e("span",[t._v(t._s(t.tooltip))])]):t._e()]})],2):t._e()]),t._v(" "),e("div",{staticClass:"jh-pro-table-header-right"},[t._t("toolbar-extra")],2)]):t._e(),t._v(" "),t.hasFilterFields?e("jh-query-filter",{ref:"queryFilterRef",staticClass:"pa-0",attrs:{fields:t.filterFieldsResolved,"initial-values":t.computedFilterInitialValues,collapsible:t.filterCollapsible,"default-collapsed":t.filterDefaultCollapsed,"default-visible-count":t.filterDefaultVisibleCount,"col-span":t.filterColSpan,dense:!0,outlined:!0,"show-labels":!1,"search-text":t.filterSearchText,"reset-text":t.filterResetText},on:{search:t.handleFilterSearch,reset:t.handleFilterReset},scopedSlots:t._u([t._l(t.filterFieldsResolved,function(e){return{key:"field-".concat(e.key),fn:function(n){return[t._t("filter-field-".concat(e.key),null,null,n)]}}}),{key:"buttons",fn:function(e){return[t._t("filter-buttons",null,null,e)]}}],null,!0)}):t._e(),t._v(" "),t.showSelectionAlertBar?e("div",{staticClass:"jh-pro-table-alert"},[t.hasAlertContent?e("div",{staticClass:"jh-pro-table-alert-info"},[t.$scopedSlots.alert?[t._t("alert",null,{selectedRowKeys:t.selectedRowKeys,selectedRows:t.selectedItems})]:"function"==typeof t.tableAlertRender?e("render-function",{attrs:{render:t.tableAlertRender,params:t.tableAlertScope}}):[e("v-icon",{staticClass:"mr-2",attrs:{small:"",color:"primary"}},[t._v("mdi-checkbox-marked-circle")]),t._v(" "),e("span",[t._v("已选择 "),e("strong",{staticClass:"primary--text"},[t._v(t._s(t.selectedItems.length))]),t._v(" 项")]),t._v(" "),e("v-btn",{staticClass:"ml-2",attrs:{text:"","x-small":""},on:{click:t.clearSelection}},[t._v("清空")])]],2):t._e(),t._v(" "),t.hasAlertActionsContent?e("div",{staticClass:"jh-pro-table-alert-actions"},[t.$scopedSlots["alert-actions"]?[t._t("alert-actions",null,{selectedRowKeys:t.selectedRowKeys,selectedRows:t.selectedItems})]:e("render-function",{attrs:{render:t.tableAlertOptionRender,params:t.tableAlertScope}})],2):t._e()]):t._e(),t._v(" "),!1!==t.toolbar?e("v-row",{staticClass:"jh-pro-table-toolbar ma-0 pb-3 pa-3 pa-md-0",attrs:{align:"center"}},[t.headerTitle||t.$slots["header-title"]?t._e():e("div",{staticClass:"flex items-center gap-2"},[t._t("toolbar-actions",function(){return[t.showCreateButton?e("v-btn",{staticClass:"mr-2",attrs:{color:"success",small:""},on:{click:function(e){return e.stopPropagation(),t.$emit("create-click")}}},[e("v-icon",{attrs:{left:"",small:""}},[t._v("mdi-plus")]),t._v(" "),e("span",{staticClass:"d-none d-sm-inline"},[t._v("新增")])],1):t._e()]})],2),t._v(" "),e("v-spacer"),t._v(" "),e("div",{staticClass:"flex items-center gap-2 justify-end flex-wrap"},[t.toolbarConfig.search?e("v-text-field",{staticClass:"jh-v-input jh-toolbar-search border",attrs:{prefix:t.isMobile?"":"筛选",placeholder:t.isMobile?"筛选":"",dense:"",filled:"","single-line":"","hide-details":"",clearable:""},model:{value:t.searchInputInternal,callback:function(e){t.searchInputInternal=e},expression:"searchInputInternal"}}):t._e(),t._v(" "),t.toolbarConfig.refresh?e("v-btn",{attrs:{icon:"",small:"",title:"刷新"},on:{click:t.handleRefresh}},[e("v-icon",[t._v("mdi-refresh")])],1):t._e(),t._v(" "),t.toolbarConfig.density?e("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(n){var r=n.on,i=n.attrs;return[e("v-btn",t._g(t._b({attrs:{icon:"",small:"",title:"密度"}},"v-btn",i,!1),r),[e("v-icon",[t._v("mdi-format-line-spacing")])],1)]}}],null,!1,1668111094)},[t._v(" "),e("v-list",{attrs:{dense:""}},[e("v-list-item",{on:{click:function(e){t.currentDensity="default"}}},[e("v-list-item-title",["default"===t.currentDensity?e("v-icon",{attrs:{small:"",left:""}},[t._v("mdi-check")]):t._e(),t._v("\n                默认\n              ")],1)],1),t._v(" "),e("v-list-item",{on:{click:function(e){t.currentDensity="medium"}}},[e("v-list-item-title",["medium"===t.currentDensity?e("v-icon",{attrs:{small:"",left:""}},[t._v("mdi-check")]):t._e(),t._v("\n                中等\n              ")],1)],1),t._v(" "),e("v-list-item",{on:{click:function(e){t.currentDensity="compact"}}},[e("v-list-item-title",["compact"===t.currentDensity?e("v-icon",{attrs:{small:"",left:""}},[t._v("mdi-check")]):t._e(),t._v("\n                紧凑\n              ")],1)],1)],1)],1):t._e(),t._v(" "),t.toolbarConfig.setting?e("v-menu",{attrs:{"offset-y":"",left:"","max-height":"400"},scopedSlots:t._u([{key:"activator",fn:function(n){var r=n.on,i=n.attrs;return[e("v-btn",t._g(t._b({attrs:{icon:"",small:"",title:"列设置"}},"v-btn",i,!1),r),[e("v-icon",[t._v("mdi-cog-outline")])],1)]}}],null,!1,911125755)},[t._v(" "),e("v-card",{attrs:{"min-width":"200"}},[e("v-card-text",{staticClass:"pa-2"},[e("div",{staticClass:"text-caption font-weight-bold mb-2"},[t._v("列显示")]),t._v(" "),e("v-list",{attrs:{dense:""}},t._l(t.internalColumns,function(n){return e("v-list-item",{key:n.value,staticClass:"px-2",on:{click:function(e){return t.toggleColumn(n)}}},[e("v-list-item-action",{staticClass:"mr-2"},[e("v-checkbox",{attrs:{"input-value":!1!==n.visible,"hide-details":"",dense:""},on:{click:function(e){return e.stopPropagation(),t.toggleColumn(n)}}})],1),t._v(" "),e("v-list-item-content",[e("v-list-item-title",{staticClass:"text-body-2"},[t._v(t._s(n.text||n.title))])],1)],1)}),1),t._v(" "),e("v-divider",{staticClass:"my-2"}),t._v(" "),e("v-btn",{attrs:{text:"",small:"",block:""},on:{click:t.resetColumns}},[t._v("重置")])],1)],1)],1):t._e(),t._v(" "),t.toolbarConfig.fullscreen?e("v-btn",{attrs:{icon:"",small:"",title:t.isFullscreen?"退出全屏":"全屏"},on:{click:t.toggleFullscreen}},[e("v-icon",[t._v(t._s(t.isFullscreen?"mdi-fullscreen-exit":"mdi-fullscreen"))])],1):t._e()],1)],1):t._e(),t._v(" "),t.$slots["table-extra"]?e("div",{staticClass:"jh-pro-table-extra"},[t._t("table-extra")],2):t._e(),t._v(" "),e("v-data-table",t._g(t._b({ref:"dataTable",staticClass:"jh-fixed-table-height elevation-0 mb-xs-4 mx-3 mx-md-0 mt-3",class:[t.tableClassComputed,t.densityClass],attrs:{headers:t.visibleHeaders,items:t.currentItems,search:t.searchInputInternal,"footer-props":t.currentFooterProps,"items-per-page":t.currentItemsPerPage,page:t.currentPage,"server-items-length":t.serverItemsLength,"mobile-breakpoint":t.mobileBreakpoint,loading:t.currentLoading,"checkbox-color":t.checkboxColor,"fixed-header":t.fixedHeader,"show-select":t.showSelectComputed,"single-select":t.singleSelectComputed,value:t.selectedItems,"item-key":t.rowKey,dense:t.dense,"multi-sort":t.multiSort,"must-sort":t.mustSort,"sort-by":t.internalSortBy,"sort-desc":t.internalSortDesc},on:{"click:row":t.handleRowClick,input:t.handleSelectionChange,"update:page":t.handlePageChange,"update:items-per-page":t.handleItemsPerPageChange,"update:sort-by":t.handleSortByUpdate,"update:sort-desc":t.handleSortDescUpdate},scopedSlots:t._u([t._l(t.customHeaderSlots,function(e){return{key:"header.".concat(e.value),fn:function(n){var r=n.header;return[t._t("header.".concat(e.value),function(){return[t._v(t._s(r.text||r.title))]},{header:r})]}}}),t._l(t.visibleHeaders,function(n){return{key:"item.".concat(n.value),fn:function(r){var i=r.item,a=r.value,o=r.index;return["action"===n.value?[t._t("item.action",function(){return[t.isMobile?t._e():e("div",{staticClass:"flex items-center gap-1"},[t.actionColumn&&t.actionColumn.buttons?[t._l(t.getVisibleButtons(i),function(n,r){return[n.tooltip?e("v-tooltip",{key:r,attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(r){var a=r.on,o=r.attrs;return[e("v-btn",t._g(t._b({attrs:{"x-small":"",text:"link"===n.type,icon:"icon"===n.type,color:n.color||"primary"},on:{click:function(e){return e.stopPropagation(),t.handleActionClick(n,i)}}},"v-btn",o,!1),a),[n.icon?e("v-icon",{attrs:{small:""}},[t._v(t._s(n.icon))]):t._e(),t._v(" "),"icon"!==n.type?e("span",[t._v(t._s(n.text))]):t._e()],1)]}}],null,!0)},[t._v(" "),e("span",[t._v(t._s(n.tooltip))])]):e("v-btn",{key:r,attrs:{"x-small":"",text:"link"===n.type,icon:"icon"===n.type,color:n.color||"primary"},on:{click:function(e){return e.stopPropagation(),t.handleActionClick(n,i)}}},[n.icon?e("v-icon",{attrs:{small:""}},[t._v(t._s(n.icon))]):t._e(),t._v(" "),"icon"!==n.type?e("span",[t._v(t._s(n.text))]):t._e()],1)]})]:[t.showUpdateAction?e("span",{staticClass:"success--text font-weight-medium font-size-2 mr-2 cursor-pointer",attrs:{role:"button"},on:{click:function(e){return e.stopPropagation(),t.$emit("update-click",i)}}},[e("v-icon",{staticClass:"success--text",attrs:{size:"16"}},[t._v("mdi-note-edit-outline")]),t._v("详情\n                ")],1):t._e(),t._v(" "),t.showDeleteAction?e("span",{staticClass:"error--text font-weight-medium font-size-2 mr-2 cursor-pointer",attrs:{role:"button"},on:{click:function(e){return e.stopPropagation(),t.$emit("delete-click",i)}}},[e("v-icon",{staticClass:"error--text",attrs:{size:"16"}},[t._v("mdi-trash-can-outline")]),t._v("删除\n                ")],1):t._e()]],2),t._v(" "),t.isMobile?e("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(n){var r=n.on,i=n.attrs;return[e("span",t._g(t._b({staticClass:"success--text font-weight-medium font-size-2",attrs:{role:"button"}},"span",i,!1),r),[e("v-icon",{staticClass:"success--text",attrs:{size:"20"}},[t._v("mdi-chevron-down")]),t._v("操作\n                ")],1)]}}],null,!0)},[t._v(" "),e("v-list",{attrs:{dense:""}},[t.actionColumn&&t.actionColumn.buttons?t._l(t.getVisibleButtons(i),function(n,r){return e("v-list-item",{key:r,on:{click:function(e){return e.stopPropagation(),t.handleActionClick(n,i)}}},[n.icon?e("v-list-item-icon",[e("v-icon",{attrs:{small:""}},[t._v(t._s(n.icon))])],1):t._e(),t._v(" "),e("v-list-item-title",[t._v(t._s(n.text))])],1)}):[t.showUpdateAction?e("v-list-item",{on:{click:function(e){return e.stopPropagation(),t.$emit("update-click",i)}}},[e("v-list-item-title",[t._v("详情")])],1):t._e(),t._v(" "),t.showDeleteAction?e("v-list-item",{on:{click:function(e){return e.stopPropagation(),t.$emit("delete-click",i)}}},[e("v-list-item-title",[t._v("删除")])],1):t._e()]],2)],1):t._e()]},{item:i})]:[n.slot||t.$scopedSlots["item.".concat(n.value)]?t._t("item.".concat(n.value),null,{item:i,value:a}):e("div",{staticClass:"jh-table-schema-cell d-flex align-center flex-wrap"},["status"===n.valueType?[e("v-chip",t._b({staticClass:"mr-2",attrs:{small:"",label:""}},"v-chip",t.getStatusChipProps(n,a,i),!1),[t.getStatusChipProps(n,a,i).icon?e("v-icon",{attrs:{left:"","x-small":""}},[t._v("\n                  "+t._s(t.getStatusChipProps(n,a,i).icon)+"\n                ")]):t._e(),t._v("\n                "+t._s(t.getStatusText(n,a,i))+"\n              ")],1)]:"progress"===n.valueType?[e("div",{staticClass:"d-flex align-center w-100"},[e("v-progress-linear",t._b({staticClass:"flex-grow-1",attrs:{value:t.getProgressValue(a)}},"v-progress-linear",t.getProgressProps(n),!1)),t._v(" "),!1!==t.getProgressProps(n).showValue?e("span",{staticClass:"ml-2 text-caption"},[t._v("\n                  "+t._s(t.formatPercentValue(t.getProgressValue(a),n.valueProps))+"\n                ")]):t._e()],1)]:"avatar"===n.valueType?[e("v-avatar",t._b({},"v-avatar",t.getAvatarProps(n),!1),[t.getAvatarSrc(a)?e("img",{attrs:{src:t.getAvatarSrc(a),alt:t.formatColumnValue(n,i,a,o)}}):e("span",[t._v(t._s(t.getAvatarInitials(t.formatColumnValue(n,i,a,o))))])]),t._v(" "),e("span",{staticClass:"ml-2"},[t._v(t._s(t.formatColumnValue(n,i,a,o)))])]:"json"===n.valueType?e("pre",{staticClass:"jh-table-json mr-2"},[t._v(t._s(t.formatJsonValue(a))+"\n            ")]):"index"===n.valueType?e("span",[t._v(t._s(t.getDisplayIndex(o)))]):"code"===n.valueType?e("code",{staticClass:"jh-table-code"},[t._v(t._s(t.formatColumnValue(n,i,a,o)))]):"dateRange"===n.valueType?e("span",[t._v(t._s(t.formatDateRangeValue(a,n.valueProps)))]):"date"===n.valueType||"dateTime"===n.valueType||"time"===n.valueType?e("span",[t._v("\n              "+t._s(t.formatDateValue(a,n.valueType,n.valueProps))+"\n            ")]):"money"===n.valueType?e("span",[t._v(t._s(t.formatMoneyValue(a,n.valueProps)))]):"percent"===n.valueType?e("span",[t._v(t._s(t.formatPercentValue(a,n.valueProps)))]):"digit"===n.valueType?e("span",[t._v(t._s(t.formatDigitValue(a,n.valueProps)))]):[t.shouldShowEllipsis(n,a,i,o)?e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(r){var l=r.on,s=r.attrs;return[e("span",t._g(t._b({staticClass:"text-truncate d-inline-block",staticStyle:{"max-width":"200px"}},"span",s,!1),l),[t._v("\n                    "+t._s(t.formatColumnValue(n,i,a,o))+"\n                  ")])]}}],null,!0)},[t._v(" "),e("span",[t._v(t._s(t.formatColumnValue(n,i,a,o)))])]):e("span",[t._v(t._s(t.formatColumnValue(n,i,a,o)))])],t._v(" "),n.copyable&&t.hasCopyValue(n,i,a)?e("v-btn",{staticClass:"ml-1",attrs:{icon:"","x-small":""},on:{click:function(e){e.stopPropagation(),t.copyToClipboard(t.getCopyValue(n,i,a))}}},[e("v-icon",{attrs:{"x-small":""}},[t._v("mdi-content-copy")])],1):t._e()],2)]]}}}),{key:"loading",fn:function(){return[e("div",{staticClass:"jh-no-data pa-6"},[e("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}}),t._v(" "),e("div",{staticClass:"mt-2"},[t._v("数据加载中...")])],1)]},proxy:!0},{key:"no-data",fn:function(){return[e("div",{staticClass:"jh-no-data pa-6"},[e("v-icon",{attrs:{large:"",color:"grey lighten-1"}},[t._v("mdi-inbox-outline")]),t._v(" "),e("div",{staticClass:"mt-2 text-body-2 grey--text"},[t._v("暂无数据")])],1)]},proxy:!0},{key:"no-results",fn:function(){return[e("div",{staticClass:"jh-no-data pa-6"},[e("v-icon",{attrs:{large:"",color:"grey lighten-1"}},[t._v("mdi-magnify")]),t._v(" "),e("div",{staticClass:"mt-2 text-body-2 grey--text"},[t._v("未找到匹配的数据")])],1)]},proxy:!0},{key:"footer.page-text",fn:function(n){return[e("span",[t._v(t._s(n.pageStart)+"-"+t._s(n.pageStop))]),t._v(" "),e("span",{staticClass:"ml-1"},[t._v("共"+t._s(n.itemsLength)+"条")])]}}],null,!0)},"v-data-table",t.mergedDataTableProps,!1),t.dataTableListeners))],1)};B._withStripped=!0;var $=["class","style"],R=["click:row","input","update:page","update:items-per-page","update:sort-by","update:sort-desc"];function N(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function a(n,r,i,a){var s=r&&r.prototype instanceof l?r:l,c=Object.create(s.prototype);return M(c,"_invoke",function(n,r,i){var a,l,s,c=0,u=i||[],d=!1,f={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return a=e,l=0,s=t,f.n=n,o}};function h(n,r){for(l=n,s=r,e=0;!d&&c&&!i&&e<u.length;e++){var i,a=u[e],h=f.p,p=a[2];n>3?(i=p===r)&&(s=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=t):a[0]<=h&&((i=n<2&&h<a[1])?(l=0,f.v=r,f.n=a[1]):h<p&&(i=n<3||a[0]>r||r>p)&&(a[4]=n,a[5]=r,f.n=p,l=0))}if(i||n>1)return o;throw d=!0,r}return function(i,u,p){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&h(u,p),l=u,s=p;(e=l<2?t:s)||!d;){a||(l?l<3?(l>1&&(f.n=-1),h(l,s)):f.n=s:f.v=s);try{if(c=2,a){if(l||(i="next"),e=a[i]){if(!(e=e.call(a,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,l<2&&(l=0)}else 1===l&&(e=a.return)&&e.call(a),l<2&&(s=TypeError("The iterator does not provide a '"+i+"' method"),l=1);a=t}else if((e=(d=f.n<0)?s:n.call(r,f))!==o)break}catch(e){a=t,l=1,s=e}finally{c=1}}return{value:e,done:d}}}(n,i,a),!0),c}var o={};function l(){}function s(){}function c(){}e=Object.getPrototypeOf;var u=[][r]?e(e([][r]())):(M(e={},r,function(){return this}),e),d=c.prototype=l.prototype=Object.create(u);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,M(t,i,"GeneratorFunction")),t.prototype=Object.create(d),t}return s.prototype=c,M(d,"constructor",c),M(c,"constructor",s),s.displayName="GeneratorFunction",M(c,i,"GeneratorFunction"),M(d),M(d,i,"Generator"),M(d,r,function(){return this}),M(d,"toString",function(){return"[object Generator]"}),(N=function(){return{w:a,m:f}})()}function M(t,e,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}M=function(t,e,n,r){function a(e,n){M(t,e,function(t){return this._invoke(e,n,t)})}e?i?i(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(a("next",0),a("throw",1),a("return",2))},M(t,e,n,r)}function L(t,e,n,r,i,a,o){try{var l=t[a](o),s=l.value}catch(t){return void n(t)}l.done?e(s):Promise.resolve(s).then(r,i)}function E(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var a=t.apply(e,n);function o(t){L(a,r,i,o,l,"next",t)}function l(t){L(a,r,i,o,l,"throw",t)}o(void 0)})}}function V(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(-1!==e.indexOf(r))continue;n[r]=t[r]}return n}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],-1===e.indexOf(n)&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function z(t){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},z(t)}function K(t){return function(t){if(Array.isArray(t))return G(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||J(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(t,e){if(t){if("string"==typeof t)return G(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?G(t,e):void 0}}function G(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function W(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function U(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?W(Object(n),!0).forEach(function(e){q(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function q(t,e,n){return(e=function(t){var e=function(t){if("object"!=z(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=z(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==z(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var H={success:{color:"success",textColor:"white"},warning:{color:"warning",textColor:"white"},error:{color:"error",textColor:"white"},processing:{color:"info",textColor:"white"},default:{color:"grey lighten-2",textColor:"grey darken-2"}};const Y=r({name:"JhTable",inheritAttrs:!1,components:{JhQueryFilter:A,RenderFunction:{name:"JhTableRenderFunction",functional:!0,props:{render:{type:Function,default:null},params:{type:Object,default:function(){return{}}}},render:function(t,e){var n=e.props.render;if("function"!=typeof n)return null;var r=e.props.params||{};return n.length>=2?n(t,r):n(r)}}},props:{headers:{type:Array,required:!0,default:function(){return[]}},items:{type:Array,default:function(){return[]}},request:{type:Function,default:null},showFilter:{type:Boolean,default:!1},filterFields:{type:Array,default:function(){return[]}},autoFilterFromHeaders:{type:Boolean,default:!0},filterInitialValues:{type:Object,default:function(){return{}}},filterCollapsible:{type:Boolean,default:!0},filterDefaultCollapsed:{type:Boolean,default:!0},filterDefaultVisibleCount:{type:Number,default:3},filterColSpan:{type:Object,default:function(){return{xs:24,sm:12,md:6,lg:4}}},filterSearchText:{type:String,default:"查询"},filterResetText:{type:String,default:"重置"},toolbar:{type:[Object,Boolean],default:function(){return{search:!0,refresh:!0,setting:!0,density:!0,fullscreen:!1}}},showSearch:{type:Boolean,default:!0},searchInput:{type:String,default:null},dataTableProps:{type:Object,default:function(){return{}}},sortBy:{type:[Array,String],default:function(){return[]}},sortDesc:{type:[Array,Boolean],default:function(){return[]}},multiSort:{type:Boolean,default:!1},mustSort:{type:Boolean,default:!1},showCreateButton:{type:Boolean,default:!0},showUpdateAction:{type:Boolean,default:!0},showDeleteAction:{type:Boolean,default:!0},actionColumn:{type:[Object,Boolean],default:null},columnsState:{type:Object,default:function(){return{persistenceKey:"",defaultVisible:null,value:null}}},pagination:{type:[Object,Boolean],default:function(){return{current:1,pageSize:20,pageSizeOptions:[10,20,50,100],showTotal:!0}}},itemsPerPage:{type:Number,default:20},rowSelection:{type:[Object,Boolean],default:null},tableAlertRender:{type:[Function,Boolean],default:null},tableAlertOptionRender:{type:[Function,Boolean],default:null},showSelect:{type:Boolean,default:!1},singleSelect:{type:Boolean,default:!1},headerTitle:{type:String,default:""},tooltip:{type:String,default:""},cardBordered:{type:Boolean,default:!0},ghost:{type:Boolean,default:!1},polling:{type:Number,default:0},debounceTime:{type:Number,default:300},loading:{type:Boolean,default:!1},rowKey:{type:String,default:"id"},size:{type:String,default:"default",validator:function(t){return["default","medium","compact"].includes(t)}},footerProps:{type:Object,default:function(){return{itemsPerPageOptions:[10,20,50,100],itemsPerPageText:"每页",itemsPerPageAllText:"所有",showFirstLastPage:!0,showCurrentPage:!0}}},mobileBreakpoint:{type:Number,default:600},checkboxColor:{type:String,default:"success"},tableClass:{type:[String,Object,Array],default:function(){return{zebraLine:!0}}},fixedHeader:{type:Boolean,default:!0},dense:{type:Boolean,default:!1}},data:function(){return{isMobile:window.innerWidth<500,searchInputInternal:this.searchInput,currentLoading:this.loading,currentItems:this.items||[],currentPage:this.pagination&&this.pagination.current||1,currentItemsPerPage:this.itemsPerPage,serverItemsLength:-1,internalColumns:[],currentDensity:this.size,isFullscreen:!1,selectedItems:[],filterValues:{},pollingTimer:null,searchDebounceTimer:null,internalSortBy:this.normalizeSortBy(this.sortBy),internalSortDesc:this.normalizeSortDesc(this.sortDesc),sortChangeTimer:null,hasAppliedDefaultRowSelection:!1}},computed:{selectedRowKeys:function(){var t=this;return this.selectedItems.map(function(e){return e[t.rowKey]})},tableAlertScope:function(){return{selectedRowKeys:this.selectedRowKeys,selectedRows:this.selectedItems,onCleanSelected:this.clearSelection}},hasFilterFields:function(){return this.showFilter&&this.filterFieldsResolved.length>0},filterFieldsResolved:function(){var t=Array.isArray(this.filterFields)?this.filterFields.map(function(t){return U({},t)}):[],e=new Set(t.map(function(t){return null==t?void 0:t.key}).filter(Boolean)),n=this.autoFilterConfig.fields.filter(function(t){return!e.has(t.key)});return[].concat(K(t),K(n))},computedFilterInitialValues:function(){var t=U(U({},this.autoFilterConfig.initialValues),this.filterInitialValues||{});return this.filterFieldsResolved.forEach(function(e){e&&e.key&&void 0===t[e.key]&&(void 0!==e.initialValue?t[e.key]=e.initialValue:void 0!==e.defaultValue&&(t[e.key]=e.defaultValue))}),t},autoFilterConfig:function(){var t=this,e={fields:[],meta:{},initialValues:{}};return this.autoFilterFromHeaders&&Array.isArray(this.internalColumns)&&this.internalColumns.length?(this.internalColumns.forEach(function(n){var r=t.buildAutoFilterField(n);r&&(e.fields.push(r.field),e.meta[r.field.key]={transform:r.transform},void 0!==r.initialValue&&(e.initialValues[r.field.key]=r.initialValue))}),e):e},filterFieldMetaMap:function(){var t=U({},this.autoFilterConfig.meta);return(this.filterFields||[]).forEach(function(e){e&&e.key&&(t[e.key]=U(U({},t[e.key]||{}),{},{transform:e.transform||t[e.key]&&t[e.key].transform}))}),this.filterFieldsResolved.forEach(function(e){e&&e.key&&e.transform&&(t[e.key]=U(U({},t[e.key]||{}),{},{transform:e.transform}))}),t},hasAlertContent:function(){return!!this.$scopedSlots.alert||"function"==typeof this.tableAlertRender||!1!==this.tableAlertRender},hasAlertActionsContent:function(){return!!this.$scopedSlots["alert-actions"]||"function"==typeof this.tableAlertOptionRender},showSelectionAlertBar:function(){return!!this.showSelectComputed&&!!this.selectedItems.length&&(this.hasAlertContent||this.hasAlertActionsContent)},toolbarConfig:function(){return!1===this.toolbar?{}:"object"===z(this.toolbar)?U({search:this.showSearch,refresh:!0,setting:!0,density:!0,fullscreen:!1},this.toolbar):{search:this.showSearch,refresh:!0,setting:!0,density:!0,fullscreen:!1}},visibleHeaders:function(){return this.internalColumns.filter(function(t){return!1!==t.visible})},customHeaderSlots:function(){var t=this;return this.internalColumns.filter(function(e){return t.$scopedSlots["header.".concat(e.value)]})},tableClassComputed:function(){return[this.tableClass,{"jh-table-fullscreen":this.isFullscreen}]},densityClass:function(){return{"jh-table-default":"default"===this.currentDensity,"jh-table-medium":"medium"===this.currentDensity,"jh-table-compact":"compact"===this.currentDensity}},currentFooterProps:function(){return U(U({},{itemsPerPageOptions:[10,20,50,100],itemsPerPageText:"每页",itemsPerPageAllText:"所有",showFirstLastPage:!0,showCurrentPage:!0}),this.footerProps)},showSelectComputed:function(){return!1!==this.rowSelection&&(this.rowSelection&&"object"===z(this.rowSelection)?!1!==this.rowSelection.show:this.showSelect)},singleSelectComputed:function(){return!(!this.rowSelection||"radio"!==this.rowSelection.type)||this.singleSelect},isRowSelectionControlled:function(){return!(!this.rowSelection||!Array.isArray(this.rowSelection.selectedRowKeys))},wrapperClass:function(){return["jh-pro-table",this.$attrs.class,{"jh-pro-table-card":this.cardBordered,"jh-pro-table-ghost":this.ghost}]},wrapperStyle:function(){return this.$attrs.style||null},mergedDataTableProps:function(){var t=this.$attrs||{};return t.class,t.style,U(U({},V(t,$)),this.dataTableProps)},dataTableListeners:function(){var t=this.$listeners||{};return t["click:row"],t.input,t["update:page"],t["update:items-per-page"],t["update:sort-by"],t["update:sort-desc"],V(t,R)}},watch:{headers:{immediate:!0,handler:function(t){this.initColumns(t)}},items:function(t){var e=this;this.request||(this.currentItems=t||[],this.$nextTick(function(){return e.applySelectionState()}))},loading:function(t){this.currentLoading=t},searchInput:function(t){this.searchInputInternal=t},searchInputInternal:function(t){var e=this;this.$emit("update:searchInput",t),this.request&&(this.searchDebounceTimer&&clearTimeout(this.searchDebounceTimer),this.searchDebounceTimer=setTimeout(function(){e.reload()},this.debounceTime))},size:function(t){this.currentDensity=t},sortBy:function(t){this.internalSortBy=this.normalizeSortBy(t),this.scheduleSortChangeEmit()},sortDesc:function(t){this.internalSortDesc=this.normalizeSortDesc(t),this.scheduleSortChangeEmit()},rowSelection:{deep:!0,handler:function(){var t=this;this.hasAppliedDefaultRowSelection=!1,this.$nextTick(function(){return t.applySelectionState()})}},columnsState:{deep:!0,handler:function(t){t&&void 0!==t.value&&null!==t.value&&this.applyExternalColumnState(t.value)}},showSelect:function(){var t=this;this.$nextTick(function(){return t.applySelectionState()})},currentItems:function(){var t=this;this.$nextTick(function(){return t.applySelectionState()})}},mounted:function(){var t=this;window.addEventListener("resize",this.handleResize),this.request&&this.reload(),this.startPolling(),this.$nextTick(function(){return t.applySelectionState()})},beforeDestroy:function(){window.removeEventListener("resize",this.handleResize),this.stopPolling(),this.searchDebounceTimer&&clearTimeout(this.searchDebounceTimer),this.sortChangeTimer&&clearTimeout(this.sortChangeTimer)},methods:{initColumns:function(t){var e,n,r=this,i=this.getPersistedColumnState(),a=null===(e=this.columnsState)||void 0===e?void 0:e.value,o=null===(n=this.columnsState)||void 0===n?void 0:n.defaultVisible;this.internalColumns=t.map(function(t){var e=t.value||t.dataIndex||t.key,n=!1!==t.visible,l=r.resolveColumnVisible({value:e,baseVisible:n,externalState:a,persistedState:i,defaultVisible:o});return U(U({},t),{},{visible:l,initiallyVisible:n,text:t.text||t.title,value:e})})},getColumnRawValue:function(t,e,n){if(t&&"function"==typeof t.valueGetter)return t.valueGetter(e,t);if(void 0!==n)return n;var r=null==t?void 0:t.value;return r?e?e[r]:n:void 0},applyValueFormatter:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(t&&"function"==typeof t.valueFormatter){var i=t.valueFormatter(e,n,t,r);if(null!=i)return i}return null},getValueEnumOption:function(t,e){var n=null==t?void 0:t.valueEnum;return n?Array.isArray(n)?n.find(function(t){return(null==t?void 0:t.value)===e})||null:n[e]||null:null},getStatusText:function(t,e,n){var r=this.getColumnRawValue(t,n,e),i=this.applyValueFormatter(t,r,n);if(null!==i)return i;var a=this.getValueEnumOption(t,r);return a?"object"===z(a)?a.text||a.label||r||"--":a:null==r||""===r?"--":r},getStatusChipProps:function(t,e,n){var r,i,a,o,l,s=this.getColumnRawValue(t,n,e),c=this.getValueEnumOption(t,s),u=c&&c.status||s||"default",d=H[u]||H.default,f=(null==t||null===(r=t.valueEnumStatusMap)||void 0===r?void 0:r[u])||{};return{color:f.color||(null==c?void 0:c.color)||d.color,textColor:f.textColor||(null==c?void 0:c.textColor)||d.textColor,outlined:null!==(i=null!==(a=f.outlined)&&void 0!==a?a:null==c?void 0:c.outlined)&&void 0!==i&&i,dark:null!==(o=null!==(l=f.dark)&&void 0!==l?l:null==c?void 0:c.dark)&&void 0!==o&&o,icon:null==c?void 0:c.icon}},getProgressProps:function(t){return U({height:6,color:"primary",rounded:!0},null==t?void 0:t.valueProps)},getProgressValue:function(t){var e=Number(t);return Number.isFinite(e)?e<0?0:e>100?100:e:0},formatMoneyValue:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null==t||""===t)return"--";var n="number"==typeof e.precision?e.precision:2,r=e.currencySymbol||"¥",i=e.locale||"zh-CN",a=Number(t);return Number.isFinite(a)?"".concat(r," ").concat(a.toLocaleString(i,{minimumFractionDigits:n,maximumFractionDigits:n})):t},formatPercentValue:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null==t||""===t)return"--";var n="number"==typeof e.precision?e.precision:0,r=Number(t);if(!Number.isFinite(r))return t;var i=e.unit||"%";return"".concat(r.toFixed(n)).concat(i)},formatDigitValue:function(t){if(null==t||""===t)return"--";var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).locale||"zh-CN",n=Number(t);return Number.isFinite(n)?n.toLocaleString(e):t},formatDateValue:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"date",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t)return"--";var r=new Date(t);if(Number.isNaN(r.getTime()))return t;var i=n.format||("dateTime"===e?"YYYY-MM-DD HH:mm:ss":"time"===e?"HH:mm:ss":"YYYY-MM-DD"),a=r.getFullYear(),o=String(r.getMonth()+1).padStart(2,"0"),l=String(r.getDate()).padStart(2,"0"),s=String(r.getHours()).padStart(2,"0"),c=String(r.getMinutes()).padStart(2,"0"),u=String(r.getSeconds()).padStart(2,"0");return i.replace("YYYY",a).replace("MM",o).replace("DD",l).replace("HH",s).replace("mm",c).replace("ss",u)},formatDateRangeValue:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Array.isArray(t)||0===t.length)return"--";var n,r,i=(r=2,function(t){if(Array.isArray(t))return t}(n=t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,a,o,l=[],s=!0,c=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);s=!0);}catch(t){c=!0,i=t}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return l}}(n,r)||J(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=i[0],o=i[1],l=e.separator||" ~ ",s=e.valueType||"date";return"".concat(this.formatDateValue(a,s,e)).concat(l).concat(this.formatDateValue(o,s,e))},formatJsonValue:function(t){if(null==t||""===t)return"--";if("string"==typeof t)try{var e=JSON.parse(t);return JSON.stringify(e,null,2)}catch(e){return t}return"object"===z(t)?JSON.stringify(t,null,2):String(t)},shouldShowEllipsis:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(null==t||!t.ellipsis)return!1;var i=this.formatColumnValue(t,n,e,r);if(null==i)return!1;var a=t.ellipsisLength||20;return String(i).length>a},formatColumnValue:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=this.getColumnRawValue(t,e,n),a=this.applyValueFormatter(t,i,e,r);if(null!==a)return a;if("money"===(null==t?void 0:t.valueType))return this.formatMoneyValue(i,t.valueProps);if("percent"===(null==t?void 0:t.valueType)||"progress"===(null==t?void 0:t.valueType))return this.formatPercentValue(i,t.valueProps);if("digit"===(null==t?void 0:t.valueType))return this.formatDigitValue(i,t.valueProps);if("date"===(null==t?void 0:t.valueType)||"dateTime"===(null==t?void 0:t.valueType)||"time"===(null==t?void 0:t.valueType))return this.formatDateValue(i,t.valueType,t.valueProps);if("dateRange"===(null==t?void 0:t.valueType))return this.formatDateRangeValue(i,t.valueProps);if("json"===(null==t?void 0:t.valueType))return this.formatJsonValue(i);if("index"===(null==t?void 0:t.valueType))return this.getDisplayIndex(r);var o=this.getValueEnumOption(t,i);return o?"object"===z(o)?o.text||o.label||o.value||i||"--":o:null==i||""===i?"--":i},hasCopyValue:function(t,e,n){var r=this.getColumnRawValue(t,e,n);return null!=r&&""!==r},getCopyValue:function(t,e,n){var r=this.getColumnRawValue(t,e,n);if(null==r)return"";if("object"===z(r))try{return JSON.stringify(r)}catch(t){return String(r)}return String(r)},getDisplayIndex:function(t){return"number"!=typeof t?"--":this.request?(this.currentPage-1)*this.currentItemsPerPage+t+1:t+1},getAvatarProps:function(t){return U({size:32,color:"primary lighten-5"},null==t?void 0:t.valueProps)},getAvatarSrc:function(t){return t?"string"==typeof t?t:"object"===z(t)&&t.src?t.src:null:null},getAvatarInitials:function(t){if(!t)return"--";var e=String(t).trim();if(!e)return"--";var n=e.split(/\s+/);return 1===n.length?n[0].charAt(0).toUpperCase():"".concat(n[0].charAt(0)).concat(n[n.length-1].charAt(0)).toUpperCase()},toggleColumn:function(t){t.visible=!t.visible,this.emitColumnStateChange(),this.$forceUpdate()},resetColumns:function(){this.internalColumns.forEach(function(t){t.visible=t.initiallyVisible}),this.clearPersistedColumnState(),this.emitColumnStateChange(),this.$forceUpdate()},handleRefresh:function(){var t=this;return E(N().m(function e(){return N().w(function(e){for(;;)switch(e.n){case 0:if(t.$emit("refresh"),!t.request){e.n=1;break}return e.n=1,t.reload();case 1:return e.a(2)}},e)}))()},toggleFullscreen:function(){var t,e,n,r;this.isFullscreen=!this.isFullscreen,this.isFullscreen?null===(t=(e=this.$el).requestFullscreen)||void 0===t||t.call(e):null===(n=(r=document).exitFullscreen)||void 0===n||n.call(r)},getVisibleButtons:function(t){return this.actionColumn&&this.actionColumn.buttons?this.actionColumn.buttons.filter(function(e){return"function"==typeof e.visible?e.visible(t):!1!==e.visible}):[]},handleActionClick:function(t,e){return E(N().m(function n(){return N().w(function(n){for(;;)switch(n.n){case 0:if(!t.confirm){n.n=1;break}if(confirm(t.confirm)){n.n=1;break}return n.a(2);case 1:if(!t.onClick){n.n=2;break}return n.n=2,t.onClick(e);case 2:return n.a(2)}},n)}))()},copyToClipboard:function(t){var e=this;if(navigator.clipboard)navigator.clipboard.writeText(t).then(function(){e.$emit("copy-success",t),console.log("已复制:",t)});else{var n=document.createElement("textarea");n.value=t,document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n),this.$emit("copy-success",t),console.log("已复制:",t)}},handleRowClick:function(t,e){this.$emit("row-click",t,e),this.$emit("click:row",t,e)},handleSelectionChange:function(t){var e=this;this.selectedItems=t;var n={selectedRowKeys:t.map(function(t){return t[e.rowKey]}),selectedRows:t};this.$emit("selection-change",n),this.$emit("input",t),this.rowSelection&&"function"==typeof this.rowSelection.onChange&&this.rowSelection.onChange(n.selectedRowKeys,t)},handlePageChange:function(t){this.currentPage=t,this.$emit("update:page",t),this.request&&this.reload()},handleItemsPerPageChange:function(t){this.currentItemsPerPage=t,this.currentPage=1,this.$emit("update:items-per-page",t),this.request&&this.reload()},handleFilterSearch:function(t){var e=this.transformFilterValues(t);this.filterValues=e,this.currentPage=1,this.$emit("filter-search",e),this.request&&this.reload()},handleFilterReset:function(){this.filterValues={},this.currentPage=1,this.$emit("filter-reset"),this.request&&this.reload()},transformFilterValues:function(t){var e=this,n={};return Object.keys(t||{}).forEach(function(r){var i=t[r],a=e.filterFieldMetaMap[r];if(a&&"function"==typeof a.transform){var o=a.transform(i,t);return o&&"object"===z(o)&&!Array.isArray(o)?void Object.assign(n,o):void(void 0!==o&&(n[r]=o))}n[r]=i}),n},buildAutoFilterField:function(t){var e=this.normalizeSearchConfig(t);if(!e)return null;var n,r=this.mapValueTypeToFilterType(e.valueType,t),i={key:e.key,label:e.label,type:r,placeholder:e.placeholder||this.formatAutoFieldPlaceholder(e.label,r),options:[],props:U({clearable:!0,dense:!0},e.formItemProps||{}),initialValue:e.initialValue,defaultValue:e.initialValue,hideDetails:!0};return"select"===r&&(i.options=this.buildValueEnumOptions(t,e)),"date"===r&&(i.pickerProps=U({range:"dateRange"===e.valueType},(null===(n=e.formItemProps)||void 0===n?void 0:n.pickerProps)||{})),e.multiple&&(i.multiple=!0),e.fieldProps&&"object"===z(e.fieldProps)&&Object.assign(i,e.fieldProps),{field:i,transform:e.transform,initialValue:e.initialValue}},normalizeSearchConfig:function(t){var e;if(!t||"action"===t.value)return null;var n=t.search;if(null==n||!1===n)return null;var r=!0===n?{}:"object"===z(n)?U({},n):{},i=r.key||t.filterKey||t.value||t.dataIndex||t.key;return i?{key:i,label:r.label||t.searchLabel||t.text||t.title||i,valueType:r.valueType||t.valueType||"text",placeholder:r.placeholder,formItemProps:r.formItemProps||{},transform:r.transform,initialValue:r.initialValue,valueEnumKey:r.valueEnumKey||t.valueEnumKey,fieldProps:r.fieldProps||{},multiple:r.multiple||(null===(e=r.formItemProps)||void 0===e?void 0:e.multiple),search:r}:null},mapValueTypeToFilterType:function(t,e){switch(t){case"status":case"option":case"select":return null!=e&&e.valueEnum?"select":"text";case"date":case"dateTime":case"time":case"dateRange":return"date";default:return"text"}},buildValueEnumOptions:function(t,e){var n=null==t?void 0:t.valueEnum;if(!n)return[];var r=[];return Array.isArray(n)?(n.forEach(function(t){t&&r.push({text:t.text||t.label||t.value,value:t.value})}),r):(Object.keys(n).forEach(function(t){var i=n[t];if("object"===z(i)){var a=e.valueEnumKey&&void 0!==i[e.valueEnumKey]?i[e.valueEnumKey]:void 0!==i.value?i.value:t;r.push({text:i.text||i.label||t,value:a})}else r.push({text:i,value:t})}),r)},formatAutoFieldPlaceholder:function(t,e){return t?"select"===e?"请选择".concat(t):"请输入".concat(t):""},reload:function(){var t=this;return E(N().m(function e(){var n,r,i;return N().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t.request){e.n=1;break}return e.a(2);case 1:return t.currentLoading=!0,e.p=2,n={page:t.currentPage,pageSize:t.currentItemsPerPage,search:t.searchInputInternal,sorter:t.buildSorterPayload(),filters:t.filterValues},e.n=3,t.request(n);case 3:(r=e.v)&&!1!==r.success&&(t.currentItems=r.data||r.list||[],t.serverItemsLength=r.total||r.totalCount||t.currentItems.length,t.$nextTick(function(){return t.applySelectionState()})),e.n=5;break;case 4:e.p=4,i=e.v,console.error("Failed to load data:",i),t.$emit("request-error",i);case 5:return e.p=5,t.currentLoading=!1,e.f(5);case 6:return e.a(2)}},e,null,[[2,4,5,6]])}))()},reset:function(){this.currentPage=1,this.reload()},clearSelection:function(){var t,e;this.selectedItems=[],null===(t=this.$refs.dataTable)||void 0===t||null===(e=t.clearSelection)||void 0===e||e.call(t),this.$emit("selection-change",{selectedRowKeys:[],selectedRows:[]}),this.$emit("input",[]),this.rowSelection&&"function"==typeof this.rowSelection.onChange&&this.rowSelection.onChange([],[])},getSelectedRows:function(){return this.selectedItems},handleResize:function(){this.isMobile=window.innerWidth<500},startPolling:function(){var t=this;this.polling>0&&this.request&&(this.pollingTimer=setInterval(function(){t.reload()},this.polling))},stopPolling:function(){this.pollingTimer&&(clearInterval(this.pollingTimer),this.pollingTimer=null)},resolveColumnVisible:function(t){var e=t.value,n=t.baseVisible,r=t.externalState,i=t.persistedState,a=t.defaultVisible;return r&&Object.prototype.hasOwnProperty.call(r,e)?r[e]:i&&Object.prototype.hasOwnProperty.call(i,e)?i[e]:a&&Object.prototype.hasOwnProperty.call(a,e)?a[e]:n},getColumnStateSnapshot:function(){return this.internalColumns.reduce(function(t,e){return t[e.value]=!1!==e.visible,t},{})},emitColumnStateChange:function(){var t=this.getColumnStateSnapshot();this.$emit("columns-state-change",t),this.columnsState&&"function"==typeof this.columnsState.onChange&&this.columnsState.onChange(t),this.persistColumnState(t)},getPersistedColumnState:function(){if(!this.columnsState||!this.columnsState.persistenceKey)return null;if("undefined"==typeof window)return null;try{var t=window.localStorage.getItem(this.columnsState.persistenceKey);return t?JSON.parse(t):null}catch(t){return console.warn("[JhTable] Failed to parse persisted column state:",t),null}},persistColumnState:function(t){if(this.columnsState&&this.columnsState.persistenceKey&&"undefined"!=typeof window)try{t?window.localStorage.setItem(this.columnsState.persistenceKey,JSON.stringify(t)):window.localStorage.removeItem(this.columnsState.persistenceKey)}catch(t){console.warn("[JhTable] Failed to persist column state:",t)}},clearPersistedColumnState:function(){if(this.columnsState&&this.columnsState.persistenceKey&&"undefined"!=typeof window)try{window.localStorage.removeItem(this.columnsState.persistenceKey)}catch(t){console.warn("[JhTable] Failed to clear column state:",t)}},applyExternalColumnState:function(t){t&&(this.internalColumns=this.internalColumns.map(function(e){return U(U({},e),{},{visible:Object.prototype.hasOwnProperty.call(t,e.value)?t[e.value]:e.visible})}),this.$forceUpdate())},normalizeSortBy:function(t){return Array.isArray(t)?t:"string"==typeof t&&t?[t]:[]},normalizeSortDesc:function(t){return Array.isArray(t)?t:"boolean"==typeof t?[t]:[]},handleSortByUpdate:function(t){this.internalSortBy=this.normalizeSortBy(t),this.scheduleSortChangeEmit()},handleSortDescUpdate:function(t){Array.isArray(t)?this.internalSortDesc=t:this.internalSortDesc="boolean"==typeof t?[t]:[],this.scheduleSortChangeEmit()},scheduleSortChangeEmit:function(){var t=this;this.sortChangeTimer&&clearTimeout(this.sortChangeTimer),this.sortChangeTimer=setTimeout(function(){t.sortChangeTimer=null,t.emitSortChange()},0)},emitSortChange:function(){this.$emit("update:sortBy",this.internalSortBy),this.$emit("update:sortDesc",this.internalSortDesc),this.$emit("sort-change",{sortBy:this.internalSortBy,sortDesc:this.internalSortDesc,sorter:this.buildSorterPayload()}),this.request&&(this.currentPage=1,this.$emit("update:page",1),this.reload())},buildSorterPayload:function(){var t=this;if(!this.internalSortBy.length)return{};var e={};return this.internalSortBy.forEach(function(n,r){e[n]=t.internalSortDesc[r]?"desc":"asc"}),{sortBy:this.internalSortBy,sortDesc:this.internalSortDesc,order:e}},applySelectionState:function(){if(this.showSelectComputed){var t=this.getControlledRowKeys();t?this.syncSelectionByKeys(t):this.applyDefaultRowSelection()}else this.selectedItems.length&&(this.selectedItems=[],this.$emit("input",[]))},getControlledRowKeys:function(){return this.rowSelection&&Array.isArray(this.rowSelection.selectedRowKeys)?this.rowSelection.selectedRowKeys:null},syncSelectionByKeys:function(t){var e=this;if(Array.isArray(t)){var n=new Set(t),r=this.currentItems.filter(function(t){return n.has(t[e.rowKey])});this.selectedItems=r,this.$emit("input",r)}},applyDefaultRowSelection:function(){var t=this;if(!this.hasAppliedDefaultRowSelection&&this.rowSelection&&Array.isArray(this.rowSelection.defaultSelectedRowKeys)){var e=new Set(this.rowSelection.defaultSelectedRowKeys),n=this.currentItems.filter(function(n){return e.has(n[t.rowKey])});n.length&&(this.selectedItems=n,this.$emit("input",n)),this.hasAppliedDefaultRowSelection=!0}}}},B,[],!1,null,"29ead165",null).exports;var X=function(){var t=this,e=t._self._c;return e("v-dialog",{attrs:{value:t.visible,"max-width":t.maxWidth,persistent:"",fullscreen:t.isMobile},on:{input:t.handleDialogInput}},[e("v-card",[e("v-card-title",{staticClass:"d-flex align-center pa-4"},[e("span",[t._v(t._s(t.title))]),t._v(" "),e("v-spacer"),t._v(" "),e("v-icon",{on:{click:t.handleClose}},[t._v("mdi-close")])],1),t._v(" "),e("v-card-text",{staticClass:"pa-0"},[e("v-row",{style:t.contentStyle,attrs:{"no-gutters":""}},[e("v-col",{staticClass:"border-right",attrs:{cols:t.isMobile?12:7}},[t.showSearch||t.showSelectAll&&"multiple"===t.mode?e("div",{staticClass:"px-3 pt-3"},[t.showSearch?e("v-text-field",{staticClass:"mb-3",attrs:{placeholder:t.placeholder,"prepend-inner-icon":"mdi-magnify",outlined:"",dense:"","hide-details":"",clearable:""},model:{value:t.searchKeyword,callback:function(e){t.searchKeyword=e},expression:"searchKeyword"}}):t._e(),t._v(" "),t.showSelectAll&&"multiple"===t.mode?e("div",{staticClass:"mb-3 d-flex flex-wrap"},[e("v-btn",{staticClass:"mr-2 mb-2",attrs:{small:"",outlined:"",disabled:0===t.filteredAllNodes.length},on:{click:t.handleBatchSelect}},[e("v-icon",{attrs:{small:"",left:""}},[t._v("mdi-checkbox-multiple-marked")]),t._v("\n                "+t._s(t.isAllSelected?"取消全选":"全选当前")+"\n              ")],1)],1):t._e()],1):t._e(),t._v(" "),t.showSearch||t.showSelectAll&&"multiple"===t.mode?e("v-divider"):t._e(),t._v(" "),e("div",{style:t.listStyle},[e("div",{staticClass:"px-3 py-2",staticStyle:{height:"100%","overflow-y":"auto"}},[t.loading?e("div",{staticClass:"text-center py-8"},[e("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}})],1):0===t.filteredTreeData.length?e("div",{staticClass:"text-center grey--text py-8"},[e("v-icon",{attrs:{size:"48",color:"grey lighten-1"}},[t._v("mdi-file-tree")]),t._v(" "),e("div",{staticClass:"mt-2"},[t._v("未找到匹配的节点")])],1):e("div",t._l(t.filteredTreeData,function(n){return e("tree-node",{key:t.getNodeKey(n),attrs:{node:n,level:0,mode:t.mode,"allow-select-node":t.allowSelectNode,expandedNodes:t.expandedNodes,tempSelectedNodes:t.tempSelectedNodes,nodeKey:t.nodeKey,nodeLabel:t.nodeLabel,nodeChildren:t.nodeChildren,searchKeyword:t.searchKeyword,isNodeSelected:t.isNodeSelected,isNodeChildrenSelected:t.isNodeChildrenSelected},on:{"toggle-expand":t.toggleNodeExpand,"toggle-node":t.toggleNode,"select-single-node":t.selectSingleNode,"node-click":t.handleNodeClick}})}),1)])])],1),t._v(" "),"multiple"!==t.mode||t.isMobile?t._e():e("v-col",{attrs:{cols:t.isMobile?12:5}},[e("div",{staticClass:"pa-3",staticStyle:{height:"100%",display:"flex","flex-direction":"column"}},[e("div",{staticClass:"d-flex align-center mb-3"},[e("span",{staticClass:"text-subtitle-2"},[t._v("\n                已选: "+t._s(t.tempSelectedNodes.length)+"\n              ")]),t._v(" "),e("v-spacer"),t._v(" "),e("v-btn",{attrs:{text:"",small:"",color:"primary",disabled:0===t.tempSelectedNodes.length},on:{click:t.clearSelection}},[t._v("\n                清除\n              ")])],1),t._v(" "),e("v-divider",{staticClass:"mb-3"}),t._v(" "),e("div",{staticClass:"flex-grow-1",staticStyle:{"overflow-y":"auto"}},[0===t.tempSelectedNodes.length?e("div",{staticClass:"text-center py-8"},[e("v-icon",{attrs:{size:"64",color:"grey lighten-2"}},[t._v("mdi-checkbox-multiple-blank-outline")]),t._v(" "),e("div",{staticClass:"grey--text mt-2"},[t._v("暂无选中内容")])],1):e("div",t._l(t.tempSelectedNodes,function(n){return e("v-chip",{key:t.getNodeKey(n),staticClass:"ma-1",attrs:{close:"",small:""},on:{"click:close":function(e){return t.removeNodeFromTemp(n)}}},[e("v-icon",{attrs:{left:"",small:""}},[t._v("mdi-file-tree")]),t._v("\n                  "+t._s(t.getNodeLabel(n))+"\n                ")],1)}),1)])],1)])],1)],1),t._v(" "),e("v-divider"),t._v(" "),e("v-card-actions",{staticClass:"pa-4"},["multiple"===t.mode&&t.isMobile?e("div",{staticClass:"text-caption"},[t._v("\n        已选 "+t._s(t.tempSelectedNodes.length)+"\n      ")]):t._e(),t._v(" "),e("v-spacer"),t._v(" "),e("v-btn",{attrs:{text:""},on:{click:t.handleCancel}},[t._v("取消")]),t._v(" "),e("v-btn",{attrs:{color:"success",disabled:"single"===t.mode&&0===t.tempSelectedNodes.length},on:{click:t.handleConfirm}},[t._v("\n        确定\n      ")])],1)],1)],1)};function Q(t){return Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Q(t)}function Z(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function tt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Z(Object(n),!0).forEach(function(e){et(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function et(t,e,n){return(e=function(t){var e=function(t){if("object"!=Q(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Q(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Q(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nt(t){return function(t){if(Array.isArray(t))return it(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||rt(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rt(t,e){if(t){if("string"==typeof t)return it(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?it(t,e):void 0}}function it(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}X._withStripped=!0;const at=r({name:"JhTreeSelect",components:{TreeNode:{name:"TreeNode",template:'\n    <div class="mb-1">\n      \x3c!-- 节点 --\x3e\n      <div class="d-flex align-center py-2 tree-item" :style="{ paddingLeft: (level * 16) + \'px\' }">\n        <v-checkbox\n          v-if="mode === \'multiple\' && !allowSelectNode"\n          :input-value="isNodeChildrenSelected(node)"\n          @change="$emit(\'toggle-node\', node)"\n          @click.stop\n          hide-details\n          dense\n          class="mr-2 mt-0"\n        ></v-checkbox>\n        <v-icon \n          class="mr-2" \n          small\n          @click="$emit(\'toggle-expand\', getNodeKey(node))"\n          style="cursor: pointer;"\n          v-if="hasChildren(node)"\n        >\n          {{ expandedNodes.includes(getNodeKey(node)) ? \'mdi-chevron-down\' : \'mdi-chevron-right\' }}\n        </v-icon>\n        <span v-else class="mr-2" style="width: 20px;"></span>\n        <v-icon small class="mr-2" color="primary">mdi-file-tree</v-icon>\n        <div class="flex-grow-1" @click="$emit(\'toggle-expand\', getNodeKey(node))" style="cursor: pointer;">\n          <div class="font-weight-medium">{{ getNodeLabel(node) }}</div>\n          <div class="text-caption grey--text" v-if="hasChildren(node)">\n            {{ getChildrenCount(node) }}个子节点\n          </div>\n        </div>\n        \x3c!-- 选择节点按钮 --\x3e\n        <v-btn\n          v-if="allowSelectNode && mode === \'multiple\'"\n          x-small\n          outlined\n          color="primary"\n          @click.stop="$emit(\'toggle-node\', node)"\n          class="ml-2"\n        >\n          <v-icon x-small left>mdi-check</v-icon>\n          {{ isNodeSelected(node) ? \'已选\' : \'选择\' }}\n        </v-btn>\n        <v-radio\n          v-else-if="allowSelectNode && mode === \'single\'"\n          :value="getNodeKey(node)"\n          :input-value="selectedNodeKey"\n          @click.stop="handleRadioClick(node)"\n          hide-details\n          dense\n          class="ml-2 mt-0"\n        ></v-radio>\n      </div>\n      \n      \x3c!-- 展开内容：子节点 --\x3e\n      <v-expand-transition>\n        <div v-show="expandedNodes.includes(getNodeKey(node))">\n          \x3c!-- 子节点（递归） --\x3e\n          <tree-node\n            v-for="child in getChildren(node)"\n            :key="getNodeKey(child)"\n            :node="child"\n            :level="level + 1"\n            :mode="mode"\n            :allow-select-node="allowSelectNode"\n            :expandedNodes="expandedNodes"\n            :tempSelectedNodes="tempSelectedNodes"\n            :nodeKey="nodeKey"\n            :nodeLabel="nodeLabel"\n            :nodeChildren="nodeChildren"\n            :searchKeyword="searchKeyword"\n            :isNodeSelected="isNodeSelected"\n            :isNodeChildrenSelected="isNodeChildrenSelected"\n            @toggle-expand="$emit(\'toggle-expand\', $event)"\n            @toggle-node="$emit(\'toggle-node\', $event)"\n            @select-single-node="$emit(\'select-single-node\', $event)"\n            @node-click="$emit(\'node-click\', $event)"\n          ></tree-node>\n        </div>\n      </v-expand-transition>\n    </div>\n  ',props:{node:{type:Object,required:!0},level:{type:Number,default:0},mode:String,allowSelectNode:Boolean,expandedNodes:Array,tempSelectedNodes:Array,nodeKey:String,nodeLabel:String,nodeChildren:String,searchKeyword:String,isNodeSelected:Function,isNodeChildrenSelected:Function},computed:{selectedNodeKey:function(){return this.tempSelectedNodes.length>0?this.getNodeKey(this.tempSelectedNodes[0]):null}},methods:{getNodeKey:function(t){return t[this.nodeKey]},getNodeLabel:function(t){return t[this.nodeLabel]||""},getChildren:function(t){var e=this,n=t[this.nodeChildren]||[];if(!this.searchKeyword)return n;var r=this.searchKeyword.toLowerCase();return n.filter(function(t){return e.getNodeLabel(t).toLowerCase().includes(r)||e.hasMatchingChildren(t,r)})},hasMatchingChildren:function(t,e){var n=this;return(t[this.nodeChildren]||[]).some(function(t){return n.getNodeLabel(t).toLowerCase().includes(e)||n.hasMatchingChildren(t,e)})},hasChildren:function(t){var e=t[this.nodeChildren]||[];return e&&e.length>0},getChildrenCount:function(t){var e=t[this.nodeChildren]||[];return e?e.length:0},handleRadioClick:function(t){this.$emit("select-single-node",t)}}}},props:{value:{type:Array,default:function(){return[]}},visible:{type:Boolean,default:!1},mode:{type:String,default:"multiple",validator:function(t){return["multiple","single"].includes(t)}},title:{type:String,default:"选择节点"},placeholder:{type:String,default:"搜索节点"},maxWidth:{type:String,default:"1000px"},data:{type:Array,default:function(){return[]}},nodeKey:{type:String,default:"id"},nodeLabel:{type:String,default:"label"},nodeChildren:{type:String,default:"children"},allowSelectNode:{type:Boolean,default:!1},showSearch:{type:Boolean,default:!0},showSelectAll:{type:Boolean,default:!0},loading:{type:Boolean,default:!1}},data:function(){return{isMobile:"undefined"!=typeof window&&window.innerWidth<600,currentTab:0,searchKeyword:"",tempSelectedNodes:[],expandedNodes:[]}},computed:{contentStyle:function(){return this.isMobile?"height: calc(100vh - 120px);":"height: 600px;"},listStyle:function(){var t=this.showSearch||this.showSelectAll&&"multiple"===this.mode?"calc(100% - 140px)":"calc(100% - 60px)";return"height: ".concat(t,";")},filteredTreeData:function(){if(!this.searchKeyword)return this.data;var t=this.searchKeyword.toLowerCase();return this.filterTreeRecursive(this.data,t)},filteredAllNodes:function(){var t=this,e=function(n){var r=[];return n.forEach(function(n){r.push(n);var i=n[t.nodeChildren]||[];i.length>0&&(r=r.concat(e(i)))}),r},n=e(this.data);if(!this.searchKeyword)return n;var r=this.searchKeyword.toLowerCase();return n.filter(function(e){return t.getNodeLabel(e).toLowerCase().includes(r)})},isAllSelected:function(){var t=this;return 0!==this.filteredAllNodes.length&&this.filteredAllNodes.every(function(e){return t.isNodeSelected(e)})}},watch:{visible:{immediate:!0,handler:function(t){t&&this.initDialog()}}},mounted:function(){"undefined"!=typeof window&&window.addEventListener("resize",this.handleResize)},beforeDestroy:function(){"undefined"!=typeof window&&window.removeEventListener("resize",this.handleResize)},methods:{handleResize:function(){this.isMobile=window.innerWidth<600},initDialog:function(){var t=this;this.tempSelectedNodes=nt(this.value||[]),this.searchKeyword="",this.expandedNodes=[],this.autoExpandSelectedNodes(),this.data.length>0&&(this.expandedNodes=this.data.slice(0,3).map(function(e){return t.getNodeKey(e)}))},autoExpandSelectedNodes:function(){var t=this,e=new Set(this.tempSelectedNodes.map(function(e){return t.getNodeKey(e)})),n=function(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=function(t){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=rt(t))){e&&(t=e);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,o=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return a=t.done,t},e:function(t){o=!0,i=t},f:function(){try{a||null==e.return||e.return()}finally{if(o)throw i}}}}(e);try{for(o.s();!(i=o.n()).done;){var l=i.value,s=t.getNodeKey(l),c=[].concat(nt(a),[s]);if(s===r)return c;var u=l[t.nodeChildren]||[];if(u.length>0){var d=n(u,r,c);if(d)return d}}}catch(t){o.e(t)}finally{o.f()}return null};e.forEach(function(e){var r=n(t.data,e);r&&r.forEach(function(e){return t.expandedNodes.push(e)})}),this.expandedNodes=nt(new Set(this.expandedNodes))},filterTreeRecursive:function(t,e){var n=this,r=[];return t.forEach(function(t){var i=n.getNodeLabel(t).toLowerCase().includes(e),a=t[n.nodeChildren]||[],o=a.length>0?n.filterTreeRecursive(a,e):[],l=o.length>0;(i||l)&&r.push(tt(tt({},t),{},et({},n.nodeChildren,o)))}),r},getNodeKey:function(t){return t[this.nodeKey]},getNodeLabel:function(t){return t[this.nodeLabel]||""},isNodeSelected:function(t){var e=this,n=this.getNodeKey(t);return this.tempSelectedNodes.some(function(t){return e.getNodeKey(t)===n})},isNodeChildrenSelected:function(t){var e=this,n=t[this.nodeChildren]||[];return 0!==n.length&&n.every(function(t){return e.isNodeSelected(t)})},toggleNodeExpand:function(t){var e=this.expandedNodes.indexOf(t);e>-1?this.expandedNodes.splice(e,1):this.expandedNodes.push(t)},toggleNode:function(t){var e=this;if("single"!==this.mode){var n=this.getNodeKey(t),r=this.tempSelectedNodes.findIndex(function(t){return e.getNodeKey(t)===n});r>-1?this.tempSelectedNodes.splice(r,1):this.tempSelectedNodes.push(t)}else this.selectSingleNode(t)},selectSingleNode:function(t){this.tempSelectedNodes=[t]},handleNodeClick:function(t){this.allowSelectNode?this.toggleNode(t):this.toggleNodeExpand(this.getNodeKey(t))},handleBatchSelect:function(){var t=this;this.isAllSelected?this.filteredAllNodes.forEach(function(e){var n=t.getNodeKey(e),r=t.tempSelectedNodes.findIndex(function(e){return t.getNodeKey(e)===n});r>-1&&t.tempSelectedNodes.splice(r,1)}):this.filteredAllNodes.forEach(function(e){t.isNodeSelected(e)||t.tempSelectedNodes.push(e)})},removeNodeFromTemp:function(t){var e=this,n=this.getNodeKey(t),r=this.tempSelectedNodes.findIndex(function(t){return e.getNodeKey(t)===n});r>-1&&this.tempSelectedNodes.splice(r,1)},clearSelection:function(){this.tempSelectedNodes=[]},handleDialogInput:function(t){this.$emit("update:visible",t)},handleClose:function(){this.handleCancel()},handleCancel:function(){this.$emit("update:visible",!1),this.$emit("cancel")},handleConfirm:function(){this.$emit("input",this.tempSelectedNodes),this.$emit("update:visible",!1),this.$emit("confirm",this.tempSelectedNodes)}}},X,[],!1,null,"4421993c",null).exports;var ot=function(){var t=this,e=t._self._c;return e("div",[e("v-app",{attrs:{"mobile-breakpoint":"sm"}},[t._t("menu"),t._v(" "),e("v-main",{staticClass:"mt-15"},[e("div",{staticClass:"jh-page-second-bar px-3 px-sm-8"},[e("v-row",{staticClass:"align-center",attrs:{"no-gutters":""}},[e("v-col",{attrs:{cols:"12",sm:"12",md:"4",xl:"3"}},[e("div",{staticClass:"py-4 text-body-1 font-weight-bold align-center d-flex align-center"},[t._v("\n            "+t._s(t.pageName)+"\n            "),t._v(" "),t.showHelpButton?e("v-icon",{staticClass:"black--text ml-1",attrs:{size:"15"},on:{click:function(e){return t.$emit("help-click")}}},[t._v("\n              mdi-help-circle\n            ")]):t._e()],1)]),t._v(" "),e("v-spacer"),t._v(" "),e("v-col",{staticClass:"pl-md-2 mb-2 mb-md-0 flex justify-end",attrs:{cols:"12",xs:"12",sm:"12",md:"8",xl:"9"}},[t._t("search-bar")],2)],1)],1),t._v(" "),e("div",{staticClass:"jh-page-body-container px-sm-8"},[e("v-row",{staticClass:"pa-0 ma-0"},[e("v-col",{staticClass:"pa-0",attrs:{cols:12}},[t._t("content")],2)],1)],1),t._v(" "),t._t("default")],2)],2),t._v(" "),e("jh-toast"),t._v(" "),e("jh-mask"),t._v(" "),e("jh-confirm-dialog")],1)};ot._withStripped=!0;const lt=r({name:"JhPageContainer",props:{pageName:{type:String,required:!0,default:"页面标题"},showHelpButton:{type:Boolean,default:!0}}},ot,[],!1,null,null,null).exports;var st=function(){var t=this,e=t._self._c;return e("v-app",[e("jh-menu",{attrs:{"app-title":t.title,"menu-list":t.formattedMenuData,"right-menu-list":t.rightMenuList,"avatar-menu-list":t.formattedAvatarMenuList,"user-info":t.userInfo,"show-avatar":t.showAvatar,"active-menu-index":t.currentMenuIndex,"active-second-menu-id":t.currentSecondMenuId},on:{"menu-click":t.handleMenuClick,logout:t.handleLogout},scopedSlots:t._u([{key:"title",fn:function(){return[t._t("logo",function(){return[e("div",{staticClass:"d-flex align-center"},[t.logo?e("v-icon",{staticClass:"mr-2",attrs:{color:"primary"}},[t._v(t._s(t.logo))]):t._e(),t._v(" "),e("span",{staticClass:"text-h6 font-weight-bold primary--text"},[t._v(t._s(t.title))])],1)]})]},proxy:!0}],null,!0)}),t._v(" "),e("v-main",{staticClass:"jh-layout-main"},[e("div",{staticClass:"jh-layout-content",style:{backgroundColor:t.contentBackground}},[t._t("default")],2)]),t._v(" "),t.showSettings?e("v-navigation-drawer",{staticClass:"jh-layout-settings",attrs:{app:"",right:"",temporary:"",width:"320"},model:{value:t.settingsDrawer,callback:function(e){t.settingsDrawer=e},expression:"settingsDrawer"}},[e("v-toolbar",{attrs:{flat:"",color:"primary",dark:""}},[e("v-toolbar-title",[t._v("布局设置")]),t._v(" "),e("v-spacer"),t._v(" "),e("v-btn",{attrs:{icon:""},on:{click:function(e){t.settingsDrawer=!1}}},[e("v-icon",[t._v("mdi-close")])],1)],1),t._v(" "),e("v-list",[e("v-list-item",[e("v-list-item-content",[e("v-list-item-title",{staticClass:"font-weight-bold mb-2"},[t._v("内容背景色")]),t._v(" "),e("v-text-field",{attrs:{dense:"",outlined:"","hide-details":"",placeholder:"#f5f5f5"},scopedSlots:t._u([{key:"prepend-inner",fn:function(){return[e("div",{style:{backgroundColor:t.internalContentBackground,width:"24px",height:"24px",borderRadius:"4px",border:"1px solid #ddd"}})]},proxy:!0}],null,!1,3625797711),model:{value:t.internalContentBackground,callback:function(e){t.internalContentBackground=e},expression:"internalContentBackground"}})],1)],1),t._v(" "),e("v-divider"),t._v(" "),e("v-list-item",[e("v-list-item-content",[e("v-list-item-title",{staticClass:"font-weight-bold mb-2"},[t._v("功能开关")]),t._v(" "),e("v-switch",{staticClass:"mt-2",attrs:{label:"显示用户头像",dense:"","hide-details":""},model:{value:t.internalShowAvatar,callback:function(e){t.internalShowAvatar=e},expression:"internalShowAvatar"}})],1)],1),t._v(" "),e("v-divider"),t._v(" "),e("v-list-item",[e("v-list-item-content",[e("v-list-item-title",{staticClass:"font-weight-bold mb-3"},[t._v("快速预设")]),t._v(" "),e("v-btn",{staticClass:"mb-2",attrs:{block:"",outlined:"",small:""},on:{click:function(e){return t.applyPreset("default")}}},[e("v-icon",{attrs:{left:"",small:""}},[t._v("mdi-palette")]),t._v("\n            默认主题\n          ")],1),t._v(" "),e("v-btn",{staticClass:"mb-2",attrs:{block:"",outlined:"",small:""},on:{click:function(e){return t.applyPreset("dark")}}},[e("v-icon",{attrs:{left:"",small:""}},[t._v("mdi-weather-night")]),t._v("\n            暗色主题\n          ")],1),t._v(" "),e("v-btn",{attrs:{block:"",outlined:"",small:""},on:{click:function(e){return t.applyPreset("compact")}}},[e("v-icon",{attrs:{left:"",small:""}},[t._v("mdi-arrow-collapse-vertical")]),t._v("\n            紧凑模式\n          ")],1)],1)],1),t._v(" "),e("v-divider"),t._v(" "),e("v-list-item",[e("v-list-item-content",[e("v-btn",{attrs:{block:"",color:"error",outlined:""},on:{click:t.resetSettings}},[e("v-icon",{attrs:{left:""}},[t._v("mdi-restore")]),t._v("\n            重置为默认\n          ")],1)],1)],1)],1)],1):t._e(),t._v(" "),t.showSettings?e("v-btn",{staticClass:"jh-layout-settings-btn",attrs:{fab:"",fixed:"",right:"",bottom:"",color:"primary",elevation:"4"},on:{click:function(e){t.settingsDrawer=!0}}},[e("v-icon",[t._v("mdi-cog")])],1):t._e()],1)};function ct(t){return ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ct(t)}function ut(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function dt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ut(Object(n),!0).forEach(function(e){ft(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ut(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function ft(t,e,n){return(e=function(t){var e=function(t){if("object"!=ct(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=ct(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ct(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}st._withStripped=!0;const ht=r({name:"JhLayout",components:{JhMenu:i},props:{title:{type:String,default:"JianghuJS"},logo:{type:String,default:""},menuData:{type:Array,default:function(){return[]}},rightMenuList:{type:Array,default:function(){return[]}},currentPath:{type:String,default:""},contentBackground:{type:String,default:"#f5f5f5"},showAvatar:{type:Boolean,default:!0},userInfo:{type:Object,default:function(){return{username:"Guest",userId:"",roles:[]}}},avatarMenuList:{type:Array,default:function(){return[]}},showSettings:{type:Boolean,default:!1}},data:function(){return{settingsDrawer:!1,currentMenuIndex:-1,currentSecondMenuId:null,internalContentBackground:this.contentBackground,internalShowAvatar:this.showAvatar}},computed:{formattedMenuData:function(){return this.formatMenuItems(this.menuData)},formattedAvatarMenuList:function(){return this.avatarMenuList.map(function(t){return dt(dt({},t),{},{title:t.name||t.title,id:t.path||t.id})})}},watch:{internalContentBackground:function(t){this.$emit("update:contentBackground",t)},internalShowAvatar:function(t){this.$emit("update:showAvatar",t)},currentPath:{handler:function(t){this.updateActiveMenu(t)},immediate:!0}},methods:{formatMenuItems:function(t){var e=this;return t.map(function(t){return dt(dt({},t),{},{title:t.name||t.title,id:t.path||t.id,children:t.children?e.formatMenuItems(t.children):void 0})})},updateActiveMenu:function(t){var e=this;if(t){var n=function(t,r){for(var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,a=0;a<t.length;a++){var o=t[a],l=-1===i?a:i;if(o.path===r)return e.currentMenuIndex=l,e.currentSecondMenuId=o.id||o.path,!0;if(o.children&&n(o.children,r,l))return!0}return!1};n(this.menuData,t)}},handleMenuClick:function(t,e){void 0!==e&&(this.currentMenuIndex=e),t.id&&(this.currentSecondMenuId=t.id),this.$emit("menu-click",t)},handleLogout:function(){this.$emit("logout")},applyPreset:function(t){switch(t){case"default":this.internalContentBackground="#f5f5f5",this.internalShowAvatar=!0;break;case"dark":this.internalContentBackground="#1e1e1e",this.internalShowAvatar=!0;break;case"compact":this.internalContentBackground="#ffffff",this.internalShowAvatar=!0}},resetSettings:function(){this.internalContentBackground="#f5f5f5",this.internalShowAvatar=!0}}},st,[],!1,null,"181b7ada",null).exports;var pt=function(){var t=this,e=t._self._c;return e("div",{class:t.cardClasses,style:t.cardStyles},[t.hasHeader?e("div",{class:t.headerClasses},[e("div",{staticClass:"jh-card-header-left"},[t.title?e("div",{staticClass:"jh-card-title"},[t._v("\n        "+t._s(t.title)+"\n      ")]):t._e(),t._v(" "),t._t("title"),t._v(" "),t.tooltip?e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(n){var r=n.on,i=n.attrs;return[e("v-icon",t._g(t._b({staticClass:"ml-2",attrs:{small:""}},"v-icon",i,!1),r),[t._v("\n            mdi-help-circle-outline\n          ")])]}}],null,!1,732963286)},[t._v(" "),e("span",[t._v(t._s(t.tooltip))])]):t._e()],2),t._v(" "),t.extra||t.$slots.extra?e("div",{staticClass:"jh-card-extra"},[t._t("extra",function(){return[t._v(t._s(t.extra))]})],2):t._e(),t._v(" "),t.collapsible?e("v-btn",{staticClass:"ml-2",attrs:{icon:"",small:""},on:{click:t.toggleCollapse}},[e("v-icon",[t._v(t._s(t.isCollapsed?"mdi-chevron-down":"mdi-chevron-up"))])],1):t._e()],1):t._e(),t._v(" "),t.hasHeader&&t.headerBordered?e("v-divider"):t._e(),t._v(" "),t.tabs?e("v-tabs",{class:t.tabsClasses,attrs:{vertical:"left"===t.tabs.tabPosition||"right"===t.tabs.tabPosition},on:{change:t.handleTabChange},model:{value:t.activeTabKey,callback:function(e){t.activeTabKey=e},expression:"activeTabKey"}},t._l(t.tabPanes,function(n){return e("v-tab",{key:n.key},[t._v("\n      "+t._s(n.tab)+"\n    ")])}),1):t._e(),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.isCollapsed,expression:"!isCollapsed"}],class:t.bodyClasses,style:t.bodyStyles},[t.tabs?[e("v-tabs-items",{model:{value:t.activeTabKey,callback:function(e){t.activeTabKey=e},expression:"activeTabKey"}},t._l(t.tabPanes,function(n){return e("v-tab-item",{key:n.key},[t._t("tab-".concat(n.key),function(){return[t._v("\n            "+t._s(n.content)+"\n          ")]})],2)}),1)]:[t.loading?e("div",{staticClass:"jh-card-loading"},[e("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}})],1):t._t("default")]],2),t._v(" "),t.actions&&t.actions.length>0?[e("v-divider"),t._v(" "),e("div",{staticClass:"jh-card-actions"},t._l(t.actions,function(n,r){return e("div",{key:r,staticClass:"jh-card-action-item"},[e(n.component||"div",t._b({tag:"component",on:{click:n.onClick}},"component",n.props,!1),[n.icon?e("v-icon",[t._v(t._s(n.icon))]):t._e(),t._v(" "),n.text?e("span",[t._v(t._s(n.text))]):t._e()],1),t._v(" "),r<t.actions.length-1?e("v-divider",{staticClass:"mx-2",attrs:{vertical:""}}):t._e()],1)}),0)]:t._e()],2)};function vt(t){return vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vt(t)}function mt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function yt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?mt(Object(n),!0).forEach(function(e){gt(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mt(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function gt(t,e,n){return(e=function(t){var e=function(t){if("object"!=vt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=vt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==vt(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}pt._withStripped=!0;const _t=r({name:"JhCard",props:{title:{type:String,default:""},subTitle:{type:String,default:""},tooltip:{type:String,default:""},extra:{type:String,default:""},bordered:{type:Boolean,default:!0},headerBordered:{type:Boolean,default:!1},ghost:{type:Boolean,default:!1},collapsible:{type:Boolean,default:!1},defaultCollapsed:{type:Boolean,default:!1},size:{type:String,default:"default",validator:function(t){return["small","default"].includes(t)}},loading:{type:Boolean,default:!1},actions:{type:Array,default:function(){return[]}},layout:{type:String,default:"default",validator:function(t){return["default","center"].includes(t)}},direction:{type:String,default:"row",validator:function(t){return["row","column"].includes(t)}},split:{type:String,default:"",validator:function(t){return["","vertical","horizontal"].includes(t)}},colSpan:{type:[Number,String],default:24},gutter:{type:[Number,Array],default:0},tabs:{type:Object,default:null},hoverable:{type:Boolean,default:!1},bodyStyle:{type:Object,default:function(){return{}}},headStyle:{type:Object,default:function(){return{}}}},data:function(){var t;return{isCollapsed:this.defaultCollapsed,activeTabKey:(null===(t=this.tabs)||void 0===t?void 0:t.activeKey)||0,tabPanes:[]}},computed:{hasHeader:function(){return this.title||this.$slots.title||this.extra||this.$slots.extra||this.collapsible},cardClasses:function(){return["jh-card",{"jh-card--bordered":this.bordered,"jh-card--ghost":this.ghost,"jh-card--small":"small"===this.size,"jh-card--hoverable":this.hoverable,"jh-card--split-vertical":"vertical"===this.split,"jh-card--split-horizontal":"horizontal"===this.split,"jh-card--layout-center":"center"===this.layout}]},cardStyles:function(){var t,e,n={};if(24!==this.colSpan&&("number"==typeof this.colSpan?(n.flex="0 0 ".concat(this.colSpan/24*100,"%"),n.maxWidth="".concat(this.colSpan/24*100,"%")):"string"==typeof this.colSpan&&(this.colSpan.endsWith("%")||this.colSpan.endsWith("px"))&&(n.flex="0 0 ".concat(this.colSpan),n.maxWidth=this.colSpan)),this.gutter)if(Array.isArray(this.gutter)){var r=(t=this.gutter,e=2,function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,a,o,l=[],s=!0,c=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);s=!0);}catch(t){c=!0,i=t}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return l}}(t,e)||function(t,e){if(t){if("string"==typeof t)return bt(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bt(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=r[0],a=r[1];i&&(n.marginLeft="".concat(i/2,"px")),i&&(n.marginRight="".concat(i/2,"px")),a&&(n.marginTop="".concat(a/2,"px")),a&&(n.marginBottom="".concat(a/2,"px"))}else n.gap="".concat(this.gutter,"px");return n},headerClasses:function(){return["jh-card-header",{"jh-card-header--small":"small"===this.size}]},bodyClasses:function(){return["jh-card-body",{"jh-card-body--small":"small"===this.size,"jh-card-body--ghost":this.ghost,"jh-card-body--center":"center"===this.layout}]},bodyStyles:function(){return yt(yt({},this.bodyStyle),{},{flexDirection:this.direction})},tabsClasses:function(){var t;return["jh-card-tabs",{"jh-card-tabs--card":"card"===(null===(t=this.tabs)||void 0===t?void 0:t.type)}]}},watch:{"tabs.activeKey":function(t){this.activeTabKey=t}},mounted:function(){this.tabs&&this.$slots.default&&this.collectTabPanes()},methods:{toggleCollapse:function(){this.isCollapsed=!this.isCollapsed,this.$emit("collapse",this.isCollapsed)},handleTabChange:function(t){var e;this.activeTabKey=t,this.$emit("tab-change",t),null!==(e=this.tabs)&&void 0!==e&&e.onChange&&this.tabs.onChange(t)},collectTabPanes:function(){var t=[];(this.$slots.default||[]).forEach(function(e,n){if(e.componentOptions&&"jh-card-tab-pane"===e.componentOptions.tag){var r=e.componentOptions.propsData||{};t.push({key:r.tabKey||n,tab:r.tab||"Tab ".concat(n+1),content:e})}}),this.tabPanes=t}}},pt,[],!1,null,"7e359408",null).exports;var St=function(){var t=this,e=t._self._c;return e("div",{class:t.cardClasses,style:t.cardStyles},[t.title||t.$slots.title?e("div",{staticClass:"jh-statistic-card-header"},[t._t("title",function(){return[e("div",{staticClass:"jh-statistic-card-title"},[t._v(t._s(t.title))])]}),t._v(" "),t.tooltip?e("div",{staticClass:"jh-statistic-card-tooltip"},[e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(n){var r=n.on,i=n.attrs;return[e("v-icon",t._g(t._b({attrs:{small:""}},"v-icon",i,!1),r),[t._v("mdi-help-circle-outline")])]}}],null,!1,722434280)},[t._v(" "),e("span",[t._v(t._s(t.tooltip))])])],1):t._e()],2):t._e(),t._v(" "),e("div",{staticClass:"jh-statistic-card-content"},[e("div",{staticClass:"jh-statistic-card-statistic"},[e("div",{staticClass:"jh-statistic-card-value-wrapper"},[t.prefix?e("span",{staticClass:"jh-statistic-card-prefix"},[t._v(t._s(t.prefix))]):t._e(),t._v(" "),e("span",{class:t.valueClasses,style:t.valueStyles},[t._t("value",function(){return[t._v(t._s(t.formattedValue))]})],2),t._v(" "),t.suffix?e("span",{staticClass:"jh-statistic-card-suffix"},[t._v(t._s(t.suffix))]):t._e()]),t._v(" "),t.trend||t.$slots.trend?e("div",{staticClass:"jh-statistic-card-trend"},[t._t("trend",function(){return[e("v-icon",{staticClass:"jh-statistic-card-trend-icon",attrs:{small:"",color:t.trendColor}},[t._v("\n            "+t._s(t.trendIcon)+"\n          ")]),t._v(" "),e("span",{style:{color:t.trendColor}},[t._v(t._s(t.trend))])]})],2):t._e(),t._v(" "),t.description||t.$slots.description?e("div",{staticClass:"jh-statistic-card-description"},[t._t("description",function(){return[t._v(t._s(t.description))]})],2):t._e()]),t._v(" "),t.hasChart?e("div",{staticClass:"jh-statistic-card-chart"},[t._t("chart",function(){return[t.chartOption?e("v-chart",{style:t.chartStyles,attrs:{option:t.chartOption,autoresize:""}}):t._e()]})],2):t._e()]),t._v(" "),t.$slots.footer||t.footer?e("div",{staticClass:"jh-statistic-card-footer"},[t._t("footer",function(){return[t._v(t._s(t.footer))]})],2):t._e()])};St._withStripped=!0;var wt=function(){return"undefined"!=typeof window&&window.echarts};const Ct=r({name:"JhStatisticCard",components:{VChart:{name:"VChart",props:{option:Object,autoresize:{type:Boolean,default:!0}},data:function(){return{chart:null}},mounted:function(){this.initChart(),this.autoresize&&window.addEventListener("resize",this.handleResize)},beforeDestroy:function(){this.chart&&this.chart.dispose(),this.autoresize&&window.removeEventListener("resize",this.handleResize)},watch:{option:{handler:function(){this.updateChart()},deep:!0}},methods:{initChart:function(){wt()?(this.chart=window.echarts.init(this.$el),this.updateChart()):console.warn("ECharts is not available. Please include ECharts CDN.")},updateChart:function(){this.chart&&this.option&&this.chart.setOption(this.option,!0)},handleResize:function(){this.chart&&this.chart.resize()}},render:function(t){return t("div",{style:{width:"100%",height:"100%"}})}}},props:{title:{type:String,default:""},tooltip:{type:String,default:""},value:{type:[Number,String],default:0},prefix:{type:String,default:""},suffix:{type:String,default:""},precision:{type:Number,default:0},valueColor:{type:String,default:""},trend:{type:String,default:""},trendType:{type:String,default:"up",validator:function(t){return["up","down"].includes(t)}},description:{type:String,default:""},footer:{type:String,default:""},chartOption:{type:Object,default:null},chartHeight:{type:[Number,String],default:46},chartWidth:{type:[Number,String],default:100},bordered:{type:Boolean,default:!0},loading:{type:Boolean,default:!1},layout:{type:String,default:"horizontal",validator:function(t){return["horizontal","vertical"].includes(t)}}},computed:{formattedValue:function(){return"number"==typeof this.value?this.value.toFixed(this.precision):this.value},trendIcon:function(){return"up"===this.trendType?"mdi-trending-up":"mdi-trending-down"},trendColor:function(){return"up"===this.trendType?"#52c41a":"#f5222d"},hasChart:function(){return(this.$slots.chart||this.chartOption)&&wt()},cardClasses:function(){return["jh-statistic-card",{"jh-statistic-card--bordered":this.bordered,"jh-statistic-card--loading":this.loading,"jh-statistic-card--vertical":"vertical"===this.layout}]},cardStyles:function(){return{}},valueClasses:function(){return["jh-statistic-card-value"]},valueStyles:function(){var t={};return this.valueColor&&(t.color=this.valueColor),t},chartStyles:function(){return{height:"number"==typeof this.chartHeight?"".concat(this.chartHeight,"px"):this.chartHeight,width:"number"==typeof this.chartWidth?"".concat(this.chartWidth,"px"):this.chartWidth}}}},St,[],!1,null,"39b0e8b7",null).exports;var xt=function(){var t=this;return(0,t._self._c)("div",{staticClass:"jh-watermark",style:t.containerStyle},[t._t("default")],2)};function kt(t){return kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kt(t)}function jt(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function a(n,r,i,a){var s=r&&r.prototype instanceof l?r:l,c=Object.create(s.prototype);return Dt(c,"_invoke",function(n,r,i){var a,l,s,c=0,u=i||[],d=!1,f={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return a=e,l=0,s=t,f.n=n,o}};function h(n,r){for(l=n,s=r,e=0;!d&&c&&!i&&e<u.length;e++){var i,a=u[e],h=f.p,p=a[2];n>3?(i=p===r)&&(s=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=t):a[0]<=h&&((i=n<2&&h<a[1])?(l=0,f.v=r,f.n=a[1]):h<p&&(i=n<3||a[0]>r||r>p)&&(a[4]=n,a[5]=r,f.n=p,l=0))}if(i||n>1)return o;throw d=!0,r}return function(i,u,p){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&h(u,p),l=u,s=p;(e=l<2?t:s)||!d;){a||(l?l<3?(l>1&&(f.n=-1),h(l,s)):f.n=s:f.v=s);try{if(c=2,a){if(l||(i="next"),e=a[i]){if(!(e=e.call(a,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,l<2&&(l=0)}else 1===l&&(e=a.return)&&e.call(a),l<2&&(s=TypeError("The iterator does not provide a '"+i+"' method"),l=1);a=t}else if((e=(d=f.n<0)?s:n.call(r,f))!==o)break}catch(e){a=t,l=1,s=e}finally{c=1}}return{value:e,done:d}}}(n,i,a),!0),c}var o={};function l(){}function s(){}function c(){}e=Object.getPrototypeOf;var u=[][r]?e(e([][r]())):(Dt(e={},r,function(){return this}),e),d=c.prototype=l.prototype=Object.create(u);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,Dt(t,i,"GeneratorFunction")),t.prototype=Object.create(d),t}return s.prototype=c,Dt(d,"constructor",c),Dt(c,"constructor",s),s.displayName="GeneratorFunction",Dt(c,i,"GeneratorFunction"),Dt(d),Dt(d,i,"Generator"),Dt(d,r,function(){return this}),Dt(d,"toString",function(){return"[object Generator]"}),(jt=function(){return{w:a,m:f}})()}function Dt(t,e,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}Dt=function(t,e,n,r){function a(e,n){Dt(t,e,function(t){return this._invoke(e,n,t)})}e?i?i(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(a("next",0),a("throw",1),a("return",2))},Dt(t,e,n,r)}function Ot(t,e,n,r,i,a,o){try{var l=t[a](o),s=l.value}catch(t){return void n(t)}l.done?e(s):Promise.resolve(s).then(r,i)}function It(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function Pt(t,e,n){return(e=function(t){var e=function(t){if("object"!=kt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=kt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==kt(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}xt._withStripped=!0;const Ft=r({name:"JhWaterMark",props:{content:{type:[String,Array],default:""},image:{type:String,default:""},width:{type:Number,default:120},height:{type:Number,default:64},rotate:{type:Number,default:-22},gapX:{type:Number,default:212},gapY:{type:Number,default:222},offsetX:{type:Number,default:void 0},offsetY:{type:Number,default:void 0},font:{type:Object,default:function(){return{}}},zIndex:{type:Number,default:9},getContainer:{type:Function,default:void 0}},data:function(){return{watermarkUrl:"",observer:null}},computed:{containerStyle:function(){return{position:"relative"}},mergedFont:function(){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?It(Object(n),!0).forEach(function(e){Pt(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):It(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({color:"rgba(0, 0, 0, 0.15)",fontSize:16,fontWeight:"normal",fontFamily:"sans-serif",fontStyle:"normal",textAlign:"center"},this.font)},actualOffsetX:function(){return void 0!==this.offsetX?this.offsetX:this.gapX/2},actualOffsetY:function(){return void 0!==this.offsetY?this.offsetY:this.gapY/2}},watch:{content:{handler:function(){this.renderWatermark()},deep:!0},image:function(){this.renderWatermark()},width:function(){this.renderWatermark()},height:function(){this.renderWatermark()},rotate:function(){this.renderWatermark()},gapX:function(){this.renderWatermark()},gapY:function(){this.renderWatermark()},offsetX:function(){this.renderWatermark()},offsetY:function(){this.renderWatermark()},font:{handler:function(){this.renderWatermark()},deep:!0}},mounted:function(){this.renderWatermark(),this.observeWatermark()},beforeDestroy:function(){this.destroyWatermark(),this.observer&&this.observer.disconnect()},methods:{renderWatermark:function(){var t,e=this;return(t=jt().m(function t(){var n,r,i,a;return jt().w(function(t){for(;;)switch(t.n){case 0:if(n=document.createElement("canvas"),r=n.getContext("2d"),i=2*(e.width+e.gapX),a=2*(e.height+e.gapY),n.width=i,n.height=a,!e.image){t.n=2;break}return t.n=1,e.drawImageWatermark(r,i,a);case 1:t.n=3;break;case 2:e.content&&e.drawTextWatermark(r,i,a);case 3:e.watermarkUrl=n.toDataURL(),e.updateWatermarkElement();case 4:return t.a(2)}},t)}),function(){var e=this,n=arguments;return new Promise(function(r,i){var a=t.apply(e,n);function o(t){Ot(a,r,i,o,l,"next",t)}function l(t){Ot(a,r,i,o,l,"throw",t)}o(void 0)})})()},drawImageWatermark:function(t,e,n){var r=this;return new Promise(function(i,a){var o=new Image;o.crossOrigin="anonymous",o.referrerPolicy="no-referrer",o.onload=function(){t.save();var a=e/2,l=n/2;t.translate(a,l),t.rotate(Math.PI/180*r.rotate),t.drawImage(o,-r.width/2,-r.height/2,r.width,r.height),t.restore(),i()},o.onerror=function(){console.error("Watermark image load failed"),a()},o.src=r.image})},drawTextWatermark:function(t,e,n){var r=this.mergedFont,i=r.color,a=r.fontSize,o=r.fontWeight,l=r.fontFamily,s=r.fontStyle,c=r.textAlign;t.save(),t.font="".concat(s," ").concat(o," ").concat(a,"px ").concat(l),t.fillStyle=i,t.textAlign=c,t.textBaseline="middle";var u=e/2,d=n/2;t.translate(u,d),t.rotate(Math.PI/180*this.rotate);var f=Array.isArray(this.content)?this.content:[this.content],h=1.5*a,p=-f.length*h/2+h/2;f.forEach(function(e,n){var r=p+n*h;t.fillText(e,0,r)}),t.restore()},updateWatermarkElement:function(){this.destroyWatermark();var t=this.getContainer?this.getContainer():this.$el;if(t){var e=document.createElement("div");e.className="jh-watermark-layer",e.style.cssText="\n        position: absolute;\n        left: 0;\n        right: 0;\n        top: 0;\n        bottom: 0;\n        pointer-events: none;\n        z-index: ".concat(this.zIndex,";\n        background-image: url(").concat(this.watermarkUrl,");\n        background-repeat: repeat;\n        background-position: ").concat(this.actualOffsetX,"px ").concat(this.actualOffsetY,"px;\n        overflow: hidden;\n      "),e.setAttribute("data-watermark","true"),t.appendChild(e),this.watermarkElement=e}},destroyWatermark:function(){this.watermarkElement&&this.watermarkElement.parentNode&&(this.watermarkElement.parentNode.removeChild(this.watermarkElement),this.watermarkElement=null)},observeWatermark:function(){var t=this;window.MutationObserver&&(this.observer=new MutationObserver(function(e){e.forEach(function(e){"childList"===e.type?Array.from(e.removedNodes).some(function(e){return e===t.watermarkElement})&&t.updateWatermarkElement():"attributes"===e.type&&e.target===t.watermarkElement&&t.updateWatermarkElement()})}),this.observer.observe(this.$el,{childList:!0,attributes:!0,subtree:!0}))}}},xt,[],!1,null,"44935ffe",null).exports;var Tt=function(){var t=this,e=t._self._c;return e("v-overlay",{attrs:{value:t.value,opacity:t.opacity,color:t.color,"z-index":t.zIndex},on:{click:t.handleClick}},[t._t("default",function(){return[t.showLoading?e("v-progress-circular",{attrs:{size:t.loadingSize,width:t.loadingWidth,color:t.loadingColor,indeterminate:""}}):t._e()]})],2)};Tt._withStripped=!0;const At=r({name:"JhMask",props:{value:{type:Boolean,default:!1},color:{type:String,default:"#e3e3e3"},opacity:{type:[Number,String],default:.8,validator:function(t){var e=parseFloat(t);return e>=0&&e<=1}},zIndex:{type:[Number,String],default:300},showLoading:{type:Boolean,default:!1},loadingSize:{type:[Number,String],default:64},loadingWidth:{type:[Number,String],default:7},loadingColor:{type:String,default:"primary"},closeOnClick:{type:Boolean,default:!1},timeout:{type:Number,default:0}},data:function(){return{timer:null}},watch:{value:function(t){t&&this.timeout>0?this.startTimer():t||this.clearTimer()}},beforeDestroy:function(){this.clearTimer()},methods:{handleClick:function(){this.closeOnClick&&(this.$emit("input",!1),this.$emit("click"))},startTimer:function(){var t=this;this.clearTimer(),this.timer=setTimeout(function(){t.$emit("input",!1),t.$emit("timeout")},this.timeout)},clearTimer:function(){this.timer&&(clearTimeout(this.timer),this.timer=null)}}},Tt,[],!1,null,"79554ce9",null).exports;var Bt=function(){var t=this,e=t._self._c;return e("v-snackbar",{class:["jh-toast","jh-toast--".concat(t.type)],attrs:{color:t.currentColor,timeout:t.currentTimeout,top:t.position.includes("top"),bottom:t.position.includes("bottom"),left:t.position.includes("left"),right:t.position.includes("right"),vertical:t.vertical,elevation:t.elevation},on:{input:t.handleInput},scopedSlots:t._u([{key:"action",fn:function(n){var r=n.attrs;return[t.showCloseButton?e("v-btn",t._b({attrs:{color:t.closeButtonColor,text:"",small:""},on:{click:t.close}},"v-btn",r,!1),[t._v("\n      "+t._s(t.closeButtonText)+"\n    ")]):t._e(),t._v(" "),t.actionText?e("v-btn",t._b({attrs:{color:t.actionButtonColor,text:"",small:""},on:{click:t.handleAction}},"v-btn",r,!1),[t._v("\n      "+t._s(t.actionText)+"\n    ")]):t._e()]}}]),model:{value:t.isVisible,callback:function(e){t.isVisible=e},expression:"isVisible"}},[e("div",{staticClass:"jh-toast__content"},["loading"===t.type?e("v-progress-circular",{staticClass:"jh-toast__icon",attrs:{size:18,width:3,color:"white",indeterminate:""}}):t.currentIcon?e("v-icon",{staticClass:"jh-toast__icon",attrs:{color:t.iconColor}},[t._v("\n      "+t._s(t.currentIcon)+"\n    ")]):t._e(),t._v(" "),e("span",{staticClass:"jh-toast__message"},[t._v(t._s(t.currentMessage))])],1)])};Bt._withStripped=!0;const $t=r({name:"JhToast",props:{value:{type:Boolean,default:!1},message:{type:String,default:""},type:{type:String,default:"success",validator:function(t){return["success","error","warning","info","loading"].includes(t)}},position:{type:String,default:"top",validator:function(t){return["top","bottom","top-left","top-right","bottom-left","bottom-right"].includes(t)}},timeout:{type:Number,default:3e3},color:{type:String,default:""},icon:{type:String,default:""},iconColor:{type:String,default:"white"},showCloseButton:{type:Boolean,default:!0},closeButtonText:{type:String,default:"关闭"},closeButtonColor:{type:String,default:"white"},actionText:{type:String,default:""},actionButtonColor:{type:String,default:"white"},vertical:{type:Boolean,default:!1},elevation:{type:[Number,String],default:24},maxLength:{type:Number,default:100}},data:function(){return{isVisible:!1}},computed:{currentMessage:function(){var t=this.message||"";return t.length>this.maxLength&&(t=t.substring(0,this.maxLength)+"..."),t},currentColor:function(){return this.color?this.color:{success:"success",error:"error",warning:"warning",info:"info",loading:"primary"}[this.type]||"success"},currentIcon:function(){return this.icon?this.icon:"loading"===this.type?"":{success:"mdi-check-circle",error:"mdi-alert-circle",warning:"mdi-alert",info:"mdi-information"}[this.type]||"mdi-check-circle"},currentTimeout:function(){return"loading"===this.type?-1:this.timeout}},watch:{value:function(t){this.isVisible=t},isVisible:function(t){t||this.$emit("input",!1)}},mounted:function(){this.isVisible=this.value},methods:{handleInput:function(t){this.$emit("input",t),t||this.$emit("close")},close:function(){this.isVisible=!1},handleAction:function(){this.$emit("action")}}},Bt,[],!1,null,"0da7bef5",null).exports;var Rt=function(){var t=this,e=t._self._c;return e("v-dialog",{attrs:{"max-width":t.maxWidth,persistent:t.persistent},on:{"click:outside":t.handleClickOutside},model:{value:t.isVisible,callback:function(e){t.isVisible=e},expression:"isVisible"}},[e("v-card",[t.title||t.$slots.title?e("v-card-title",[t._t("title",function(){return[t._v(t._s(t.title))]})],2):t._e(),t._v(" "),t.content||t.$slots.default?e("v-card-text",{class:t.contentClass},[t._t("default",function(){return[e("div",{domProps:{innerHTML:t._s(t.content)}})]})],2):t._e(),t._v(" "),e("v-card-actions",[e("v-spacer"),t._v(" "),t.showCancelButton?e("v-btn",{attrs:{color:t.cancelButtonColor,text:""!==t.cancelButtonText,disabled:t.loading},on:{click:t.handleCancel}},[t._v("\n        "+t._s(t.cancelButtonText||"取消")+"\n      ")]):t._e(),t._v(" "),e("v-btn",{attrs:{color:t.confirmButtonColor,text:""!==t.confirmButtonText,loading:t.loading},on:{click:t.handleConfirm}},[t._v("\n        "+t._s(t.confirmButtonText||"确定")+"\n      ")])],1)],1)],1)};function Nt(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function a(n,r,i,a){var s=r&&r.prototype instanceof l?r:l,c=Object.create(s.prototype);return Mt(c,"_invoke",function(n,r,i){var a,l,s,c=0,u=i||[],d=!1,f={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return a=e,l=0,s=t,f.n=n,o}};function h(n,r){for(l=n,s=r,e=0;!d&&c&&!i&&e<u.length;e++){var i,a=u[e],h=f.p,p=a[2];n>3?(i=p===r)&&(s=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=t):a[0]<=h&&((i=n<2&&h<a[1])?(l=0,f.v=r,f.n=a[1]):h<p&&(i=n<3||a[0]>r||r>p)&&(a[4]=n,a[5]=r,f.n=p,l=0))}if(i||n>1)return o;throw d=!0,r}return function(i,u,p){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&h(u,p),l=u,s=p;(e=l<2?t:s)||!d;){a||(l?l<3?(l>1&&(f.n=-1),h(l,s)):f.n=s:f.v=s);try{if(c=2,a){if(l||(i="next"),e=a[i]){if(!(e=e.call(a,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,l<2&&(l=0)}else 1===l&&(e=a.return)&&e.call(a),l<2&&(s=TypeError("The iterator does not provide a '"+i+"' method"),l=1);a=t}else if((e=(d=f.n<0)?s:n.call(r,f))!==o)break}catch(e){a=t,l=1,s=e}finally{c=1}}return{value:e,done:d}}}(n,i,a),!0),c}var o={};function l(){}function s(){}function c(){}e=Object.getPrototypeOf;var u=[][r]?e(e([][r]())):(Mt(e={},r,function(){return this}),e),d=c.prototype=l.prototype=Object.create(u);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,Mt(t,i,"GeneratorFunction")),t.prototype=Object.create(d),t}return s.prototype=c,Mt(d,"constructor",c),Mt(c,"constructor",s),s.displayName="GeneratorFunction",Mt(c,i,"GeneratorFunction"),Mt(d),Mt(d,i,"Generator"),Mt(d,r,function(){return this}),Mt(d,"toString",function(){return"[object Generator]"}),(Nt=function(){return{w:a,m:f}})()}function Mt(t,e,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}Mt=function(t,e,n,r){function a(e,n){Mt(t,e,function(t){return this._invoke(e,n,t)})}e?i?i(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(a("next",0),a("throw",1),a("return",2))},Mt(t,e,n,r)}function Lt(t,e,n,r,i,a,o){try{var l=t[a](o),s=l.value}catch(t){return void n(t)}l.done?e(s):Promise.resolve(s).then(r,i)}function Et(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var a=t.apply(e,n);function o(t){Lt(a,r,i,o,l,"next",t)}function l(t){Lt(a,r,i,o,l,"throw",t)}o(void 0)})}}Rt._withStripped=!0;const Vt=r({name:"JhConfirmDialog",props:{value:{type:Boolean,default:!1},title:{type:String,default:"提示"},content:{type:String,default:""},contentClass:{type:String,default:"pa-6 text-pre-line"},maxWidth:{type:[String,Number],default:420},showCancelButton:{type:Boolean,default:!0},confirmButtonText:{type:String,default:"确定"},cancelButtonText:{type:String,default:"取消"},confirmButtonColor:{type:String,default:"primary"},cancelButtonColor:{type:String,default:"default"},persistent:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},beforeConfirm:{type:Function,default:null},beforeCancel:{type:Function,default:null}},data:function(){return{isVisible:!1}},watch:{value:function(t){this.isVisible=t},isVisible:function(t){t!==this.value&&this.$emit("input",t)}},mounted:function(){this.isVisible=this.value},methods:{handleConfirm:function(){var t=this;return Et(Nt().m(function e(){return Nt().w(function(e){for(;;)switch(e.n){case 0:if(!t.beforeConfirm){e.n=2;break}return e.n=1,t.beforeConfirm();case 1:if(!1!==e.v){e.n=2;break}return e.a(2);case 2:t.$emit("confirm"),t.loading||t.close();case 3:return e.a(2)}},e)}))()},handleCancel:function(){var t=this;return Et(Nt().m(function e(){return Nt().w(function(e){for(;;)switch(e.n){case 0:if(!t.beforeCancel){e.n=2;break}return e.n=1,t.beforeCancel();case 1:if(!1!==e.v){e.n=2;break}return e.a(2);case 2:t.$emit("cancel"),t.close();case 3:return e.a(2)}},e)}))()},handleClickOutside:function(){this.persistent||(this.$emit("click-outside"),this.$emit("cancel"))},close:function(){this.isVisible=!1},open:function(){this.isVisible=!0}}},Rt,[],!1,null,"4d697b30",null).exports;var zt=function(){var t=this,e=t._self._c;return e("v-form",{ref:t.formRef,class:t.formClasses,attrs:{"lazy-validation":t.lazyValidation}},[e("jh-form-fields",{attrs:{fields:t.normalizedFields,layout:t.internalLayout,"show-labels":t.showLabels,"label-width":t.labelWidth,"label-align":t.labelAlign,"show-required-mark":t.showRequiredMark,readonly:t.readonly,disabled:t.disabled,"default-dense":t.defaultDense,"default-filled":t.defaultFilled,"default-outlined":t.defaultOutlined,"default-single-line":t.defaultSingleLine,"default-cols-md":t.defaultColsMd,"hide-details":t.hideDetails,"label-class":t.labelClass,"input-class":t.inputClass,"row-class":t.rowClass,"validation-rules":t.validationRules,"row-props":t.gridRowProps},on:{"field-input":t.handleFieldInput,"field-change":t.handleFieldChange,"field-blur":t.handleFieldBlur},scopedSlots:t._u([t._l(t.slotFields,function(e){return{key:"field-".concat(e.key),fn:function(n){return[t._t("field-".concat(e.key),null,null,n)]}}})],null,!0),model:{value:t.formData,callback:function(e){t.formData=e},expression:"formData"}}),t._v(" "),t.isGridLayout?[e("v-row",t._b({staticClass:"jh-form-grid-actions-row"},"v-row",t.rowProps,!1),[e("v-col",{staticClass:"jh-form-actions-col",attrs:{cols:"12"}},[t._t("actions",null,{formData:t.formData,validate:t.validate,resetForm:t.resetForm})],2)],1)]:[t._t("actions",null,{formData:t.formData,validate:t.validate,resetForm:t.resetForm})]],2)};function Kt(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function a(n,r,i,a){var s=r&&r.prototype instanceof l?r:l,c=Object.create(s.prototype);return Jt(c,"_invoke",function(n,r,i){var a,l,s,c=0,u=i||[],d=!1,f={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return a=e,l=0,s=t,f.n=n,o}};function h(n,r){for(l=n,s=r,e=0;!d&&c&&!i&&e<u.length;e++){var i,a=u[e],h=f.p,p=a[2];n>3?(i=p===r)&&(s=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=t):a[0]<=h&&((i=n<2&&h<a[1])?(l=0,f.v=r,f.n=a[1]):h<p&&(i=n<3||a[0]>r||r>p)&&(a[4]=n,a[5]=r,f.n=p,l=0))}if(i||n>1)return o;throw d=!0,r}return function(i,u,p){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&h(u,p),l=u,s=p;(e=l<2?t:s)||!d;){a||(l?l<3?(l>1&&(f.n=-1),h(l,s)):f.n=s:f.v=s);try{if(c=2,a){if(l||(i="next"),e=a[i]){if(!(e=e.call(a,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,l<2&&(l=0)}else 1===l&&(e=a.return)&&e.call(a),l<2&&(s=TypeError("The iterator does not provide a '"+i+"' method"),l=1);a=t}else if((e=(d=f.n<0)?s:n.call(r,f))!==o)break}catch(e){a=t,l=1,s=e}finally{c=1}}return{value:e,done:d}}}(n,i,a),!0),c}var o={};function l(){}function s(){}function c(){}e=Object.getPrototypeOf;var u=[][r]?e(e([][r]())):(Jt(e={},r,function(){return this}),e),d=c.prototype=l.prototype=Object.create(u);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,Jt(t,i,"GeneratorFunction")),t.prototype=Object.create(d),t}return s.prototype=c,Jt(d,"constructor",c),Jt(c,"constructor",s),s.displayName="GeneratorFunction",Jt(c,i,"GeneratorFunction"),Jt(d),Jt(d,i,"Generator"),Jt(d,r,function(){return this}),Jt(d,"toString",function(){return"[object Generator]"}),(Kt=function(){return{w:a,m:f}})()}function Jt(t,e,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}Jt=function(t,e,n,r){function a(e,n){Jt(t,e,function(t){return this._invoke(e,n,t)})}e?i?i(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(a("next",0),a("throw",1),a("return",2))},Jt(t,e,n,r)}function Gt(t,e,n,r,i,a,o){try{var l=t[a](o),s=l.value}catch(t){return void n(t)}l.done?e(s):Promise.resolve(s).then(r,i)}function Wt(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var a=t.apply(e,n);function o(t){Gt(a,r,i,o,l,"next",t)}function l(t){Gt(a,r,i,o,l,"throw",t)}o(void 0)})}}function Ut(t){return Ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ut(t)}function qt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function Ht(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?qt(Object(n),!0).forEach(function(e){Yt(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qt(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function Yt(t,e,n){return(e=function(t){var e=function(t){if("object"!=Ut(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Ut(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ut(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}zt._withStripped=!0;const Xt=r({name:"JhForm",components:{JhFormFields:k},props:{fields:{type:Array,default:function(){return[]}},initialData:{type:Object,default:function(){return{}}},formRef:{type:String,default:"jhForm"},lazyValidation:{type:Boolean,default:!0},layout:{type:String,default:"vertical",validator:function(t){return["horizontal","vertical","inline","grid"].includes(t)}},showLabels:{type:Boolean,default:!0},labelPosition:{type:String,default:"top",validator:function(t){return["top","left"].includes(t)}},labelWidth:{type:[Number,String],default:"auto"},labelAlign:{type:String,default:"right",validator:function(t){return["left","right","center"].includes(t)}},showRequiredMark:{type:Boolean,default:!0},readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},defaultDense:{type:Boolean,default:!0},defaultFilled:{type:Boolean,default:!0},defaultOutlined:{type:Boolean,default:!1},defaultSingleLine:{type:Boolean,default:!0},defaultColsMd:{type:Number,default:6},hideDetails:{type:[Boolean,String],default:!1},labelClass:{type:String,default:"jh-input-label"},inputClass:{type:String,default:"jh-v-input"},rowClass:{type:String,default:""},validationRules:{type:Object,default:function(){return{require:[function(t){return!!t||"必填"}],email:[function(t){return!t||/.+@.+\..+/.test(t)||"邮箱格式不正确"}],phone:[function(t){return!t||/^1[3-9]\d{9}$/.test(t)||"手机号格式不正确"}],number:[function(t){return!t||!isNaN(t)||"请输入数字"}],integer:[function(t){return!t||Number.isInteger(Number(t))||"请输入整数"}]}}},submitter:{type:[Object,Boolean],default:void 0},onFinish:{type:Function,default:void 0},onFinishFailed:{type:Function,default:void 0},dateFormatter:{type:[String,Function,Boolean],default:"YYYY-MM-DD"},omitNil:{type:Boolean,default:!0},grid:{type:Boolean,default:!1},colProps:{type:Object,default:function(){return{}}},rowProps:{type:Object,default:function(){return{}}}},data:function(){return{formData:{}}},computed:{formClasses:function(){return Yt(Yt(Yt({"jh-form":!0},"jh-form--".concat(this.layout),!0),"jh-form--readonly",this.readonly),"jh-form--disabled",this.disabled)},isGridLayout:function(){return this.grid||"grid"===this.layout},normalizedFields:function(){var t=this;return this.isGridLayout?this.fields.map(function(e){if("group"===e.type)return Ht({},e);var n=t.getColBindings(e),r={};if(void 0!==n.cols&&(r.xs=n.cols),void 0!==n.sm&&(r.sm=n.sm),void 0!==n.md&&(r.md=n.md),void 0!==n.lg&&(r.lg=n.lg),void 0!==n.xl&&(r.xl=n.xl),!Object.keys(r).length)return Ht({},e);var i=e.cols&&"object"===Ut(e.cols)?e.cols:{};return Ht(Ht({},e),{},{cols:Ht(Ht({},i),r)})}):this.fields},internalLayout:function(){return this.isGridLayout?"vertical":this.layout},slotFields:function(){return this.fields.filter(function(t){return"slot"===t.type})},gridRowProps:function(){return this.isGridLayout&&this.rowProps||{}}},watch:{initialData:{handler:function(t){this.formData=Ht({},t)},immediate:!0,deep:!0}},mounted:function(){this.initFormData()},methods:{initFormData:function(){var t=Ht({},this.initialData);this.fields.forEach(function(e){void 0!==e.defaultValue&&void 0===t[e.key]&&(t[e.key]=e.defaultValue)}),this.formData=t},getColBindings:function(t){var e=Ht(Ht({},this.colProps||{}),t.colProps||{});t.cols&&("object"===Ut(t.cols)?Object.assign(e,t.cols):e.cols=t.cols);var n=void 0!==t.colSpan?t.colSpan:e.span,r=void 0!==n?this.mapGridSpan(n):null;return null===r||"cols"in e||"sm"in e||"md"in e||"lg"in e||"xl"in e||(e.md=r),delete e.span,"cols"in e||"sm"in e||"md"in e||"lg"in e||"xl"in e||(e.md=this.mapGridSpan(this.colProps.span||8)),e},mapGridSpan:function(t){var e=Number(t)||0,n=Math.round(e/24*12);return Math.max(1,Math.min(12,n||1))},handleFieldInput:function(t){var e=t.key,n=t.value;this.$emit("input",e,n,this.formData),this.$emit("field-change",{key:e,value:n,formData:this.formData})},handleFieldChange:function(t){var e=t.key,n=t.value;this.$emit("change",e,n,this.formData),this.$emit("field-change",{key:e,value:n,formData:this.formData})},handleFieldBlur:function(t){var e=t.key,n=t.value;this.$emit("blur",e,n,this.formData)},updateField:function(t,e){this.$set(this.formData,t,e),this.handleFieldChange({key:t,value:e})},getForm:function(){return this.$refs[this.formRef]},getFormData:function(){return Ht({},this.formData)},setFieldsValue:function(t){this.formData=Ht(Ht({},this.formData),t)},setFieldValue:function(t,e){this.$set(this.formData,t,e)},resetForm:function(){var t=this.$refs[this.formRef];t&&t.reset(),this.initFormData(),this.$emit("reset",this.formData)},resetValidation:function(){var t=this.$refs[this.formRef];t&&t.resetValidation()},validate:function(){var t=this;return Wt(Kt().m(function e(){var n,r;return Kt().w(function(e){for(;;)switch(e.n){case 0:if(!(n=t.$refs[t.formRef])){e.n=2;break}return e.n=1,n.validate();case 1:return r=e.v,t.$emit("validate",r,t.formData),e.a(2,r);case 2:return e.a(2,!0)}},e)}))()},submit:function(){var t=this;return Wt(Kt().m(function e(){var n,r,i;return Kt().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.n=1,t.validate();case 1:if(!(n=e.v)){e.n=6;break}if(r=t.getTransformedData(),t.$emit("submit",r),!t.onFinish){e.n=5;break}return e.p=2,e.n=3,t.onFinish(r);case 3:e.n=5;break;case 4:e.p=4,i=e.v,console.error("Form submit error:",i);case 5:e.n=7;break;case 6:t.onFinishFailed&&t.onFinishFailed(t.formData);case 7:return e.a(2,n)}},e,null,[[2,4]])}))()},getTransformedData:function(){var t=Ht({},this.formData);return this.fields.forEach(function(e){e.key&&e.transform&&"function"==typeof e.transform&&(t[e.key]=e.transform(t[e.key],t))}),this.omitNil&&Object.keys(t).forEach(function(e){null!==t[e]&&void 0!==t[e]&&""!==t[e]||delete t[e]}),t},getDependenciesValues:function(t){var e=this;return t&&Array.isArray(t)?t.map(function(t){return e.formData[t]}):[]},checkDependenciesChanged:function(t,e,n){if(!t.dependencies)return!1;for(var r=0;r<t.dependencies.length;r++)if(e[r]!==n[r])return!0;return!1}}},zt,[],!1,null,"ac4b6426",null).exports;var Qt=function(){var t=this,e=t._self._c;return e("v-dialog",{attrs:{"max-width":t.width,persistent:t.persistent,fullscreen:t.fullscreen},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.handleCancel.apply(null,arguments)}},model:{value:t.isShownInternal,callback:function(e){t.isShownInternal=e},expression:"isShownInternal"}},[e("v-card",[e("v-card-title",{staticClass:"d-flex align-center justify-space-between pa-4"},[e("span",{staticClass:"text-h6"},[t._v(t._s(t.title))]),t._v(" "),t.closable?e("v-btn",{attrs:{icon:"",small:""},on:{click:t.handleCancel}},[e("v-icon",[t._v("mdi-close")])],1):t._e()],1),t._v(" "),e("v-divider"),t._v(" "),e("v-card-text",{staticClass:"pa-6"},[t._t("content",function(){return[e("jh-form",{ref:"jhForm",attrs:{"form-ref":t.formRef,fields:t.fields,"initial-data":t.initialData,"validation-rules":t.validationRules,"default-cols-md":6},on:{"field-change":t.handleFieldChange},scopedSlots:t._u([t._l(t.slotFields,function(e){return{key:"field-".concat(e.key),fn:function(n){return[t._t("field-".concat(e.key),null,null,n)]}}})],null,!0)})]})],2),t._v(" "),e("v-divider"),t._v(" "),e("v-card-actions",{staticClass:"pa-4"},[e("v-spacer"),t._v(" "),e("v-btn",{attrs:{text:""},on:{click:t.handleCancel}},[t._v("\n        "+t._s(t.cancelText)+"\n      ")]),t._v(" "),t.showConfirmButton?e("v-btn",{attrs:{color:"success"},on:{click:t.handleConfirm}},[t._v("\n        "+t._s(t.confirmText)+"\n      ")]):t._e()],1)],1)],1)};function Zt(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function a(n,r,i,a){var s=r&&r.prototype instanceof l?r:l,c=Object.create(s.prototype);return te(c,"_invoke",function(n,r,i){var a,l,s,c=0,u=i||[],d=!1,f={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return a=e,l=0,s=t,f.n=n,o}};function h(n,r){for(l=n,s=r,e=0;!d&&c&&!i&&e<u.length;e++){var i,a=u[e],h=f.p,p=a[2];n>3?(i=p===r)&&(s=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=t):a[0]<=h&&((i=n<2&&h<a[1])?(l=0,f.v=r,f.n=a[1]):h<p&&(i=n<3||a[0]>r||r>p)&&(a[4]=n,a[5]=r,f.n=p,l=0))}if(i||n>1)return o;throw d=!0,r}return function(i,u,p){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&h(u,p),l=u,s=p;(e=l<2?t:s)||!d;){a||(l?l<3?(l>1&&(f.n=-1),h(l,s)):f.n=s:f.v=s);try{if(c=2,a){if(l||(i="next"),e=a[i]){if(!(e=e.call(a,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,l<2&&(l=0)}else 1===l&&(e=a.return)&&e.call(a),l<2&&(s=TypeError("The iterator does not provide a '"+i+"' method"),l=1);a=t}else if((e=(d=f.n<0)?s:n.call(r,f))!==o)break}catch(e){a=t,l=1,s=e}finally{c=1}}return{value:e,done:d}}}(n,i,a),!0),c}var o={};function l(){}function s(){}function c(){}e=Object.getPrototypeOf;var u=[][r]?e(e([][r]())):(te(e={},r,function(){return this}),e),d=c.prototype=l.prototype=Object.create(u);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,te(t,i,"GeneratorFunction")),t.prototype=Object.create(d),t}return s.prototype=c,te(d,"constructor",c),te(c,"constructor",s),s.displayName="GeneratorFunction",te(c,i,"GeneratorFunction"),te(d),te(d,i,"Generator"),te(d,r,function(){return this}),te(d,"toString",function(){return"[object Generator]"}),(Zt=function(){return{w:a,m:f}})()}function te(t,e,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}te=function(t,e,n,r){function a(e,n){te(t,e,function(t){return this._invoke(e,n,t)})}e?i?i(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(a("next",0),a("throw",1),a("return",2))},te(t,e,n,r)}function ee(t,e,n,r,i,a,o){try{var l=t[a](o),s=l.value}catch(t){return void n(t)}l.done?e(s):Promise.resolve(s).then(r,i)}function ne(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var a=t.apply(e,n);function o(t){ee(a,r,i,o,l,"next",t)}function l(t){ee(a,r,i,o,l,"throw",t)}o(void 0)})}}Qt._withStripped=!0;const re=r({name:"JhModalForm",components:{JhForm:Xt},props:{value:{type:Boolean,default:!1},title:{type:String,default:"表单"},fields:{type:Array,default:function(){return[]}},initialData:{type:Object,default:function(){return{}}},width:{type:[Number,String],default:600},fullscreen:{type:Boolean,default:!1},persistent:{type:Boolean,default:!0},closable:{type:Boolean,default:!0},showConfirmButton:{type:Boolean,default:!0},confirmText:{type:String,default:"确认"},cancelText:{type:String,default:"取消"},formRef:{type:String,default:"modalForm"},validateBeforeConfirm:{type:Boolean,default:!0},validationRules:{type:Object,default:function(){return{require:[function(t){return!!t||"必填"}],email:[function(t){return!t||/.+@.+\..+/.test(t)||"邮箱格式不正确"}],phone:[function(t){return!t||/^1[3-9]\d{9}$/.test(t)||"手机号格式不正确"}],number:[function(t){return!t||!isNaN(t)||"请输入数字"}],integer:[function(t){return!t||Number.isInteger(Number(t))||"请输入整数"}]}}}},data:function(){return{isShownInternal:this.value}},computed:{slotFields:function(){return this.fields.filter(function(t){return"slot"===t.type})}},watch:{value:function(t){var e=this;this.isShownInternal=t,t&&this.$nextTick(function(){e.resetForm()})},isShownInternal:function(t){t||(this.$emit("input",!1),this.$emit("close"))}},methods:{handleCancel:function(){this.$emit("cancel"),this.isShownInternal=!1},handleConfirm:function(){var t=this;return ne(Zt().m(function e(){return Zt().w(function(e){for(;;)switch(e.n){case 0:if(!t.validateBeforeConfirm){e.n=2;break}return e.n=1,t.validate();case 1:if(e.v){e.n=2;break}return e.a(2);case 2:t.$emit("confirm",t.getFormData());case 3:return e.a(2)}},e)}))()},handleFieldChange:function(t){this.$emit("field-change",t)},getJhForm:function(){return this.$refs.jhForm},getForm:function(){var t=this.getJhForm();return t?t.getForm():null},getFormData:function(){var t=this.getJhForm();return t?t.getFormData():{}},setFieldsValue:function(t){var e=this.getJhForm();e&&e.setFieldsValue(t)},setFieldValue:function(t,e){var n=this.getJhForm();n&&n.setFieldValue(t,e)},resetForm:function(){var t=this.getJhForm();t&&t.resetForm()},resetValidation:function(){var t=this.getJhForm();t&&t.resetValidation()},validate:function(){var t=this;return ne(Zt().m(function e(){var n;return Zt().w(function(e){for(;;)switch(e.n){case 0:if(!(n=t.getJhForm())){e.n=2;break}return e.n=1,n.validate();case 1:return e.a(2,e.v);case 2:return e.a(2,!0)}},e)}))()}}},Qt,[],!1,null,"9ad4133c",null).exports;var ie=function(){var t=this,e=t._self._c;return e("v-navigation-drawer",{staticClass:"elevation-24",attrs:{fixed:"",temporary:"",right:"right"===t.position,left:"left"===t.position,width:t.width},model:{value:t.isShownInternal,callback:function(e){t.isShownInternal=e},expression:"isShownInternal"}},[e("v-row",{staticClass:"jh-drawer-header px-4 bg-white",attrs:{"no-gutters":"",align:"center"}},[e("span",{staticClass:"text-h7 font-weight-bold py-4"},[t._v(t._s(t.title))]),t._v(" "),e("v-spacer"),t._v(" "),e("div",{staticClass:"jh-drawer-action-btn-group"},[e("v-btn",{staticClass:"elevation-0 grey lighten-4",attrs:{small:""},on:{click:t.handleCancel}},[t._v("\n        "+t._s(t.cancelText)+"\n      ")]),t._v(" "),t._t("actions",function(){return[t.showConfirmButton?e("v-btn",{staticClass:"ml-2",attrs:{color:"success",small:""},on:{click:t.handleConfirm}},[t._v("\n          "+t._s(t.confirmText)+"\n        ")]):t._e()]})],2)],1),t._v(" "),e("v-divider",{staticClass:"jh-divider"}),t._v(" "),e("div",{staticClass:"px-4 pb-4"},[t._t("content",function(){return[e("jh-form",{ref:"jhForm",attrs:{"form-ref":t.formRef,fields:t.fields,"initial-data":t.initialData,"validation-rules":t.validationRules,"default-cols-md":3,"row-class":t.rowClass},on:{"field-change":t.handleFieldChange},scopedSlots:t._u([t._l(t.slotFields,function(e){return{key:"field-".concat(e.key),fn:function(n){return[t._t("field-".concat(e.key),null,null,n)]}}})],null,!0)})]})],2),t._v(" "),e("v-btn",{staticClass:"drawer-close-float-btn",attrs:{elevation:"0",color:"success",fab:"",absolute:"",top:"",left:"",small:"",tile:""},on:{click:t.handleCancel}},[e("v-icon",[t._v("mdi-close")])],1)],1)};function ae(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function a(n,r,i,a){var s=r&&r.prototype instanceof l?r:l,c=Object.create(s.prototype);return oe(c,"_invoke",function(n,r,i){var a,l,s,c=0,u=i||[],d=!1,f={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return a=e,l=0,s=t,f.n=n,o}};function h(n,r){for(l=n,s=r,e=0;!d&&c&&!i&&e<u.length;e++){var i,a=u[e],h=f.p,p=a[2];n>3?(i=p===r)&&(s=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=t):a[0]<=h&&((i=n<2&&h<a[1])?(l=0,f.v=r,f.n=a[1]):h<p&&(i=n<3||a[0]>r||r>p)&&(a[4]=n,a[5]=r,f.n=p,l=0))}if(i||n>1)return o;throw d=!0,r}return function(i,u,p){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&h(u,p),l=u,s=p;(e=l<2?t:s)||!d;){a||(l?l<3?(l>1&&(f.n=-1),h(l,s)):f.n=s:f.v=s);try{if(c=2,a){if(l||(i="next"),e=a[i]){if(!(e=e.call(a,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,l<2&&(l=0)}else 1===l&&(e=a.return)&&e.call(a),l<2&&(s=TypeError("The iterator does not provide a '"+i+"' method"),l=1);a=t}else if((e=(d=f.n<0)?s:n.call(r,f))!==o)break}catch(e){a=t,l=1,s=e}finally{c=1}}return{value:e,done:d}}}(n,i,a),!0),c}var o={};function l(){}function s(){}function c(){}e=Object.getPrototypeOf;var u=[][r]?e(e([][r]())):(oe(e={},r,function(){return this}),e),d=c.prototype=l.prototype=Object.create(u);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,oe(t,i,"GeneratorFunction")),t.prototype=Object.create(d),t}return s.prototype=c,oe(d,"constructor",c),oe(c,"constructor",s),s.displayName="GeneratorFunction",oe(c,i,"GeneratorFunction"),oe(d),oe(d,i,"Generator"),oe(d,r,function(){return this}),oe(d,"toString",function(){return"[object Generator]"}),(ae=function(){return{w:a,m:f}})()}function oe(t,e,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}oe=function(t,e,n,r){function a(e,n){oe(t,e,function(t){return this._invoke(e,n,t)})}e?i?i(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(a("next",0),a("throw",1),a("return",2))},oe(t,e,n,r)}function le(t,e,n,r,i,a,o){try{var l=t[a](o),s=l.value}catch(t){return void n(t)}l.done?e(s):Promise.resolve(s).then(r,i)}function se(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var a=t.apply(e,n);function o(t){le(a,r,i,o,l,"next",t)}function l(t){le(a,r,i,o,l,"throw",t)}o(void 0)})}}ie._withStripped=!0;const ce=r({name:"JhDrawerForm",components:{JhForm:Xt},props:{value:{type:Boolean,default:!1},title:{type:String,default:"表单"},position:{type:String,default:"right",validator:function(t){return["left","right"].includes(t)}},width:{type:String,default:"90%"},showConfirmButton:{type:Boolean,default:!0},confirmText:{type:String,default:"确认"},cancelText:{type:String,default:"取消"},formRef:{type:String,default:"drawerForm"},validateBeforeConfirm:{type:Boolean,default:!0},fields:{type:Array,default:function(){return[]}},initialData:{type:Object,default:function(){return{}}},rowClass:{type:String,default:"mt-0"},validationRules:{type:Object,default:function(){return{require:[function(t){return!!t||"必填"}],email:[function(t){return!t||/.+@.+\..+/.test(t)||"邮箱格式不正确"}],phone:[function(t){return!t||/^1[3-9]\d{9}$/.test(t)||"手机号格式不正确"}],number:[function(t){return!t||!isNaN(t)||"请输入数字"}],integer:[function(t){return!t||Number.isInteger(Number(t))||"请输入整数"}]}}}},data:function(){return{isShownInternal:this.value}},computed:{slotFields:function(){return this.fields.filter(function(t){return"slot"===t.type})}},watch:{value:function(t){var e=this;this.isShownInternal=t,t&&this.$nextTick(function(){e.resetForm()})},isShownInternal:function(t){t||(this.$emit("input",!1),this.$emit("close"))}},methods:{handleCancel:function(){this.$emit("cancel"),this.isShownInternal=!1},handleConfirm:function(){var t=this;return se(ae().m(function e(){return ae().w(function(e){for(;;)switch(e.n){case 0:if(!t.validateBeforeConfirm){e.n=2;break}return e.n=1,t.validate();case 1:if(e.v){e.n=2;break}return e.a(2);case 2:t.$emit("confirm",t.getFormData());case 3:return e.a(2)}},e)}))()},handleFieldChange:function(t){this.$emit("field-change",t)},getJhForm:function(){return this.$refs.jhForm},getForm:function(){var t=this.getJhForm();return t?t.getForm():null},getFormData:function(){var t=this.getJhForm();return t?t.getFormData():{}},setFieldsValue:function(t){var e=this.getJhForm();e&&e.setFieldsValue(t)},setFieldValue:function(t,e){var n=this.getJhForm();n&&n.setFieldValue(t,e)},resetForm:function(){var t=this.getJhForm();t&&t.resetForm()},resetValidation:function(){var t=this.getJhForm();t&&t.resetValidation()},validate:function(){var t=this;return se(ae().m(function e(){var n;return ae().w(function(e){for(;;)switch(e.n){case 0:if(!(n=t.getJhForm())){e.n=2;break}return e.n=1,n.validate();case 1:return e.a(2,e.v);case 2:return e.a(2,!0)}},e)}))()}}},ie,[],!1,null,"7a237adf",null).exports;var ue=function(){var t=this,e=t._self._c;return e("v-dialog",{attrs:{"max-width":t.width,persistent:t.persistent,fullscreen:t.fullscreen},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.handleCancel.apply(null,arguments)}},model:{value:t.isShownInternal,callback:function(e){t.isShownInternal=e},expression:"isShownInternal"}},[e("v-card",[e("v-card-title",{staticClass:"d-flex align-center justify-space-between pa-4 sticky top-0 z-10 bg-white darken-1"},[e("span",{staticClass:"text-h6"},[t._v(t._s(t.title))]),t._v(" "),t.closable?e("v-btn",{attrs:{icon:"",small:""},on:{click:t.handleCancel}},[e("v-icon",[t._v("mdi-close")])],1):t._e()],1),t._v(" "),e("v-divider"),t._v(" "),e("v-card-text",{staticClass:"pa-6"},[t._t("default")],2),t._v(" "),t.showActions?[e("v-divider"),t._v(" "),e("v-card-actions",{staticClass:"pa-4"},[t._t("actions",function(){return[e("v-spacer"),t._v(" "),t.showCancelButton?e("v-btn",{attrs:{text:""},on:{click:t.handleCancel}},[t._v("\n            "+t._s(t.cancelText)+"\n          ")]):t._e(),t._v(" "),t.showConfirmButton?e("v-btn",{attrs:{color:"success"},on:{click:t.handleConfirm}},[t._v("\n            "+t._s(t.confirmText)+"\n          ")]):t._e()]})],2)]:t._e()],2)],1)};ue._withStripped=!0;const de=r({name:"JhModal",props:{value:{type:Boolean,default:!1},title:{type:String,default:"弹窗"},width:{type:[Number,String],default:600},fullscreen:{type:Boolean,default:!1},persistent:{type:Boolean,default:!0},closable:{type:Boolean,default:!0},showActions:{type:Boolean,default:!0},showConfirmButton:{type:Boolean,default:!0},showCancelButton:{type:Boolean,default:!0},confirmText:{type:String,default:"确认"},cancelText:{type:String,default:"取消"}},data:function(){return{isShownInternal:this.value}},watch:{value:function(t){this.isShownInternal=t,t&&this.$emit("open")},isShownInternal:function(t){t||(this.$emit("input",!1),this.$emit("close"))}},methods:{handleCancel:function(){this.$emit("cancel"),this.isShownInternal=!1},handleConfirm:function(){this.$emit("confirm")},open:function(){this.isShownInternal=!0},close:function(){this.isShownInternal=!1}}},ue,[],!1,null,"51775aea",null).exports;var fe=function(){var t=this,e=t._self._c;return e("v-navigation-drawer",{staticClass:"elevation-24",attrs:{permanent:t.isShownInternal,fixed:"",temporary:"",right:"right"===t.position,left:"left"===t.position,width:t.width},model:{value:t.isShownInternal,callback:function(e){t.isShownInternal=e},expression:"isShownInternal"}},[t.title?e("v-row",{staticClass:"jh-drawer-header px-4 bg-white sticky top-0 z-10",attrs:{"no-gutters":"",align:"center"}},[e("span",{staticClass:"text-h7 font-weight-bold py-4"},[t._v(t._s(t.title))]),t._v(" "),e("v-spacer"),t._v(" "),e("div",{staticClass:"jh-drawer-action-btn-group"},[t._t("actions",function(){return[t.showCancelButton?e("v-btn",{staticClass:"elevation-0 grey lighten-4",attrs:{small:""},on:{click:t.handleCancel}},[t._v("\n          "+t._s(t.cancelText)+"\n        ")]):t._e(),t._v(" "),t.showConfirmButton?e("v-btn",{staticClass:"ml-2",attrs:{color:"success",small:""},on:{click:t.handleConfirm}},[t._v("\n          "+t._s(t.confirmText)+"\n        ")]):t._e()]})],2)],1):t._e(),t._v(" "),e("v-divider",{staticClass:"jh-divider"}),t._v(" "),e("div",{staticClass:"pa-4"},[t._t("default")],2),t._v(" "),t.showCloseButton?e("v-btn",{staticClass:"drawer-close-float-btn",attrs:{elevation:"0",color:"success",fab:"",absolute:"",top:"",left:"",small:"",tile:""},on:{click:t.handleCancel}},[e("v-icon",[t._v("mdi-close")])],1):t._e()],1)};fe._withStripped=!0;const he=r({name:"JhDrawer",props:{value:{type:Boolean,default:!1},title:{type:String,default:""},position:{type:String,default:"right",validator:function(t){return["left","right"].includes(t)}},width:{type:String,default:"90%"},showConfirmButton:{type:Boolean,default:!0},showCancelButton:{type:Boolean,default:!0},showCloseButton:{type:Boolean,default:!0},confirmText:{type:String,default:"确认"},cancelText:{type:String,default:"取消"}},data:function(){return{isShownInternal:this.value}},watch:{value:function(t){this.isShownInternal=t,t&&this.$emit("open")},isShownInternal:function(t){t||(this.$emit("input",!1),this.$emit("close"))}},methods:{handleCancel:function(){this.$emit("cancel"),this.isShownInternal=!1},handleConfirm:function(){this.$emit("confirm")},open:function(){this.isShownInternal=!0},close:function(){this.isShownInternal=!1}}},fe,[],!1,null,"f058e4e8",null).exports;var pe=function(){var t=this,e=t._self._c;return e("div",{class:["jh-steps-form-container",{"is-vertical":t.vertical}],style:t.containerStyle},[t.vertical?[e("div",{staticClass:"jh-steps-form-stepper"},[e("div",{staticClass:"vertical-steps"},t._l(t.steps,function(n,r){return e("div",{key:"step-".concat(r),class:["vertical-step-item",{active:t.currentStepIndex===r+1,completed:t.currentStepIndex>r+1,editable:t.editable&&r<t.currentStepIndex-1}],on:{click:function(e){t.editable&&r<t.currentStepIndex-1&&t.handleStepClick(r)}}},[e("div",{staticClass:"step-number"},[t.currentStepIndex>r+1?e("v-icon",{attrs:{small:"",color:"success"}},[t._v("mdi-check")]):e("span",[t._v(t._s(r+1))])],1),t._v(" "),e("div",{staticClass:"step-info"},[e("div",{staticClass:"step-title"},[t._v(t._s(n.title))]),t._v(" "),n.subTitle?e("div",{staticClass:"step-subtitle"},[t._v(t._s(n.subTitle))]):t._e()])])}),0)]),t._v(" "),e("div",{staticClass:"jh-steps-form-content"},[e("v-card",{attrs:{flat:""}},[e("div",{staticClass:"step-content"},[t._l(t.steps,function(n,r){return[t.currentStepIndex===r+1?e("div",{key:"content-".concat(r)},[n.slot?t._t(n.slot,null,{step:n,index:r,formData:t.formData}):n.fields?e("jh-form",t._b({ref:"stepForm".concat(r),refInFor:!0,attrs:{fields:n.fields,"initial-data":t.formData["step".concat(r)]||{},"show-buttons":!1,outlined:t.outlined,dense:t.dense},on:{change:function(e){return t.handleStepFormChange(r,e)}}},"jh-form",t.mergedFormProps,!1)):e("div",[t._t("default",null,{step:n,index:r,formData:t.formData})],2)],2):t._e()]})],2),t._v(" "),t.submitter&&!1===t.submitter.render?t._e():e("div",{staticClass:"step-actions d-flex justify-space-between mt-6"},[t.submitter&&t.submitter.render?[t._t("submitter",function(){return[e(t.submitter.render,{tag:"component",attrs:{step:t.steps[t.currentStepIndex-1],index:t.currentStepIndex-1,onPrevious:t.handlePrevious,onNext:t.handleNext,onFinish:t.handleFinish,submitting:t.submitting,validating:t.validating}})]},{step:t.steps[t.currentStepIndex-1],index:t.currentStepIndex-1,onPrevious:t.handlePrevious,onNext:t.handleNext,onFinish:t.handleFinish,submitting:t.submitting,validating:t.validating})]:[t.currentStepIndex>1&&(!t.submitter||!1!==t.submitter.showPrevious)?e("v-btn",t._b({attrs:{text:"",disabled:t.submitting},on:{click:t.handlePrevious}},"v-btn",t.submitter&&t.submitter.previousButtonProps,!1),[t._v("\n              "+t._s(t.submitter&&t.submitter.previousText||t.previousButtonText)+"\n            ")]):e("v-spacer"),t._v(" "),e("div",[t.currentStepIndex<t.steps.length?e("v-btn",t._b({attrs:{color:"primary",loading:t.validating,disabled:t.submitting},on:{click:t.handleNext}},"v-btn",t.submitter&&t.submitter.nextButtonProps,!1),[t._v("\n                "+t._s(t.submitter&&t.submitter.nextText||t.nextButtonText)+"\n              ")]):e("v-btn",t._b({attrs:{color:"primary",loading:t.submitting},on:{click:t.handleFinish}},"v-btn",t.submitter&&t.submitter.submitButtonProps,!1),[t._v("\n                "+t._s(t.submitter&&t.submitter.submitText||t.finishButtonText)+"\n              ")])],1)]],2)])],1)]:[e("v-stepper",t._b({staticClass:"w-full",attrs:{"alt-labels":t.altLabels},model:{value:t.currentStepIndex,callback:function(e){t.currentStepIndex=e},expression:"currentStepIndex"}},"v-stepper",t.stepsProps,!1),[e("v-stepper-header",[t._l(t.steps,function(n,r){return[e("v-stepper-step",{key:"step-".concat(r),attrs:{complete:t.currentStepIndex>r+1,step:r+1,editable:t.editable&&r<t.currentStepIndex},on:{click:function(e){t.editable&&t.handleStepClick(r)}}},[t._v("\n            "+t._s(n.title)+"\n            "),n.subTitle?e("small",[t._v(t._s(n.subTitle))]):t._e()]),t._v(" "),r<t.steps.length-1?e("v-divider",{key:"divider-".concat(r)}):t._e()]})],2),t._v(" "),e("v-stepper-items",t._l(t.steps,function(n,r){return e("v-stepper-content",{key:"content-".concat(r),attrs:{step:r+1}},[e("div",{staticClass:"step-content"},[n.slot?t._t(n.slot,null,{step:n,index:r,formData:t.formData}):n.fields?e("jh-form",t._b({ref:"stepForm".concat(r),refInFor:!0,attrs:{fields:n.fields,"initial-data":t.formData["step".concat(r)]||{},"show-buttons":!1,outlined:t.outlined,dense:t.dense},on:{change:function(e){return t.handleStepFormChange(r,e)}}},"jh-form",t.mergedFormProps,!1)):e("div",[t._t("default",null,{step:n,index:r,formData:t.formData})],2)],2),t._v(" "),t.submitter&&!1===t.submitter.render?t._e():e("div",{staticClass:"step-actions d-flex justify-space-between mt-6"},[t.submitter&&t.submitter.render?[t._t("submitter",function(){return[e(t.submitter.render,{tag:"component",attrs:{step:n,index:r,onPrevious:t.handlePrevious,onNext:t.handleNext,onFinish:t.handleFinish,submitting:t.submitting,validating:t.validating}})]},{step:n,index:r,onPrevious:t.handlePrevious,onNext:t.handleNext,onFinish:t.handleFinish,submitting:t.submitting,validating:t.validating})]:[r>0&&(!t.submitter||!1!==t.submitter.showPrevious)?e("v-btn",t._b({attrs:{text:"",disabled:t.submitting},on:{click:t.handlePrevious}},"v-btn",t.submitter&&t.submitter.previousButtonProps,!1),[t._v("\n                "+t._s(t.submitter&&t.submitter.previousText||t.previousButtonText)+"\n              ")]):e("v-spacer"),t._v(" "),e("div",[r<t.steps.length-1?e("v-btn",t._b({attrs:{color:"primary",loading:t.validating,disabled:t.submitting},on:{click:t.handleNext}},"v-btn",t.submitter&&t.submitter.nextButtonProps,!1),[t._v("\n                  "+t._s(t.submitter&&t.submitter.nextText||t.nextButtonText)+"\n                ")]):e("v-btn",t._b({attrs:{color:"primary",loading:t.submitting},on:{click:t.handleFinish}},"v-btn",t.submitter&&t.submitter.submitButtonProps,!1),[t._v("\n                  "+t._s(t.submitter&&t.submitter.submitText||t.finishButtonText)+"\n                ")])],1)]],2)])}),1)],1)]],2)};function ve(t){return ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ve(t)}function me(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function a(n,r,i,a){var s=r&&r.prototype instanceof l?r:l,c=Object.create(s.prototype);return ye(c,"_invoke",function(n,r,i){var a,l,s,c=0,u=i||[],d=!1,f={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return a=e,l=0,s=t,f.n=n,o}};function h(n,r){for(l=n,s=r,e=0;!d&&c&&!i&&e<u.length;e++){var i,a=u[e],h=f.p,p=a[2];n>3?(i=p===r)&&(s=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=t):a[0]<=h&&((i=n<2&&h<a[1])?(l=0,f.v=r,f.n=a[1]):h<p&&(i=n<3||a[0]>r||r>p)&&(a[4]=n,a[5]=r,f.n=p,l=0))}if(i||n>1)return o;throw d=!0,r}return function(i,u,p){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&h(u,p),l=u,s=p;(e=l<2?t:s)||!d;){a||(l?l<3?(l>1&&(f.n=-1),h(l,s)):f.n=s:f.v=s);try{if(c=2,a){if(l||(i="next"),e=a[i]){if(!(e=e.call(a,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,l<2&&(l=0)}else 1===l&&(e=a.return)&&e.call(a),l<2&&(s=TypeError("The iterator does not provide a '"+i+"' method"),l=1);a=t}else if((e=(d=f.n<0)?s:n.call(r,f))!==o)break}catch(e){a=t,l=1,s=e}finally{c=1}}return{value:e,done:d}}}(n,i,a),!0),c}var o={};function l(){}function s(){}function c(){}e=Object.getPrototypeOf;var u=[][r]?e(e([][r]())):(ye(e={},r,function(){return this}),e),d=c.prototype=l.prototype=Object.create(u);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,ye(t,i,"GeneratorFunction")),t.prototype=Object.create(d),t}return s.prototype=c,ye(d,"constructor",c),ye(c,"constructor",s),s.displayName="GeneratorFunction",ye(c,i,"GeneratorFunction"),ye(d),ye(d,i,"Generator"),ye(d,r,function(){return this}),ye(d,"toString",function(){return"[object Generator]"}),(me=function(){return{w:a,m:f}})()}function ye(t,e,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}ye=function(t,e,n,r){function a(e,n){ye(t,e,function(t){return this._invoke(e,n,t)})}e?i?i(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(a("next",0),a("throw",1),a("return",2))},ye(t,e,n,r)}function ge(t,e,n,r,i,a,o){try{var l=t[a](o),s=l.value}catch(t){return void n(t)}l.done?e(s):Promise.resolve(s).then(r,i)}function be(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var a=t.apply(e,n);function o(t){ge(a,r,i,o,l,"next",t)}function l(t){ge(a,r,i,o,l,"throw",t)}o(void 0)})}}function _e(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function Se(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_e(Object(n),!0).forEach(function(e){we(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_e(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function we(t,e,n){return(e=function(t){var e=function(t){if("object"!=ve(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=ve(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ve(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}pe._withStripped=!0;const Ce=r({name:"JhStepsForm",components:{JhForm:Xt},props:{steps:{type:Array,required:!0,default:function(){return[]}},initialStep:{type:Number,default:0},value:{type:Number,default:null},current:{type:Number,default:null},editable:{type:Boolean,default:!1},vertical:{type:Boolean,default:!1},altLabels:{type:Boolean,default:!1},outlined:{type:Boolean,default:!0},dense:{type:Boolean,default:!1},submitting:{type:Boolean,default:!1},previousButtonText:{type:String,default:"上一步"},nextButtonText:{type:String,default:"下一步"},finishButtonText:{type:String,default:"完成"},validateStep:{type:Function,default:null},transformBeforeFinish:{type:Function,default:null},onCurrentChange:{type:Function,default:null},onFormChange:{type:Function,default:null},stepsProps:{type:Object,default:function(){return{}}},formProps:{type:Object,default:function(){return{}}},stepFormRender:{type:Function,default:null},submitter:{type:[Object,Boolean],default:null},containerStyle:{type:[Object,String],default:null}},data:function(){return{currentStepIndex:(null!==this.current?this.current:null!==this.value?this.value:this.initialStep)+1,formData:{},validating:!1,formMapRef:{}}},computed:{mergedFormProps:function(){return Se(Se({},this.formProps),{},{outlined:this.outlined,dense:this.dense})}},watch:{value:function(t){null!==t&&t+1!==this.currentStepIndex&&(this.currentStepIndex=t+1)},current:function(t){null!==t&&t+1!==this.currentStepIndex&&(this.currentStepIndex=t+1)},currentStepIndex:function(t,e){var n=t-1;this.$emit("input",n),this.$emit("update:current",n),this.$emit("step-change",{current:n,step:this.steps[n]}),this.onCurrentChange&&void 0!==e&&this.onCurrentChange(n)}},mounted:function(){this.updateFormMapRef()},updated:function(){this.updateFormMapRef()},methods:{handleStepClick:function(t){this.editable&&t<this.currentStepIndex-1&&(this.currentStepIndex=t+1)},handleStepFormChange:function(t,e){this.$set(this.formData,"step".concat(t),e),this.$emit("change",this.formData),this.onFormChange&&this.onFormChange({stepIndex:t,values:e,allValues:this.formData})},updateFormMapRef:function(){var t=this,e={};this.steps.forEach(function(n,r){if(n.fields){var i=t.$refs["stepForm".concat(r)];i&&i[0]&&(e[r]=i[0])}}),this.formMapRef=e},handlePrevious:function(){this.currentStepIndex>1&&this.currentStepIndex--},handleNext:function(){var t=this;return be(me().m(function e(){var n;return me().w(function(e){for(;;)switch(e.n){case 0:return n=t.currentStepIndex-1,e.n=1,t.validateCurrentStep(n);case 1:e.v&&t.currentStepIndex++;case 2:return e.a(2)}},e)}))()},handleFinish:function(){var t=this;return be(me().m(function e(){var n,r;return me().w(function(e){for(;;)switch(e.n){case 0:return n=t.currentStepIndex-1,e.n=1,t.validateCurrentStep(n);case 1:if(e.v){e.n=2;break}return e.a(2);case 2:r=Se({},t.formData),t.transformBeforeFinish&&(r=t.transformBeforeFinish(r)),t.$emit("finish",r);case 3:return e.a(2)}},e)}))()},validateCurrentStep:function(t){var e=this;return be(me().m(function n(){var r,i,a;return me().w(function(n){for(;;)switch(n.p=n.n){case 0:if(e.validating=!0,n.p=1,!(r=e.steps[t]).fields){n.n=3;break}if(!(i=e.$refs["stepForm".concat(t)])||!i[0]){n.n=3;break}return n.n=2,i[0].validate();case 2:if(n.v){n.n=3;break}return n.a(2,!1);case 3:if(!e.validateStep){n.n=5;break}return n.n=4,e.validateStep({step:r,stepIndex:t,formData:e.formData});case 4:if(!1!==n.v){n.n=5;break}return n.a(2,!1);case 5:return n.a(2,!0);case 6:return n.p=6,a=n.v,console.error("步骤验证失败:",a),n.a(2,!1);case 7:return n.p=7,e.validating=!1,n.f(7);case 8:return n.a(2)}},n,null,[[1,6,7,8]])}))()},goToStep:function(t){t>=0&&t<this.steps.length&&(this.currentStepIndex=t+1)},reset:function(){var t=this;this.currentStepIndex=this.initialStep+1,this.formData={},this.steps.forEach(function(e,n){if(e.fields){var r=t.$refs["stepForm".concat(n)];r&&r[0]&&r[0].resetForm()}})},getFormData:function(){return Se({},this.formData)},setFormData:function(t){this.formData=Se({},t)},getFormMapRef:function(){return this.formMapRef},getStepFormRef:function(t){return this.formMapRef[t]||null},validateAll:function(){var t=this;return be(me().m(function e(){var n,r,i;return me().w(function(e){for(;;)switch(e.n){case 0:n=[],r=0;case 1:if(!(r<t.steps.length)){e.n=4;break}return e.n=2,t.validateCurrentStep(r);case 2:i=e.v,n.push(i);case 3:r++,e.n=1;break;case 4:return e.a(2,n.every(function(t){return t}))}},e)}))()}}},pe,[],!1,null,"7e20b247",null).exports;function xe(t){return xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xe(t)}function ke(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function je(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ke(Object(n),!0).forEach(function(e){De(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ke(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function De(t,e,n){return(e=function(t){var e=function(t){if("object"!=xe(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=xe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==xe(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Oe=function(){var t=this,e=t._self._c;return e("div",{class:t.formListClasses},[t.title||t.description||t.$slots.header?e("div",{staticClass:"jh-form-list-header"},[t._t("header",function(){return[t.title?e("h3",{staticClass:"text-h6 mb-2"},[t._v(t._s(t.title))]):t._e(),t._v(" "),t.description?e("p",{staticClass:"text-caption grey--text mb-0"},[t._v(t._s(t.description))]):t._e()]})],2):t._e(),t._v(" "),0===t.listData.length?e("div",{staticClass:"jh-form-list-empty"},[t._t("empty",function(){return[e("v-icon",{attrs:{size:"48",color:"grey lighten-1"}},[t._v("mdi-inbox")]),t._v(" "),e("p",{staticClass:"grey--text mt-2"},[t._v("暂无数据")])]})],2):"card"===t.mode?e("div",{ref:"listBody",staticClass:"jh-form-list-body jh-form-list-body--card"},t._l(t.listData,function(n,r){return e("v-card",t._b({key:n.__id__,staticClass:"jh-form-list-item jh-form-list-item--card mb-4",class:t.getItemClasses(r)},"v-card",t.cardProps,!1),[e("v-card-title",{staticClass:"jh-form-list-item-header py-2 px-4"},[e("div",{staticClass:"d-flex align-center"},[!t.sortable||t.disabled||t.readonly?t._e():e("v-icon",{staticClass:"jh-form-list-drag-handle mr-2",attrs:{small:""}},[t._v("\n            mdi-drag\n          ")]),t._v(" "),t.collapsible?e("v-btn",{staticClass:"mr-2",attrs:{icon:"","x-small":""},on:{click:function(e){return t.toggleCollapse(n)}}},[e("v-icon",{attrs:{small:""}},[t._v("\n              "+t._s(t.isCollapsed(n)?"mdi-chevron-down":"mdi-chevron-up")+"\n            ")])],1):t._e(),t._v(" "),t.showIndex&&t.alwaysShowItemLabel?e("span",{staticClass:"jh-form-list-item-index"},[t._v("\n            #"+t._s(r+1)+"\n          ")]):t._e()],1),t._v(" "),e("v-spacer"),t._v(" "),!t.showItemActions||t.disabled||t.readonly?t._e():e("div",{staticClass:"jh-form-list-item-actions"},[t._t("item-actions",function(){return[t.actionRender?[e({render:function(){return t.renderActionButtons(n,r)}},{tag:"component"})]:[t.copyable?e("v-btn",{attrs:{icon:"",small:"",title:"复制"},on:{click:function(e){return t.copyItem(r)}}},[e("v-icon",{attrs:{small:""}},[t._v("mdi-content-copy")])],1):t._e(),t._v(" "),e("v-btn",{attrs:{icon:"",small:"",color:"error",disabled:t.listData.length<=t.min,title:"删除"},on:{click:function(e){return t.removeItem(r)}}},[e("v-icon",{attrs:{small:""}},[t._v("mdi-delete")])],1)]]},{item:n,index:r,removeItem:t.removeItem,copyItem:t.copyItem})],2)],1),t._v(" "),t.isCollapsed(n)?t._e():e("v-divider"),t._v(" "),e("v-expand-transition",[e("v-card-text",{directives:[{name:"show",rawName:"v-show",value:!t.isCollapsed(n),expression:"!isCollapsed(item)"}],staticClass:"pa-4"},[t._t("item",function(){return[e("jh-form",{ref:"itemForm_".concat(r),refInFor:!0,attrs:{fields:t.fields,"initial-data":n,layout:t.itemLayout,"label-width":t.itemLabelWidth,dense:t.dense,outlined:t.outlined,disabled:t.disabled,readonly:t.readonly,"hide-details":!1},on:{"field-change":function(e){return t.handleItemFieldChange(r,e)}},scopedSlots:t._u([t._l(t.fields,function(e){return{key:"field-".concat(e.key),fn:function(i){return[t._t("field-".concat(e.key),null,null,je(je({},i),{},{index:r,item:n}))]}}})],null,!0)})]},{item:n,index:r,fields:t.fields,updateItem:function(e,n){return t.updateItemField(r,e,n)}})],2)],1),t._v(" "),t.validationErrors[r]&&!t.isCollapsed(n)?e("v-alert",{staticClass:"mx-4 mb-3",attrs:{type:"error",dense:"",text:""}},[t._v("\n        "+t._s(t.validationErrors[r])+"\n      ")]):t._e()],1)}),1):"table"===t.mode?e("div",{staticClass:"jh-form-list-body jh-form-list-body--table"},[e("v-simple-table",{attrs:{dense:t.dense}},[e("thead",[e("tr",[t.showIndex?e("th",{staticClass:"text-center",staticStyle:{width:"60px"}},[t._v("#")]):t._e(),t._v(" "),!t.sortable||t.disabled||t.readonly?t._e():e("th",{staticStyle:{width:"40px"}}),t._v(" "),t._l(t.fields,function(n){return e("th",{key:n.key},[n.required?e("span",{staticClass:"error--text mr-1"},[t._v("*")]):t._e(),t._v("\n            "+t._s(n.label)+"\n          ")])}),t._v(" "),!t.showItemActions||t.disabled||t.readonly?t._e():e("th",{staticClass:"text-center",style:{width:t.actionColumn.width+"px"}},[t._v("\n            操作\n          ")])],2)]),t._v(" "),e("tbody",{ref:"listBody"},t._l(t.listData,function(n,r){return e("tr",{key:n.__id__,class:t.getItemClasses(r)},[t.showIndex?e("td",{staticClass:"text-center"},[t._v(t._s(r+1))]):t._e(),t._v(" "),!t.sortable||t.disabled||t.readonly?t._e():e("td",{staticClass:"text-center"},[e("v-icon",{staticClass:"jh-form-list-drag-handle",attrs:{small:""}},[t._v("mdi-drag")])],1),t._v(" "),t._l(t.fields,function(i){return e("td",{key:i.key},[t._t("field-".concat(i.key),function(){return[e(t.getFieldComponent(i),t._b({tag:"component",attrs:{dense:t.dense,outlined:t.outlined,disabled:t.disabled||t.getFieldDisabled(i,n),readonly:t.readonly,placeholder:i.placeholder,"hide-details":!0},on:{input:function(e){return t.handleItemFieldChange(r,{key:i.key,value:e})}},model:{value:n[i.key],callback:function(e){t.$set(n,i.key,e)},expression:"item[field.key]"}},"component",t.getFieldProps(i),!1))]},{item:n,index:r,field:i,updateItem:function(e,n){return t.updateItemField(r,e,n)}})],2)}),t._v(" "),!t.showItemActions||t.disabled||t.readonly?t._e():e("td",{staticClass:"text-center"},[t._t("item-actions",function(){return[t.copyable?e("v-btn",{staticClass:"mr-1",attrs:{icon:"","x-small":"",title:"复制"},on:{click:function(e){return t.copyItem(r)}}},[e("v-icon",{attrs:{"x-small":""}},[t._v("mdi-content-copy")])],1):t._e(),t._v(" "),e("v-btn",{attrs:{icon:"","x-small":"",color:"error",disabled:t.listData.length<=t.min,title:"删除"},on:{click:function(e){return t.removeItem(r)}}},[e("v-icon",{attrs:{"x-small":""}},[t._v("mdi-delete")])],1)]},{item:n,index:r,removeItem:t.removeItem,copyItem:t.copyItem})],2)],2)}),0)])],1):"inline"===t.mode?e("div",{ref:"listBody",staticClass:"jh-form-list-body jh-form-list-body--inline d-flex flex-wrap align-center"},t._l(t.listData,function(n,r){return e("div",{key:n.__id__,staticClass:"jh-form-list-item jh-form-list-item--inline mr-2 mb-2",class:t.getItemClasses(r)},[t._t("item",function(){return[e("v-chip",{attrs:{close:!t.disabled&&!t.readonly&&t.listData.length>t.min,draggable:t.sortable&&!t.disabled&&!t.readonly},on:{"click:close":function(e){return t.removeItem(r)}}},[!t.sortable||t.disabled||t.readonly?t._e():e("v-icon",{staticClass:"jh-form-list-drag-handle mr-1",attrs:{"x-small":""}},[t._v("\n            mdi-drag\n          ")]),t._v("\n          "+t._s(t.getInlineItemDisplay(n))+"\n        ")],1)]},{item:n,index:r,fields:t.fields,updateItem:function(e,n){return t.updateItemField(r,e,n)}})],2)}),0):t._e(),t._v(" "),t.validationErrors._list?e("v-alert",{staticClass:"mt-3",attrs:{type:"error",dense:"",text:""}},[t._v("\n    "+t._s(t.validationErrors._list)+"\n  ")]):t._e(),t._v(" "),t.showMaxLimitAlert?e("v-alert",{staticClass:"mt-3",attrs:{type:"warning",dense:"",text:"",dismissible:""},on:{input:function(e){t.showMaxLimitAlert=!1}}},[t._v("\n    "+t._s(t.maxLimitText)+" (最大: "+t._s(t.max)+")\n  ")]):t._e(),t._v(" "),t.showMinLimitAlert?e("v-alert",{staticClass:"mt-3",attrs:{type:"warning",dense:"",text:"",dismissible:""},on:{input:function(e){t.showMinLimitAlert=!1}}},[t._v("\n    "+t._s(t.minLimitText)+" (最小: "+t._s(t.min)+")\n  ")]):t._e(),t._v(" "),t.disabled||t.readonly||!1===t.computedCreatorButtonProps?t._e():e("div",{staticClass:"jh-form-list-footer mt-4"},[t._t("footer",function(){return[e("v-btn",t._b({attrs:{disabled:!t.canAdd},on:{click:function(e){return t.addItem()}}},"v-btn",t.computedCreatorButtonProps,!1),[e("v-icon",{attrs:{left:""}},[t._v("mdi-plus")]),t._v("\n        "+t._s(t.computedCreatorButtonProps.text||t.addButtonText)+"\n      ")],1)]},{addItem:t.addItem,canAdd:t.canAdd})],2)],1)};Oe._withStripped=!0;var Ie=["__id__"],Pe=["__id__"],Fe=["__id__"];function Te(t){return Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Te(t)}function Ae(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return Be(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Be(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){l=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw a}}}}function Be(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function $e(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function a(n,r,i,a){var s=r&&r.prototype instanceof l?r:l,c=Object.create(s.prototype);return Re(c,"_invoke",function(n,r,i){var a,l,s,c=0,u=i||[],d=!1,f={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return a=e,l=0,s=t,f.n=n,o}};function h(n,r){for(l=n,s=r,e=0;!d&&c&&!i&&e<u.length;e++){var i,a=u[e],h=f.p,p=a[2];n>3?(i=p===r)&&(s=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=t):a[0]<=h&&((i=n<2&&h<a[1])?(l=0,f.v=r,f.n=a[1]):h<p&&(i=n<3||a[0]>r||r>p)&&(a[4]=n,a[5]=r,f.n=p,l=0))}if(i||n>1)return o;throw d=!0,r}return function(i,u,p){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&h(u,p),l=u,s=p;(e=l<2?t:s)||!d;){a||(l?l<3?(l>1&&(f.n=-1),h(l,s)):f.n=s:f.v=s);try{if(c=2,a){if(l||(i="next"),e=a[i]){if(!(e=e.call(a,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,l<2&&(l=0)}else 1===l&&(e=a.return)&&e.call(a),l<2&&(s=TypeError("The iterator does not provide a '"+i+"' method"),l=1);a=t}else if((e=(d=f.n<0)?s:n.call(r,f))!==o)break}catch(e){a=t,l=1,s=e}finally{c=1}}return{value:e,done:d}}}(n,i,a),!0),c}var o={};function l(){}function s(){}function c(){}e=Object.getPrototypeOf;var u=[][r]?e(e([][r]())):(Re(e={},r,function(){return this}),e),d=c.prototype=l.prototype=Object.create(u);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,Re(t,i,"GeneratorFunction")),t.prototype=Object.create(d),t}return s.prototype=c,Re(d,"constructor",c),Re(c,"constructor",s),s.displayName="GeneratorFunction",Re(c,i,"GeneratorFunction"),Re(d),Re(d,i,"Generator"),Re(d,r,function(){return this}),Re(d,"toString",function(){return"[object Generator]"}),($e=function(){return{w:a,m:f}})()}function Re(t,e,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}Re=function(t,e,n,r){function a(e,n){Re(t,e,function(t){return this._invoke(e,n,t)})}e?i?i(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(a("next",0),a("throw",1),a("return",2))},Re(t,e,n,r)}function Ne(t,e,n,r,i,a,o){try{var l=t[a](o),s=l.value}catch(t){return void n(t)}l.done?e(s):Promise.resolve(s).then(r,i)}function Me(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var a=t.apply(e,n);function o(t){Ne(a,r,i,o,l,"next",t)}function l(t){Ne(a,r,i,o,l,"throw",t)}o(void 0)})}}function Le(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(-1!==e.indexOf(r))continue;n[r]=t[r]}return n}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],-1===e.indexOf(n)&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Ee(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function Ve(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ee(Object(n),!0).forEach(function(e){ze(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ee(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function ze(t,e,n){return(e=function(t){var e=function(t){if("object"!=Te(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Te(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Te(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const Ke=r({name:"JhFormList",components:{JhForm:Xt},props:{value:{type:Array,default:function(){return[]}},fields:{type:Array,default:function(){return[]}},mode:{type:String,default:"card",validator:function(t){return["card","table","inline"].includes(t)}},title:{type:String,default:""},description:{type:String,default:""},min:{type:Number,default:0},max:{type:Number,default:1/0},sortable:{type:Boolean,default:!1},copyable:{type:Boolean,default:!0},showIndex:{type:Boolean,default:!0},showItemActions:{type:Boolean,default:!0},defaultValue:{type:[Object,Function],default:function(){return{}}},addButtonText:{type:String,default:"添加"},addButtonProps:{type:Object,default:function(){return{}}},deleteConfirm:{type:Boolean,default:!1},deleteConfirmText:{type:String,default:"确定要删除这一项吗？"},itemLayout:{type:String,default:"horizontal"},itemLabelWidth:{type:[Number,String],default:"auto"},dense:{type:Boolean,default:!0},outlined:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},rules:{type:Array,default:function(){return[]}},actionColumn:{type:Object,default:function(){return{width:100}}},cardProps:{type:Object,default:function(){return{}}},itemClass:{type:String,default:""},inlineDisplayKey:{type:String,default:""},alwaysShowItemLabel:{type:Boolean,default:!0},itemRender:{type:Function,default:null},creatorButtonProps:{type:[Object,Boolean],default:function(){return{}}},creatorRecord:{type:[Object,Function],default:null},actionGuard:{type:Object,default:function(){return{beforeAddRow:null,beforeRemoveRow:null}}},onAfterRemove:{type:Function,default:null},collapsible:{type:Boolean,default:!1},defaultCollapsed:{type:Boolean,default:!1},actionRender:{type:Function,default:null},maxLimitText:{type:String,default:"已达到最大数量限制"},minLimitText:{type:String,default:"已达到最小数量限制"}},data:function(){return{listData:[],validationErrors:{},sortableInstance:null,collapsedItems:new Set,showMaxLimitAlert:!1,showMinLimitAlert:!1}},computed:{formListClasses:function(){return ze(ze(ze({"jh-form-list":!0},"jh-form-list--".concat(this.mode),!0),"jh-form-list--disabled",this.disabled),"jh-form-list--readonly",this.readonly)},canAdd:function(){return this.listData.length<this.max},computedCreatorButtonProps:function(){return!1!==this.creatorButtonProps&&Ve({color:"primary",outlined:!0},this.creatorButtonProps)},computedCreatorRecord:function(){var t=this;return this.creatorRecord?"function"==typeof this.creatorRecord?this.creatorRecord:function(){return t.creatorRecord}:"function"==typeof this.defaultValue?this.defaultValue:function(){return t.defaultValue}}},watch:{value:{handler:function(t){this.initListData()},immediate:!0,deep:!0},sortable:function(t){var e=this;t?this.$nextTick(function(){e.initSortable()}):this.destroySortable()}},mounted:function(){this.sortable&&this.initSortable()},beforeDestroy:function(){this.destroySortable()},methods:{generateItemId:function(){return"item_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9))},initListData:function(){var t=this;this.listData=(this.value||[]).map(function(e){return Ve(Ve({},e),{},{__id__:e.__id__||t.generateItemId()})})},getCleanData:function(){return this.listData.map(function(t){return t.__id__,Le(t,Ie)})},addItem:function(){var t=arguments,e=this;return Me($e().m(function n(){var r,i,a,o,l;return $e().w(function(n){for(;;)switch(n.n){case 0:if(i=t.length>0&&void 0!==t[0]?t[0]:null,a=t.length>1&&void 0!==t[1]?t[1]:null,!(e.listData.length>=e.max)){n.n=1;break}return e.showMaxLimitAlert=!0,setTimeout(function(){e.showMaxLimitAlert=!1},3e3),e.$emit("max-limit",e.max),n.a(2);case 1:if(null===(r=e.actionGuard)||void 0===r||!r.beforeAddRow){n.n=3;break}return n.n=2,e.actionGuard.beforeAddRow(e.listData.length);case 2:if(!1!==n.v){n.n=3;break}return n.a(2);case 3:o=e.computedCreatorRecord(e.listData.length),l=Ve(Ve(Ve({},o),i),{},{__id__:e.generateItemId()}),null!==a&&a>=0&&a<=e.listData.length?e.listData.splice(a,0,l):e.listData.push(l),e.emitInput(),e.$emit("add",e.getCleanItem(l),null!=a?a:e.listData.length-1);case 4:return n.a(2)}},n)}))()},removeItem:function(t){var e=this;return Me($e().m(function n(){var r,i;return $e().w(function(n){for(;;)switch(n.n){case 0:if(!(e.listData.length<=e.min)){n.n=1;break}return e.showMinLimitAlert=!0,setTimeout(function(){e.showMinLimitAlert=!1},3e3),e.$emit("min-limit",e.min),n.a(2);case 1:if(null===(r=e.actionGuard)||void 0===r||!r.beforeRemoveRow){n.n=3;break}return n.n=2,e.actionGuard.beforeRemoveRow(t,e.listData[t]);case 2:if(!1!==n.v){n.n=3;break}return n.a(2);case 3:if(!e.deleteConfirm){n.n=5;break}return n.n=4,e.confirm(e.deleteConfirmText);case 4:if(n.v){n.n=5;break}return n.a(2);case 5:i=e.listData[t],e.listData.splice(t,1),delete e.validationErrors[t],e.collapsedItems.delete(i.__id__),e.emitInput(),e.$emit("remove",e.getCleanItem(i),t),e.onAfterRemove&&e.onAfterRemove(t,e.getCleanItem(i));case 6:return n.a(2)}},n)}))()},copyItem:function(t){if(this.canAdd){var e=this.listData[t],n=(e.__id__,Ve(Ve({},Le(e,Pe)),{},{__id__:this.generateItemId()}));this.listData.splice(t+1,0,n),this.emitInput(),this.$emit("copy",this.getCleanItem(e),this.getCleanItem(n))}else this.$emit("max-limit",this.max)},moveItem:function(t,e){var n=this.listData.splice(t,1)[0];this.listData.splice(e,0,n),this.emitInput(),this.$emit("sort",t,e)},updateItemField:function(t,e,n){this.listData[t]&&(this.$set(this.listData[t],e,n),this.emitInput(),this.$emit("item-change",t,this.getCleanItem(this.listData[t])))},handleItemFieldChange:function(t,e){var n=e.key,r=e.value;this.updateItemField(t,n,r)},getCleanItem:function(t){return t.__id__,Le(t,Fe)},emitInput:function(){this.$emit("input",this.getCleanData()),this.$emit("change",this.getCleanData())},getItemClasses:function(t){var e=[];return this.itemClass&&e.push(this.itemClass),this.validationErrors[t]&&e.push("jh-form-list-item--error"),e.join(" ")},toggleCollapse:function(t){var e=t.__id__;this.collapsedItems.has(e)?this.collapsedItems.delete(e):this.collapsedItems.add(e),this.$forceUpdate()},isCollapsed:function(t){return this.collapsedItems.has(t.__id__)},renderActionButtons:function(t,e){var n=this;return this.actionRender?this.actionRender({item:this.getCleanItem(t),index:e,removeItem:function(){return n.removeItem(e)},copyItem:function(){return n.copyItem(e)}}):null},getFieldComponent:function(t){return{text:"v-text-field",textarea:"v-textarea",number:"v-text-field",select:"v-select",autocomplete:"v-autocomplete",switch:"v-switch",checkbox:"v-checkbox"}[t.type]||"v-text-field"},getFieldProps:function(t){var e=Ve({},t.props);return"select"!==t.type&&"autocomplete"!==t.type||(e.items=t.options||[],e.itemText=t.itemText||"text",e.itemValue=t.itemValue||"value"),"number"===t.type&&(e.type="number"),e},getFieldDisabled:function(t,e){return"function"==typeof t.disabled?t.disabled(e):t.disabled||!1},getInlineItemDisplay:function(t){if(this.inlineDisplayKey)return t[this.inlineDisplayKey]||"-";var e=this.fields[0];return e&&t[e.key]||"-"},initSortable:function(){var t=this;this.sortable&&!this.sortableInstance&&this.$nextTick(function(){var e=t.$refs.listBody;e&&("undefined"!=typeof window&&window.Sortable?t.sortableInstance=window.Sortable.create(e,{animation:150,handle:".jh-form-list-drag-handle",ghostClass:"jh-form-list-ghost",dragClass:"jh-form-list-dragging",onEnd:function(e){var n=e.oldIndex,r=e.newIndex;n!==r&&t.moveItem(n,r)}}):console.warn("JhFormList: sortable 功能需要引入 SortableJS 库"))})},destroySortable:function(){this.sortableInstance&&(this.sortableInstance.destroy(),this.sortableInstance=null)},validate:function(){var t=this;return Me($e().m(function e(){var n,r,i,a,o,l,s,c;return $e().w(function(e){for(;;)switch(e.p=e.n){case 0:if(n={},r=!0,!t.rules||!t.rules.length){e.n=7;break}i=Ae(t.rules),e.p=1,i.s();case 2:if((a=i.n()).done){e.n=4;break}if(o=a.value,"string"!=typeof(l=o(t.getCleanData()))){e.n=3;break}return n._list=l,r=!1,e.a(3,4);case 3:e.n=2;break;case 4:e.n=6;break;case 5:e.p=5,c=e.v,i.e(c);case 6:return e.p=6,i.f(),e.f(6);case 7:s=0;case 8:if(!(s<t.listData.length)){e.n=11;break}return e.n=9,t.validateItem(s);case 9:e.v||(r=!1,n[s]="该项存在验证错误");case 10:s++,e.n=8;break;case 11:return t.validationErrors=n,t.$emit("validate",r,n),e.a(2,r)}},e,null,[[1,5,6,7]])}))()},validateItem:function(t){var e=this;return Me($e().m(function n(){var r;return $e().w(function(n){for(;;)switch(n.n){case 0:if(!(r=e.$refs["itemForm_".concat(t)])||!r[0]){n.n=2;break}return n.n=1,r[0].validate();case 1:return n.a(2,n.v);case 2:return n.a(2,!0)}},n)}))()},resetValidation:function(){var t=this;this.validationErrors={},this.listData.forEach(function(e,n){var r=t.$refs["itemForm_".concat(n)];r&&r[0]&&r[0].resetValidation()})},reset:function(){this.listData=[],this.validationErrors={},this.emitInput()},getItems:function(){return this.getCleanData()},setItems:function(t){var e=this;this.listData=t.map(function(t){return Ve(Ve({},t),{},{__id__:t.__id__||e.generateItemId()})}),this.emitInput()},getItemValue:function(t){return this.listData[t]?this.getCleanItem(this.listData[t]):null},setItemValue:function(t,e){this.listData[t]&&(this.$set(this.listData,t,Ve(Ve({},e),{},{__id__:this.listData[t].__id__})),this.emitInput())},confirm:function(t){return new Promise(function(e){e(window.confirm(t))})}}},Oe,[],!1,null,"ce7ba014",null).exports;var Je=function(){var t=this,e=t._self._c;return e("v-app",[e("v-container",{staticClass:"pa-0",attrs:{fluid:""}},[e("div",{staticClass:"w-full"},[e("div",{staticClass:"grid grid-cols-[repeat(auto-fill,minmax(100px,1fr))] gap-4"},[t.value&&t.isString(t.value)?e("div",{staticClass:"relative aspect-square rounded overflow-hidden"},[e("div",{staticClass:"w-full h-full flex flex-col items-center justify-center p-2 bg-gray-100"},[t.isImage(t.value)?e("img",{staticClass:"max-w-full max-h-full object-contain",attrs:{src:t.getImageUrl(t.value)}}):e("v-icon",{staticClass:"text-gray-500",attrs:{size:"40"}},[t._v("mdi-file-document-outline")])],1),t._v(" "),t.readonly?t._e():e("v-btn",{staticClass:"absolute top-1 right-1 !bg-black/50",attrs:{icon:"","x-small":""},on:{click:t.handleRemoveSingleFile}},[e("v-icon",{attrs:{small:"",color:"white"}},[t._v("mdi-close")])],1)],1):t.value&&Array.isArray(t.value)?t._l(t.value,function(n,r){return e("div",{key:r,staticClass:"relative aspect-square border border-gray-200 rounded overflow-hidden"},[t.isString(n)?e("div",{staticClass:"w-full h-full flex flex-col items-center justify-center p-2 bg-gray-100"},[t.isImage(n)?e("img",{staticClass:"max-w-full max-h-full object-contain",attrs:{src:t.getImageUrl(n)}}):e("v-icon",{staticClass:"text-gray-500",attrs:{size:"40"}},[t._v("mdi-file-document-outline")])],1):e("div",{staticClass:"w-full h-full flex flex-col items-center justify-center p-2 bg-gray-100"},[t.isImage(n)?e("img",{staticClass:"max-w-full max-h-full object-contain",attrs:{src:t.getObjectUrl(n)}}):e("v-icon",{staticClass:"text-gray-500",attrs:{size:"40"}},[t._v("mdi-file-document-outline")])],1),t._v(" "),t.readonly?t._e():e("v-btn",{staticClass:"absolute top-1 right-1 !bg-black/50",attrs:{icon:"","x-small":""},on:{click:function(e){return t.removeFile(r)}}},[e("v-icon",{attrs:{small:"",color:"white"}},[t._v("mdi-close")])],1),t._v(" "),e("div",{staticClass:"absolute top-0 left-2 text-xs bg-green-500 text-white px-1 rounded-b-sm"},[t._v("\n            "+t._s(t.getFileExtension(n))+"\n          ")])],1)}):t._e(),t._v(" "),t.isCanUpload?e("div",{staticClass:"aspect-square border-2 border-dashed border-gray-200 rounded flex items-center justify-center cursor-pointer transition-all hover:border-blue-500 hover:bg-blue-50",on:{click:t.triggerFileInput}},[e("input",{ref:"fileInput",staticClass:"hidden",attrs:{type:"file",multiple:t.multiple,accept:t.accept},on:{change:t.handleFileChange}}),t._v(" "),e("v-icon",{staticClass:"text-gray-500 transition-all group-hover:text-blue-500",attrs:{size:"40"}},[t._v("mdi-plus")])],1):t._e()],2),t._v(" "),t.errorMessage?e("div",{staticClass:"text-red-500 text-xs mt-2 pl-0.5"},[t._v("\n        "+t._s(t.errorMessage)+"\n      ")]):t._e(),t._v(" "),t.isShowUploadLimit?e("div",{staticClass:"text-gray-500 text-xs mt-2 pl-0.5"},[t._v("\n        最多可上传 "+t._s(t.maxFiles)+" 个文件 (已上传 "+t._s(t.isString(t.value)?1:(t.value||[]).length)+" 个)\n      ")]):t._e()])])],1)};function Ge(t){return Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ge(t)}function We(t){if(null!=t){var e=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}throw new TypeError(Ge(t)+" is not iterable")}function Ue(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function a(n,r,i,a){var s=r&&r.prototype instanceof l?r:l,c=Object.create(s.prototype);return qe(c,"_invoke",function(n,r,i){var a,l,s,c=0,u=i||[],d=!1,f={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return a=e,l=0,s=t,f.n=n,o}};function h(n,r){for(l=n,s=r,e=0;!d&&c&&!i&&e<u.length;e++){var i,a=u[e],h=f.p,p=a[2];n>3?(i=p===r)&&(s=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=t):a[0]<=h&&((i=n<2&&h<a[1])?(l=0,f.v=r,f.n=a[1]):h<p&&(i=n<3||a[0]>r||r>p)&&(a[4]=n,a[5]=r,f.n=p,l=0))}if(i||n>1)return o;throw d=!0,r}return function(i,u,p){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&h(u,p),l=u,s=p;(e=l<2?t:s)||!d;){a||(l?l<3?(l>1&&(f.n=-1),h(l,s)):f.n=s:f.v=s);try{if(c=2,a){if(l||(i="next"),e=a[i]){if(!(e=e.call(a,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,l<2&&(l=0)}else 1===l&&(e=a.return)&&e.call(a),l<2&&(s=TypeError("The iterator does not provide a '"+i+"' method"),l=1);a=t}else if((e=(d=f.n<0)?s:n.call(r,f))!==o)break}catch(e){a=t,l=1,s=e}finally{c=1}}return{value:e,done:d}}}(n,i,a),!0),c}var o={};function l(){}function s(){}function c(){}e=Object.getPrototypeOf;var u=[][r]?e(e([][r]())):(qe(e={},r,function(){return this}),e),d=c.prototype=l.prototype=Object.create(u);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,qe(t,i,"GeneratorFunction")),t.prototype=Object.create(d),t}return s.prototype=c,qe(d,"constructor",c),qe(c,"constructor",s),s.displayName="GeneratorFunction",qe(c,i,"GeneratorFunction"),qe(d),qe(d,i,"Generator"),qe(d,r,function(){return this}),qe(d,"toString",function(){return"[object Generator]"}),(Ue=function(){return{w:a,m:f}})()}function qe(t,e,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}qe=function(t,e,n,r){function a(e,n){qe(t,e,function(t){return this._invoke(e,n,t)})}e?i?i(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(a("next",0),a("throw",1),a("return",2))},qe(t,e,n,r)}function He(t){return function(t){if(Array.isArray(t))return Xe(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Ye(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ye(t,e){if(t){if("string"==typeof t)return Xe(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xe(t,e):void 0}}function Xe(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Qe(t,e,n,r,i,a,o){try{var l=t[a](o),s=l.value}catch(t){return void n(t)}l.done?e(s):Promise.resolve(s).then(r,i)}Je._withStripped=!0;const Ze=r({name:"JhFileInput",props:{value:{type:[Array,String],default:function(){return[]}},maxFiles:{type:Number,default:0},accept:{type:String,default:"*/*"},multiple:{type:Boolean,default:!1},rules:{type:Array,default:function(){return[]}},readonly:{type:Boolean,default:!1},uploadPrefix:{type:String,default:"/upload/"}},data:function(){return{errorMessage:""}},watch:{value:{handler:function(){this.validate()},deep:!0}},computed:{isCanUpload:function(){return!this.readonly&&(this.multiple?!this.maxFiles||(this.value||[]).length<this.maxFiles:(this.value||[]).length<1)},isShowUploadLimit:function(){return!this.readonly&&this.multiple&&this.maxFiles>0}},methods:{isString:function(t){return"string"==typeof t},triggerFileInput:function(){this.$refs.fileInput.click()},handleFileChange:function(t){var e,n=this;return(e=Ue().m(function e(){var r,i,a,o,l;return Ue().w(function(e){for(;;)switch(e.n){case 0:if(r=Array.from(t.target.files),!(n.maxFiles&&(n.value||[]).length+r.length>n.maxFiles)){e.n=1;break}return n.errorMessage="最多只能上传 ".concat(n.maxFiles," 个文件"),e.a(2);case 1:i=He(n.value||[]),a=Ue().m(function t(){var e,r;return Ue().w(function(t){for(;;)switch(t.p=t.n){case 0:if(e=l[o],t.p=1,!i.some(function(t){return t.name===e.name&&t.size===e.size})){t.n=2;break}return n.errorMessage="文件 ".concat(e.name," 已存在"),t.a(2,1);case 2:i.push(e),t.n=4;break;case 3:t.p=3,r=t.v,console.error("Upload error:",r),n.errorMessage="上传文件 ".concat(e.name," 失败");case 4:return t.a(2)}},t,null,[[1,3]])}),o=0,l=r;case 2:if(!(o<l.length)){e.n=5;break}return e.d(We(a()),3);case 3:if(!e.v){e.n=4;break}return e.a(3,4);case 4:o++,e.n=2;break;case 5:n.$emit("input",i),n.$emit("change",i),n.errorMessage||(n.errorMessage=""),t.target.value="";case 6:return e.a(2)}},e)}),function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function o(t){Qe(a,r,i,o,l,"next",t)}function l(t){Qe(a,r,i,o,l,"throw",t)}o(void 0)})})()},handleRemoveSingleFile:function(){this.$emit("input",[]),this.$emit("change",[])},removeFile:function(t){var e=He(this.value);e.splice(t,1),this.$emit("input",e),this.$emit("change",e)},isImage:function(t){return this.isString(t)?["jpg","jpeg","png","gif","bmp","webp","svg"].includes(t.split(".").pop().toLowerCase()):!!t.type&&t.type.startsWith("image/")},getImageUrl:function(t){return"".concat(this.uploadPrefix).concat(t)},getObjectUrl:function(t){return URL.createObjectURL(t)},getFileExtension:function(t){return this.isString(t)?t.split(".").pop():t.name.split(".").pop()},validate:function(){this.errorMessage="";var t,e=function(t){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=Ye(t))){e&&(t=e);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,o=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return a=t.done,t},e:function(t){o=!0,i=t},f:function(){try{a||null==e.return||e.return()}finally{if(o)throw i}}}}(this.rules);try{for(e.s();!(t=e.n()).done;){var n=(0,t.value)(this.value);if(!0!==n)return this.errorMessage=n,!1}}catch(t){e.e(t)}finally{e.f()}return!0}}},Je,[],!1,null,"a8e9f800",null).exports;var tn=function(){var t=this._self._c;return t("v-app",[t("v-container",{staticClass:"pa-0",attrs:{fluid:""}},[t("div",[t("div",{staticClass:"jsoneditor-vue",style:{height:this.height}})])])],1)};function en(t){return en="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},en(t)}function nn(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function a(n,r,i,a){var s=r&&r.prototype instanceof l?r:l,c=Object.create(s.prototype);return rn(c,"_invoke",function(n,r,i){var a,l,s,c=0,u=i||[],d=!1,f={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return a=e,l=0,s=t,f.n=n,o}};function h(n,r){for(l=n,s=r,e=0;!d&&c&&!i&&e<u.length;e++){var i,a=u[e],h=f.p,p=a[2];n>3?(i=p===r)&&(s=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=t):a[0]<=h&&((i=n<2&&h<a[1])?(l=0,f.v=r,f.n=a[1]):h<p&&(i=n<3||a[0]>r||r>p)&&(a[4]=n,a[5]=r,f.n=p,l=0))}if(i||n>1)return o;throw d=!0,r}return function(i,u,p){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&h(u,p),l=u,s=p;(e=l<2?t:s)||!d;){a||(l?l<3?(l>1&&(f.n=-1),h(l,s)):f.n=s:f.v=s);try{if(c=2,a){if(l||(i="next"),e=a[i]){if(!(e=e.call(a,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,l<2&&(l=0)}else 1===l&&(e=a.return)&&e.call(a),l<2&&(s=TypeError("The iterator does not provide a '"+i+"' method"),l=1);a=t}else if((e=(d=f.n<0)?s:n.call(r,f))!==o)break}catch(e){a=t,l=1,s=e}finally{c=1}}return{value:e,done:d}}}(n,i,a),!0),c}var o={};function l(){}function s(){}function c(){}e=Object.getPrototypeOf;var u=[][r]?e(e([][r]())):(rn(e={},r,function(){return this}),e),d=c.prototype=l.prototype=Object.create(u);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,rn(t,i,"GeneratorFunction")),t.prototype=Object.create(d),t}return s.prototype=c,rn(d,"constructor",c),rn(c,"constructor",s),s.displayName="GeneratorFunction",rn(c,i,"GeneratorFunction"),rn(d),rn(d,i,"Generator"),rn(d,r,function(){return this}),rn(d,"toString",function(){return"[object Generator]"}),(nn=function(){return{w:a,m:f}})()}function rn(t,e,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}rn=function(t,e,n,r){function a(e,n){rn(t,e,function(t){return this._invoke(e,n,t)})}e?i?i(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(a("next",0),a("throw",1),a("return",2))},rn(t,e,n,r)}function an(t,e,n,r,i,a,o){try{var l=t[a](o),s=l.value}catch(t){return void n(t)}l.done?e(s):Promise.resolve(s).then(r,i)}function on(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var a=t.apply(e,n);function o(t){an(a,r,i,o,l,"next",t)}function l(t){an(a,r,i,o,l,"throw",t)}o(void 0)})}}tn._withStripped=!0;const ln=r({name:"JhJsonEditor",props:{value:{type:[String,Number,Object,Array],default:function(){return{}}},expandedOnStart:{type:Boolean,default:!1},mode:{type:String,default:"code"},modes:{type:Array,default:function(){return["tree","code","form","text","view"]}},height:{type:String,default:"calc(100vh - 240px)"}},watch:{value:{immediate:!0,handler:function(t){var e=this;return on(nn().m(function t(){return nn().w(function(t){for(;;)switch(t.n){case 0:if(e.internalChange){t.n=2;break}return t.n=1,e.setEditor();case 1:e.error=!1,e.expandAll();case 2:return t.a(2)}},t)}))()},deep:!0}},data:function(){return{editor:null,error:!1,internalChange:!1,expandedModes:["tree","view","form"]}},computed:{valueType:function(){return en(this.value)},formatValue:{get:function(){if("string"===this.valueType&&this.value)try{return JSON.parse(this.value)}catch(t){return this.value}return this.value},set:function(t){"string"!==this.valueType&&this.value?this.value=t:this.value=JSON.stringify(t)}}},mounted:function(){this.$emit("has-error",!1),window.JSONEditor?this.init():console.warn("JSONEditor is not loaded. Please include JSONEditor library.")},beforeDestroy:function(){this.editor&&this.editor.destroy()},methods:{init:function(){var t=this,e={mode:this.mode,modes:this.modes,themeColor:"#4caf50",onChange:function(){try{var e=t.editor.get();t.formatValue=e,t.error=!1,t.$emit("has-error",!1),t.internalChange=!0,t.$emit("input",t.value),t.$nextTick(function(){t.internalChange=!1})}catch(e){t.error=!0,t.$emit("has-error",!0)}},onModeChange:function(){t.expandAll()}};window.JSONEditor&&(this.editor=new window.JSONEditor(t.$el.querySelector(".jsoneditor-vue"),e,t.formatValue))},expandAll:function(){this.expandedOnStart&&this.editor&&this.expandedModes.includes(this.editor.getMode())&&this.editor.expandAll()},setEditor:function(){var t=this;return on(nn().m(function e(){return nn().w(function(e){for(;;)switch(e.n){case 0:t.editor&&t.editor.set(t.formatValue);case 1:return e.a(2)}},e)}))()}}},tn,[],!1,null,"0d5540e8",null).exports;var sn=function(){var t=this,e=t._self._c;return e("v-app",[e("v-container",{staticClass:"pa-0",attrs:{fluid:""}},[e("div",[e("div",{style:"overflow-y: auto; height: ".concat(t.height)},[e("div",{attrs:{id:t.editorId}},[e("textarea",{staticStyle:{display:"none"}},[t._v(t._s(t.value))])])])])])],1)};sn._withStripped=!0;const cn=r({name:"JhMarkdownEditor",props:{value:{type:String,default:""},placeholder:{type:String,default:"请输入内容..."},height:{type:String,default:"calc(100vh - 400px)"},width:{type:Number,default:100},editorPath:{type:String,default:"/public/plugins/editor.md/lib/"},toolbarIcons:{type:Array,default:function(){return["undo","redo","|","watch","preview","|","h1","h2","h3","h4","h5","bold","del","italic","quote","mark","list-ul","list-ol","hr","link","|","image","code","table"]}},readonly:{type:Boolean,default:!1}},data:function(){return{editor:null,isMDChange:!1,editorId:"markdown-editor-".concat(Math.random().toString(36).substr(2,9))}},mounted:function(){var t=this;this.$nextTick(function(){t.initEditorMd()})},beforeDestroy:function(){this.editor&&(this.editor=null)},watch:{value:function(t){this.editor&&!this.isMDChange&&this.editor.setMarkdown(t),this.isMDChange=!1}},methods:{initEditorMd:function(){var t=this,e=document.getElementById(this.editorId);e?window.editormd?(e.innerHTML='<textarea style="display:none;">'.concat(this.value||"","</textarea>"),t.editor=window.editormd(this.editorId,{watch:!this.readonly,saveHTMLToTextarea:!0,path:this.editorPath,toolbarIcons:this.toolbarIcons,placeholder:this.placeholder,readOnly:this.readonly,onchange:function(){t.handleMDChange()}})):console.warn("Editor.md is not loaded. Please include Editor.md library."):console.warn("Editor container not found")},handleMDChange:function(){this.isMDChange=!0;var t=this.editor.getMarkdown();if(this.$emit("input",t),this.$emit("change",t),this.editor.getPreviewedHTML){var e=this.editor.getPreviewedHTML();this.$emit("content-for-seo",e)}},getMarkdown:function(){return this.editor?this.editor.getMarkdown():this.value},setMarkdown:function(t){this.editor&&this.editor.setMarkdown(t)},insertValue:function(t){this.editor&&this.editor.insertValue(t)}}},sn,[],!1,null,"024b241e",null).exports;var un=function(){var t=this,e=t._self._c;return e("v-app",[e("v-container",{attrs:{fluid:""}},[e("v-row",{staticClass:"draggable-container"},[t.showComponentLibrary?e("v-col",{attrs:{cols:"12",md:"3"}},[e("div",{staticClass:"title"},[t._v(t._s(t.componentLibraryTitle))]),t._v(" "),t.isDraggableLoaded?e("draggable",{attrs:{group:{name:t.groupName,pull:"clone",put:!1},animation:t.animation,"drag-class":t.dragClass,"ghost-class":t.ghostClass,"chosen-class":t.chosenClass},on:{start:t.handleStart,end:t.handleEnd},model:{value:t.componentsInternal,callback:function(e){t.componentsInternal=e},expression:"componentsInternal"}},[e("transition-group",t._l(t.componentsInternal,function(n){return e("div",{key:n.id,staticClass:"draggable-item"},[t._v("\n              "+t._s(n.name)+"\n            ")])}),0)],1):t._e()],1):t._e(),t._v(" "),e("v-col",{attrs:{cols:(t.showComponentLibrary,12),md:t.showComponentLibrary?9:12}},[t.isDraggableLoaded?e("draggable",{attrs:{group:t.groupName,animation:t.animation,"drag-class":t.dragClass,"ghost-class":t.ghostClass,"chosen-class":t.chosenClass},on:{start:t.handleStart,end:t.handleEnd},model:{value:t.designAreaInternal,callback:function(e){t.designAreaInternal=e},expression:"designAreaInternal"}},[e("transition-group",t._l(t.designAreaInternal,function(n){return e("div",{key:n.id,staticClass:"draggable-item"},[t._t("item",function(){return[t._v("\n                "+t._s(n.name)+"\n              ")]},{item:n})],2)}),0)],1):t._e(),t._v(" "),e("v-row",{directives:[{name:"show",rawName:"v-show",value:!t.designAreaInternal.length,expression:"!designAreaInternal.length"}],staticClass:"ma-0 pa-0",staticStyle:{width:"100%"}},[e("v-card",{staticClass:"ma-12",staticStyle:{border:"1px dashed #333333"},attrs:{height:"100",width:"100%",color:"#f5f8fa"}},[t.isDraggableLoaded?e("draggable",{staticClass:"d-flex align-center justify-center",staticStyle:{height:"100%"},attrs:{group:t.groupName,animation:t.animation,"drag-class":t.dragClass,"ghost-class":t.ghostClass},model:{value:t.designAreaInternal,callback:function(e){t.designAreaInternal=e},expression:"designAreaInternal"}},[e("v-card-text",{staticClass:"text-center title draggable-placeholder"},[t._v("\n                "+t._s(t.emptyPlaceholder)+"\n              ")])],1):t._e()],1)],1)],1)],1)],1)],1)};function dn(t){return function(t){if(Array.isArray(t))return fn(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return fn(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fn(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}un._withStripped=!0;const hn=r({name:"JhDraggable",props:{components:{type:Array,default:function(){return[]}},value:{type:Array,default:function(){return[]}},showComponentLibrary:{type:Boolean,default:!0},componentLibraryTitle:{type:String,default:"组件"},groupName:{type:String,default:"draggable-group"},animation:{type:Number,default:300},dragClass:{type:String,default:"jh-drag-class"},ghostClass:{type:String,default:"jh-ghost-class"},chosenClass:{type:String,default:"jh-chosen-class"},emptyPlaceholder:{type:String,default:"从左侧拖入或点选组件进行内容设计"}},data:function(){return{drag:!1,componentsInternal:[],designAreaInternal:[],isDraggableLoaded:!1}},watch:{components:{handler:function(t){this.componentsInternal=dn(t)},immediate:!0,deep:!0},value:{handler:function(t){this.designAreaInternal=dn(t)},immediate:!0,deep:!0},designAreaInternal:{handler:function(t){this.$emit("input",t),this.$emit("change",t)},deep:!0}},mounted:function(){this.checkDraggableLibrary()},methods:{checkDraggableLibrary:function(){this.$options.components.draggable||window.vuedraggable?this.isDraggableLoaded=!0:(console.warn("Vue Draggable library is not loaded. Please include vuedraggable library."),this.isDraggableLoaded=!1)},handleStart:function(){this.drag=!0,this.$emit("start")},handleEnd:function(){this.drag=!1,this.ensureUniqueIds(),this.$emit("end")},ensureUniqueIds:function(){var t=this,e=[].concat(dn(this.componentsInternal.map(function(t){return t.id})),dn(this.designAreaInternal.map(function(t){return t.id}))),n=Math.max.apply(Math,dn(e));this.designAreaInternal.forEach(function(e){t.componentsInternal.some(function(t){return t.id===e.id})&&(e.id=++n)})}}},un,[],!1,null,"a384b1a0",null).exports;var pn=function(){var t=this,e=t._self._c;return e("v-app",[e("v-container",{attrs:{fluid:""}},[e("v-card",{staticClass:"px-4"},[e("v-row",{staticClass:"ma-0 pt-0 d-flex"},[t.showCreateButton?e("v-btn",{staticClass:"elevation-0 mr-2",attrs:{color:"success",small:"",dark:""},on:{click:t.handleCreateClick}},[t._v("\n          新增附件\n        ")]):t._e(),t._v(" "),e("v-spacer"),t._v(" "),e("v-col",{staticClass:"pa-0 pt-2 pt-sm-0",attrs:{cols:"12",sm:"6",md:"3",xl:"3"}},[e("v-text-field",{staticClass:"jh-v-input",attrs:{color:"success",prefix:"表格过滤：",dense:"",filled:"","single-line":"","hide-details":""},model:{value:t.searchInput,callback:function(e){t.searchInput=e},expression:"searchInput"}})],1)],1),t._v(" "),t._l(t.groupedAttachments,function(n,r){return e("v-card",{key:r,staticClass:"my-2",attrs:{outlined:""}},[e("v-card-title",{staticClass:"pl-4",staticStyle:{"font-size":"20px","font-weight":"500"}},[t._v("\n          "+t._s(r)+"\n        ")]),t._v(" "),e("v-card-text",{staticStyle:{display:"flex","flex-flow":"wrap"}},t._l(n,function(n){return e("v-card",{key:n.id,staticClass:"mr-2 mb-2",attrs:{width:"200px",outlined:""}},[e("v-img",{staticClass:"white--text align-end",attrs:{src:t.getPreviewUrl(n),gradient:"to bottom, rgba(0,0,0,.1), rgba(0,0,0,.5)",height:"120px"}},[e("v-card-title",{staticClass:"text-subtitle-2"},[t._v(t._s(n.filename))])],1),t._v(" "),e("v-card-actions",[e("v-chip",{attrs:{small:""}},[t._v(t._s(n.fileSubtype||t.getFileType(n.filename)))]),t._v(" "),e("v-spacer"),t._v(" "),t.isImage(n.downloadPath||n.filename)?e("v-btn",{attrs:{icon:"",small:"",title:"预览"},on:{click:function(e){return t.handlePreview(n)}}},[e("v-icon",[t._v("mdi-eye")])],1):t._e(),t._v(" "),n.downloadPath?e("v-btn",{attrs:{icon:"",small:"",title:"下载"},on:{click:function(e){return t.handleDownload(n)}}},[e("v-icon",[t._v("mdi-download")])],1):t._e(),t._v(" "),t.readonly?t._e():e("v-btn",{attrs:{icon:"",small:"",title:"删除"},on:{click:function(e){return t.handleDelete(n)}}},[e("v-icon",[t._v("mdi-trash-can-outline")])],1)],1)],1)}),1)],1)}),t._v(" "),e("v-overlay",{attrs:{absolute:"",value:t.loading,color:"#fff"}},[e("v-progress-circular",{attrs:{color:"success",indeterminate:"",size:"32"}})],1),t._v(" "),t.loading||0!==t.filteredAttachments.length?t._e():e("div",{staticClass:"mt-5 text-center"},[t._v("\n        暂无附件\n      ")])],2),t._v(" "),e("v-dialog",{attrs:{"max-width":"90vw"},model:{value:t.previewDialog,callback:function(e){t.previewDialog=e},expression:"previewDialog"}},[e("v-card",[e("v-card-title",[t._v("\n          "+t._s(t.previewItem?t.previewItem.filename:"")+"\n          "),e("v-spacer"),t._v(" "),e("v-btn",{attrs:{icon:""},on:{click:function(e){t.previewDialog=!1}}},[e("v-icon",[t._v("mdi-close")])],1)],1),t._v(" "),e("v-card-text",{staticClass:"pa-0"},[t.previewItem?e("v-img",{attrs:{src:t.getPreviewUrl(t.previewItem),contain:"","max-height":"70vh"}}):t._e()],1)],1)],1)],1)],1)};pn._withStripped=!0;const vn=r({name:"JhTableAttachment",props:{attachments:{type:Array,default:function(){return[]}},showCreateButton:{type:Boolean,default:!0},readonly:{type:Boolean,default:!1},groupBy:{type:String,default:"fileType"},previewPrefix:{type:String,default:"/upload/"},loading:{type:Boolean,default:!1}},data:function(){return{searchInput:"",previewDialog:!1,previewItem:null}},computed:{filteredAttachments:function(){var t=this;return this.searchInput?this.attachments.filter(function(e){return e.filename.toLowerCase().includes(t.searchInput.toLowerCase())||e.fileType&&e.fileType.toLowerCase().includes(t.searchInput.toLowerCase())}):this.attachments},groupedAttachments:function(){var t=this,e={};return this.filteredAttachments.forEach(function(n){var r=n[t.groupBy]||"未分类";e[r]||(e[r]=[]),e[r].push(n)}),e}},methods:{getPreviewUrl:function(t){return t.downloadPath?"".concat(this.previewPrefix).concat(t.downloadPath):"/placeholder-image.jpg"},isImage:function(t){return!!t&&/\.(gif|jpg|jpeg|png|webp|svg|bmp)$/i.test(t)},getFileType:function(t){if(!t)return"";var e=t.split(".").pop();return e?e.toLowerCase():""},handleCreateClick:function(){this.$emit("create-click")},handlePreview:function(t){this.previewItem=t,this.previewDialog=!0,this.$emit("preview",t)},handleDownload:function(t){if(this.$emit("download",t),t.downloadPath){var e=document.createElement("a");e.href=this.getPreviewUrl(t),e.download=t.filename,e.click()}},handleDelete:function(t){this.$emit("delete",t)}}},pn,[],!1,null,"5113d453",null).exports;var mn=function(){var t=this,e=t._self._c;return e("div",{staticClass:"jh-editable-table"},[e("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.tableHeaders,items:t.internalData,"items-per-page":t.itemsPerPage,"hide-default-footer":t.hideFooter,dense:t.dense,"disable-sort":!t.sortable},scopedSlots:t._u([t._l(t.editableColumns,function(n){return{key:"item.".concat(n.key),fn:function(r){var i,a,o=r.item;return[e("div",{key:n.key,staticClass:"jh-editable-cell"},[t.isEditing(o)?[n.type&&"text"!==n.type?"number"===n.type?e("v-text-field",{staticClass:"my-1",attrs:{label:n.label,rules:n.rules,type:"number",dense:"","hide-details":"auto"},model:{value:o[n.key],callback:function(e){t.$set(o,n.key,t._n(e))},expression:"item[column.key]"}}):"select"===n.type?e("v-select",{staticClass:"my-1",attrs:{items:n.options,label:n.label,rules:n.rules,dense:"","hide-details":"auto"},model:{value:o[n.key],callback:function(e){t.$set(o,n.key,e)},expression:"item[column.key]"}}):"date"===n.type?e("v-menu",{attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function(r){var i=r.on,a=r.attrs;return[e("v-text-field",t._g(t._b({staticClass:"my-1",attrs:{label:n.label,"prepend-icon":"mdi-calendar",readonly:"",dense:"","hide-details":"auto"},model:{value:o[n.key],callback:function(e){t.$set(o,n.key,e)},expression:"item[column.key]"}},"v-text-field",a,!1),i))]}}],null,!0),model:{value:t.dateMenus[o._uuid+n.key],callback:function(e){t.$set(t.dateMenus,o._uuid+n.key,e)},expression:"dateMenus[item._uuid + column.key]"}},[t._v(" "),e("v-date-picker",{on:{input:function(e){t.dateMenus[o._uuid+n.key]=!1}},model:{value:o[n.key],callback:function(e){t.$set(o,n.key,e)},expression:"item[column.key]"}})],1):"switch"===n.type?e("v-switch",{staticClass:"my-1",attrs:{label:n.label,dense:"","hide-details":"auto"},model:{value:o[n.key],callback:function(e){t.$set(o,n.key,e)},expression:"item[column.key]"}}):"enum"===n.type&&n.enum?e("v-select",{staticClass:"my-1",attrs:{items:t.getEnumOptions(n.enum),label:n.label,rules:n.rules,dense:"","hide-details":"auto"},model:{value:o[n.key],callback:function(e){t.$set(o,n.key,e)},expression:"item[column.key]"}}):t._e():e("v-text-field",{staticClass:"my-1",attrs:{label:n.label,rules:n.rules,placeholder:n.placeholder,dense:"","hide-details":"auto"},model:{value:o[n.key],callback:function(e){t.$set(o,n.key,e)},expression:"item[column.key]"}})]:[t.$scopedSlots["cell.".concat(n.key)]?t._t("cell.".concat(n.key),null,{item:o,value:o[n.key]}):e("span",["enum"===n.type&&n.enum?e("v-chip",{attrs:{color:null===(i=n.enum[o[n.key]])||void 0===i?void 0:i.color,small:""}},[t._v("\n              "+t._s((null===(a=n.enum[o[n.key]])||void 0===a?void 0:a.text)||o[n.key])+"\n            ")]):"switch"===n.type?e("v-icon",{attrs:{color:o[n.key]?"success":"grey"}},[t._v("\n              "+t._s(o[n.key]?"mdi-check-circle":"mdi-circle-outline")+"\n            ")]):e("span",[t._v(t._s(o[n.key]))])],1)]],2)]}}}),{key:"item.actions",fn:function(n){var r=n.item;return[e("div",{staticClass:"jh-editable-actions"},[t.isEditing(r)?[e("v-btn",{attrs:{icon:"",small:"",color:"success",title:"保存"},on:{click:function(e){return t.handleSave(r)}}},[e("v-icon",{attrs:{small:""}},[t._v("mdi-check")])],1),t._v(" "),e("v-btn",{attrs:{icon:"",small:"",color:"error",title:"取消"},on:{click:function(e){return t.handleCancel(r)}}},[e("v-icon",{attrs:{small:""}},[t._v("mdi-close")])],1)]:[t.editable?e("v-btn",{attrs:{icon:"",small:"",color:"primary",title:"编辑"},on:{click:function(e){return t.handleEdit(r)}}},[e("v-icon",{attrs:{small:""}},[t._v("mdi-pencil")])],1):t._e(),t._v(" "),t.deletable?e("v-btn",{attrs:{icon:"",small:"",color:"error",title:"删除"},on:{click:function(e){return t.handleDelete(r)}}},[e("v-icon",{attrs:{small:""}},[t._v("mdi-delete")])],1):t._e(),t._v(" "),t._t("actions",null,{item:r})]],2)]}},t.recordCreator?{key:"footer",fn:function(){return[e("div",{staticClass:"jh-editable-footer pa-3"},[e("v-btn",{attrs:{color:"primary",small:"",disabled:t.hasEditingRow},on:{click:t.handleAddRow}},[e("v-icon",{attrs:{small:"",left:""}},[t._v("mdi-plus")]),t._v("\n          "+t._s(t.recordCreatorProps.creatorButtonText||"添加一行数据")+"\n        ")],1)],1)]},proxy:!0}:null],null,!0)})],1)};mn._withStripped=!0;var yn=["_uuid","_isNew"],gn=["_uuid","_isNew"];function bn(t){return bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bn(t)}function _n(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(-1!==e.indexOf(r))continue;n[r]=t[r]}return n}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],-1===e.indexOf(n)&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Sn(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return wn(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wn(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){l=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw a}}}}function wn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Cn(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function a(n,r,i,a){var s=r&&r.prototype instanceof l?r:l,c=Object.create(s.prototype);return xn(c,"_invoke",function(n,r,i){var a,l,s,c=0,u=i||[],d=!1,f={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return a=e,l=0,s=t,f.n=n,o}};function h(n,r){for(l=n,s=r,e=0;!d&&c&&!i&&e<u.length;e++){var i,a=u[e],h=f.p,p=a[2];n>3?(i=p===r)&&(s=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=t):a[0]<=h&&((i=n<2&&h<a[1])?(l=0,f.v=r,f.n=a[1]):h<p&&(i=n<3||a[0]>r||r>p)&&(a[4]=n,a[5]=r,f.n=p,l=0))}if(i||n>1)return o;throw d=!0,r}return function(i,u,p){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&h(u,p),l=u,s=p;(e=l<2?t:s)||!d;){a||(l?l<3?(l>1&&(f.n=-1),h(l,s)):f.n=s:f.v=s);try{if(c=2,a){if(l||(i="next"),e=a[i]){if(!(e=e.call(a,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,l<2&&(l=0)}else 1===l&&(e=a.return)&&e.call(a),l<2&&(s=TypeError("The iterator does not provide a '"+i+"' method"),l=1);a=t}else if((e=(d=f.n<0)?s:n.call(r,f))!==o)break}catch(e){a=t,l=1,s=e}finally{c=1}}return{value:e,done:d}}}(n,i,a),!0),c}var o={};function l(){}function s(){}function c(){}e=Object.getPrototypeOf;var u=[][r]?e(e([][r]())):(xn(e={},r,function(){return this}),e),d=c.prototype=l.prototype=Object.create(u);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,xn(t,i,"GeneratorFunction")),t.prototype=Object.create(d),t}return s.prototype=c,xn(d,"constructor",c),xn(c,"constructor",s),s.displayName="GeneratorFunction",xn(c,i,"GeneratorFunction"),xn(d),xn(d,i,"Generator"),xn(d,r,function(){return this}),xn(d,"toString",function(){return"[object Generator]"}),(Cn=function(){return{w:a,m:f}})()}function xn(t,e,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}xn=function(t,e,n,r){function a(e,n){xn(t,e,function(t){return this._invoke(e,n,t)})}e?i?i(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(a("next",0),a("throw",1),a("return",2))},xn(t,e,n,r)}function kn(t,e,n,r,i,a,o){try{var l=t[a](o),s=l.value}catch(t){return void n(t)}l.done?e(s):Promise.resolve(s).then(r,i)}function jn(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var a=t.apply(e,n);function o(t){kn(a,r,i,o,l,"next",t)}function l(t){kn(a,r,i,o,l,"throw",t)}o(void 0)})}}function Dn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function On(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Dn(Object(n),!0).forEach(function(e){In(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Dn(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function In(t,e,n){return(e=function(t){var e=function(t){if("object"!=bn(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=bn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==bn(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pn(t){return Pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pn(t)}function Fn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function Tn(t,e,n){return(e=function(t){var e=function(t){if("object"!=Pn(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Pn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Pn(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var An={JhMenu:i,JhScene:f,JhDateRangePicker:m,JhQueryFilter:A,JhTable:Y,JhTreeSelect:at,JhPageContainer:lt,JhLayout:ht,JhCard:_t,JhStatisticCard:Ct,JhWaterMark:Ft,JhForm:Xt,JhModalForm:re,JhDrawerForm:ce,JhModal:de,JhDrawer:he,JhStepsForm:Ce,JhFormList:Ke,JhFileInput:Ze,JhJsonEditor:ln,JhMarkdownEditor:cn,JhDraggable:hn,JhTableAttachment:vn,JhEditableTable:r({name:"JhEditableTable",props:{value:{type:Array,default:function(){return[]}},columns:{type:Array,required:!0},editable:{type:Boolean,default:!0},deletable:{type:Boolean,default:!0},recordCreator:{type:Boolean,default:!0},recordCreatorProps:{type:Object,default:function(){return{creatorButtonText:"添加一行数据",record:{}}}},itemsPerPage:{type:Number,default:-1},hideFooter:{type:Boolean,default:!0},dense:{type:Boolean,default:!1},sortable:{type:Boolean,default:!1},rowKey:{type:String,default:"id"},editableType:{type:String,default:"multiple",validator:function(t){return["single","multiple"].includes(t)}},maxRows:{type:Number,default:1/0},onValuesChange:{type:Function,default:null},beforeAddRow:{type:Function,default:null},beforeRemoveRow:{type:Function,default:null},actionRender:{type:Function,default:null},editableKeys:{type:Array,default:null},onSave:{type:Function,default:null},onDelete:{type:Function,default:null}},data:function(){return{internalData:[],editingKeys:new Set,originalData:new Map,dateMenus:{}}},computed:{editableColumns:function(){return this.columns.filter(function(t){return!1!==t.editable})},tableHeaders:function(){var t=this,e=this.columns.map(function(e){return{text:e.label||e.key,value:e.key,sortable:!1!==e.sortable&&t.sortable,width:e.width,align:e.align||"start"}});return(this.editable||this.deletable||this.$scopedSlots.actions)&&e.push({text:"操作",value:"actions",sortable:!1,width:120,align:"center"}),e},hasEditingRow:function(){return this.editingKeys.size>0}},watch:{value:{handler:function(t){this.initInternalData(t)},immediate:!0,deep:!0}},methods:{initInternalData:function(t){var e=this;this.internalData=t.map(function(t){return t._uuid||(t._uuid=e.generateUUID()),On({},t)})},generateUUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})},getRowKey:function(t){return t._uuid||t[this.rowKey]},isEditing:function(t){return this.editingKeys.has(this.getRowKey(t))},getEnumOptions:function(t){return Object.keys(t).map(function(e){return{text:t[e].text||e,value:e}})},handleEdit:function(t){var e=this;return jn(Cn().m(function n(){var r,i,a;return Cn().w(function(n){for(;;)switch(n.n){case 0:if(r=e.getRowKey(t),!("single"===e.editableType&&e.editingKeys.size>0)){n.n=1;break}if(i=Array.from(e.editingKeys)[0],!(a=e.internalData.find(function(t){return e.getRowKey(t)===i}))){n.n=1;break}return n.n=1,e.handleCancel(a);case 1:e.originalData.set(r,On({},t)),e.editingKeys.add(r),e.$emit("edit",t),e.$emit("update:editableKeys",Array.from(e.editingKeys));case 2:return n.a(2)}},n)}))()},handleSave:function(t){var e=this;return jn(Cn().m(function n(){var r;return Cn().w(function(n){for(;;)switch(n.n){case 0:if(r=e.getRowKey(t),e.validateRow(t)){n.n=1;break}return n.a(2);case 1:if(!e.onSave){n.n=3;break}return n.n=2,e.onSave(r,t,e.originalData.get(r));case 2:if(!1!==n.v){n.n=3;break}return n.a(2);case 3:e.editingKeys.delete(r),e.originalData.delete(r),e.syncToParent(),e.$emit("save",t),e.$emit("change",e.internalData),e.$emit("update:editableKeys",Array.from(e.editingKeys)),e.onValuesChange&&e.onValuesChange(t,e.internalData);case 4:return n.a(2)}},n)}))()},handleCancel:function(t){var e=this,n=this.getRowKey(t);if(t._isNew){var r=this.internalData.findIndex(function(t){return e.getRowKey(t)===n});r>-1&&this.internalData.splice(r,1)}else{var i=this.originalData.get(n);if(i){var a=this.internalData.findIndex(function(t){return e.getRowKey(t)===n});a>-1&&this.internalData.splice(a,1,On({},i))}}this.editingKeys.delete(n),this.originalData.delete(n),this.syncToParent(),this.$emit("cancel",t)},handleDelete:function(t){var e=this;return jn(Cn().m(function n(){var r,i;return Cn().w(function(n){for(;;)switch(n.n){case 0:if(r=e.getRowKey(t),i=e.internalData.findIndex(function(t){return e.getRowKey(t)===r}),!e.beforeRemoveRow){n.n=2;break}return n.n=1,e.beforeRemoveRow(t,i);case 1:if(!1!==n.v){n.n=2;break}return n.a(2);case 2:if(!e.onDelete){n.n=4;break}return n.n=3,e.onDelete(r,t);case 3:if(!1!==n.v){n.n=4;break}return n.a(2);case 4:i>-1&&(e.internalData.splice(i,1),e.syncToParent(),e.$emit("delete",t,i),e.$emit("change",e.internalData));case 5:return n.a(2)}},n)}))()},handleAddRow:function(){var t=this;return jn(Cn().m(function e(){var n;return Cn().w(function(e){for(;;)switch(e.n){case 0:if(!(t.internalData.length>=t.maxRows)){e.n=1;break}return t.$emit("max-rows",t.maxRows),e.a(2);case 1:if(!t.beforeAddRow){e.n=3;break}return e.n=2,t.beforeAddRow();case 2:if(!1!==e.v){e.n=3;break}return e.a(2);case 3:n=On({_uuid:t.generateUUID(),_isNew:!0},t.recordCreatorProps.record),t.columns.forEach(function(t){t.key&&void 0===n[t.key]&&("switch"===t.type?n[t.key]=!1:"number"===t.type?n[t.key]=0:n[t.key]="")}),t.internalData.push(n),t.$nextTick(function(){t.handleEdit(n)}),t.$emit("add",n);case 4:return e.a(2)}},e)}))()},validateRow:function(t){var e,n=Sn(this.columns);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r.rules&&!1!==r.editable){var i,a=Sn(r.rules);try{for(a.s();!(i=a.n()).done;){var o=(0,i.value)(t[r.key]);if("string"==typeof o)return this.$emit("validation-error",{item:t,column:r,message:o}),!1}}catch(t){a.e(t)}finally{a.f()}}}}catch(t){n.e(t)}finally{n.f()}return!0},syncToParent:function(){var t=this.internalData.map(function(t){return t._uuid,t._isNew,_n(t,yn)});this.$emit("input",t)},getData:function(){return this.internalData.map(function(t){return t._uuid,t._isNew,_n(t,gn)})},setData:function(t){this.initInternalData(t),this.syncToParent()},clearData:function(){this.internalData=[],this.editingKeys.clear(),this.originalData.clear(),this.syncToParent()}}},mn,[],!1,null,"52ef24ea",null).exports,JhMask:At,JhToast:$t,JhConfirmDialog:Vt},Bn=function(t){Bn.installed||(Bn.installed=!0,Object.keys(An).forEach(function(e){t.component(e,An[e])}))};"undefined"!=typeof window&&window.Vue&&Bn(window.Vue);const $n=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Fn(Object(n),!0).forEach(function(e){Tn(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Fn(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({install:Bn},An);return e.default})());