/*! For license information please see jianghu-ui.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("JianghuUI",[],e):"object"==typeof exports?exports.JianghuUI=e():t.JianghuUI=e()}("undefined"!=typeof self?self:this,()=>(()=>{"use strict";var t={d:(e,n)=>{for(var i in n)t.o(n,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:n[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};t.d(e,{default:()=>fn});var n=function(){var t=this,e=t._self._c;return e("div",[t.hideDrawers?t._e():e("v-navigation-drawer",{staticClass:"jh-page-nav-bar hidden-md-and-up",attrs:{app:"",clipped:"",temporary:t.temporary},model:{value:t.mobileMenuDrawer,callback:function(e){t.mobileMenuDrawer=e},expression:"mobileMenuDrawer"}},[e("v-toolbar-title",{staticClass:"px-3 jh-toolbar-title"},[e("span",{staticClass:"text-base font-medium"},[t._v(t._s(t.appTitle))])]),t._v(" "),e("v-divider",{staticClass:"jh-divider"}),t._v(" "),e("v-list",{staticClass:"py-0",attrs:{flat:""}},[e("v-list-item-group",{attrs:{value:t.currentMenuIndex}},[t._l(t.menuList,function(n,i){return[n.children&&n.children.length>0?[e("v-list-group",{key:i,staticClass:"px-4",attrs:{value:n.active},scopedSlots:t._u([{key:"activator",fn:function(){return[e("v-list-item",{staticClass:"pl-0",attrs:{ripple:!1}},[e("v-list-item-content",[e("v-list-item-title",[t._v(t._s(n.title))])],1)],1)]},proxy:!0},{key:"appendIcon",fn:function(){return[e("v-icon",{attrs:{size:"18"}},[t._v("mdi-chevron-down")])]},proxy:!0}],null,!0)},[t._v(" "),t._v(" "),t._l(n.children,function(n,r){return[n.children&&n.children.length>0?[e("v-list-group",{key:r,staticClass:"px-0",attrs:{value:n.active},scopedSlots:t._u([{key:"activator",fn:function(){return[e("v-list-item",{staticClass:"pl-0",attrs:{ripple:!1}},[e("v-list-item-content",[e("v-list-item-title",{staticClass:"pl-6 pl-sm-4"},[t._v(t._s(n.title))])],1)],1)]},proxy:!0},{key:"appendIcon",fn:function(){return[e("v-icon",{attrs:{size:"16"}},[t._v("mdi-chevron-down")])]},proxy:!0}],null,!0)},[t._v(" "),t._v(" "),t._l(n.children,function(n,r){return e("v-list-item",{key:r,class:{"second-active":t.currentSecondMenuId===n.id&&t.currentMenuIndex===i},on:{click:function(e){return t.handleMenuClick(n,i)}}},[e("v-list-item-content",[e("v-list-item-title",{staticClass:"pl-10 pl-sm-8"},[t._v(t._s(n.title))])],1)],1)})],2)]:e("v-list-item",{key:r,class:{"second-active":t.currentSecondMenuId===n.id&&t.currentMenuIndex===i},on:{click:function(e){return t.handleMenuClick(n,i)}}},[e("v-list-item-content",[e("v-list-item-title",{staticClass:"pl-6 pl-sm-4"},[t._v(t._s(n.title))])],1)],1)]})],2)]:e("v-list-item",{key:i,staticClass:"px-4",class:{"second-active":t.currentMenuIndex===i},on:{click:function(e){return t.handleMenuClick(n,i)}}},[e("v-list-item-content",{staticClass:"pl-0"},[e("v-list-item-title",[t._v(t._s(n.title))])],1),t._v(" "),e("v-list-item-icon",{staticClass:"my-3"},[e("v-icon",{attrs:{size:"18"}},[t._v("mdi-chevron-right")])],1)],1)]})],2)],1),t._v(" "),e("v-btn",{staticClass:"jh-menu-drawer-close-float-btn",attrs:{elevation:"0",color:"success",fab:"",absolute:"",top:"",left:"",small:"",tile:""},on:{click:function(e){t.mobileMenuDrawer=!1}}},[e("v-icon",[t._v("mdi-close")])],1)],1),t._v(" "),!t.hideDrawers&&t.showAvatar?e("v-navigation-drawer",{staticClass:"jh-page-nav-bar hidden-md-and-up",attrs:{app:"",clipped:"",temporary:t.temporary,right:""},model:{value:t.mobileUserMenuDrawer,callback:function(e){t.mobileUserMenuDrawer=e},expression:"mobileUserMenuDrawer"}},[e("div",{staticClass:"d-flex flex-column",staticStyle:{height:"calc(100vh - 20px)"}},[e("div",[e("v-toolbar-title",{staticClass:"px-4",staticStyle:{"min-height":"110px"}},[e("div",{staticClass:"d-flex flex-column pt-3",staticStyle:{gap:"12px"}},[e("div",{staticClass:"success--text text-xs text-center",staticStyle:{cursor:"pointer"},on:{click:function(e){t.mobileUserMenuDrawer=!1}}},[e("v-icon",{staticClass:"success--text",attrs:{size:"22"}},[t._v("mdi-window-close")]),t._v(" "),e("div",{staticClass:"success--text",staticStyle:{"margin-top":"-2px"}},[t._v("关闭")])],1),t._v(" "),e("div",{staticClass:"d-flex align-start mb-2",staticStyle:{gap:"4px"}},[e("v-icon",{attrs:{size:36}},[t._v("mdi-account-circle")]),t._v(" "),e("div",{staticClass:"flex-1"},[e("div",{staticClass:"text-xs"},[t._v("\n                  "+t._s(t.userInfo.username)+"\n                  "),e("span",{staticClass:"text-caption grey--text"},[t._v(t._s(t.userInfo.userId))])]),t._v(" "),e("div",{staticClass:"d-flex flex-wrap",staticStyle:{gap:"4px"}},t._l(t.userInfo.roles,function(n,i){return e("span",{key:i,staticClass:"text-caption px-1 grey--text",staticStyle:{border:"1px solid #ccc","border-radius":"4px"}},[t._v("\n                    "+t._s(n)+"\n                  ")])}),0)])],1)])]),t._v(" "),e("v-divider",{staticClass:"jh-divider"})],1),t._v(" "),e("v-list",{staticClass:"flex-1",attrs:{nav:"",dense:""}},t._l(t.avatarMenuList,function(n,i){return e("v-list-item",{key:i,on:{click:function(e){return t.handleMenuClick(n)}}},[e("v-list-item-icon",{staticClass:"mr-1 mt-1"},[e("v-icon",{attrs:{size:"16",color:"grey darken-3"}},[t._v("mdi-account-cog-outline")])],1),t._v(" "),e("v-list-item-content",[e("v-list-item-title",{attrs:{color:"grey darken-3"}},[t._v(t._s(n.title))])],1)],1)}),1),t._v(" "),e("div",{staticClass:"px-4"},[e("v-btn",{attrs:{block:"",elevation:"0",small:"",color:"error"},on:{click:t.handleLogout}},[e("v-icon",{attrs:{size:"16"}},[t._v("mdi-logout")]),t._v(" "),e("span",{staticClass:"ml-2"},[t._v("登出")])],1)],1)],1)]):t._e(),t._v(" "),e("v-app-bar",{staticClass:"jh-page-header px-8",attrs:{app:"","clipped-left":"",height:"52",flat:""}},[!t.hideDrawers&&t.isMobile?e("div",{staticClass:"hidden-md-and-up d-flex flex-column justify-center align-start",staticStyle:{width:"60px",cursor:"pointer"},on:{click:function(e){t.mobileMenuDrawer=!t.mobileMenuDrawer}}},[e("span",{staticClass:"success--text text-caption"},[e("v-icon",{staticClass:"success--text",attrs:{size:"24"}},[t._v("mdi-menu")]),t._v(" "),e("div",{staticClass:"text-xs",staticStyle:{"margin-top":"-2px"}},[t._v("目录")])],1)]):t._e(),t._v(" "),e("v-toolbar-title",{staticClass:"pl-0"},[e("span",{staticClass:"hidden-sm-and-down text-h6 font-weight-bold"},[t._t("title",function(){return[t._v(t._s(t.appTitle))]})],2),t._v(" "),e("span",{staticClass:"hidden-md-and-up font-weight-medium text-center"},[e("div",{staticClass:"text-base"},[t._v(t._s(t.appTitle))]),t._v(" "),e("div",{staticClass:"text-xs grey--text text--darken-2",staticStyle:{"margin-top":"-2px"}},[t._t("subtitle")],2)])]),t._v(" "),e("v-spacer",{staticClass:"hidden-sm-and-down"}),t._v(" "),t.hideDrawers?t._e():e("v-tabs",{staticClass:"hidden-sm-and-down",attrs:{"show-arrows":"","slider-size":"0",color:"success"}},[t._l(t.menuList,function(n,i){return[n.children&&0!==n.children.length?[e("v-menu",{key:i,attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(r){var a=r.on,o=r.attrs;return[e("v-tab",t._g(t._b({staticClass:"px-2 mx-1 jh-header-tab",class:{"jh-header-tab-active":t.currentMenuIndex===i}},"v-tab",o,!1),a),[t._v("\n                "+t._s(n.title)+"\n                "),e("v-icon",{attrs:{size:"12"}},[t._v("mdi-chevron-down")])],1)]}}],null,!0)},[t._v(" "),e("v-list",{attrs:{nav:"",dense:""}},[t._l(n.children,function(n,r){return[n.children&&n.children.length>0?[e("v-menu",{key:r,attrs:{"offset-x":"",right:""},scopedSlots:t._u([{key:"activator",fn:function(i){var r=i.on,a=i.attrs;return[e("v-list-item",t._g(t._b({},"v-list-item",a,!1),r),[e("v-list-item-content",[e("v-list-item-title",{staticStyle:{color:"#41434f"}},[t._v(t._s(n.title))])],1),t._v(" "),e("v-list-item-action",[e("v-icon",[t._v("mdi-chevron-right")])],1)],1)]}}],null,!0)},[t._v(" "),e("v-list",{attrs:{nav:"",dense:""}},t._l(n.children,function(n,r){return e("v-list-item",{key:r,class:{"second-active":t.currentSecondMenuId===n.id&&t.currentMenuIndex===i},on:{click:function(e){return t.handleMenuClick(n,i)}}},[e("v-list-item-content",[e("v-list-item-title",{staticStyle:{color:"#41434f"}},[t._v(t._s(n.title))])],1)],1)}),1)],1)]:e("v-list-item",{key:r,class:{"second-active":t.currentSecondMenuId===n.id&&t.currentMenuIndex===i},on:{click:function(e){return t.handleMenuClick(n,i)}}},[e("v-list-item-content",[e("v-list-item-title",{staticStyle:{color:"#41434f"}},[t._v(t._s(n.title))])],1)],1)]})],2)],1)]:[e("v-tab",{key:i,staticClass:"px-2 mx-1 jh-header-tab",class:{"jh-header-tab-active":t.currentMenuIndex===i},on:{click:function(e){return t.handleMenuClick(n,i)}}},[t._v("\n            "+t._s(n.title)+"\n          ")])]]})],2),t._v(" "),e("div",{staticClass:"d-flex align-center",staticStyle:{"white-space":"nowrap"}},[t.rightMenuList.length>0?e("div",{staticClass:"d-flex align-center mr-2"},t._l(t.rightMenuList,function(n,i){return e("div",{key:i,staticClass:"d-flex align-center ml-4 jh-right-menu",staticStyle:{cursor:"pointer"},on:{click:function(e){return t.handleMenuClick(n)}}},[n.icon?e("v-icon",{attrs:{size:"20"}},[t._v(t._s(n.icon))]):t._e(),t._v(" "),e("div",{class:{"ml-1":n.icon}},[t._v(t._s(n.title))])],1)}),0):t._e(),t._v(" "),t.rightMenuList.length>0?e("v-divider",{staticClass:"mx-3 jh-divider",attrs:{vertical:""}}):t._e(),t._v(" "),t.showAvatar?[t.isMobile?e("div",{staticClass:"jh-avatar-menu-btn d-flex flex-column justify-center align-end hidden-sm-and-up",on:{click:function(e){t.mobileUserMenuDrawer=!t.mobileUserMenuDrawer}}},[e("div",{staticClass:"text-center"},[e("v-icon",{attrs:{size:24,color:"success"}},[t._v("mdi-account-circle")]),t._v(" "),e("div",{staticStyle:{"margin-top":"-2px"}},[e("p",{staticClass:"text-xs success--text mb-0",staticStyle:{"max-width":"60px",overflow:"hidden","text-overflow":"ellipsis"}},[t._v("\n                "+t._s(t.userInfo.username)+"\n              ")])])],1)]):t._e(),t._v(" "),e("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(n){var i=n.on,r=n.attrs;return[t.isMobile?t._e():e("div",t._g(t._b({staticClass:"jh-avatar-menu-btn d-flex align-center px-1 hidden-xs-only"},"div",r,!1),i),[e("v-icon",{attrs:{size:32,color:"grey lighten-2"}},[t._v("mdi-account-circle")]),t._v(" "),e("div",{staticClass:"ml-1"},[e("p",{staticClass:"caption black--text mb-0"},[t._v(t._s(t.userInfo.username))])])],1)]}}],null,!1,2365689925)},[t._v(" "),e("v-list",{attrs:{nav:"",dense:""}},[e("v-list-item",[e("v-list-item-content",[e("p",{staticClass:"caption black--text mb-0"},[t._v(t._s(t.userInfo.username))]),t._v(" "),e("p",{staticClass:"caption grey--text mb-0",staticStyle:{"font-size":"10px"}},[t._v(t._s(t.userInfo.userId))])])],1),t._v(" "),t.userInfo.roles&&t.userInfo.roles.length>0?e("div",{staticStyle:{"max-width":"220px",padding:"0 16px"}},t._l(t.userInfo.roles,function(n,i){return e("v-chip",{key:i,staticClass:"mr-1 mb-1",staticStyle:{"font-size":"10px"},attrs:{label:"","x-small":"",outlined:""}},[t._v("\n                "+t._s(n)+"\n              ")])}),1):t._e(),t._v(" "),t.userInfo.roles&&t.userInfo.roles.length>0?e("v-divider",{staticClass:"my-1 jh-divider"}):t._e(),t._v(" "),t._l(t.avatarMenuList,function(n,i){return e("v-list-item",{key:i,on:{click:function(e){return t.handleMenuClick(n)}}},[e("v-list-item-icon",{staticClass:"mr-1 mt-1"},[e("v-icon",{attrs:{size:"16",color:"grey darken-3"}},[t._v("mdi-account-cog-outline")])],1),t._v(" "),e("v-list-item-content",[e("v-list-item-title",{attrs:{color:"grey darken-3"}},[t._v(t._s(n.title))])],1)],1)}),t._v(" "),e("v-list-item",{on:{click:t.handleLogout}},[e("v-list-item-icon",{staticClass:"mr-1 mt-1"},[e("v-icon",{attrs:{size:"16",color:"grey darken-3"}},[t._v("mdi-logout")])],1),t._v(" "),e("v-list-item-content",[e("v-list-item-title",{attrs:{color:"grey darken-3"}},[t._v("登出")])],1)],1)],2)],1)]:t._e()],2)],1)],1)};function i(t,e,n,i,r,a,o,l){var s,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0),i&&(c.functional=!0),a&&(c._scopeId="data-v-"+a),o?(s=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},c._ssrRegister=s):r&&(s=l?function(){r.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:r),s)if(c.functional){c._injectStyles=s;var u=c.render;c.render=function(t,e){return s.call(e),u(t,e)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,s):[s]}return{exports:t,options:c}}n._withStripped=!0;const r=i({name:"JhMenu",props:{appTitle:{type:String,default:"JianghuJS"},menuList:{type:Array,default:function(){return[]}},rightMenuList:{type:Array,default:function(){return[]}},avatarMenuList:{type:Array,default:function(){return[]}},userInfo:{type:Object,default:function(){return{username:"Guest",userId:"",roles:[]}}},showAvatar:{type:Boolean,default:!0},activeMenuIndex:{type:Number,default:-1},activeSecondMenuId:{type:String,default:null},temporary:{type:Boolean,default:!0},hideDrawers:{type:Boolean,default:!1}},data:function(){return{mobileMenuDrawer:!1,mobileUserMenuDrawer:!1,currentMenuIndex:this.activeMenuIndex,currentSecondMenuId:this.activeSecondMenuId,isMobile:window.innerWidth<600}},watch:{activeMenuIndex:function(t){this.currentMenuIndex=t},activeSecondMenuId:function(t){this.currentSecondMenuId=t}},methods:{handleMenuClick:function(t,e){void 0!==e&&(this.currentMenuIndex=e),t.id&&(this.currentSecondMenuId=t.id),this.mobileMenuDrawer=!1,this.mobileUserMenuDrawer=!1,this.$emit("menu-click",t,e)},handleLogout:function(){this.mobileUserMenuDrawer=!1,this.$emit("logout")}}},n,[],!1,null,"73ddcbb9",null).exports;var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"jh-scene"},[e("v-row",{staticClass:"ma-0"},[e("v-btn-toggle",{class:{"mr-md-2":t.showActionBtn},attrs:{value:t.currentSceneIndex,mandatory:"",dense:"",color:"success"},on:{change:t.handleSceneChange}},t._l(t.sceneList,function(n,i){return e("v-btn",{key:i,attrs:{small:""}},[t._v(t._s(n.name))])}),1),t._v(" "),t.showActionBtn?e("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(n){var i=n.on,r=n.attrs;return[e("v-btn-toggle",{attrs:{dense:"",color:"white"}},[e("v-btn",t._g(t._b({attrs:{small:""}},"v-btn",r,!1),i),[e("v-icon",{staticClass:"mx-0",attrs:{small:""}},[t._v("mdi-chevron-down")])],1)],1)]}}],null,!1,1121844081),model:{value:t.isSceneOperationShown,callback:function(e){t.isSceneOperationShown=e},expression:"isSceneOperationShown"}},[t._v(" "),e("v-list",{staticClass:"pb-0",attrs:{dense:""}},[e("v-list-item",{on:{click:t.openCreateSceneDialog}},[e("v-list-item-title",{staticClass:"success--text"},[e("v-icon",{staticClass:"success--text",attrs:{small:""}},[t._v("mdi-plus")]),t._v(" "),e("span",{staticClass:"success--text"},[t._v("新建场景")])],1)],1),t._v(" "),e("v-list-item",{on:{click:t.openSceneListDialog}},[e("v-list-item-title",{staticClass:"success--text"},[e("v-icon",{staticClass:"success--text",attrs:{small:""}},[t._v("mdi-cog-outline")]),t._v(" "),e("span",{staticClass:"success--text"},[t._v("场景管理")])],1)],1)],1)],1):t._e()],1),t._v(" "),e("v-dialog",{attrs:{persistent:"",width:"360px"},model:{value:t.isCreateSceneDialogShown,callback:function(e){t.isCreateSceneDialogShown=e},expression:"isCreateSceneDialogShown"}},[e("v-card",[e("v-card-title",[e("v-row",{staticClass:"ma-0"},[e("div",{staticStyle:{"font-size":"16px"}},[t._v("新建场景")]),t._v(" "),e("v-spacer"),t._v(" "),e("v-btn",{staticClass:"elevation-0",attrs:{fab:"","x-small":""},on:{click:t.closeCreateSceneDialog}},[e("v-icon",{attrs:{dark:""}},[t._v("mdi-close")])],1)],1)],1),t._v(" "),e("v-card-text",[e("div",{staticClass:"mb-2"},[e("span",{staticClass:"jh-input-label"},[t._v("场景名称")]),t._v(" "),e("v-text-field",{staticClass:"jh-v-input",attrs:{dense:"","single-line":"",filled:"","hide-details":"",placeholder:"场景名称，最多10个字符",rules:t.validationRules.requireRules},model:{value:t.createItem.name,callback:function(e){t.$set(t.createItem,"name",e)},expression:"createItem.name"}})],1),t._v(" "),t.hasFormSlot?e("div",{staticClass:"mb-2"},[e("span",{staticClass:"jh-input-label"},[t._v("筛选条件")]),t._v(" "),t._t("form",null,{form:t.createItem.form})],2):t._e()]),t._v(" "),e("v-card-actions",{staticClass:"pb-4"},[e("v-row",{staticClass:"ma-0 pa-6 pt-2 justify-end"},[e("v-btn",{staticClass:"ml-2",attrs:{small:"",color:"success"},on:{click:t.doCreateScene}},[t._v("保存")]),t._v(" "),e("v-btn",{staticClass:"ml-2",attrs:{small:""},on:{click:t.closeCreateSceneDialog}},[t._v("取消")])],1)],1)],1)],1),t._v(" "),e("v-dialog",{attrs:{persistent:"",width:"360px"},model:{value:t.isSceneListShown,callback:function(e){t.isSceneListShown=e},expression:"isSceneListShown"}},[e("v-card",{staticClass:"scene-manage"},[e("v-card-title",[e("v-row",{staticClass:"ma-0"},[e("div",{staticStyle:{"font-size":"16px"}},[t._v("场景管理")]),t._v(" "),e("v-spacer"),t._v(" "),e("v-btn",{staticClass:"elevation-0",attrs:{fab:"","x-small":""},on:{click:t.closeSceneListDialog}},[e("v-icon",{attrs:{dark:""}},[t._v("mdi-close")])],1)],1)],1),t._v(" "),e("v-card-text",{staticClass:"pb-2"},[e("v-card",{attrs:{outlined:""}},[e("v-list",{staticClass:"scene-list",attrs:{dense:""}},[t.sceneCustomList&&t.sceneCustomList.length?t._l(t.sceneCustomList,function(n){return e("v-list-item",{key:n.id,staticClass:"scene-item px-2"},[e("v-list-item-content",[t._v(t._s(n.name))]),t._v(" "),e("v-list-item-icon",{on:{click:function(e){return e.stopPropagation(),t.doDeleteScene(n)}}},[e("v-icon",{attrs:{size:"22"}},[t._v("mdi-delete")])],1)],1)}):[e("div",{staticClass:"text-center grey--text",staticStyle:{"line-height":"100px"}},[t._v("暂无自定义场景")])]],2)],1)],1),t._v(" "),e("v-card-actions",{staticClass:"pb-4"},[e("v-row",{staticClass:"ma-0 pa-6 pt-2 justify-end"},[e("v-btn",{staticClass:"ml-2",attrs:{small:"",color:"success"},on:{click:t.changeToCreateDialog}},[t._v("新建场景")]),t._v(" "),e("v-btn",{staticClass:"ml-2",attrs:{small:""},on:{click:t.closeSceneListDialog}},[t._v("取消")])],1)],1)],1)],1)],1)};function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach(function(e){c(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function c(t,e,n){return(e=function(t){var e=function(t){if("object"!=o(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==o(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u(t){return function(t){if(Array.isArray(t))return d(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return d(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}a._withStripped=!0;const f=i({name:"JhScene",props:{initFormData:{type:Object,default:function(){return{}}},storageKey:{type:String,default:"jh-scene-list"},scenes:{type:Array,default:function(){return[]}},currentSceneId:{type:String,default:null},showActionBtn:{type:Boolean,default:!0},useLocalStorage:{type:Boolean,default:!1}},data:function(){return{validationRules:{requireRules:[function(t){return!!t||"此项必填"}]},sceneList:[],sceneCustomList:[],deleteItem:{},createItem:{name:"",form:{}},isCreateSceneDialogShown:!1,isSceneOperationShown:!1,isSceneListShown:!1,currentSceneIndex:0}},computed:{hasFormSlot:function(){return!!this.$scopedSlots.form}},watch:{scenes:{handler:function(t){t&&t.length>0&&(this.sceneList=u(t),this.updateCustomSceneList())},immediate:!0}},created:function(){this.initSceneList()},methods:{initSceneList:function(){this.useLocalStorage?this.getSceneListFromStorage():this.scenes&&this.scenes.length>0&&(this.sceneList=u(this.scenes)),this.updateCustomSceneList(),this.useDefaultScene()},getSceneListFromStorage:function(){var t=localStorage.getItem(this.storageKey);null==t&&(t="[]"),t=JSON.parse(t),this.sceneList=t},saveSceneListToStorage:function(){this.useLocalStorage&&localStorage.setItem(this.storageKey,JSON.stringify(this.sceneList))},updateCustomSceneList:function(){this.sceneCustomList=this.sceneList.filter(function(t){return!t.system})},useDefaultScene:function(){var t=this.sceneList.find(function(t){return!0===t.default});!t&&this.sceneList.length>0&&(t=this.sceneList[0]),t&&(this.currentSceneIndex=this.sceneList.findIndex(function(e){return e.id===t.id}),this.useScene(t))},useScene:function(t){this.$emit("scene-change",t)},handleSceneChange:function(t){this.currentSceneIndex=t,this.sceneList[t]&&this.useScene(this.sceneList[t])},getUUID:function(t){for(var e=[],n="0123456789abcdef",i=0;i<10;i++)e[i]=n.substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]=n.substr(3&e[19]|8,1),t+"-"+e.join("")},prepareCreateSceneData:function(){this.createItem={name:"",form:s({},this.initFormData),id:this.getUUID("scene")}},openCreateSceneDialog:function(){this.prepareCreateSceneData(),this.isCreateSceneDialogShown=!0,this.isSceneOperationShown=!1},closeCreateSceneDialog:function(){this.isCreateSceneDialogShown=!1},validateSceneName:function(){var t=this.createItem.name;if(!t)throw new Error("场景名称不能为空");if(this.sceneList.some(function(e){return e.name===t}))throw new Error("场景名称重复")},doCreateScene:function(){try{this.validateSceneName();var t=s({},this.createItem);this.sceneList.push(t),this.saveSceneListToStorage(),this.updateCustomSceneList(),this.closeCreateSceneDialog(),this.currentSceneIndex=this.sceneList.length-1,this.useScene(t),this.$emit("scene-created",t)}catch(t){this.$emit("error",t.message)}},openSceneListDialog:function(){this.isSceneListShown=!0,this.isSceneOperationShown=!1},closeSceneListDialog:function(){this.isSceneListShown=!1},changeToCreateDialog:function(){this.closeSceneListDialog(),this.openCreateSceneDialog()},doDeleteScene:function(t){var e;this.deleteItem=s({},t),(null===(e=this.sceneList[this.currentSceneIndex])||void 0===e?void 0:e.id)===t.id&&this.useDefaultScene(),this.sceneList=this.sceneList.filter(function(e){return e.id!==t.id}),this.saveSceneListToStorage(),this.updateCustomSceneList(),this.$emit("scene-deleted",t)}}},a,[],!1,null,"50ab6d9d",null).exports;var h=function(){var t=this,e=t._self._c;return e("div",{staticClass:"date-range-picker-container"},[e("v-menu",{attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto","max-width":"600"},scopedSlots:t._u([{key:"activator",fn:function(n){var i=n.on,r=n.attrs;return[e("v-text-field",t._g(t._b({attrs:{prefix:t.prefix,"prepend-inner-icon":"mdi-calendar",readonly:"",filled:t.filled,dense:t.dense,outlined:t.outlined,"hide-details":t.hideDetails,clearable:t.clearable},on:{"click:clear":t.clearDateRange},model:{value:t.dateRangeText,callback:function(e){t.dateRangeText=e},expression:"dateRangeText"}},"v-text-field",r,!1),i))]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[t._v(" "),e("v-card",[e("v-card-text",{staticClass:"pa-0"},[e("div",{staticClass:"d-flex"},[e("v-list",{staticClass:"quick-select-list",attrs:{dense:"",nav:""}},[e("v-list-item",{class:{"v-item--active v-list-item--active primary--text":t.isLast7Days},on:{click:function(e){return t.quickSelect(7)}}},[e("v-list-item-title",[t._v("最近7天")])],1),t._v(" "),e("v-list-item",{class:{"v-item--active v-list-item--active primary--text":t.isLast30Days},on:{click:function(e){return t.quickSelect(30)}}},[e("v-list-item-title",[t._v("最近30天")])],1),t._v(" "),e("v-list-item",{class:{"v-item--active v-list-item--active primary--text":t.isLast90Days},on:{click:function(e){return t.quickSelect(90)}}},[e("v-list-item-title",[t._v("最近90天")])],1),t._v(" "),e("v-list-item",{class:{"v-item--active v-list-item--active primary--text":t.isThisMonth},on:{click:t.selectThisMonth}},[e("v-list-item-title",[t._v("本月")])],1),t._v(" "),e("v-list-item",{class:{"v-item--active v-list-item--active primary--text":t.isLastMonth},on:{click:t.selectLastMonth}},[e("v-list-item-title",[t._v("上月")])],1),t._v(" "),e("v-list-item",{class:{"v-item--active v-list-item--active primary--text":t.isLast365Days},on:{click:function(e){return t.quickSelect(365)}}},[e("v-list-item-title",[t._v("最近一年")])],1)],1),t._v(" "),e("v-date-picker",{attrs:{"no-title":"",range:"",color:"primary"},model:{value:t.tempDateRange,callback:function(e){t.tempDateRange=e},expression:"tempDateRange"}})],1)]),t._v(" "),e("v-divider"),t._v(" "),e("v-card-actions",[e("v-spacer"),t._v(" "),e("v-btn",{attrs:{text:"",color:"grey"},on:{click:t.cancelDateRange}},[t._v("取消")]),t._v(" "),e("v-btn",{attrs:{text:"",color:"primary"},on:{click:t.confirmDateRange}},[t._v("确认")])],1)],1)],1)],1)};function p(t){return function(t){if(Array.isArray(t))return v(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return v(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}h._withStripped=!0;const m=i({name:"JhDateRangePicker",props:{value:{type:Array,default:function(){return[]}},prefix:{type:String,default:""},filled:{type:Boolean,default:!0},dense:{type:Boolean,default:!0},outlined:{type:Boolean,default:!1},hideDetails:{type:Boolean,default:!0},clearable:{type:Boolean,default:!0}},data:function(){return{menu:!1,dateRange:[],tempDateRange:[]}},computed:{dateRangeText:function(){return this.dateRange&&2===this.dateRange.length?"".concat(this.formatDate(this.dateRange[0])," ~ ").concat(this.formatDate(this.dateRange[1])):""},isLast7Days:function(){if(!this.tempDateRange||2!==this.tempDateRange.length)return!1;var t=this.getToday(),e=this.subtractDays(7);return this.tempDateRange[0]===e&&this.tempDateRange[1]===t},isLast30Days:function(){if(!this.tempDateRange||2!==this.tempDateRange.length)return!1;var t=this.getToday(),e=this.subtractDays(30);return this.tempDateRange[0]===e&&this.tempDateRange[1]===t},isLast90Days:function(){if(!this.tempDateRange||2!==this.tempDateRange.length)return!1;var t=this.getToday(),e=this.subtractDays(90);return this.tempDateRange[0]===e&&this.tempDateRange[1]===t},isThisMonth:function(){if(!this.tempDateRange||2!==this.tempDateRange.length)return!1;var t=this.getToday(),e=this.getStartOfMonth();return this.tempDateRange[0]===e&&this.tempDateRange[1]===t},isLastMonth:function(){if(!this.tempDateRange||2!==this.tempDateRange.length)return!1;var t=this.getStartOfLastMonth(),e=this.getEndOfLastMonth();return this.tempDateRange[0]===t&&this.tempDateRange[1]===e},isLast365Days:function(){if(!this.tempDateRange||2!==this.tempDateRange.length)return!1;var t=this.getToday(),e=this.subtractDays(365);return this.tempDateRange[0]===e&&this.tempDateRange[1]===t}},watch:{value:{handler:function(t){t&&Array.isArray(t)&&2===t.length&&(this.dateRange=p(t),this.tempDateRange=p(t))},immediate:!0},menu:function(t){t&&(this.tempDateRange=2===this.dateRange.length?p(this.dateRange):[])}},mounted:function(){this.value&&Array.isArray(this.value)&&2===this.value.length&&(this.dateRange=p(this.value),this.tempDateRange=p(this.value))},methods:{formatDate:function(t){return t||""},getToday:function(){var t=new Date;return this.toDateString(t)},subtractDays:function(t){var e=new Date;return e.setDate(e.getDate()-t),this.toDateString(e)},getStartOfMonth:function(){var t=new Date;return this.toDateString(new Date(t.getFullYear(),t.getMonth(),1))},getStartOfLastMonth:function(){var t=new Date;return this.toDateString(new Date(t.getFullYear(),t.getMonth()-1,1))},getEndOfLastMonth:function(){var t=new Date;return this.toDateString(new Date(t.getFullYear(),t.getMonth(),0))},toDateString:function(t){var e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0");return"".concat(e,"-").concat(n,"-").concat(i)},confirmDateRange:function(){if(this.tempDateRange&&2===this.tempDateRange.length){var t=p(this.tempDateRange).sort();this.dateRange=t,this.$emit("input",this.dateRange),this.$emit("change",this.dateRange)}this.menu=!1},cancelDateRange:function(){this.tempDateRange=2===this.dateRange.length?p(this.dateRange):[],this.menu=!1},clearDateRange:function(){this.dateRange=[],this.tempDateRange=[],this.$emit("input",[]),this.$emit("change",[])},quickSelect:function(t){var e=this.getToday(),n=this.subtractDays(t);this.tempDateRange=[n,e]},selectThisMonth:function(){var t=this.getToday(),e=this.getStartOfMonth();this.tempDateRange=[e,t]},selectLastMonth:function(){var t=this.getStartOfLastMonth(),e=this.getEndOfLastMonth();this.tempDateRange=[t,e]}}},h,[],!1,null,"f2799a5a",null).exports;var y=function(){var t=this,e=t._self._c;return e("div",{staticClass:"jh-query-filter"},[e("v-form",{ref:"queryForm",on:{submit:function(e){return e.preventDefault(),t.handleSearch.apply(null,arguments)}}},[e("v-row",{class:t.rowClass},[e("JhFormFields",{attrs:{fields:t.visibleFieldsWithConfig,showLabels:t.showLabels,labelClass:t.labelClass,inputClass:t.inputClass,defaultDense:t.dense,defaultFilled:t.filled,defaultOutlined:t.outlined,defaultSingleLine:t.singleLine,hideDetails:!0,layout:"vertical"},on:{"field-change":t.handleFieldChange},scopedSlots:t._u([t._l(t.fields,function(e){return{key:"field-".concat(e.key),fn:function(n){return[t._t("field-".concat(e.key),null,null,n)]}}})],null,!0),model:{value:t.formData,callback:function(e){t.formData=e},expression:"formData"}}),t._v(" "),e("v-col",{staticClass:"d-flex align-end flex-column justify-center"},[t.showLabels?e("span",{staticClass:"opacity-0",class:t.labelClass},[t._v("\n          工具栏\n        ")]):t._e(),t._v(" "),t._t("buttons",function(){return[e("div",{staticClass:"jh-query-filter-buttons",class:t.buttonClass},[e("v-btn",{staticClass:"jh-query-filter-search-btn",attrs:{color:"primary",small:"small"===t.buttonSize,dense:"small"===t.buttonSize,depressed:"",loading:t.searching},on:{click:t.handleSearch}},[e("v-icon",{attrs:{left:"",small:""}},[t._v("mdi-magnify")]),t._v("\n              "+t._s(t.searchText)+"\n            ")],1),t._v(" "),e("v-btn",{staticClass:"jh-query-filter-reset-btn",attrs:{outlined:"",small:"small"===t.buttonSize,dense:"small"===t.buttonSize},on:{click:t.handleReset}},[e("v-icon",{attrs:{left:"",small:""}},[t._v("mdi-refresh")]),t._v("\n              "+t._s(t.resetText)+"\n            ")],1),t._v(" "),t.collapsible&&t.fields.length>t.defaultVisibleCount?e("v-btn",{staticClass:"jh-query-filter-collapse-btn",attrs:{text:"",small:"small"===t.buttonSize,dense:"small"===t.buttonSize,color:"primary"},on:{click:t.toggleCollapse}},[t._v("\n              "+t._s(t.collapsed?t.expandText:t.collapseText)+"\n              "),e("v-icon",{attrs:{right:"",small:""}},[t._v(t._s(t.collapsed?"mdi-chevron-down":"mdi-chevron-up"))])],1):t._e()],1)]},{formData:t.formData,search:t.handleSearch,reset:t.handleReset})],2)],1)],1)],1)};y._withStripped=!0;var b=function(){var t=this,e=t._self._c;return e("div",{class:t.formFieldsClasses},[t.title||t.$slots.title?e("div",{staticClass:"jh-form-fields-header"},[t._t("title",function(){return[e("div",{staticClass:"jh-form-fields-title"},[t._v("\n        "+t._s(t.title)+"\n        "),t.tooltip?e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(n){var i=n.on,r=n.attrs;return[e("v-icon",t._g(t._b({staticClass:"ml-1",attrs:{small:""}},"v-icon",r,!1),i),[t._v("mdi-help-circle-outline")])]}}],null,!1,1799656693)},[t._v(" "),e("span",[t._v(t._s(t.tooltip))])]):t._e()],1)]}),t._v(" "),t.description?e("div",{staticClass:"jh-form-fields-description"},[t._v(t._s(t.description))]):t._e()],2):t._e(),t._v(" "),e("v-row",{class:t.rowClass,attrs:{dense:t.dense}},[t._l(t.visibleFields,function(n,i){return["group"===n.type?e("v-col",{key:"group-".concat(i),attrs:{cols:"12"}},[e("div",{staticClass:"jh-form-group-title",class:n.titleClass},[n.divider&&i>0?e("v-divider",{staticClass:"mb-4"}):t._e(),t._v(" "),n.title?e("h3",{staticClass:"text-h6 mb-2"},[t._v(t._s(n.title))]):t._e(),t._v(" "),n.description?e("p",{staticClass:"text-caption grey--text mb-3"},[t._v(t._s(n.description))]):t._e()],1)]):e("v-col",{key:n.key,class:t.getFieldColClass(n),attrs:{cols:t.getFieldCols(n),sm:t.getFieldSm(n),md:t.getFieldMd(n),lg:t.getFieldLg(n),xl:t.getFieldXl(n)}},[e("div",{class:t.getFieldWrapperClass(n)},[n.label&&t.showLabels&&("horizontal"===t.layout||"horizontal"===n.layout)?e("div",{class:t.getHorizontalLabelClass(n),style:t.getHorizontalLabelStyle(n)},[n.required&&t.showRequiredMark?e("span",{staticClass:"error--text mr-1"},[t._v("*")]):t._e(),t._v("\n            "+t._s(n.label)+"\n            "),n.tooltip?e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(n){var i=n.on,r=n.attrs;return[e("v-icon",t._g(t._b({staticClass:"ml-1",attrs:{small:""}},"v-icon",r,!1),i),[t._v("mdi-help-circle-outline")])]}}],null,!0)},[t._v(" "),e("span",[t._v(t._s(n.tooltip))])]):t._e()],1):t._e(),t._v(" "),e("div",{class:t.getFieldInputClass(n)},[n.label&&t.showLabels&&"horizontal"!==t.layout&&"horizontal"!==n.layout?e("div",{class:t.getVerticalLabelClass(n)},[n.required&&t.showRequiredMark?e("span",{staticClass:"error--text"},[t._v("*")]):t._e(),t._v("\n              "+t._s(n.label)+"\n              "),n.tooltip?e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(n){var i=n.on,r=n.attrs;return[e("v-icon",t._g(t._b({staticClass:"ml-1",attrs:{small:""}},"v-icon",r,!1),i),[t._v("mdi-help-circle-outline")])]}}],null,!0)},[t._v(" "),e("span",[t._v(t._s(n.tooltip))])]):t._e()],1):t._e(),t._v(" "),n.extra?e("div",{staticClass:"jh-field-extra text-caption grey--text mb-2"},[t._v("\n              "+t._s(n.extra)+"\n            ")]):t._e(),t._v(" "),t.isFieldReadonly(n)?e("div",{staticClass:"jh-form-readonly-text"},[t._v("\n              "+t._s(t.getReadonlyValue(n))+"\n            ")]):["text"!==n.type&&n.type?"textarea"===n.type?e("v-textarea",t._b({class:t.inputClass,attrs:{dense:t.getDense(n),filled:t.getFilled(n),outlined:t.getOutlined(n),value:t.getFieldValue(n.key),rules:t.getRules(n),disabled:t.getFieldDisabled(n),readonly:n.readonly,placeholder:n.placeholder,rows:n.rows||3,"hide-details":n.hideDetails||t.hideDetails},on:{input:function(e){return t.handleInput(n.key,e)},change:function(e){return t.handleChange(n.key,e)},blur:function(e){return t.handleBlur(n.key,e)}}},"v-textarea",n.props,!1)):"number"===n.type?e("v-text-field",t._b({class:t.inputClass,attrs:{type:"number",dense:t.getDense(n),"single-line":t.getSingleLine(n),filled:t.getFilled(n),outlined:t.getOutlined(n),value:t.getFieldValue(n.key),rules:t.getRules(n),disabled:t.getFieldDisabled(n),readonly:n.readonly,placeholder:n.placeholder,"hide-details":n.hideDetails||t.hideDetails},on:{input:function(e){return t.handleInput(n.key,e)},change:function(e){return t.handleChange(n.key,e)},blur:function(e){return t.handleBlur(n.key,e)}}},"v-text-field",n.props,!1)):"select"===n.type?e("v-select",t._b({class:t.inputClass,attrs:{dense:t.getDense(n),filled:t.getFilled(n),outlined:t.getOutlined(n),value:t.getFieldValue(n.key),items:t.getFieldOptions(n),rules:t.getRules(n),disabled:t.getFieldDisabled(n),readonly:n.readonly,placeholder:n.placeholder,"item-text":n.itemText||"text","item-value":n.itemValue||"value",multiple:n.multiple,chips:n.chips,"hide-details":n.hideDetails||t.hideDetails},on:{input:function(e){return t.handleInput(n.key,e)},change:function(e){return t.handleChange(n.key,e)},blur:function(e){return t.handleBlur(n.key,e)}}},"v-select",n.props,!1)):"autocomplete"===n.type?e("v-autocomplete",t._b({class:t.inputClass,attrs:{dense:t.getDense(n),filled:t.getFilled(n),outlined:t.getOutlined(n),value:t.getFieldValue(n.key),items:t.getFieldOptions(n),rules:t.getRules(n),disabled:t.getFieldDisabled(n),readonly:n.readonly,placeholder:n.placeholder,"item-text":n.itemText||"text","item-value":n.itemValue||"value","hide-details":n.hideDetails||t.hideDetails},on:{input:function(e){return t.handleInput(n.key,e)},change:function(e){return t.handleChange(n.key,e)},blur:function(e){return t.handleBlur(n.key,e)}}},"v-autocomplete",n.props,!1)):"date"===n.type?e("v-menu",{attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(i){var r=i.on,a=i.attrs;return[e("v-text-field",t._g(t._b({class:t.inputClass,attrs:{dense:t.getDense(n),filled:t.getFilled(n),outlined:t.getOutlined(n),value:t.getFieldValue(n.key),rules:t.getRules(n),disabled:t.getFieldDisabled(n),placeholder:n.placeholder,"hide-details":n.hideDetails||t.hideDetails,readonly:""}},"v-text-field",a,!1),r))]}}],null,!0),model:{value:t.dateMenus[n.key],callback:function(e){t.$set(t.dateMenus,n.key,e)},expression:"dateMenus[field.key]"}},[t._v(" "),e("v-date-picker",t._b({attrs:{value:t.getFieldValue(n.key),locale:n.locale||"zh-cn"},on:{input:function(e){t.dateMenus[n.key]=!1,t.handleInput(n.key,e)}}},"v-date-picker",n.pickerProps,!1))],1):"time"===n.type?e("v-menu",{attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(i){var r=i.on,a=i.attrs;return[e("v-text-field",t._g(t._b({class:t.inputClass,attrs:{dense:t.getDense(n),filled:t.getFilled(n),outlined:t.getOutlined(n),value:t.getFieldValue(n.key),rules:t.getRules(n),disabled:t.getFieldDisabled(n),placeholder:n.placeholder,"hide-details":n.hideDetails||t.hideDetails,readonly:""}},"v-text-field",a,!1),r))]}}],null,!0),model:{value:t.timeMenus[n.key],callback:function(e){t.$set(t.timeMenus,n.key,e)},expression:"timeMenus[field.key]"}},[t._v(" "),e("v-time-picker",t._b({attrs:{value:t.getFieldValue(n.key),format:"24hr"},on:{input:function(e){t.timeMenus[n.key]=!1,t.handleInput(n.key,e)}}},"v-time-picker",n.pickerProps,!1))],1):"switch"===n.type?e("v-switch",t._b({attrs:{"input-value":t.getFieldValue(n.key),label:n.switchLabel,disabled:t.getFieldDisabled(n),readonly:n.readonly,color:n.color||"success","hide-details":n.hideDetails||t.hideDetails},on:{change:function(e){return t.handleChange(n.key,e)}}},"v-switch",n.props,!1)):"checkbox"===n.type?e("v-checkbox",t._b({attrs:{"input-value":t.getFieldValue(n.key),label:n.checkboxLabel,disabled:t.getFieldDisabled(n),readonly:n.readonly,color:n.color||"success","hide-details":n.hideDetails||t.hideDetails},on:{change:function(e){return t.handleChange(n.key,e)}}},"v-checkbox",n.props,!1)):"radio"===n.type?e("v-radio-group",t._b({attrs:{value:t.getFieldValue(n.key),rules:t.getRules(n),disabled:t.getFieldDisabled(n),readonly:n.readonly,row:!1!==n.row,"hide-details":n.hideDetails||t.hideDetails},on:{change:function(e){return t.handleChange(n.key,e)}}},"v-radio-group",n.props,!1),t._l(t.getFieldOptions(n),function(t){return e("v-radio",{key:t.value,attrs:{label:t.text,value:t.value,color:n.color||"success"}})}),1):"slot"===n.type?t._t("field-".concat(n.key),null,{field:n,value:t.getFieldValue(n.key),values:t.values,updateField:t.updateField}):t._e():e("v-text-field",t._b({class:t.inputClass,attrs:{dense:t.getDense(n),"single-line":t.getSingleLine(n),filled:t.getFilled(n),outlined:t.getOutlined(n),value:t.getFieldValue(n.key),rules:t.getRules(n),disabled:t.getFieldDisabled(n),readonly:n.readonly,placeholder:n.placeholder,prefix:n.prefix,suffix:n.suffix,"hide-details":n.hideDetails||t.hideDetails},on:{input:function(e){return t.handleInput(n.key,e)},change:function(e){return t.handleChange(n.key,e)},blur:function(e){return t.handleBlur(n.key,e)}}},"v-text-field",n.props,!1))]],2)])])]})],2),t._v(" "),t._t("footer",null,{values:t.values})],2)};function g(t){return function(t){if(Array.isArray(t))return _(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return _(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function S(t){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S(t)}function w(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function x(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?w(Object(n),!0).forEach(function(e){C(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function C(t,e,n){return(e=function(t){var e=function(t){if("object"!=S(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=S(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==S(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}b._withStripped=!0;var k=i({name:"JhFormFields",props:{fields:{type:Array,default:function(){return[]}},value:{type:Object,default:function(){return{}}},title:{type:String,default:""},description:{type:String,default:""},tooltip:{type:String,default:""},layout:{type:String,default:"vertical",validator:function(t){return["horizontal","vertical","inline"].includes(t)}},showLabels:{type:Boolean,default:!0},labelWidth:{type:[Number,String],default:"auto"},labelAlign:{type:String,default:"right",validator:function(t){return["left","right","center"].includes(t)}},showRequiredMark:{type:Boolean,default:!0},readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},defaultDense:{type:Boolean,default:!0},defaultFilled:{type:Boolean,default:!0},defaultOutlined:{type:Boolean,default:!1},defaultSingleLine:{type:Boolean,default:!0},defaultColsMd:{type:Number,default:6},hideDetails:{type:[Boolean,String],default:!1},labelClass:{type:String,default:"jh-input-label"},inputClass:{type:String,default:"jh-v-input"},rowClass:{type:String,default:""},validationRules:{type:Object,default:function(){return{require:[function(t){return!!t||"必填"}],email:[function(t){return!t||/.+@.+\..+/.test(t)||"邮箱格式不正确"}],phone:[function(t){return!t||/^1[3-9]\d{9}$/.test(t)||"手机号格式不正确"}],number:[function(t){return!t||!isNaN(t)||"请输入数字"}],integer:[function(t){return!t||Number.isInteger(Number(t))||"请输入整数"}]}}},dense:{type:Boolean,default:!1},bordered:{type:Boolean,default:!1},dependencies:{type:Array,default:function(){return[]}}},data:function(){return{values:{},dateMenus:{},timeMenus:{},dependencyWatchers:[]}},computed:{formFieldsClasses:function(){return C({"jh-form-fields":!0,"jh-form-fields--bordered":this.bordered,"jh-form-fields--readonly":this.readonly,"jh-form-fields--disabled":this.disabled},"jh-form-fields--".concat(this.layout),!0)},visibleFields:function(){var t=this;return this.fields.filter(function(e){return"function"==typeof e.visible?e.visible(t.values):void 0===e.visible||e.visible})}},watch:{value:{handler:function(t){this.values=x({},t)},immediate:!0,deep:!0},dependencies:{handler:function(t){this.setupDependencyWatchers(t)},immediate:!0}},mounted:function(){this.initValues(),this.setupFieldDependencies()},beforeDestroy:function(){this.dependencyWatchers.forEach(function(t){return t()}),this.dependencyWatchers=[]},methods:{initValues:function(){var t=x({},this.value);this.fields.forEach(function(e){void 0!==e.defaultValue&&void 0===t[e.key]&&(t[e.key]=e.defaultValue)}),this.values=t},setupFieldDependencies:function(){var t=this;this.fields.forEach(function(e){e.dependencies&&Array.isArray(e.dependencies)&&e.dependencies.forEach(function(n){var i=t.$watch(function(){return t.values[n]},function(i,r){i!==r&&t.handleDependencyChange(e,n,i,r)});t.dependencyWatchers.push(i)})})},setupDependencyWatchers:function(t){var e=this;this.dependencyWatchers.forEach(function(t){return t()}),this.dependencyWatchers=[],t.forEach(function(t){var n=e.$watch(function(){return e.values[t]},function(n,i){n!==i&&e.$emit("dependency-change",{key:t,value:n,oldValue:i,values:e.values})});e.dependencyWatchers.push(n)})},handleDependencyChange:function(t,e,n,i){"function"==typeof t.onDependencyChange&&t.onDependencyChange(e,n,i,this.values),this.$emit("field-dependency-change",{field:t.key,dependency:e,value:n,oldValue:i,values:this.values})},getFieldValue:function(t){return this.values[t]},getFieldOptions:function(t){return"function"==typeof t.options?t.options(this.values):t.options||[]},getFieldCols:function(t){return"inline"===this.layout?"auto":t.cols?"object"===S(t.cols)&&t.cols.xs||t.cols:12},getFieldSm:function(t){return"inline"===this.layout?"auto":t.cols&&"object"===S(t.cols)?t.cols.sm:12},getFieldMd:function(t){return"inline"===this.layout?"auto":t.cols&&"object"===S(t.cols)?t.cols.md||this.defaultColsMd:t.cols||this.defaultColsMd},getFieldLg:function(t){return"inline"===this.layout?"auto":t.cols&&"object"===S(t.cols)?t.cols.lg||t.cols.md||this.defaultColsMd:t.cols||this.defaultColsMd},getFieldXl:function(t){return"inline"===this.layout?"auto":t.cols&&"object"===S(t.cols)?t.cols.xl||t.cols.md||this.defaultColsMd:t.cols||this.defaultColsMd},getFieldColClass:function(t){return t.colClass||""},getFieldWrapperClass:function(t){var e=t.layout||this.layout;return"jh-field-wrapper ".concat("horizontal"===e?"d-flex align-center":"")},getHorizontalLabelClass:function(t){var e=t.labelAlign||this.labelAlign;return"jh-field-label jh-input-label jh-field-label--horizontal text-".concat(e," flex-shrink-0")},getHorizontalLabelStyle:function(t){var e=t.labelWidth||this.labelWidth;return{width:"number"==typeof e?"".concat(e,"px"):e,minWidth:"number"==typeof e?"".concat(e,"px"):e}},getVerticalLabelClass:function(t){return"jh-field-label jh-input-label jh-field-label--vertical mb-1"},getFieldInputClass:function(t){return"horizontal"===(t.layout||this.layout)?"jh-field-input flex-grow-1":"jh-field-input"},getFieldDisabled:function(t){return"function"==typeof t.disabled?t.disabled(this.values):void 0!==t.disabled?t.disabled:this.disabled},isFieldReadonly:function(t){return"function"==typeof t.readonly?t.readonly(this.values):void 0!==t.readonly?t.readonly:this.readonly},getReadonlyValue:function(t){var e=this.values[t.key];if("function"==typeof t.readonlyRender)return t.readonlyRender(e,this.values);if(("select"===t.type||"radio"===t.type)&&t.options){var n=this.getFieldOptions(t);if(t.multiple&&Array.isArray(e))return e.map(function(t){var e=n.find(function(e){return e.value===t});return e?e.text:t}).join(", ");var i=n.find(function(t){return t.value===e});return i?i.text:e}return"switch"===t.type||"checkbox"===t.type?e?"是":"否":e||"-"},getDense:function(t){return void 0!==t.dense?t.dense:this.defaultDense},getFilled:function(t){return void 0!==t.filled?t.filled:this.defaultFilled},getOutlined:function(t){return void 0!==t.outlined?t.outlined:this.defaultOutlined},getSingleLine:function(t){return void 0!==t.singleLine?t.singleLine:this.defaultSingleLine},getRules:function(t){var e=this,n=[];return t.required&&n.push(function(e){return!!e||"".concat(t.label||"此字段","为必填项")}),t.rules&&(Array.isArray(t.rules)?n.push.apply(n,g(t.rules)):"string"==typeof t.rules&&t.rules.split("|").forEach(function(t){var i=t.trim();e.validationRules[i]&&n.push.apply(n,g(e.validationRules[i]))})),n},handleInput:function(t,e){this.$set(this.values,t,e),this.$emit("input",this.values),this.$emit("field-input",{key:t,value:e,values:this.values})},handleChange:function(t,e){this.$set(this.values,t,e),this.$emit("input",this.values),this.$emit("field-change",{key:t,value:e,values:this.values})},handleBlur:function(t,e){this.$emit("field-blur",{key:t,value:e,values:this.values})},updateField:function(t,e){this.$set(this.values,t,e),this.$emit("input",this.values),this.$emit("field-change",{key:t,value:e,values:this.values})},getValues:function(){return x({},this.values)},setFieldsValue:function(t){this.values=x(x({},this.values),t),this.$emit("input",this.values)},setFieldValue:function(t,e){this.$set(this.values,t,e),this.$emit("input",this.values)},resetFields:function(){var t={};this.fields.forEach(function(e){void 0!==e.defaultValue&&(t[e.key]=e.defaultValue)}),this.values=t,this.$emit("input",this.values),this.$emit("reset",this.values)}}},b,[],!1,null,"11146d87",null);function D(t){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},D(t)}function j(){var t,e,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",r=n.toStringTag||"@@toStringTag";function a(n,i,r,a){var s=i&&i.prototype instanceof l?i:l,c=Object.create(s.prototype);return O(c,"_invoke",function(n,i,r){var a,l,s,c=0,u=r||[],d=!1,f={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return a=e,l=0,s=t,f.n=n,o}};function h(n,i){for(l=n,s=i,e=0;!d&&c&&!r&&e<u.length;e++){var r,a=u[e],h=f.p,p=a[2];n>3?(r=p===i)&&(s=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=t):a[0]<=h&&((r=n<2&&h<a[1])?(l=0,f.v=i,f.n=a[1]):h<p&&(r=n<3||a[0]>i||i>p)&&(a[4]=n,a[5]=i,f.n=p,l=0))}if(r||n>1)return o;throw d=!0,i}return function(r,u,p){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&h(u,p),l=u,s=p;(e=l<2?t:s)||!d;){a||(l?l<3?(l>1&&(f.n=-1),h(l,s)):f.n=s:f.v=s);try{if(c=2,a){if(l||(r="next"),e=a[r]){if(!(e=e.call(a,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,l<2&&(l=0)}else 1===l&&(e=a.return)&&e.call(a),l<2&&(s=TypeError("The iterator does not provide a '"+r+"' method"),l=1);a=t}else if((e=(d=f.n<0)?s:n.call(i,f))!==o)break}catch(e){a=t,l=1,s=e}finally{c=1}}return{value:e,done:d}}}(n,r,a),!0),c}var o={};function l(){}function s(){}function c(){}e=Object.getPrototypeOf;var u=[][i]?e(e([][i]())):(O(e={},i,function(){return this}),e),d=c.prototype=l.prototype=Object.create(u);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,O(t,r,"GeneratorFunction")),t.prototype=Object.create(d),t}return s.prototype=c,O(d,"constructor",c),O(c,"constructor",s),s.displayName="GeneratorFunction",O(c,r,"GeneratorFunction"),O(d),O(d,r,"Generator"),O(d,i,function(){return this}),O(d,"toString",function(){return"[object Generator]"}),(j=function(){return{w:a,m:f}})()}function O(t,e,n,i){var r=Object.defineProperty;try{r({},"",{})}catch(t){r=0}O=function(t,e,n,i){function a(e,n){O(t,e,function(t){return this._invoke(e,n,t)})}e?r?r(t,e,{value:n,enumerable:!i,configurable:!i,writable:!i}):t[e]=n:(a("next",0),a("throw",1),a("return",2))},O(t,e,n,i)}function I(t,e,n,i,r,a,o){try{var l=t[a](o),s=l.value}catch(t){return void n(t)}l.done?e(s):Promise.resolve(s).then(i,r)}function F(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function P(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?F(Object(n),!0).forEach(function(e){T(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function T(t,e,n){return(e=function(t){var e=function(t){if("object"!=D(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=D(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==D(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const $=i({name:"JhQueryFilter",components:{JhFormFields:k.exports},props:{fields:{type:Array,default:function(){return[]}},initialValues:{type:Object,default:function(){return{}}},collapsible:{type:Boolean,default:!0},defaultCollapsed:{type:Boolean,default:!0},defaultVisibleCount:{type:Number,default:3},colSpan:{type:Object,default:function(){return{xs:24,sm:12,md:6,lg:4}}},showLabels:{type:Boolean,default:!0},dense:{type:Boolean,default:!0},filled:{type:Boolean,default:!0},outlined:{type:Boolean,default:!1},singleLine:{type:Boolean,default:!0},searchText:{type:String,default:"查询"},resetText:{type:String,default:"重置"},expandText:{type:String,default:"展开"},collapseText:{type:String,default:"收起"},buttonSize:{type:String,default:"small",validator:function(t){return["small","default","large"].includes(t)}},buttonAlign:{type:String,default:"left",validator:function(t){return["left","right","center"].includes(t)}},loading:{type:Boolean,default:!1},labelClass:{type:String,default:"jh-input-label"},inputClass:{type:String,default:"jh-v-input"},rowClass:{type:String,default:"ma-0"},buttonClass:{type:String,default:"gap-2"},buttonColumnClass:{type:String,default:""}},data:function(){return{formData:{},collapsed:this.defaultCollapsed,searching:!1}},computed:{visibleFields:function(){return this.collapsible&&this.collapsed?this.fields.slice(0,this.defaultVisibleCount):this.fields},visibleFieldsWithConfig:function(){var t=this;return this.visibleFields.map(function(e){return P(P({},e),{},{cols:e.cols||{xs:t.colSpan.xs||12,sm:t.colSpan.sm||12,md:t.colSpan.md||8,lg:t.colSpan.lg||6},props:P({clearable:!0},e.props)})})}},watch:{initialValues:{handler:function(t){this.formData=P({},t)},immediate:!0,deep:!0},loading:function(t){this.searching=t}},mounted:function(){this.initFormData()},methods:{initFormData:function(){var t=P({},this.initialValues);this.fields.forEach(function(e){void 0!==e.defaultValue&&void 0===t[e.key]&&(t[e.key]=e.defaultValue)}),this.formData=t},handleFieldChange:function(t){var e,n=t.key,i=t.value;this.$emit("field-change",{key:n,value:i,formData:this.formData}),null!==(e=this.fields.find(function(t){return t.key===n}))&&void 0!==e&&e.realtime&&this.handleSearch()},toggleCollapse:function(){this.collapsed=!this.collapsed,this.$emit("collapse-change",this.collapsed)},handleSearch:function(){var t,e=this;return(t=j().m(function t(){var n;return j().w(function(t){for(;;)switch(t.n){case 0:e.searching=!0;try{n={},Object.keys(e.formData).forEach(function(t){var i=e.formData[t];if(null!=i&&""!==i){if(Array.isArray(i)&&0===i.length)return;n[t]=i}}),e.$emit("search",n)}finally{e.loading||(e.searching=!1)}case 1:return t.a(2)}},t)}),function(){var e=this,n=arguments;return new Promise(function(i,r){var a=t.apply(e,n);function o(t){I(a,i,r,o,l,"next",t)}function l(t){I(a,i,r,o,l,"throw",t)}o(void 0)})})()},handleReset:function(){var t=this;this.initFormData(),this.fields.forEach(function(e){t.$set(t.formData,e.key,void 0!==e.defaultValue?e.defaultValue:"")}),this.$emit("reset"),this.handleSearch()},getFormData:function(){return P({},this.formData)},setFieldsValue:function(t){this.formData=P(P({},this.formData),t)},setFieldValue:function(t,e){this.$set(this.formData,t,e)}}},y,[],!1,null,"67dbf0e5",null).exports;var B=function(){var t=this,e=t._self._c;return e("div",{class:t.wrapperClass,style:t.wrapperStyle},[t.headerTitle||t.$slots["header-title"]||t.$slots["toolbar-actions"]||t.$slots["toolbar-extra"]?e("div",{staticClass:"jh-pro-table-header"},[e("div",{staticClass:"jh-pro-table-header-left"},[t.headerTitle||t.$slots["header-title"]?e("div",{staticClass:"jh-pro-table-title"},[t._t("header-title",function(){return[e("span",{staticClass:"jh-pro-table-title-text"},[t._v(t._s(t.headerTitle))]),t._v(" "),t.tooltip?e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(n){var i=n.on,r=n.attrs;return[e("v-icon",t._g(t._b({staticClass:"ml-1",attrs:{small:""}},"v-icon",r,!1),i),[t._v("mdi-help-circle-outline")])]}}],null,!1,1799656693)},[t._v(" "),e("span",[t._v(t._s(t.tooltip))])]):t._e()]})],2):t._e(),t._v(" "),t.$slots["toolbar-actions"]?e("div",{staticClass:"jh-pro-table-header-actions"},[t._t("toolbar-actions",function(){return[t.showCreateButton?e("v-btn",{staticClass:"mr-2",attrs:{color:"success",small:""},on:{click:function(e){return e.stopPropagation(),t.$emit("create-click")}}},[e("v-icon",{attrs:{left:"",small:""}},[t._v("mdi-plus")]),t._v(" "),e("span",{staticClass:"d-none d-sm-inline"},[t._v("新增")])],1):t._e()]})],2):t._e()]),t._v(" "),e("div",{staticClass:"jh-pro-table-header-right"},[t._t("toolbar-extra")],2)]):t._e(),t._v(" "),t.showFilter&&t.filterFields&&t.filterFields.length>0?e("jh-query-filter",{ref:"queryFilterRef",staticClass:"pa-0",attrs:{fields:t.filterFields,"initial-values":t.filterInitialValues,collapsible:t.filterCollapsible,"default-collapsed":t.filterDefaultCollapsed,"default-visible-count":t.filterDefaultVisibleCount,"col-span":t.filterColSpan,dense:!0,outlined:!0,"show-labels":!1,"search-text":t.filterSearchText,"reset-text":t.filterResetText},on:{search:t.handleFilterSearch,reset:t.handleFilterReset},scopedSlots:t._u([t._l(t.filterFields,function(e){return{key:"field-".concat(e.key),fn:function(n){return[t._t("filter-field-".concat(e.key),null,null,n)]}}}),{key:"buttons",fn:function(e){return[t._t("filter-buttons",null,null,e)]}}],null,!0)}):t._e(),t._v(" "),t.showSelectComputed&&t.selectedItems.length>0?e("div",{staticClass:"jh-pro-table-alert"},[e("div",{staticClass:"jh-pro-table-alert-info"},[t._t("alert",function(){return[e("v-icon",{staticClass:"mr-2",attrs:{small:"",color:"primary"}},[t._v("mdi-checkbox-marked-circle")]),t._v(" "),e("span",[t._v("已选择 "),e("strong",{staticClass:"primary--text"},[t._v(t._s(t.selectedItems.length))]),t._v(" 项")]),t._v(" "),e("v-btn",{staticClass:"ml-2",attrs:{text:"","x-small":""},on:{click:t.clearSelection}},[t._v("清空")])]},{selectedRowKeys:t.selectedRowKeys,selectedRows:t.selectedItems})],2),t._v(" "),e("div",{staticClass:"jh-pro-table-alert-actions"},[t._t("alert-actions",null,{selectedRowKeys:t.selectedRowKeys,selectedRows:t.selectedItems})],2)]):t._e(),t._v(" "),!1!==t.toolbar?e("v-row",{staticClass:"jh-pro-table-toolbar ma-0 pb-3 pa-3 pa-md-0",attrs:{align:"center"}},[t.headerTitle||t.$slots["header-title"]?t._e():e("div",{staticClass:"flex items-center gap-2"},[t._t("toolbar-actions",function(){return[t.showCreateButton?e("v-btn",{staticClass:"mr-2",attrs:{color:"success",small:""},on:{click:function(e){return e.stopPropagation(),t.$emit("create-click")}}},[e("v-icon",{attrs:{left:"",small:""}},[t._v("mdi-plus")]),t._v(" "),e("span",{staticClass:"d-none d-sm-inline"},[t._v("新增")])],1):t._e()]})],2),t._v(" "),e("v-spacer"),t._v(" "),e("div",{staticClass:"flex items-center gap-2 justify-end flex-wrap"},[t.toolbarConfig.search?e("v-text-field",{staticClass:"jh-v-input jh-toolbar-search border",attrs:{prefix:t.isMobile?"":"筛选",placeholder:t.isMobile?"筛选":"",dense:"",filled:"","single-line":"","hide-details":"",clearable:""},model:{value:t.searchInputInternal,callback:function(e){t.searchInputInternal=e},expression:"searchInputInternal"}}):t._e(),t._v(" "),t.toolbarConfig.refresh?e("v-btn",{attrs:{icon:"",small:"",title:"刷新"},on:{click:t.handleRefresh}},[e("v-icon",[t._v("mdi-refresh")])],1):t._e(),t._v(" "),t.toolbarConfig.density?e("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(n){var i=n.on,r=n.attrs;return[e("v-btn",t._g(t._b({attrs:{icon:"",small:"",title:"密度"}},"v-btn",r,!1),i),[e("v-icon",[t._v("mdi-format-line-spacing")])],1)]}}],null,!1,1668111094)},[t._v(" "),e("v-list",{attrs:{dense:""}},[e("v-list-item",{on:{click:function(e){t.currentDensity="default"}}},[e("v-list-item-title",["default"===t.currentDensity?e("v-icon",{attrs:{small:"",left:""}},[t._v("mdi-check")]):t._e(),t._v("\n              默认\n            ")],1)],1),t._v(" "),e("v-list-item",{on:{click:function(e){t.currentDensity="medium"}}},[e("v-list-item-title",["medium"===t.currentDensity?e("v-icon",{attrs:{small:"",left:""}},[t._v("mdi-check")]):t._e(),t._v("\n              中等\n            ")],1)],1),t._v(" "),e("v-list-item",{on:{click:function(e){t.currentDensity="compact"}}},[e("v-list-item-title",["compact"===t.currentDensity?e("v-icon",{attrs:{small:"",left:""}},[t._v("mdi-check")]):t._e(),t._v("\n              紧凑\n            ")],1)],1)],1)],1):t._e(),t._v(" "),t.toolbarConfig.setting?e("v-menu",{attrs:{"offset-y":"",left:"","max-height":"400"},scopedSlots:t._u([{key:"activator",fn:function(n){var i=n.on,r=n.attrs;return[e("v-btn",t._g(t._b({attrs:{icon:"",small:"",title:"列设置"}},"v-btn",r,!1),i),[e("v-icon",[t._v("mdi-cog-outline")])],1)]}}],null,!1,911125755)},[t._v(" "),e("v-card",{attrs:{"min-width":"200"}},[e("v-card-text",{staticClass:"pa-2"},[e("div",{staticClass:"text-caption font-weight-bold mb-2"},[t._v("列显示")]),t._v(" "),e("v-list",{attrs:{dense:""}},t._l(t.internalColumns,function(n){return e("v-list-item",{key:n.value,staticClass:"px-2",on:{click:function(e){return t.toggleColumn(n)}}},[e("v-list-item-action",{staticClass:"mr-2"},[e("v-checkbox",{attrs:{"input-value":!1!==n.visible,"hide-details":"",dense:""},on:{click:function(e){return e.stopPropagation(),t.toggleColumn(n)}}})],1),t._v(" "),e("v-list-item-content",[e("v-list-item-title",{staticClass:"text-body-2"},[t._v(t._s(n.text||n.title))])],1)],1)}),1),t._v(" "),e("v-divider",{staticClass:"my-2"}),t._v(" "),e("v-btn",{attrs:{text:"",small:"",block:""},on:{click:t.resetColumns}},[t._v("重置")])],1)],1)],1):t._e(),t._v(" "),t.toolbarConfig.fullscreen?e("v-btn",{attrs:{icon:"",small:"",title:t.isFullscreen?"退出全屏":"全屏"},on:{click:t.toggleFullscreen}},[e("v-icon",[t._v(t._s(t.isFullscreen?"mdi-fullscreen-exit":"mdi-fullscreen"))])],1):t._e()],1)],1):t._e(),t._v(" "),t.$slots["table-extra"]?e("div",{staticClass:"jh-pro-table-extra"},[t._t("table-extra")],2):t._e(),t._v(" "),e("v-data-table",t._g(t._b({ref:"dataTable",staticClass:"jh-fixed-table-height elevation-0 mb-xs-4 mx-3 mx-md-0 mt-3",class:[t.tableClassComputed,t.densityClass],attrs:{headers:t.visibleHeaders,items:t.currentItems,search:t.searchInputInternal,"footer-props":t.currentFooterProps,"items-per-page":t.currentItemsPerPage,page:t.currentPage,"server-items-length":t.serverItemsLength,"mobile-breakpoint":t.mobileBreakpoint,loading:t.currentLoading,"checkbox-color":t.checkboxColor,"fixed-header":t.fixedHeader,"show-select":t.showSelectComputed,"single-select":t.singleSelectComputed,value:t.selectedItems,"item-key":t.rowKey,dense:t.dense,"multi-sort":t.multiSort,"must-sort":t.mustSort,"sort-by":t.internalSortBy,"sort-desc":t.internalSortDesc},on:{"click:row":t.handleRowClick,input:t.handleSelectionChange,"update:page":t.handlePageChange,"update:items-per-page":t.handleItemsPerPageChange,"update:sort-by":t.handleSortByUpdate,"update:sort-desc":t.handleSortDescUpdate},scopedSlots:t._u([t._l(t.customHeaderSlots,function(e){return{key:"header.".concat(e.value),fn:function(n){var i=n.header;return[t._t("header.".concat(e.value),function(){return[t._v(t._s(i.text||i.title))]},{header:i})]}}}),t._l(t.visibleHeaders,function(n){return{key:"item.".concat(n.value),fn:function(i){var r=i.item,a=i.value;return["action"===n.value?[t._t("item.action",function(){return[t.isMobile?t._e():e("div",{staticClass:"flex items-center gap-1"},[t.actionColumn&&t.actionColumn.buttons?[t._l(t.getVisibleButtons(r),function(n,i){return[n.tooltip?e("v-tooltip",{key:i,attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(i){var a=i.on,o=i.attrs;return[e("v-btn",t._g(t._b({attrs:{"x-small":"",text:"link"===n.type,icon:"icon"===n.type,color:n.color||"primary"},on:{click:function(e){return e.stopPropagation(),t.handleActionClick(n,r)}}},"v-btn",o,!1),a),[n.icon?e("v-icon",{attrs:{small:""}},[t._v(t._s(n.icon))]):t._e(),t._v(" "),"icon"!==n.type?e("span",[t._v(t._s(n.text))]):t._e()],1)]}}],null,!0)},[t._v(" "),e("span",[t._v(t._s(n.tooltip))])]):e("v-btn",{key:i,attrs:{"x-small":"",text:"link"===n.type,icon:"icon"===n.type,color:n.color||"primary"},on:{click:function(e){return e.stopPropagation(),t.handleActionClick(n,r)}}},[n.icon?e("v-icon",{attrs:{small:""}},[t._v(t._s(n.icon))]):t._e(),t._v(" "),"icon"!==n.type?e("span",[t._v(t._s(n.text))]):t._e()],1)]})]:[t.showUpdateAction?e("span",{staticClass:"success--text font-weight-medium font-size-2 mr-2 cursor-pointer",attrs:{role:"button"},on:{click:function(e){return e.stopPropagation(),t.$emit("update-click",r)}}},[e("v-icon",{staticClass:"success--text",attrs:{size:"16"}},[t._v("mdi-note-edit-outline")]),t._v("详情\n              ")],1):t._e(),t._v(" "),t.showDeleteAction?e("span",{staticClass:"error--text font-weight-medium font-size-2 mr-2 cursor-pointer",attrs:{role:"button"},on:{click:function(e){return e.stopPropagation(),t.$emit("delete-click",r)}}},[e("v-icon",{staticClass:"error--text",attrs:{size:"16"}},[t._v("mdi-trash-can-outline")]),t._v("删除\n              ")],1):t._e()]],2),t._v(" "),t.isMobile?e("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(n){var i=n.on,r=n.attrs;return[e("span",t._g(t._b({staticClass:"success--text font-weight-medium font-size-2",attrs:{role:"button"}},"span",r,!1),i),[e("v-icon",{staticClass:"success--text",attrs:{size:"20"}},[t._v("mdi-chevron-down")]),t._v("操作\n              ")],1)]}}],null,!0)},[t._v(" "),e("v-list",{attrs:{dense:""}},[t.actionColumn&&t.actionColumn.buttons?t._l(t.getVisibleButtons(r),function(n,i){return e("v-list-item",{key:i,on:{click:function(e){return e.stopPropagation(),t.handleActionClick(n,r)}}},[n.icon?e("v-list-item-icon",[e("v-icon",{attrs:{small:""}},[t._v(t._s(n.icon))])],1):t._e(),t._v(" "),e("v-list-item-title",[t._v(t._s(n.text))])],1)}):[t.showUpdateAction?e("v-list-item",{on:{click:function(e){return e.stopPropagation(),t.$emit("update-click",r)}}},[e("v-list-item-title",[t._v("详情")])],1):t._e(),t._v(" "),t.showDeleteAction?e("v-list-item",{on:{click:function(e){return e.stopPropagation(),t.$emit("delete-click",r)}}},[e("v-list-item-title",[t._v("删除")])],1):t._e()]],2)],1):t._e()]},{item:r})]:[n.slot||t.$scopedSlots["item.".concat(n.value)]?t._t("item.".concat(n.value),null,{item:r,value:a}):e("div",{staticClass:"d-flex align-center"},[n.ellipsis&&a&&a.length>20?e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(n){var i=n.on,r=n.attrs;return[e("span",t._g(t._b({staticClass:"text-truncate d-inline-block",staticStyle:{"max-width":"200px"}},"span",r,!1),i),[t._v("\n                "+t._s(a)+"\n              ")])]}}],null,!0)},[t._v(" "),e("span",[t._v(t._s(a))])]):e("span",[t._v(t._s(a))]),t._v(" "),n.copyable&&a?e("v-btn",{staticClass:"ml-1",attrs:{icon:"","x-small":""},on:{click:function(e){return e.stopPropagation(),t.copyToClipboard(a)}}},[e("v-icon",{attrs:{"x-small":""}},[t._v("mdi-content-copy")])],1):t._e()],1)]]}}}),{key:"loading",fn:function(){return[e("div",{staticClass:"jh-no-data pa-6"},[e("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}}),t._v(" "),e("div",{staticClass:"mt-2"},[t._v("数据加载中...")])],1)]},proxy:!0},{key:"no-data",fn:function(){return[e("div",{staticClass:"jh-no-data pa-6"},[e("v-icon",{attrs:{large:"",color:"grey lighten-1"}},[t._v("mdi-inbox-outline")]),t._v(" "),e("div",{staticClass:"mt-2 text-body-2 grey--text"},[t._v("暂无数据")])],1)]},proxy:!0},{key:"no-results",fn:function(){return[e("div",{staticClass:"jh-no-data pa-6"},[e("v-icon",{attrs:{large:"",color:"grey lighten-1"}},[t._v("mdi-magnify")]),t._v(" "),e("div",{staticClass:"mt-2 text-body-2 grey--text"},[t._v("未找到匹配的数据")])],1)]},proxy:!0},{key:"footer.page-text",fn:function(n){return[e("span",[t._v(t._s(n.pageStart)+"-"+t._s(n.pageStop))]),t._v(" "),e("span",{staticClass:"ml-1"},[t._v("共"+t._s(n.itemsLength)+"条")])]}}],null,!0)},"v-data-table",t.mergedDataTableProps,!1),t.dataTableListeners))],1)};B._withStripped=!0;var A=["class","style"],R=["click:row","input","update:page","update:items-per-page","update:sort-by","update:sort-desc"];function L(){var t,e,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",r=n.toStringTag||"@@toStringTag";function a(n,i,r,a){var s=i&&i.prototype instanceof l?i:l,c=Object.create(s.prototype);return N(c,"_invoke",function(n,i,r){var a,l,s,c=0,u=r||[],d=!1,f={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return a=e,l=0,s=t,f.n=n,o}};function h(n,i){for(l=n,s=i,e=0;!d&&c&&!r&&e<u.length;e++){var r,a=u[e],h=f.p,p=a[2];n>3?(r=p===i)&&(s=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=t):a[0]<=h&&((r=n<2&&h<a[1])?(l=0,f.v=i,f.n=a[1]):h<p&&(r=n<3||a[0]>i||i>p)&&(a[4]=n,a[5]=i,f.n=p,l=0))}if(r||n>1)return o;throw d=!0,i}return function(r,u,p){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&h(u,p),l=u,s=p;(e=l<2?t:s)||!d;){a||(l?l<3?(l>1&&(f.n=-1),h(l,s)):f.n=s:f.v=s);try{if(c=2,a){if(l||(r="next"),e=a[r]){if(!(e=e.call(a,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,l<2&&(l=0)}else 1===l&&(e=a.return)&&e.call(a),l<2&&(s=TypeError("The iterator does not provide a '"+r+"' method"),l=1);a=t}else if((e=(d=f.n<0)?s:n.call(i,f))!==o)break}catch(e){a=t,l=1,s=e}finally{c=1}}return{value:e,done:d}}}(n,r,a),!0),c}var o={};function l(){}function s(){}function c(){}e=Object.getPrototypeOf;var u=[][i]?e(e([][i]())):(N(e={},i,function(){return this}),e),d=c.prototype=l.prototype=Object.create(u);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,N(t,r,"GeneratorFunction")),t.prototype=Object.create(d),t}return s.prototype=c,N(d,"constructor",c),N(c,"constructor",s),s.displayName="GeneratorFunction",N(c,r,"GeneratorFunction"),N(d),N(d,r,"Generator"),N(d,i,function(){return this}),N(d,"toString",function(){return"[object Generator]"}),(L=function(){return{w:a,m:f}})()}function N(t,e,n,i){var r=Object.defineProperty;try{r({},"",{})}catch(t){r=0}N=function(t,e,n,i){function a(e,n){N(t,e,function(t){return this._invoke(e,n,t)})}e?r?r(t,e,{value:n,enumerable:!i,configurable:!i,writable:!i}):t[e]=n:(a("next",0),a("throw",1),a("return",2))},N(t,e,n,i)}function M(t,e,n,i,r,a,o){try{var l=t[a](o),s=l.value}catch(t){return void n(t)}l.done?e(s):Promise.resolve(s).then(i,r)}function E(t){return function(){var e=this,n=arguments;return new Promise(function(i,r){var a=t.apply(e,n);function o(t){M(a,i,r,o,l,"next",t)}function l(t){M(a,i,r,o,l,"throw",t)}o(void 0)})}}function V(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(-1!==e.indexOf(i))continue;n[i]=t[i]}return n}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],-1===e.indexOf(n)&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function K(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function z(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?K(Object(n),!0).forEach(function(e){J(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function J(t,e,n){return(e=function(t){var e=function(t){if("object"!=G(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=G(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==G(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function G(t){return G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},G(t)}const U=i({name:"JhTable",inheritAttrs:!1,components:{JhQueryFilter:$},props:{headers:{type:Array,required:!0,default:function(){return[]}},items:{type:Array,default:function(){return[]}},request:{type:Function,default:null},showFilter:{type:Boolean,default:!1},filterFields:{type:Array,default:function(){return[]}},filterInitialValues:{type:Object,default:function(){return{}}},filterCollapsible:{type:Boolean,default:!0},filterDefaultCollapsed:{type:Boolean,default:!0},filterDefaultVisibleCount:{type:Number,default:3},filterColSpan:{type:Object,default:function(){return{xs:24,sm:12,md:6,lg:4}}},filterSearchText:{type:String,default:"查询"},filterResetText:{type:String,default:"重置"},toolbar:{type:[Object,Boolean],default:function(){return{search:!0,refresh:!0,setting:!0,density:!0,fullscreen:!1}}},showSearch:{type:Boolean,default:!0},searchInput:{type:String,default:null},dataTableProps:{type:Object,default:function(){return{}}},sortBy:{type:[Array,String],default:function(){return[]}},sortDesc:{type:[Array,Boolean],default:function(){return[]}},multiSort:{type:Boolean,default:!1},mustSort:{type:Boolean,default:!1},showCreateButton:{type:Boolean,default:!0},showUpdateAction:{type:Boolean,default:!0},showDeleteAction:{type:Boolean,default:!0},actionColumn:{type:[Object,Boolean],default:null},columnsState:{type:Object,default:function(){return{persistenceKey:"",defaultVisible:null,value:null}}},pagination:{type:[Object,Boolean],default:function(){return{current:1,pageSize:20,pageSizeOptions:[10,20,50,100],showTotal:!0}}},itemsPerPage:{type:Number,default:20},rowSelection:{type:[Object,Boolean],default:null},showSelect:{type:Boolean,default:!1},singleSelect:{type:Boolean,default:!1},headerTitle:{type:String,default:""},tooltip:{type:String,default:""},cardBordered:{type:Boolean,default:!0},ghost:{type:Boolean,default:!1},polling:{type:Number,default:0},debounceTime:{type:Number,default:300},loading:{type:Boolean,default:!1},rowKey:{type:String,default:"id"},size:{type:String,default:"default",validator:function(t){return["default","medium","compact"].includes(t)}},footerProps:{type:Object,default:function(){return{itemsPerPageOptions:[10,20,50,100],itemsPerPageText:"每页",itemsPerPageAllText:"所有",showFirstLastPage:!0,showCurrentPage:!0}}},mobileBreakpoint:{type:Number,default:600},checkboxColor:{type:String,default:"success"},tableClass:{type:[String,Object,Array],default:function(){return{zebraLine:!0}}},fixedHeader:{type:Boolean,default:!0},dense:{type:Boolean,default:!1}},data:function(){return{isMobile:window.innerWidth<500,searchInputInternal:this.searchInput,currentLoading:this.loading,currentItems:this.items||[],currentPage:this.pagination&&this.pagination.current||1,currentItemsPerPage:this.itemsPerPage,serverItemsLength:-1,internalColumns:[],currentDensity:this.size,isFullscreen:!1,selectedItems:[],filterValues:{},pollingTimer:null,searchDebounceTimer:null,internalSortBy:this.normalizeSortBy(this.sortBy),internalSortDesc:this.normalizeSortDesc(this.sortDesc),sortChangeTimer:null,hasAppliedDefaultRowSelection:!1}},computed:{selectedRowKeys:function(){var t=this;return this.selectedItems.map(function(e){return e[t.rowKey]})},toolbarConfig:function(){return!1===this.toolbar?{}:"object"===G(this.toolbar)?z({search:this.showSearch,refresh:!0,setting:!0,density:!0,fullscreen:!1},this.toolbar):{search:this.showSearch,refresh:!0,setting:!0,density:!0,fullscreen:!1}},visibleHeaders:function(){return this.internalColumns.filter(function(t){return!1!==t.visible})},customHeaderSlots:function(){var t=this;return this.internalColumns.filter(function(e){return t.$scopedSlots["header.".concat(e.value)]})},tableClassComputed:function(){return[this.tableClass,{"jh-table-fullscreen":this.isFullscreen}]},densityClass:function(){return{"jh-table-default":"default"===this.currentDensity,"jh-table-medium":"medium"===this.currentDensity,"jh-table-compact":"compact"===this.currentDensity}},currentFooterProps:function(){return z(z({},{itemsPerPageOptions:[10,20,50,100],itemsPerPageText:"每页",itemsPerPageAllText:"所有",showFirstLastPage:!0,showCurrentPage:!0}),this.footerProps)},showSelectComputed:function(){return!1!==this.rowSelection&&(this.rowSelection&&"object"===G(this.rowSelection)?!1!==this.rowSelection.show:this.showSelect)},singleSelectComputed:function(){return!(!this.rowSelection||"radio"!==this.rowSelection.type)||this.singleSelect},isRowSelectionControlled:function(){return!(!this.rowSelection||!Array.isArray(this.rowSelection.selectedRowKeys))},wrapperClass:function(){return["jh-pro-table",this.$attrs.class,{"jh-pro-table-card":this.cardBordered,"jh-pro-table-ghost":this.ghost}]},wrapperStyle:function(){return this.$attrs.style||null},mergedDataTableProps:function(){var t=this.$attrs||{};return t.class,t.style,z(z({},V(t,A)),this.dataTableProps)},dataTableListeners:function(){var t=this.$listeners||{};return t["click:row"],t.input,t["update:page"],t["update:items-per-page"],t["update:sort-by"],t["update:sort-desc"],V(t,R)}},watch:{headers:{immediate:!0,handler:function(t){this.initColumns(t)}},items:function(t){var e=this;this.request||(this.currentItems=t||[],this.$nextTick(function(){return e.applySelectionState()}))},loading:function(t){this.currentLoading=t},searchInput:function(t){this.searchInputInternal=t},searchInputInternal:function(t){var e=this;this.$emit("update:searchInput",t),this.request&&(this.searchDebounceTimer&&clearTimeout(this.searchDebounceTimer),this.searchDebounceTimer=setTimeout(function(){e.reload()},this.debounceTime))},size:function(t){this.currentDensity=t},sortBy:function(t){this.internalSortBy=this.normalizeSortBy(t),this.scheduleSortChangeEmit()},sortDesc:function(t){this.internalSortDesc=this.normalizeSortDesc(t),this.scheduleSortChangeEmit()},rowSelection:{deep:!0,handler:function(){var t=this;this.hasAppliedDefaultRowSelection=!1,this.$nextTick(function(){return t.applySelectionState()})}},columnsState:{deep:!0,handler:function(t){t&&void 0!==t.value&&null!==t.value&&this.applyExternalColumnState(t.value)}},showSelect:function(){var t=this;this.$nextTick(function(){return t.applySelectionState()})},currentItems:function(){var t=this;this.$nextTick(function(){return t.applySelectionState()})}},mounted:function(){var t=this;window.addEventListener("resize",this.handleResize),this.request&&this.reload(),this.startPolling(),this.$nextTick(function(){return t.applySelectionState()})},beforeDestroy:function(){window.removeEventListener("resize",this.handleResize),this.stopPolling(),this.searchDebounceTimer&&clearTimeout(this.searchDebounceTimer),this.sortChangeTimer&&clearTimeout(this.sortChangeTimer)},methods:{initColumns:function(t){var e,n,i=this,r=this.getPersistedColumnState(),a=null===(e=this.columnsState)||void 0===e?void 0:e.value,o=null===(n=this.columnsState)||void 0===n?void 0:n.defaultVisible;this.internalColumns=t.map(function(t){var e=t.value||t.dataIndex||t.key,n=!1!==t.visible,l=i.resolveColumnVisible({value:e,baseVisible:n,externalState:a,persistedState:r,defaultVisible:o});return z(z({},t),{},{visible:l,initiallyVisible:n,text:t.text||t.title,value:e})})},toggleColumn:function(t){t.visible=!t.visible,this.emitColumnStateChange(),this.$forceUpdate()},resetColumns:function(){this.internalColumns.forEach(function(t){t.visible=t.initiallyVisible}),this.clearPersistedColumnState(),this.emitColumnStateChange(),this.$forceUpdate()},handleRefresh:function(){var t=this;return E(L().m(function e(){return L().w(function(e){for(;;)switch(e.n){case 0:if(t.$emit("refresh"),!t.request){e.n=1;break}return e.n=1,t.reload();case 1:return e.a(2)}},e)}))()},toggleFullscreen:function(){var t,e,n,i;this.isFullscreen=!this.isFullscreen,this.isFullscreen?null===(t=(e=this.$el).requestFullscreen)||void 0===t||t.call(e):null===(n=(i=document).exitFullscreen)||void 0===n||n.call(i)},getVisibleButtons:function(t){return this.actionColumn&&this.actionColumn.buttons?this.actionColumn.buttons.filter(function(e){return"function"==typeof e.visible?e.visible(t):!1!==e.visible}):[]},handleActionClick:function(t,e){return E(L().m(function n(){return L().w(function(n){for(;;)switch(n.n){case 0:if(!t.confirm){n.n=1;break}if(confirm(t.confirm)){n.n=1;break}return n.a(2);case 1:if(!t.onClick){n.n=2;break}return n.n=2,t.onClick(e);case 2:return n.a(2)}},n)}))()},copyToClipboard:function(t){var e=this;if(navigator.clipboard)navigator.clipboard.writeText(t).then(function(){e.$emit("copy-success",t),console.log("已复制:",t)});else{var n=document.createElement("textarea");n.value=t,document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n),this.$emit("copy-success",t),console.log("已复制:",t)}},handleRowClick:function(t,e){this.$emit("row-click",t,e),this.$emit("click:row",t,e)},handleSelectionChange:function(t){var e=this;this.selectedItems=t;var n={selectedRowKeys:t.map(function(t){return t[e.rowKey]}),selectedRows:t};this.$emit("selection-change",n),this.$emit("input",t),this.rowSelection&&"function"==typeof this.rowSelection.onChange&&this.rowSelection.onChange(n.selectedRowKeys,t)},handlePageChange:function(t){this.currentPage=t,this.$emit("update:page",t),this.request&&this.reload()},handleItemsPerPageChange:function(t){this.currentItemsPerPage=t,this.currentPage=1,this.$emit("update:items-per-page",t),this.request&&this.reload()},handleFilterSearch:function(t){this.filterValues=t,this.currentPage=1,this.$emit("filter-search",t),this.request&&this.reload()},handleFilterReset:function(){this.filterValues={},this.currentPage=1,this.$emit("filter-reset"),this.request&&this.reload()},reload:function(){var t=this;return E(L().m(function e(){var n,i,r;return L().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t.request){e.n=1;break}return e.a(2);case 1:return t.currentLoading=!0,e.p=2,n={page:t.currentPage,pageSize:t.currentItemsPerPage,search:t.searchInputInternal,sorter:t.buildSorterPayload(),filters:t.filterValues},e.n=3,t.request(n);case 3:(i=e.v)&&!1!==i.success&&(t.currentItems=i.data||i.list||[],t.serverItemsLength=i.total||i.totalCount||t.currentItems.length,t.$nextTick(function(){return t.applySelectionState()})),e.n=5;break;case 4:e.p=4,r=e.v,console.error("Failed to load data:",r),t.$emit("request-error",r);case 5:return e.p=5,t.currentLoading=!1,e.f(5);case 6:return e.a(2)}},e,null,[[2,4,5,6]])}))()},reset:function(){this.currentPage=1,this.reload()},clearSelection:function(){var t,e;this.selectedItems=[],null===(t=this.$refs.dataTable)||void 0===t||null===(e=t.clearSelection)||void 0===e||e.call(t),this.$emit("selection-change",{selectedRowKeys:[],selectedRows:[]}),this.$emit("input",[]),this.rowSelection&&"function"==typeof this.rowSelection.onChange&&this.rowSelection.onChange([],[])},getSelectedRows:function(){return this.selectedItems},handleResize:function(){this.isMobile=window.innerWidth<500},startPolling:function(){var t=this;this.polling>0&&this.request&&(this.pollingTimer=setInterval(function(){t.reload()},this.polling))},stopPolling:function(){this.pollingTimer&&(clearInterval(this.pollingTimer),this.pollingTimer=null)},resolveColumnVisible:function(t){var e=t.value,n=t.baseVisible,i=t.externalState,r=t.persistedState,a=t.defaultVisible;return i&&Object.prototype.hasOwnProperty.call(i,e)?i[e]:r&&Object.prototype.hasOwnProperty.call(r,e)?r[e]:a&&Object.prototype.hasOwnProperty.call(a,e)?a[e]:n},getColumnStateSnapshot:function(){return this.internalColumns.reduce(function(t,e){return t[e.value]=!1!==e.visible,t},{})},emitColumnStateChange:function(){var t=this.getColumnStateSnapshot();this.$emit("columns-state-change",t),this.columnsState&&"function"==typeof this.columnsState.onChange&&this.columnsState.onChange(t),this.persistColumnState(t)},getPersistedColumnState:function(){if(!this.columnsState||!this.columnsState.persistenceKey)return null;if("undefined"==typeof window)return null;try{var t=window.localStorage.getItem(this.columnsState.persistenceKey);return t?JSON.parse(t):null}catch(t){return console.warn("[JhTable] Failed to parse persisted column state:",t),null}},persistColumnState:function(t){if(this.columnsState&&this.columnsState.persistenceKey&&"undefined"!=typeof window)try{t?window.localStorage.setItem(this.columnsState.persistenceKey,JSON.stringify(t)):window.localStorage.removeItem(this.columnsState.persistenceKey)}catch(t){console.warn("[JhTable] Failed to persist column state:",t)}},clearPersistedColumnState:function(){if(this.columnsState&&this.columnsState.persistenceKey&&"undefined"!=typeof window)try{window.localStorage.removeItem(this.columnsState.persistenceKey)}catch(t){console.warn("[JhTable] Failed to clear column state:",t)}},applyExternalColumnState:function(t){t&&(this.internalColumns=this.internalColumns.map(function(e){return z(z({},e),{},{visible:Object.prototype.hasOwnProperty.call(t,e.value)?t[e.value]:e.visible})}),this.$forceUpdate())},normalizeSortBy:function(t){return Array.isArray(t)?t:"string"==typeof t&&t?[t]:[]},normalizeSortDesc:function(t){return Array.isArray(t)?t:"boolean"==typeof t?[t]:[]},handleSortByUpdate:function(t){this.internalSortBy=this.normalizeSortBy(t),this.scheduleSortChangeEmit()},handleSortDescUpdate:function(t){Array.isArray(t)?this.internalSortDesc=t:this.internalSortDesc="boolean"==typeof t?[t]:[],this.scheduleSortChangeEmit()},scheduleSortChangeEmit:function(){var t=this;this.sortChangeTimer&&clearTimeout(this.sortChangeTimer),this.sortChangeTimer=setTimeout(function(){t.sortChangeTimer=null,t.emitSortChange()},0)},emitSortChange:function(){this.$emit("update:sortBy",this.internalSortBy),this.$emit("update:sortDesc",this.internalSortDesc),this.$emit("sort-change",{sortBy:this.internalSortBy,sortDesc:this.internalSortDesc,sorter:this.buildSorterPayload()}),this.request&&(this.currentPage=1,this.$emit("update:page",1),this.reload())},buildSorterPayload:function(){var t=this;if(!this.internalSortBy.length)return{};var e={};return this.internalSortBy.forEach(function(n,i){e[n]=t.internalSortDesc[i]?"desc":"asc"}),{sortBy:this.internalSortBy,sortDesc:this.internalSortDesc,order:e}},applySelectionState:function(){if(this.showSelectComputed){var t=this.getControlledRowKeys();t?this.syncSelectionByKeys(t):this.applyDefaultRowSelection()}else this.selectedItems.length&&(this.selectedItems=[],this.$emit("input",[]))},getControlledRowKeys:function(){return this.rowSelection&&Array.isArray(this.rowSelection.selectedRowKeys)?this.rowSelection.selectedRowKeys:null},syncSelectionByKeys:function(t){var e=this;if(Array.isArray(t)){var n=new Set(t),i=this.currentItems.filter(function(t){return n.has(t[e.rowKey])});this.selectedItems=i,this.$emit("input",i)}},applyDefaultRowSelection:function(){var t=this;if(!this.hasAppliedDefaultRowSelection&&this.rowSelection&&Array.isArray(this.rowSelection.defaultSelectedRowKeys)){var e=new Set(this.rowSelection.defaultSelectedRowKeys),n=this.currentItems.filter(function(n){return e.has(n[t.rowKey])});n.length&&(this.selectedItems=n,this.$emit("input",n)),this.hasAppliedDefaultRowSelection=!0}}}},B,[],!1,null,"85567b32",null).exports;var q=function(){var t=this,e=t._self._c;return e("v-dialog",{attrs:{value:t.visible,"max-width":t.maxWidth,persistent:"",fullscreen:t.isMobile},on:{input:t.handleDialogInput}},[e("v-card",[e("v-card-title",{staticClass:"d-flex align-center pa-4"},[e("span",[t._v(t._s(t.title))]),t._v(" "),e("v-spacer"),t._v(" "),e("v-icon",{on:{click:t.handleClose}},[t._v("mdi-close")])],1),t._v(" "),e("v-card-text",{staticClass:"pa-0"},[e("v-row",{style:t.contentStyle,attrs:{"no-gutters":""}},[e("v-col",{staticClass:"border-right",attrs:{cols:t.isMobile?12:7}},[t.showSearch||t.showSelectAll&&"multiple"===t.mode?e("div",{staticClass:"px-3 pt-3"},[t.showSearch?e("v-text-field",{staticClass:"mb-3",attrs:{placeholder:t.placeholder,"prepend-inner-icon":"mdi-magnify",outlined:"",dense:"","hide-details":"",clearable:""},model:{value:t.searchKeyword,callback:function(e){t.searchKeyword=e},expression:"searchKeyword"}}):t._e(),t._v(" "),t.showSelectAll&&"multiple"===t.mode?e("div",{staticClass:"mb-3 d-flex flex-wrap"},[e("v-btn",{staticClass:"mr-2 mb-2",attrs:{small:"",outlined:"",disabled:0===t.filteredAllNodes.length},on:{click:t.handleBatchSelect}},[e("v-icon",{attrs:{small:"",left:""}},[t._v("mdi-checkbox-multiple-marked")]),t._v("\n                "+t._s(t.isAllSelected?"取消全选":"全选当前")+"\n              ")],1)],1):t._e()],1):t._e(),t._v(" "),t.showSearch||t.showSelectAll&&"multiple"===t.mode?e("v-divider"):t._e(),t._v(" "),e("div",{style:t.listStyle},[e("div",{staticClass:"px-3 py-2",staticStyle:{height:"100%","overflow-y":"auto"}},[t.loading?e("div",{staticClass:"text-center py-8"},[e("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}})],1):0===t.filteredTreeData.length?e("div",{staticClass:"text-center grey--text py-8"},[e("v-icon",{attrs:{size:"48",color:"grey lighten-1"}},[t._v("mdi-file-tree")]),t._v(" "),e("div",{staticClass:"mt-2"},[t._v("未找到匹配的节点")])],1):e("div",t._l(t.filteredTreeData,function(n){return e("tree-node",{key:t.getNodeKey(n),attrs:{node:n,level:0,mode:t.mode,"allow-select-node":t.allowSelectNode,expandedNodes:t.expandedNodes,tempSelectedNodes:t.tempSelectedNodes,nodeKey:t.nodeKey,nodeLabel:t.nodeLabel,nodeChildren:t.nodeChildren,searchKeyword:t.searchKeyword,isNodeSelected:t.isNodeSelected,isNodeChildrenSelected:t.isNodeChildrenSelected},on:{"toggle-expand":t.toggleNodeExpand,"toggle-node":t.toggleNode,"select-single-node":t.selectSingleNode,"node-click":t.handleNodeClick}})}),1)])])],1),t._v(" "),"multiple"!==t.mode||t.isMobile?t._e():e("v-col",{attrs:{cols:t.isMobile?12:5}},[e("div",{staticClass:"pa-3",staticStyle:{height:"100%",display:"flex","flex-direction":"column"}},[e("div",{staticClass:"d-flex align-center mb-3"},[e("span",{staticClass:"text-subtitle-2"},[t._v("\n                已选: "+t._s(t.tempSelectedNodes.length)+"\n              ")]),t._v(" "),e("v-spacer"),t._v(" "),e("v-btn",{attrs:{text:"",small:"",color:"primary",disabled:0===t.tempSelectedNodes.length},on:{click:t.clearSelection}},[t._v("\n                清除\n              ")])],1),t._v(" "),e("v-divider",{staticClass:"mb-3"}),t._v(" "),e("div",{staticClass:"flex-grow-1",staticStyle:{"overflow-y":"auto"}},[0===t.tempSelectedNodes.length?e("div",{staticClass:"text-center py-8"},[e("v-icon",{attrs:{size:"64",color:"grey lighten-2"}},[t._v("mdi-checkbox-multiple-blank-outline")]),t._v(" "),e("div",{staticClass:"grey--text mt-2"},[t._v("暂无选中内容")])],1):e("div",t._l(t.tempSelectedNodes,function(n){return e("v-chip",{key:t.getNodeKey(n),staticClass:"ma-1",attrs:{close:"",small:""},on:{"click:close":function(e){return t.removeNodeFromTemp(n)}}},[e("v-icon",{attrs:{left:"",small:""}},[t._v("mdi-file-tree")]),t._v("\n                  "+t._s(t.getNodeLabel(n))+"\n                ")],1)}),1)])],1)])],1)],1),t._v(" "),e("v-divider"),t._v(" "),e("v-card-actions",{staticClass:"pa-4"},["multiple"===t.mode&&t.isMobile?e("div",{staticClass:"text-caption"},[t._v("\n        已选 "+t._s(t.tempSelectedNodes.length)+"\n      ")]):t._e(),t._v(" "),e("v-spacer"),t._v(" "),e("v-btn",{attrs:{text:""},on:{click:t.handleCancel}},[t._v("取消")]),t._v(" "),e("v-btn",{attrs:{color:"success",disabled:"single"===t.mode&&0===t.tempSelectedNodes.length},on:{click:t.handleConfirm}},[t._v("\n        确定\n      ")])],1)],1)],1)};function W(t){return W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},W(t)}function H(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function Y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?H(Object(n),!0).forEach(function(e){X(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function X(t,e,n){return(e=function(t){var e=function(t){if("object"!=W(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=W(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==W(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Q(t){return function(t){if(Array.isArray(t))return tt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Z(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(t,e){if(t){if("string"==typeof t)return tt(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tt(t,e):void 0}}function tt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}q._withStripped=!0;const et=i({name:"JhTreeSelect",components:{TreeNode:{name:"TreeNode",template:'\n    <div class="mb-1">\n      \x3c!-- 节点 --\x3e\n      <div class="d-flex align-center py-2 tree-item" :style="{ paddingLeft: (level * 16) + \'px\' }">\n        <v-checkbox\n          v-if="mode === \'multiple\' && !allowSelectNode"\n          :input-value="isNodeChildrenSelected(node)"\n          @change="$emit(\'toggle-node\', node)"\n          @click.stop\n          hide-details\n          dense\n          class="mr-2 mt-0"\n        ></v-checkbox>\n        <v-icon \n          class="mr-2" \n          small\n          @click="$emit(\'toggle-expand\', getNodeKey(node))"\n          style="cursor: pointer;"\n          v-if="hasChildren(node)"\n        >\n          {{ expandedNodes.includes(getNodeKey(node)) ? \'mdi-chevron-down\' : \'mdi-chevron-right\' }}\n        </v-icon>\n        <span v-else class="mr-2" style="width: 20px;"></span>\n        <v-icon small class="mr-2" color="primary">mdi-file-tree</v-icon>\n        <div class="flex-grow-1" @click="$emit(\'toggle-expand\', getNodeKey(node))" style="cursor: pointer;">\n          <div class="font-weight-medium">{{ getNodeLabel(node) }}</div>\n          <div class="text-caption grey--text" v-if="hasChildren(node)">\n            {{ getChildrenCount(node) }}个子节点\n          </div>\n        </div>\n        \x3c!-- 选择节点按钮 --\x3e\n        <v-btn\n          v-if="allowSelectNode && mode === \'multiple\'"\n          x-small\n          outlined\n          color="primary"\n          @click.stop="$emit(\'toggle-node\', node)"\n          class="ml-2"\n        >\n          <v-icon x-small left>mdi-check</v-icon>\n          {{ isNodeSelected(node) ? \'已选\' : \'选择\' }}\n        </v-btn>\n        <v-radio\n          v-else-if="allowSelectNode && mode === \'single\'"\n          :value="getNodeKey(node)"\n          :input-value="selectedNodeKey"\n          @click.stop="handleRadioClick(node)"\n          hide-details\n          dense\n          class="ml-2 mt-0"\n        ></v-radio>\n      </div>\n      \n      \x3c!-- 展开内容：子节点 --\x3e\n      <v-expand-transition>\n        <div v-show="expandedNodes.includes(getNodeKey(node))">\n          \x3c!-- 子节点（递归） --\x3e\n          <tree-node\n            v-for="child in getChildren(node)"\n            :key="getNodeKey(child)"\n            :node="child"\n            :level="level + 1"\n            :mode="mode"\n            :allow-select-node="allowSelectNode"\n            :expandedNodes="expandedNodes"\n            :tempSelectedNodes="tempSelectedNodes"\n            :nodeKey="nodeKey"\n            :nodeLabel="nodeLabel"\n            :nodeChildren="nodeChildren"\n            :searchKeyword="searchKeyword"\n            :isNodeSelected="isNodeSelected"\n            :isNodeChildrenSelected="isNodeChildrenSelected"\n            @toggle-expand="$emit(\'toggle-expand\', $event)"\n            @toggle-node="$emit(\'toggle-node\', $event)"\n            @select-single-node="$emit(\'select-single-node\', $event)"\n            @node-click="$emit(\'node-click\', $event)"\n          ></tree-node>\n        </div>\n      </v-expand-transition>\n    </div>\n  ',props:{node:{type:Object,required:!0},level:{type:Number,default:0},mode:String,allowSelectNode:Boolean,expandedNodes:Array,tempSelectedNodes:Array,nodeKey:String,nodeLabel:String,nodeChildren:String,searchKeyword:String,isNodeSelected:Function,isNodeChildrenSelected:Function},computed:{selectedNodeKey:function(){return this.tempSelectedNodes.length>0?this.getNodeKey(this.tempSelectedNodes[0]):null}},methods:{getNodeKey:function(t){return t[this.nodeKey]},getNodeLabel:function(t){return t[this.nodeLabel]||""},getChildren:function(t){var e=this,n=t[this.nodeChildren]||[];if(!this.searchKeyword)return n;var i=this.searchKeyword.toLowerCase();return n.filter(function(t){return e.getNodeLabel(t).toLowerCase().includes(i)||e.hasMatchingChildren(t,i)})},hasMatchingChildren:function(t,e){var n=this;return(t[this.nodeChildren]||[]).some(function(t){return n.getNodeLabel(t).toLowerCase().includes(e)||n.hasMatchingChildren(t,e)})},hasChildren:function(t){var e=t[this.nodeChildren]||[];return e&&e.length>0},getChildrenCount:function(t){var e=t[this.nodeChildren]||[];return e?e.length:0},handleRadioClick:function(t){this.$emit("select-single-node",t)}}}},props:{value:{type:Array,default:function(){return[]}},visible:{type:Boolean,default:!1},mode:{type:String,default:"multiple",validator:function(t){return["multiple","single"].includes(t)}},title:{type:String,default:"选择节点"},placeholder:{type:String,default:"搜索节点"},maxWidth:{type:String,default:"1000px"},data:{type:Array,default:function(){return[]}},nodeKey:{type:String,default:"id"},nodeLabel:{type:String,default:"label"},nodeChildren:{type:String,default:"children"},allowSelectNode:{type:Boolean,default:!1},showSearch:{type:Boolean,default:!0},showSelectAll:{type:Boolean,default:!0},loading:{type:Boolean,default:!1}},data:function(){return{isMobile:"undefined"!=typeof window&&window.innerWidth<600,currentTab:0,searchKeyword:"",tempSelectedNodes:[],expandedNodes:[]}},computed:{contentStyle:function(){return this.isMobile?"height: calc(100vh - 120px);":"height: 600px;"},listStyle:function(){var t=this.showSearch||this.showSelectAll&&"multiple"===this.mode?"calc(100% - 140px)":"calc(100% - 60px)";return"height: ".concat(t,";")},filteredTreeData:function(){if(!this.searchKeyword)return this.data;var t=this.searchKeyword.toLowerCase();return this.filterTreeRecursive(this.data,t)},filteredAllNodes:function(){var t=this,e=function(n){var i=[];return n.forEach(function(n){i.push(n);var r=n[t.nodeChildren]||[];r.length>0&&(i=i.concat(e(r)))}),i},n=e(this.data);if(!this.searchKeyword)return n;var i=this.searchKeyword.toLowerCase();return n.filter(function(e){return t.getNodeLabel(e).toLowerCase().includes(i)})},isAllSelected:function(){var t=this;return 0!==this.filteredAllNodes.length&&this.filteredAllNodes.every(function(e){return t.isNodeSelected(e)})}},watch:{visible:{immediate:!0,handler:function(t){t&&this.initDialog()}}},mounted:function(){"undefined"!=typeof window&&window.addEventListener("resize",this.handleResize)},beforeDestroy:function(){"undefined"!=typeof window&&window.removeEventListener("resize",this.handleResize)},methods:{handleResize:function(){this.isMobile=window.innerWidth<600},initDialog:function(){var t=this;this.tempSelectedNodes=Q(this.value||[]),this.searchKeyword="",this.expandedNodes=[],this.autoExpandSelectedNodes(),this.data.length>0&&(this.expandedNodes=this.data.slice(0,3).map(function(e){return t.getNodeKey(e)}))},autoExpandSelectedNodes:function(){var t=this,e=new Set(this.tempSelectedNodes.map(function(e){return t.getNodeKey(e)})),n=function(e,i){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=function(t){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=Z(t))){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,o=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return a=t.done,t},e:function(t){o=!0,r=t},f:function(){try{a||null==e.return||e.return()}finally{if(o)throw r}}}}(e);try{for(o.s();!(r=o.n()).done;){var l=r.value,s=t.getNodeKey(l),c=[].concat(Q(a),[s]);if(s===i)return c;var u=l[t.nodeChildren]||[];if(u.length>0){var d=n(u,i,c);if(d)return d}}}catch(t){o.e(t)}finally{o.f()}return null};e.forEach(function(e){var i=n(t.data,e);i&&i.forEach(function(e){return t.expandedNodes.push(e)})}),this.expandedNodes=Q(new Set(this.expandedNodes))},filterTreeRecursive:function(t,e){var n=this,i=[];return t.forEach(function(t){var r=n.getNodeLabel(t).toLowerCase().includes(e),a=t[n.nodeChildren]||[],o=a.length>0?n.filterTreeRecursive(a,e):[],l=o.length>0;(r||l)&&i.push(Y(Y({},t),{},X({},n.nodeChildren,o)))}),i},getNodeKey:function(t){return t[this.nodeKey]},getNodeLabel:function(t){return t[this.nodeLabel]||""},isNodeSelected:function(t){var e=this,n=this.getNodeKey(t);return this.tempSelectedNodes.some(function(t){return e.getNodeKey(t)===n})},isNodeChildrenSelected:function(t){var e=this,n=t[this.nodeChildren]||[];return 0!==n.length&&n.every(function(t){return e.isNodeSelected(t)})},toggleNodeExpand:function(t){var e=this.expandedNodes.indexOf(t);e>-1?this.expandedNodes.splice(e,1):this.expandedNodes.push(t)},toggleNode:function(t){var e=this;if("single"!==this.mode){var n=this.getNodeKey(t),i=this.tempSelectedNodes.findIndex(function(t){return e.getNodeKey(t)===n});i>-1?this.tempSelectedNodes.splice(i,1):this.tempSelectedNodes.push(t)}else this.selectSingleNode(t)},selectSingleNode:function(t){this.tempSelectedNodes=[t]},handleNodeClick:function(t){this.allowSelectNode?this.toggleNode(t):this.toggleNodeExpand(this.getNodeKey(t))},handleBatchSelect:function(){var t=this;this.isAllSelected?this.filteredAllNodes.forEach(function(e){var n=t.getNodeKey(e),i=t.tempSelectedNodes.findIndex(function(e){return t.getNodeKey(e)===n});i>-1&&t.tempSelectedNodes.splice(i,1)}):this.filteredAllNodes.forEach(function(e){t.isNodeSelected(e)||t.tempSelectedNodes.push(e)})},removeNodeFromTemp:function(t){var e=this,n=this.getNodeKey(t),i=this.tempSelectedNodes.findIndex(function(t){return e.getNodeKey(t)===n});i>-1&&this.tempSelectedNodes.splice(i,1)},clearSelection:function(){this.tempSelectedNodes=[]},handleDialogInput:function(t){this.$emit("update:visible",t)},handleClose:function(){this.handleCancel()},handleCancel:function(){this.$emit("update:visible",!1),this.$emit("cancel")},handleConfirm:function(){this.$emit("input",this.tempSelectedNodes),this.$emit("update:visible",!1),this.$emit("confirm",this.tempSelectedNodes)}}},q,[],!1,null,"4421993c",null).exports;var nt=function(){var t=this,e=t._self._c;return e("div",[e("v-app",{attrs:{"mobile-breakpoint":"sm"}},[t._t("menu"),t._v(" "),e("v-main",{staticClass:"mt-15"},[e("div",{staticClass:"jh-page-second-bar px-3 px-sm-8"},[e("v-row",{staticClass:"align-center",attrs:{"no-gutters":""}},[e("v-col",{attrs:{cols:"12",sm:"12",md:"4",xl:"3"}},[e("div",{staticClass:"py-4 text-body-1 font-weight-bold align-center d-flex align-center"},[t._v("\n            "+t._s(t.pageName)+"\n            "),t._v(" "),t.showHelpButton?e("v-icon",{staticClass:"black--text ml-1",attrs:{size:"15"},on:{click:function(e){return t.$emit("help-click")}}},[t._v("\n              mdi-help-circle\n            ")]):t._e()],1)]),t._v(" "),e("v-spacer"),t._v(" "),e("v-col",{staticClass:"pl-md-2 mb-2 mb-md-0 flex justify-end",attrs:{cols:"12",xs:"12",sm:"12",md:"8",xl:"9"}},[t._t("search-bar")],2)],1)],1),t._v(" "),e("div",{staticClass:"jh-page-body-container px-sm-8"},[e("v-row",{staticClass:"pa-0 ma-0"},[e("v-col",{staticClass:"pa-0",attrs:{cols:12}},[t._t("content")],2)],1)],1),t._v(" "),t._t("default")],2)],2),t._v(" "),e("jh-toast"),t._v(" "),e("jh-mask"),t._v(" "),e("jh-confirm-dialog")],1)};nt._withStripped=!0;const it=i({name:"JhPageContainer",props:{pageName:{type:String,required:!0,default:"页面标题"},showHelpButton:{type:Boolean,default:!0}}},nt,[],!1,null,null,null).exports;var rt=function(){var t=this,e=t._self._c;return e("div",{class:t.cardClasses,style:t.cardStyles},[t.hasHeader?e("div",{class:t.headerClasses},[e("div",{staticClass:"jh-card-header-left"},[t.title?e("div",{staticClass:"jh-card-title"},[t._v("\n        "+t._s(t.title)+"\n      ")]):t._e(),t._v(" "),t._t("title"),t._v(" "),t.tooltip?e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(n){var i=n.on,r=n.attrs;return[e("v-icon",t._g(t._b({staticClass:"ml-2",attrs:{small:""}},"v-icon",r,!1),i),[t._v("\n            mdi-help-circle-outline\n          ")])]}}],null,!1,732963286)},[t._v(" "),e("span",[t._v(t._s(t.tooltip))])]):t._e()],2),t._v(" "),t.extra||t.$slots.extra?e("div",{staticClass:"jh-card-extra"},[t._t("extra",function(){return[t._v(t._s(t.extra))]})],2):t._e(),t._v(" "),t.collapsible?e("v-btn",{staticClass:"ml-2",attrs:{icon:"",small:""},on:{click:t.toggleCollapse}},[e("v-icon",[t._v(t._s(t.isCollapsed?"mdi-chevron-down":"mdi-chevron-up"))])],1):t._e()],1):t._e(),t._v(" "),t.hasHeader&&t.headerBordered?e("v-divider"):t._e(),t._v(" "),t.tabs?e("v-tabs",{class:t.tabsClasses,attrs:{vertical:"left"===t.tabs.tabPosition||"right"===t.tabs.tabPosition},on:{change:t.handleTabChange},model:{value:t.activeTabKey,callback:function(e){t.activeTabKey=e},expression:"activeTabKey"}},t._l(t.tabPanes,function(n){return e("v-tab",{key:n.key},[t._v("\n      "+t._s(n.tab)+"\n    ")])}),1):t._e(),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.isCollapsed,expression:"!isCollapsed"}],class:t.bodyClasses,style:t.bodyStyles},[t.tabs?[e("v-tabs-items",{model:{value:t.activeTabKey,callback:function(e){t.activeTabKey=e},expression:"activeTabKey"}},t._l(t.tabPanes,function(n){return e("v-tab-item",{key:n.key},[t._t("tab-".concat(n.key),function(){return[t._v("\n            "+t._s(n.content)+"\n          ")]})],2)}),1)]:[t.loading?e("div",{staticClass:"jh-card-loading"},[e("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}})],1):t._t("default")]],2),t._v(" "),t.actions&&t.actions.length>0?[e("v-divider"),t._v(" "),e("div",{staticClass:"jh-card-actions"},t._l(t.actions,function(n,i){return e("div",{key:i,staticClass:"jh-card-action-item"},[e(n.component||"div",t._b({tag:"component",on:{click:n.onClick}},"component",n.props,!1),[n.icon?e("v-icon",[t._v(t._s(n.icon))]):t._e(),t._v(" "),n.text?e("span",[t._v(t._s(n.text))]):t._e()],1),t._v(" "),i<t.actions.length-1?e("v-divider",{staticClass:"mx-2",attrs:{vertical:""}}):t._e()],1)}),0)]:t._e()],2)};function at(t){return at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},at(t)}function ot(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function lt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ot(Object(n),!0).forEach(function(e){st(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ot(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function st(t,e,n){return(e=function(t){var e=function(t){if("object"!=at(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=at(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==at(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ct(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}rt._withStripped=!0;const ut=i({name:"JhCard",props:{title:{type:String,default:""},subTitle:{type:String,default:""},tooltip:{type:String,default:""},extra:{type:String,default:""},bordered:{type:Boolean,default:!0},headerBordered:{type:Boolean,default:!1},ghost:{type:Boolean,default:!1},collapsible:{type:Boolean,default:!1},defaultCollapsed:{type:Boolean,default:!1},size:{type:String,default:"default",validator:function(t){return["small","default"].includes(t)}},loading:{type:Boolean,default:!1},actions:{type:Array,default:function(){return[]}},layout:{type:String,default:"default",validator:function(t){return["default","center"].includes(t)}},direction:{type:String,default:"row",validator:function(t){return["row","column"].includes(t)}},split:{type:String,default:"",validator:function(t){return["","vertical","horizontal"].includes(t)}},colSpan:{type:[Number,String],default:24},gutter:{type:[Number,Array],default:0},tabs:{type:Object,default:null},hoverable:{type:Boolean,default:!1},bodyStyle:{type:Object,default:function(){return{}}},headStyle:{type:Object,default:function(){return{}}}},data:function(){var t;return{isCollapsed:this.defaultCollapsed,activeTabKey:(null===(t=this.tabs)||void 0===t?void 0:t.activeKey)||0,tabPanes:[]}},computed:{hasHeader:function(){return this.title||this.$slots.title||this.extra||this.$slots.extra||this.collapsible},cardClasses:function(){return["jh-card",{"jh-card--bordered":this.bordered,"jh-card--ghost":this.ghost,"jh-card--small":"small"===this.size,"jh-card--hoverable":this.hoverable,"jh-card--split-vertical":"vertical"===this.split,"jh-card--split-horizontal":"horizontal"===this.split,"jh-card--layout-center":"center"===this.layout}]},cardStyles:function(){var t,e,n={};if(24!==this.colSpan&&("number"==typeof this.colSpan?(n.flex="0 0 ".concat(this.colSpan/24*100,"%"),n.maxWidth="".concat(this.colSpan/24*100,"%")):"string"==typeof this.colSpan&&(this.colSpan.endsWith("%")||this.colSpan.endsWith("px"))&&(n.flex="0 0 ".concat(this.colSpan),n.maxWidth=this.colSpan)),this.gutter)if(Array.isArray(this.gutter)){var i=(t=this.gutter,e=2,function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,a,o,l=[],s=!0,c=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(i=a.call(n)).done)&&(l.push(i.value),l.length!==e);s=!0);}catch(t){c=!0,r=t}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw r}}return l}}(t,e)||function(t,e){if(t){if("string"==typeof t)return ct(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ct(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=i[0],a=i[1];r&&(n.marginLeft="".concat(r/2,"px")),r&&(n.marginRight="".concat(r/2,"px")),a&&(n.marginTop="".concat(a/2,"px")),a&&(n.marginBottom="".concat(a/2,"px"))}else n.gap="".concat(this.gutter,"px");return n},headerClasses:function(){return["jh-card-header",{"jh-card-header--small":"small"===this.size}]},bodyClasses:function(){return["jh-card-body",{"jh-card-body--small":"small"===this.size,"jh-card-body--ghost":this.ghost,"jh-card-body--center":"center"===this.layout}]},bodyStyles:function(){return lt(lt({},this.bodyStyle),{},{flexDirection:this.direction})},tabsClasses:function(){var t;return["jh-card-tabs",{"jh-card-tabs--card":"card"===(null===(t=this.tabs)||void 0===t?void 0:t.type)}]}},watch:{"tabs.activeKey":function(t){this.activeTabKey=t}},mounted:function(){this.tabs&&this.$slots.default&&this.collectTabPanes()},methods:{toggleCollapse:function(){this.isCollapsed=!this.isCollapsed,this.$emit("collapse",this.isCollapsed)},handleTabChange:function(t){var e;this.activeTabKey=t,this.$emit("tab-change",t),null!==(e=this.tabs)&&void 0!==e&&e.onChange&&this.tabs.onChange(t)},collectTabPanes:function(){var t=[];(this.$slots.default||[]).forEach(function(e,n){if(e.componentOptions&&"jh-card-tab-pane"===e.componentOptions.tag){var i=e.componentOptions.propsData||{};t.push({key:i.tabKey||n,tab:i.tab||"Tab ".concat(n+1),content:e})}}),this.tabPanes=t}}},rt,[],!1,null,"7e359408",null).exports;var dt=function(){var t=this,e=t._self._c;return e("v-overlay",{attrs:{value:t.value,opacity:t.opacity,color:t.color,"z-index":t.zIndex},on:{click:t.handleClick}},[t._t("default",function(){return[t.showLoading?e("v-progress-circular",{attrs:{size:t.loadingSize,width:t.loadingWidth,color:t.loadingColor,indeterminate:""}}):t._e()]})],2)};dt._withStripped=!0;const ft=i({name:"JhMask",props:{value:{type:Boolean,default:!1},color:{type:String,default:"#e3e3e3"},opacity:{type:[Number,String],default:.8,validator:function(t){var e=parseFloat(t);return e>=0&&e<=1}},zIndex:{type:[Number,String],default:300},showLoading:{type:Boolean,default:!1},loadingSize:{type:[Number,String],default:64},loadingWidth:{type:[Number,String],default:7},loadingColor:{type:String,default:"primary"},closeOnClick:{type:Boolean,default:!1},timeout:{type:Number,default:0}},data:function(){return{timer:null}},watch:{value:function(t){t&&this.timeout>0?this.startTimer():t||this.clearTimer()}},beforeDestroy:function(){this.clearTimer()},methods:{handleClick:function(){this.closeOnClick&&(this.$emit("input",!1),this.$emit("click"))},startTimer:function(){var t=this;this.clearTimer(),this.timer=setTimeout(function(){t.$emit("input",!1),t.$emit("timeout")},this.timeout)},clearTimer:function(){this.timer&&(clearTimeout(this.timer),this.timer=null)}}},dt,[],!1,null,"79554ce9",null).exports;var ht=function(){var t=this,e=t._self._c;return e("v-snackbar",{class:["jh-toast","jh-toast--".concat(t.type)],attrs:{color:t.currentColor,timeout:t.currentTimeout,top:t.position.includes("top"),bottom:t.position.includes("bottom"),left:t.position.includes("left"),right:t.position.includes("right"),vertical:t.vertical,elevation:t.elevation},on:{input:t.handleInput},scopedSlots:t._u([{key:"action",fn:function(n){var i=n.attrs;return[t.showCloseButton?e("v-btn",t._b({attrs:{color:t.closeButtonColor,text:"",small:""},on:{click:t.close}},"v-btn",i,!1),[t._v("\n      "+t._s(t.closeButtonText)+"\n    ")]):t._e(),t._v(" "),t.actionText?e("v-btn",t._b({attrs:{color:t.actionButtonColor,text:"",small:""},on:{click:t.handleAction}},"v-btn",i,!1),[t._v("\n      "+t._s(t.actionText)+"\n    ")]):t._e()]}}]),model:{value:t.isVisible,callback:function(e){t.isVisible=e},expression:"isVisible"}},[e("div",{staticClass:"jh-toast__content"},["loading"===t.type?e("v-progress-circular",{staticClass:"jh-toast__icon",attrs:{size:18,width:3,color:"white",indeterminate:""}}):t.currentIcon?e("v-icon",{staticClass:"jh-toast__icon",attrs:{color:t.iconColor}},[t._v("\n      "+t._s(t.currentIcon)+"\n    ")]):t._e(),t._v(" "),e("span",{staticClass:"jh-toast__message"},[t._v(t._s(t.currentMessage))])],1)])};ht._withStripped=!0;const pt=i({name:"JhToast",props:{value:{type:Boolean,default:!1},message:{type:String,default:""},type:{type:String,default:"success",validator:function(t){return["success","error","warning","info","loading"].includes(t)}},position:{type:String,default:"top",validator:function(t){return["top","bottom","top-left","top-right","bottom-left","bottom-right"].includes(t)}},timeout:{type:Number,default:3e3},color:{type:String,default:""},icon:{type:String,default:""},iconColor:{type:String,default:"white"},showCloseButton:{type:Boolean,default:!0},closeButtonText:{type:String,default:"关闭"},closeButtonColor:{type:String,default:"white"},actionText:{type:String,default:""},actionButtonColor:{type:String,default:"white"},vertical:{type:Boolean,default:!1},elevation:{type:[Number,String],default:24},maxLength:{type:Number,default:100}},data:function(){return{isVisible:!1}},computed:{currentMessage:function(){var t=this.message||"";return t.length>this.maxLength&&(t=t.substring(0,this.maxLength)+"..."),t},currentColor:function(){return this.color?this.color:{success:"success",error:"error",warning:"warning",info:"info",loading:"primary"}[this.type]||"success"},currentIcon:function(){return this.icon?this.icon:"loading"===this.type?"":{success:"mdi-check-circle",error:"mdi-alert-circle",warning:"mdi-alert",info:"mdi-information"}[this.type]||"mdi-check-circle"},currentTimeout:function(){return"loading"===this.type?-1:this.timeout}},watch:{value:function(t){this.isVisible=t},isVisible:function(t){t||this.$emit("input",!1)}},mounted:function(){this.isVisible=this.value},methods:{handleInput:function(t){this.$emit("input",t),t||this.$emit("close")},close:function(){this.isVisible=!1},handleAction:function(){this.$emit("action")}}},ht,[],!1,null,"0da7bef5",null).exports;var vt=function(){var t=this,e=t._self._c;return e("v-dialog",{attrs:{"max-width":t.maxWidth,persistent:t.persistent},on:{"click:outside":t.handleClickOutside},model:{value:t.isVisible,callback:function(e){t.isVisible=e},expression:"isVisible"}},[e("v-card",[t.title||t.$slots.title?e("v-card-title",[t._t("title",function(){return[t._v(t._s(t.title))]})],2):t._e(),t._v(" "),t.content||t.$slots.default?e("v-card-text",{class:t.contentClass},[t._t("default",function(){return[e("div",{domProps:{innerHTML:t._s(t.content)}})]})],2):t._e(),t._v(" "),e("v-card-actions",[e("v-spacer"),t._v(" "),t.showCancelButton?e("v-btn",{attrs:{color:t.cancelButtonColor,text:""!==t.cancelButtonText,disabled:t.loading},on:{click:t.handleCancel}},[t._v("\n        "+t._s(t.cancelButtonText||"取消")+"\n      ")]):t._e(),t._v(" "),e("v-btn",{attrs:{color:t.confirmButtonColor,text:""!==t.confirmButtonText,loading:t.loading},on:{click:t.handleConfirm}},[t._v("\n        "+t._s(t.confirmButtonText||"确定")+"\n      ")])],1)],1)],1)};function mt(){var t,e,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",r=n.toStringTag||"@@toStringTag";function a(n,i,r,a){var s=i&&i.prototype instanceof l?i:l,c=Object.create(s.prototype);return yt(c,"_invoke",function(n,i,r){var a,l,s,c=0,u=r||[],d=!1,f={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return a=e,l=0,s=t,f.n=n,o}};function h(n,i){for(l=n,s=i,e=0;!d&&c&&!r&&e<u.length;e++){var r,a=u[e],h=f.p,p=a[2];n>3?(r=p===i)&&(s=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=t):a[0]<=h&&((r=n<2&&h<a[1])?(l=0,f.v=i,f.n=a[1]):h<p&&(r=n<3||a[0]>i||i>p)&&(a[4]=n,a[5]=i,f.n=p,l=0))}if(r||n>1)return o;throw d=!0,i}return function(r,u,p){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&h(u,p),l=u,s=p;(e=l<2?t:s)||!d;){a||(l?l<3?(l>1&&(f.n=-1),h(l,s)):f.n=s:f.v=s);try{if(c=2,a){if(l||(r="next"),e=a[r]){if(!(e=e.call(a,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,l<2&&(l=0)}else 1===l&&(e=a.return)&&e.call(a),l<2&&(s=TypeError("The iterator does not provide a '"+r+"' method"),l=1);a=t}else if((e=(d=f.n<0)?s:n.call(i,f))!==o)break}catch(e){a=t,l=1,s=e}finally{c=1}}return{value:e,done:d}}}(n,r,a),!0),c}var o={};function l(){}function s(){}function c(){}e=Object.getPrototypeOf;var u=[][i]?e(e([][i]())):(yt(e={},i,function(){return this}),e),d=c.prototype=l.prototype=Object.create(u);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,yt(t,r,"GeneratorFunction")),t.prototype=Object.create(d),t}return s.prototype=c,yt(d,"constructor",c),yt(c,"constructor",s),s.displayName="GeneratorFunction",yt(c,r,"GeneratorFunction"),yt(d),yt(d,r,"Generator"),yt(d,i,function(){return this}),yt(d,"toString",function(){return"[object Generator]"}),(mt=function(){return{w:a,m:f}})()}function yt(t,e,n,i){var r=Object.defineProperty;try{r({},"",{})}catch(t){r=0}yt=function(t,e,n,i){function a(e,n){yt(t,e,function(t){return this._invoke(e,n,t)})}e?r?r(t,e,{value:n,enumerable:!i,configurable:!i,writable:!i}):t[e]=n:(a("next",0),a("throw",1),a("return",2))},yt(t,e,n,i)}function bt(t,e,n,i,r,a,o){try{var l=t[a](o),s=l.value}catch(t){return void n(t)}l.done?e(s):Promise.resolve(s).then(i,r)}function gt(t){return function(){var e=this,n=arguments;return new Promise(function(i,r){var a=t.apply(e,n);function o(t){bt(a,i,r,o,l,"next",t)}function l(t){bt(a,i,r,o,l,"throw",t)}o(void 0)})}}vt._withStripped=!0;const _t=i({name:"JhConfirmDialog",props:{value:{type:Boolean,default:!1},title:{type:String,default:"提示"},content:{type:String,default:""},contentClass:{type:String,default:"pa-6 text-pre-line"},maxWidth:{type:[String,Number],default:420},showCancelButton:{type:Boolean,default:!0},confirmButtonText:{type:String,default:"确定"},cancelButtonText:{type:String,default:"取消"},confirmButtonColor:{type:String,default:"primary"},cancelButtonColor:{type:String,default:"default"},persistent:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},beforeConfirm:{type:Function,default:null},beforeCancel:{type:Function,default:null}},data:function(){return{isVisible:!1}},watch:{value:function(t){this.isVisible=t},isVisible:function(t){t!==this.value&&this.$emit("input",t)}},mounted:function(){this.isVisible=this.value},methods:{handleConfirm:function(){var t=this;return gt(mt().m(function e(){return mt().w(function(e){for(;;)switch(e.n){case 0:if(!t.beforeConfirm){e.n=2;break}return e.n=1,t.beforeConfirm();case 1:if(!1!==e.v){e.n=2;break}return e.a(2);case 2:t.$emit("confirm"),t.loading||t.close();case 3:return e.a(2)}},e)}))()},handleCancel:function(){var t=this;return gt(mt().m(function e(){return mt().w(function(e){for(;;)switch(e.n){case 0:if(!t.beforeCancel){e.n=2;break}return e.n=1,t.beforeCancel();case 1:if(!1!==e.v){e.n=2;break}return e.a(2);case 2:t.$emit("cancel"),t.close();case 3:return e.a(2)}},e)}))()},handleClickOutside:function(){this.persistent||(this.$emit("click-outside"),this.$emit("cancel"))},close:function(){this.isVisible=!1},open:function(){this.isVisible=!0}}},vt,[],!1,null,"4d697b30",null).exports;var St=function(){var t=this,e=t._self._c;return e("v-form",{ref:t.formRef,class:t.formClasses,attrs:{"lazy-validation":t.lazyValidation}},[e("v-row",{class:t.rowClass},[t._l(t.visibleFields,function(n,i){return["group"===n.type?e("v-col",{key:"group-".concat(i),attrs:{cols:"12"}},[e("div",{staticClass:"jh-form-group-title",class:n.titleClass},[n.divider&&i>0?e("v-divider",{staticClass:"mb-4"}):t._e(),t._v(" "),n.title?e("h3",{staticClass:"text-h6 mb-2"},[t._v(t._s(n.title))]):t._e(),t._v(" "),n.description?e("p",{staticClass:"text-caption grey--text mb-3"},[t._v(t._s(n.description))]):t._e()],1)]):e("v-col",{key:n.key,class:t.getFieldColClass(n),attrs:{cols:t.getFieldCols(n),sm:t.getFieldSm(n),md:t.getFieldMd(n),lg:t.getFieldLg(n),xl:t.getFieldXl(n)}},[e("div",{class:t.getFieldWrapperClass(n)},[n.label&&t.showLabels&&("horizontal"===t.layout||"horizontal"===n.layout)?e("div",{class:t.getHorizontalLabelClass(n),style:t.getHorizontalLabelStyle(n)},[n.required&&t.showRequiredMark?e("span",{staticClass:"error--text mr-1"},[t._v("*")]):t._e(),t._v("\n            "+t._s(n.label)+"\n            "),n.tooltip?e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(n){var i=n.on,r=n.attrs;return[e("v-icon",t._g(t._b({staticClass:"ml-1",attrs:{small:""}},"v-icon",r,!1),i),[t._v("mdi-help-circle-outline")])]}}],null,!0)},[t._v(" "),e("span",[t._v(t._s(n.tooltip))])]):t._e()],1):t._e(),t._v(" "),e("div",{class:t.getFieldInputClass(n)},[n.label&&t.showLabels&&"horizontal"!==t.layout&&"horizontal"!==n.layout?e("div",{class:t.getVerticalLabelClass(n)},[n.required&&t.showRequiredMark?e("span",{staticClass:"error--text"},[t._v("*")]):t._e(),t._v("\n              "+t._s(n.label)+"\n              "),n.tooltip?e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(n){var i=n.on,r=n.attrs;return[e("v-icon",t._g(t._b({staticClass:"ml-1",attrs:{small:""}},"v-icon",r,!1),i),[t._v("mdi-help-circle-outline")])]}}],null,!0)},[t._v(" "),e("span",[t._v(t._s(n.tooltip))])]):t._e()],1):t._e(),t._v(" "),n.extra?e("div",{staticClass:"jh-field-extra text-caption grey--text mb-2"},[t._v("\n              "+t._s(n.extra)+"\n            ")]):t._e(),t._v(" "),t.isFieldReadonly(n)?e("div",{staticClass:"jh-form-readonly-text"},[t._v("\n              "+t._s(t.getReadonlyValue(n))+"\n            ")]):["text"!==n.type&&n.type?"textarea"===n.type?e("v-textarea",t._b({class:t.inputClass,attrs:{dense:t.getDense(n),filled:t.getFilled(n),outlined:t.getOutlined(n),rules:t.getRules(n),disabled:t.getFieldDisabled(n),readonly:n.readonly,placeholder:n.placeholder,rows:n.rows||3,"hide-details":n.hideDetails||t.hideDetails},on:{input:function(e){return t.handleInput(n.key,e)},change:function(e){return t.handleChange(n.key,e)},blur:function(e){return t.handleBlur(n.key,e)}},model:{value:t.formData[n.key],callback:function(e){t.$set(t.formData,n.key,e)},expression:"formData[field.key]"}},"v-textarea",n.props,!1)):"number"===n.type?e("v-text-field",t._b({class:t.inputClass,attrs:{type:"number",dense:t.getDense(n),"single-line":t.getSingleLine(n),filled:t.getFilled(n),outlined:t.getOutlined(n),rules:t.getRules(n),disabled:t.getFieldDisabled(n),readonly:n.readonly,placeholder:n.placeholder,"hide-details":n.hideDetails||t.hideDetails},on:{input:function(e){return t.handleInput(n.key,e)},change:function(e){return t.handleChange(n.key,e)},blur:function(e){return t.handleBlur(n.key,e)}},model:{value:t.formData[n.key],callback:function(e){t.$set(t.formData,n.key,e)},expression:"formData[field.key]"}},"v-text-field",n.props,!1)):"select"===n.type?e("v-select",t._b({class:t.inputClass,attrs:{dense:t.getDense(n),filled:t.getFilled(n),outlined:t.getOutlined(n),items:n.options||[],rules:t.getRules(n),disabled:t.getFieldDisabled(n),readonly:n.readonly,placeholder:n.placeholder,"item-text":n.itemText||"text","item-value":n.itemValue||"value",multiple:n.multiple,chips:n.chips,"hide-details":n.hideDetails||t.hideDetails},on:{input:function(e){return t.handleInput(n.key,e)},change:function(e){return t.handleChange(n.key,e)},blur:function(e){return t.handleBlur(n.key,e)}},model:{value:t.formData[n.key],callback:function(e){t.$set(t.formData,n.key,e)},expression:"formData[field.key]"}},"v-select",n.props,!1)):"autocomplete"===n.type?e("v-autocomplete",t._b({class:t.inputClass,attrs:{dense:t.getDense(n),filled:t.getFilled(n),outlined:t.getOutlined(n),items:n.options||[],rules:t.getRules(n),disabled:t.getFieldDisabled(n),readonly:n.readonly,placeholder:n.placeholder,"item-text":n.itemText||"text","item-value":n.itemValue||"value","hide-details":n.hideDetails||t.hideDetails},on:{input:function(e){return t.handleInput(n.key,e)},change:function(e){return t.handleChange(n.key,e)},blur:function(e){return t.handleBlur(n.key,e)}},model:{value:t.formData[n.key],callback:function(e){t.$set(t.formData,n.key,e)},expression:"formData[field.key]"}},"v-autocomplete",n.props,!1)):"date"===n.type?e("v-menu",{attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(i){var r=i.on,a=i.attrs;return[e("v-text-field",t._g(t._b({class:t.inputClass,attrs:{dense:t.getDense(n),filled:t.getFilled(n),outlined:t.getOutlined(n),rules:t.getRules(n),disabled:t.getFieldDisabled(n),placeholder:n.placeholder,"hide-details":n.hideDetails||t.hideDetails,readonly:""},model:{value:t.formData[n.key],callback:function(e){t.$set(t.formData,n.key,e)},expression:"formData[field.key]"}},"v-text-field",a,!1),r))]}}],null,!0),model:{value:t.dateMenus[n.key],callback:function(e){t.$set(t.dateMenus,n.key,e)},expression:"dateMenus[field.key]"}},[t._v(" "),e("v-date-picker",t._b({attrs:{locale:n.locale||"zh-cn"},on:{input:function(e){t.dateMenus[n.key]=!1,t.handleInput(n.key,t.formData[n.key])}},model:{value:t.formData[n.key],callback:function(e){t.$set(t.formData,n.key,e)},expression:"formData[field.key]"}},"v-date-picker",n.pickerProps,!1))],1):"time"===n.type?e("v-menu",{attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(i){var r=i.on,a=i.attrs;return[e("v-text-field",t._g(t._b({class:t.inputClass,attrs:{dense:t.getDense(n),filled:t.getFilled(n),outlined:t.getOutlined(n),rules:t.getRules(n),disabled:t.getFieldDisabled(n),placeholder:n.placeholder,"hide-details":n.hideDetails||t.hideDetails,readonly:""},model:{value:t.formData[n.key],callback:function(e){t.$set(t.formData,n.key,e)},expression:"formData[field.key]"}},"v-text-field",a,!1),r))]}}],null,!0),model:{value:t.timeMenus[n.key],callback:function(e){t.$set(t.timeMenus,n.key,e)},expression:"timeMenus[field.key]"}},[t._v(" "),e("v-time-picker",t._b({attrs:{format:"24hr"},on:{input:function(e){t.timeMenus[n.key]=!1,t.handleInput(n.key,t.formData[n.key])}},model:{value:t.formData[n.key],callback:function(e){t.$set(t.formData,n.key,e)},expression:"formData[field.key]"}},"v-time-picker",n.pickerProps,!1))],1):"switch"===n.type?e("v-switch",t._b({attrs:{label:n.switchLabel,disabled:t.getFieldDisabled(n),readonly:n.readonly,color:n.color||"success","hide-details":n.hideDetails||t.hideDetails},on:{change:function(e){return t.handleChange(n.key,e)}},model:{value:t.formData[n.key],callback:function(e){t.$set(t.formData,n.key,e)},expression:"formData[field.key]"}},"v-switch",n.props,!1)):"checkbox"===n.type?e("v-checkbox",t._b({attrs:{label:n.checkboxLabel,disabled:t.getFieldDisabled(n),readonly:n.readonly,color:n.color||"success","hide-details":n.hideDetails||t.hideDetails},on:{change:function(e){return t.handleChange(n.key,e)}},model:{value:t.formData[n.key],callback:function(e){t.$set(t.formData,n.key,e)},expression:"formData[field.key]"}},"v-checkbox",n.props,!1)):"radio"===n.type?e("v-radio-group",t._b({attrs:{rules:t.getRules(n),disabled:t.getFieldDisabled(n),readonly:n.readonly,row:!1!==n.row,"hide-details":n.hideDetails||t.hideDetails},on:{change:function(e){return t.handleChange(n.key,e)}},model:{value:t.formData[n.key],callback:function(e){t.$set(t.formData,n.key,e)},expression:"formData[field.key]"}},"v-radio-group",n.props,!1),t._l(n.options,function(t){return e("v-radio",{key:t.value,attrs:{label:t.text,value:t.value,color:n.color||"success"}})}),1):"slot"===n.type?t._t("field-".concat(n.key),null,{field:n,formData:t.formData,updateField:t.updateField}):t._e():e("v-text-field",t._b({class:t.inputClass,attrs:{dense:t.getDense(n),"single-line":t.getSingleLine(n),filled:t.getFilled(n),outlined:t.getOutlined(n),rules:t.getRules(n),disabled:t.getFieldDisabled(n),readonly:n.readonly,placeholder:n.placeholder,prefix:n.prefix,suffix:n.suffix,"hide-details":n.hideDetails||t.hideDetails},on:{input:function(e){return t.handleInput(n.key,e)},change:function(e){return t.handleChange(n.key,e)},blur:function(e){return t.handleBlur(n.key,e)}},model:{value:t.formData[n.key],callback:function(e){t.$set(t.formData,n.key,e)},expression:"formData[field.key]"}},"v-text-field",n.props,!1))]],2)])])]})],2),t._v(" "),t._t("actions",null,{formData:t.formData,validate:t.validate,resetForm:t.resetForm})],2)};function wt(){var t,e,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",r=n.toStringTag||"@@toStringTag";function a(n,i,r,a){var s=i&&i.prototype instanceof l?i:l,c=Object.create(s.prototype);return xt(c,"_invoke",function(n,i,r){var a,l,s,c=0,u=r||[],d=!1,f={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return a=e,l=0,s=t,f.n=n,o}};function h(n,i){for(l=n,s=i,e=0;!d&&c&&!r&&e<u.length;e++){var r,a=u[e],h=f.p,p=a[2];n>3?(r=p===i)&&(s=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=t):a[0]<=h&&((r=n<2&&h<a[1])?(l=0,f.v=i,f.n=a[1]):h<p&&(r=n<3||a[0]>i||i>p)&&(a[4]=n,a[5]=i,f.n=p,l=0))}if(r||n>1)return o;throw d=!0,i}return function(r,u,p){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&h(u,p),l=u,s=p;(e=l<2?t:s)||!d;){a||(l?l<3?(l>1&&(f.n=-1),h(l,s)):f.n=s:f.v=s);try{if(c=2,a){if(l||(r="next"),e=a[r]){if(!(e=e.call(a,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,l<2&&(l=0)}else 1===l&&(e=a.return)&&e.call(a),l<2&&(s=TypeError("The iterator does not provide a '"+r+"' method"),l=1);a=t}else if((e=(d=f.n<0)?s:n.call(i,f))!==o)break}catch(e){a=t,l=1,s=e}finally{c=1}}return{value:e,done:d}}}(n,r,a),!0),c}var o={};function l(){}function s(){}function c(){}e=Object.getPrototypeOf;var u=[][i]?e(e([][i]())):(xt(e={},i,function(){return this}),e),d=c.prototype=l.prototype=Object.create(u);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,xt(t,r,"GeneratorFunction")),t.prototype=Object.create(d),t}return s.prototype=c,xt(d,"constructor",c),xt(c,"constructor",s),s.displayName="GeneratorFunction",xt(c,r,"GeneratorFunction"),xt(d),xt(d,r,"Generator"),xt(d,i,function(){return this}),xt(d,"toString",function(){return"[object Generator]"}),(wt=function(){return{w:a,m:f}})()}function xt(t,e,n,i){var r=Object.defineProperty;try{r({},"",{})}catch(t){r=0}xt=function(t,e,n,i){function a(e,n){xt(t,e,function(t){return this._invoke(e,n,t)})}e?r?r(t,e,{value:n,enumerable:!i,configurable:!i,writable:!i}):t[e]=n:(a("next",0),a("throw",1),a("return",2))},xt(t,e,n,i)}function Ct(t,e,n,i,r,a,o){try{var l=t[a](o),s=l.value}catch(t){return void n(t)}l.done?e(s):Promise.resolve(s).then(i,r)}function kt(t){return function(){var e=this,n=arguments;return new Promise(function(i,r){var a=t.apply(e,n);function o(t){Ct(a,i,r,o,l,"next",t)}function l(t){Ct(a,i,r,o,l,"throw",t)}o(void 0)})}}function Dt(t){return function(t){if(Array.isArray(t))return jt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return jt(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jt(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function Ot(t){return Ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ot(t)}function It(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function Ft(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?It(Object(n),!0).forEach(function(e){Pt(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):It(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function Pt(t,e,n){return(e=function(t){var e=function(t){if("object"!=Ot(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Ot(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ot(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}St._withStripped=!0;const Tt=i({name:"JhForm",props:{fields:{type:Array,default:function(){return[]}},initialData:{type:Object,default:function(){return{}}},formRef:{type:String,default:"jhForm"},lazyValidation:{type:Boolean,default:!0},layout:{type:String,default:"vertical",validator:function(t){return["horizontal","vertical","inline","grid"].includes(t)}},showLabels:{type:Boolean,default:!0},labelPosition:{type:String,default:"top",validator:function(t){return["top","left"].includes(t)}},labelWidth:{type:[Number,String],default:"auto"},labelAlign:{type:String,default:"right",validator:function(t){return["left","right","center"].includes(t)}},showRequiredMark:{type:Boolean,default:!0},readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},defaultDense:{type:Boolean,default:!0},defaultFilled:{type:Boolean,default:!0},defaultOutlined:{type:Boolean,default:!1},defaultSingleLine:{type:Boolean,default:!0},defaultColsMd:{type:Number,default:6},hideDetails:{type:[Boolean,String],default:!1},labelClass:{type:String,default:"jh-input-label"},inputClass:{type:String,default:"jh-v-input"},rowClass:{type:String,default:""},validationRules:{type:Object,default:function(){return{require:[function(t){return!!t||"必填"}],email:[function(t){return!t||/.+@.+\..+/.test(t)||"邮箱格式不正确"}],phone:[function(t){return!t||/^1[3-9]\d{9}$/.test(t)||"手机号格式不正确"}],number:[function(t){return!t||!isNaN(t)||"请输入数字"}],integer:[function(t){return!t||Number.isInteger(Number(t))||"请输入整数"}]}}},submitter:{type:[Object,Boolean],default:void 0},onFinish:{type:Function,default:void 0},onFinishFailed:{type:Function,default:void 0},dateFormatter:{type:[String,Function,Boolean],default:"YYYY-MM-DD"},omitNil:{type:Boolean,default:!0},grid:{type:Boolean,default:!1},colProps:{type:Object,default:function(){return{}}}},data:function(){return{formData:{},dateMenus:{},timeMenus:{}}},computed:{formClasses:function(){return Pt(Pt(Pt({"jh-form":!0},"jh-form--".concat(this.layout),!0),"jh-form--readonly",this.readonly),"jh-form--disabled",this.disabled)},visibleFields:function(){var t=this;return this.fields.filter(function(e){return"function"==typeof e.visible?e.visible(t.formData):void 0===e.visible||e.visible})}},watch:{initialData:{handler:function(t){this.formData=Ft({},t)},immediate:!0,deep:!0}},mounted:function(){this.initFormData()},methods:{initFormData:function(){var t=Ft({},this.initialData);this.fields.forEach(function(e){void 0!==e.defaultValue&&void 0===t[e.key]&&(t[e.key]=e.defaultValue)}),this.formData=t},getFieldCols:function(t){return"inline"===this.layout?"auto":t.cols?"object"===Ot(t.cols)&&t.cols.xs||t.cols:12},getFieldSm:function(t){return"inline"===this.layout?"auto":t.cols&&"object"===Ot(t.cols)?t.cols.sm:12},getFieldMd:function(t){return"inline"===this.layout?"auto":t.cols&&"object"===Ot(t.cols)?t.cols.md||this.defaultColsMd:t.cols||this.defaultColsMd},getFieldLg:function(t){return"inline"===this.layout?"auto":t.cols&&"object"===Ot(t.cols)?t.cols.lg||t.cols.md||this.defaultColsMd:t.cols||this.defaultColsMd},getFieldXl:function(t){return"inline"===this.layout?"auto":t.cols&&"object"===Ot(t.cols)?t.cols.xl||t.cols.md||this.defaultColsMd:t.cols||this.defaultColsMd},getFieldColClass:function(t){return t.colClass||""},getFieldWrapperClass:function(t){var e=t.layout||this.layout;return"jh-field-wrapper ".concat("horizontal"===e?"d-flex align-center":"")},getHorizontalLabelClass:function(t){var e=t.labelAlign||this.labelAlign;return"jh-field-label jh-input-label jh-field-label--horizontal text-".concat(e," flex-shrink-0")},getHorizontalLabelStyle:function(t){var e=t.labelWidth||this.labelWidth;return{width:"number"==typeof e?"".concat(e,"px"):e,minWidth:"number"==typeof e?"".concat(e,"px"):e}},getVerticalLabelClass:function(t){return"jh-field-label jh-input-label jh-field-label--vertical mb-1"},getFieldInputClass:function(t){return"horizontal"===(t.layout||this.layout)?"jh-field-input flex-grow-1":"jh-field-input"},getFieldDisabled:function(t){return"function"==typeof t.disabled?t.disabled(this.formData):void 0!==t.disabled?t.disabled:this.disabled},isFieldReadonly:function(t){return"function"==typeof t.readonly?t.readonly(this.formData):void 0!==t.readonly?t.readonly:this.readonly},getReadonlyValue:function(t){var e=this.formData[t.key];if("function"==typeof t.readonlyRender)return t.readonlyRender(e,this.formData);if(("select"===t.type||"radio"===t.type)&&t.options){if(t.multiple&&Array.isArray(e))return e.map(function(e){var n=t.options.find(function(t){return t.value===e});return n?n.text:e}).join(", ");var n=t.options.find(function(t){return t.value===e});return n?n.text:e}return"switch"===t.type||"checkbox"===t.type?e?"是":"否":e||"-"},getDense:function(t){return void 0!==t.dense?t.dense:this.defaultDense},getFilled:function(t){return void 0!==t.filled?t.filled:this.defaultFilled},getOutlined:function(t){return void 0!==t.outlined?t.outlined:this.defaultOutlined},getSingleLine:function(t){return void 0!==t.singleLine?t.singleLine:this.defaultSingleLine},getRules:function(t){var e=this,n=[];return t.required&&n.push(function(e){return!!e||"".concat(t.label||"此字段","为必填项")}),t.rules&&(Array.isArray(t.rules)?n.push.apply(n,Dt(t.rules)):"string"==typeof t.rules&&t.rules.split("|").forEach(function(t){var i=t.trim();e.validationRules[i]&&n.push.apply(n,Dt(e.validationRules[i]))})),n},handleInput:function(t,e){this.$emit("input",t,e,this.formData),this.$emit("field-change",{key:t,value:e,formData:this.formData})},handleChange:function(t,e){this.$emit("change",t,e,this.formData),this.$emit("field-change",{key:t,value:e,formData:this.formData})},handleBlur:function(t,e){this.$emit("blur",t,e,this.formData)},updateField:function(t,e){this.$set(this.formData,t,e),this.handleChange(t,e)},getForm:function(){return this.$refs[this.formRef]},getFormData:function(){return Ft({},this.formData)},setFieldsValue:function(t){this.formData=Ft(Ft({},this.formData),t)},setFieldValue:function(t,e){this.$set(this.formData,t,e)},resetForm:function(){var t=this.$refs[this.formRef];t&&t.reset(),this.initFormData(),this.$emit("reset",this.formData)},resetValidation:function(){var t=this.$refs[this.formRef];t&&t.resetValidation()},validate:function(){var t=this;return kt(wt().m(function e(){var n,i;return wt().w(function(e){for(;;)switch(e.n){case 0:if(!(n=t.$refs[t.formRef])){e.n=2;break}return e.n=1,n.validate();case 1:return i=e.v,t.$emit("validate",i,t.formData),e.a(2,i);case 2:return e.a(2,!0)}},e)}))()},submit:function(){var t=this;return kt(wt().m(function e(){var n,i,r;return wt().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.n=1,t.validate();case 1:if(!(n=e.v)){e.n=6;break}if(i=t.getTransformedData(),t.$emit("submit",i),!t.onFinish){e.n=5;break}return e.p=2,e.n=3,t.onFinish(i);case 3:e.n=5;break;case 4:e.p=4,r=e.v,console.error("Form submit error:",r);case 5:e.n=7;break;case 6:t.onFinishFailed&&t.onFinishFailed(t.formData);case 7:return e.a(2,n)}},e,null,[[2,4]])}))()},getTransformedData:function(){var t=Ft({},this.formData);return this.fields.forEach(function(e){e.key&&e.transform&&"function"==typeof e.transform&&(t[e.key]=e.transform(t[e.key],t))}),this.omitNil&&Object.keys(t).forEach(function(e){null!==t[e]&&void 0!==t[e]&&""!==t[e]||delete t[e]}),t},getDependenciesValues:function(t){var e=this;return t&&Array.isArray(t)?t.map(function(t){return e.formData[t]}):[]},checkDependenciesChanged:function(t,e,n){if(!t.dependencies)return!1;for(var i=0;i<t.dependencies.length;i++)if(e[i]!==n[i])return!0;return!1}}},St,[],!1,null,"f26c0b90",null).exports;var $t=function(){var t=this,e=t._self._c;return e("v-dialog",{attrs:{"max-width":t.width,persistent:t.persistent,fullscreen:t.fullscreen},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.handleCancel.apply(null,arguments)}},model:{value:t.isShownInternal,callback:function(e){t.isShownInternal=e},expression:"isShownInternal"}},[e("v-card",[e("v-card-title",{staticClass:"d-flex align-center justify-space-between pa-4"},[e("span",{staticClass:"text-h6"},[t._v(t._s(t.title))]),t._v(" "),t.closable?e("v-btn",{attrs:{icon:"",small:""},on:{click:t.handleCancel}},[e("v-icon",[t._v("mdi-close")])],1):t._e()],1),t._v(" "),e("v-divider"),t._v(" "),e("v-card-text",{staticClass:"pa-6"},[t._t("content",function(){return[e("jh-form",{ref:"jhForm",attrs:{"form-ref":t.formRef,fields:t.fields,"initial-data":t.initialData,"validation-rules":t.validationRules,"default-cols-md":6},on:{"field-change":t.handleFieldChange},scopedSlots:t._u([t._l(t.slotFields,function(e){return{key:"field-".concat(e.key),fn:function(n){return[t._t("field-".concat(e.key),null,null,n)]}}})],null,!0)})]})],2),t._v(" "),e("v-divider"),t._v(" "),e("v-card-actions",{staticClass:"pa-4"},[e("v-spacer"),t._v(" "),e("v-btn",{attrs:{text:""},on:{click:t.handleCancel}},[t._v("\n        "+t._s(t.cancelText)+"\n      ")]),t._v(" "),t.showConfirmButton?e("v-btn",{attrs:{color:"success"},on:{click:t.handleConfirm}},[t._v("\n        "+t._s(t.confirmText)+"\n      ")]):t._e()],1)],1)],1)};function Bt(){var t,e,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",r=n.toStringTag||"@@toStringTag";function a(n,i,r,a){var s=i&&i.prototype instanceof l?i:l,c=Object.create(s.prototype);return At(c,"_invoke",function(n,i,r){var a,l,s,c=0,u=r||[],d=!1,f={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return a=e,l=0,s=t,f.n=n,o}};function h(n,i){for(l=n,s=i,e=0;!d&&c&&!r&&e<u.length;e++){var r,a=u[e],h=f.p,p=a[2];n>3?(r=p===i)&&(s=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=t):a[0]<=h&&((r=n<2&&h<a[1])?(l=0,f.v=i,f.n=a[1]):h<p&&(r=n<3||a[0]>i||i>p)&&(a[4]=n,a[5]=i,f.n=p,l=0))}if(r||n>1)return o;throw d=!0,i}return function(r,u,p){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&h(u,p),l=u,s=p;(e=l<2?t:s)||!d;){a||(l?l<3?(l>1&&(f.n=-1),h(l,s)):f.n=s:f.v=s);try{if(c=2,a){if(l||(r="next"),e=a[r]){if(!(e=e.call(a,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,l<2&&(l=0)}else 1===l&&(e=a.return)&&e.call(a),l<2&&(s=TypeError("The iterator does not provide a '"+r+"' method"),l=1);a=t}else if((e=(d=f.n<0)?s:n.call(i,f))!==o)break}catch(e){a=t,l=1,s=e}finally{c=1}}return{value:e,done:d}}}(n,r,a),!0),c}var o={};function l(){}function s(){}function c(){}e=Object.getPrototypeOf;var u=[][i]?e(e([][i]())):(At(e={},i,function(){return this}),e),d=c.prototype=l.prototype=Object.create(u);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,At(t,r,"GeneratorFunction")),t.prototype=Object.create(d),t}return s.prototype=c,At(d,"constructor",c),At(c,"constructor",s),s.displayName="GeneratorFunction",At(c,r,"GeneratorFunction"),At(d),At(d,r,"Generator"),At(d,i,function(){return this}),At(d,"toString",function(){return"[object Generator]"}),(Bt=function(){return{w:a,m:f}})()}function At(t,e,n,i){var r=Object.defineProperty;try{r({},"",{})}catch(t){r=0}At=function(t,e,n,i){function a(e,n){At(t,e,function(t){return this._invoke(e,n,t)})}e?r?r(t,e,{value:n,enumerable:!i,configurable:!i,writable:!i}):t[e]=n:(a("next",0),a("throw",1),a("return",2))},At(t,e,n,i)}function Rt(t,e,n,i,r,a,o){try{var l=t[a](o),s=l.value}catch(t){return void n(t)}l.done?e(s):Promise.resolve(s).then(i,r)}function Lt(t){return function(){var e=this,n=arguments;return new Promise(function(i,r){var a=t.apply(e,n);function o(t){Rt(a,i,r,o,l,"next",t)}function l(t){Rt(a,i,r,o,l,"throw",t)}o(void 0)})}}$t._withStripped=!0;const Nt=i({name:"JhModalForm",components:{JhForm:Tt},props:{value:{type:Boolean,default:!1},title:{type:String,default:"表单"},fields:{type:Array,default:function(){return[]}},initialData:{type:Object,default:function(){return{}}},width:{type:[Number,String],default:600},fullscreen:{type:Boolean,default:!1},persistent:{type:Boolean,default:!0},closable:{type:Boolean,default:!0},showConfirmButton:{type:Boolean,default:!0},confirmText:{type:String,default:"确认"},cancelText:{type:String,default:"取消"},formRef:{type:String,default:"modalForm"},validateBeforeConfirm:{type:Boolean,default:!0},validationRules:{type:Object,default:function(){return{require:[function(t){return!!t||"必填"}],email:[function(t){return!t||/.+@.+\..+/.test(t)||"邮箱格式不正确"}],phone:[function(t){return!t||/^1[3-9]\d{9}$/.test(t)||"手机号格式不正确"}],number:[function(t){return!t||!isNaN(t)||"请输入数字"}],integer:[function(t){return!t||Number.isInteger(Number(t))||"请输入整数"}]}}}},data:function(){return{isShownInternal:this.value}},computed:{slotFields:function(){return this.fields.filter(function(t){return"slot"===t.type})}},watch:{value:function(t){var e=this;this.isShownInternal=t,t&&this.$nextTick(function(){e.resetForm()})},isShownInternal:function(t){t||(this.$emit("input",!1),this.$emit("close"))}},methods:{handleCancel:function(){this.$emit("cancel"),this.isShownInternal=!1},handleConfirm:function(){var t=this;return Lt(Bt().m(function e(){return Bt().w(function(e){for(;;)switch(e.n){case 0:if(!t.validateBeforeConfirm){e.n=2;break}return e.n=1,t.validate();case 1:if(e.v){e.n=2;break}return e.a(2);case 2:t.$emit("confirm",t.getFormData());case 3:return e.a(2)}},e)}))()},handleFieldChange:function(t){this.$emit("field-change",t)},getJhForm:function(){return this.$refs.jhForm},getForm:function(){var t=this.getJhForm();return t?t.getForm():null},getFormData:function(){var t=this.getJhForm();return t?t.getFormData():{}},setFieldsValue:function(t){var e=this.getJhForm();e&&e.setFieldsValue(t)},setFieldValue:function(t,e){var n=this.getJhForm();n&&n.setFieldValue(t,e)},resetForm:function(){var t=this.getJhForm();t&&t.resetForm()},resetValidation:function(){var t=this.getJhForm();t&&t.resetValidation()},validate:function(){var t=this;return Lt(Bt().m(function e(){var n;return Bt().w(function(e){for(;;)switch(e.n){case 0:if(!(n=t.getJhForm())){e.n=2;break}return e.n=1,n.validate();case 1:return e.a(2,e.v);case 2:return e.a(2,!0)}},e)}))()}}},$t,[],!1,null,"9ad4133c",null).exports;var Mt=function(){var t=this,e=t._self._c;return e("v-navigation-drawer",{staticClass:"elevation-24",attrs:{fixed:"",temporary:"",right:"right"===t.position,left:"left"===t.position,width:t.width},model:{value:t.isShownInternal,callback:function(e){t.isShownInternal=e},expression:"isShownInternal"}},[e("v-row",{staticClass:"jh-drawer-header px-4 bg-white",attrs:{"no-gutters":"",align:"center"}},[e("span",{staticClass:"text-h7 font-weight-bold py-4"},[t._v(t._s(t.title))]),t._v(" "),e("v-spacer"),t._v(" "),e("div",{staticClass:"jh-drawer-action-btn-group"},[e("v-btn",{staticClass:"elevation-0 grey lighten-4",attrs:{small:""},on:{click:t.handleCancel}},[t._v("\n        "+t._s(t.cancelText)+"\n      ")]),t._v(" "),t._t("actions",function(){return[t.showConfirmButton?e("v-btn",{staticClass:"ml-2",attrs:{color:"success",small:""},on:{click:t.handleConfirm}},[t._v("\n          "+t._s(t.confirmText)+"\n        ")]):t._e()]})],2)],1),t._v(" "),e("v-divider",{staticClass:"jh-divider"}),t._v(" "),e("div",{staticClass:"px-4 pb-4"},[t._t("content",function(){return[e("jh-form",{ref:"jhForm",attrs:{"form-ref":t.formRef,fields:t.fields,"initial-data":t.initialData,"validation-rules":t.validationRules,"default-cols-md":3,"row-class":t.rowClass},on:{"field-change":t.handleFieldChange},scopedSlots:t._u([t._l(t.slotFields,function(e){return{key:"field-".concat(e.key),fn:function(n){return[t._t("field-".concat(e.key),null,null,n)]}}})],null,!0)})]})],2),t._v(" "),e("v-btn",{staticClass:"drawer-close-float-btn",attrs:{elevation:"0",color:"success",fab:"",absolute:"",top:"",left:"",small:"",tile:""},on:{click:t.handleCancel}},[e("v-icon",[t._v("mdi-close")])],1)],1)};function Et(){var t,e,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",r=n.toStringTag||"@@toStringTag";function a(n,i,r,a){var s=i&&i.prototype instanceof l?i:l,c=Object.create(s.prototype);return Vt(c,"_invoke",function(n,i,r){var a,l,s,c=0,u=r||[],d=!1,f={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return a=e,l=0,s=t,f.n=n,o}};function h(n,i){for(l=n,s=i,e=0;!d&&c&&!r&&e<u.length;e++){var r,a=u[e],h=f.p,p=a[2];n>3?(r=p===i)&&(s=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=t):a[0]<=h&&((r=n<2&&h<a[1])?(l=0,f.v=i,f.n=a[1]):h<p&&(r=n<3||a[0]>i||i>p)&&(a[4]=n,a[5]=i,f.n=p,l=0))}if(r||n>1)return o;throw d=!0,i}return function(r,u,p){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&h(u,p),l=u,s=p;(e=l<2?t:s)||!d;){a||(l?l<3?(l>1&&(f.n=-1),h(l,s)):f.n=s:f.v=s);try{if(c=2,a){if(l||(r="next"),e=a[r]){if(!(e=e.call(a,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,l<2&&(l=0)}else 1===l&&(e=a.return)&&e.call(a),l<2&&(s=TypeError("The iterator does not provide a '"+r+"' method"),l=1);a=t}else if((e=(d=f.n<0)?s:n.call(i,f))!==o)break}catch(e){a=t,l=1,s=e}finally{c=1}}return{value:e,done:d}}}(n,r,a),!0),c}var o={};function l(){}function s(){}function c(){}e=Object.getPrototypeOf;var u=[][i]?e(e([][i]())):(Vt(e={},i,function(){return this}),e),d=c.prototype=l.prototype=Object.create(u);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,Vt(t,r,"GeneratorFunction")),t.prototype=Object.create(d),t}return s.prototype=c,Vt(d,"constructor",c),Vt(c,"constructor",s),s.displayName="GeneratorFunction",Vt(c,r,"GeneratorFunction"),Vt(d),Vt(d,r,"Generator"),Vt(d,i,function(){return this}),Vt(d,"toString",function(){return"[object Generator]"}),(Et=function(){return{w:a,m:f}})()}function Vt(t,e,n,i){var r=Object.defineProperty;try{r({},"",{})}catch(t){r=0}Vt=function(t,e,n,i){function a(e,n){Vt(t,e,function(t){return this._invoke(e,n,t)})}e?r?r(t,e,{value:n,enumerable:!i,configurable:!i,writable:!i}):t[e]=n:(a("next",0),a("throw",1),a("return",2))},Vt(t,e,n,i)}function Kt(t,e,n,i,r,a,o){try{var l=t[a](o),s=l.value}catch(t){return void n(t)}l.done?e(s):Promise.resolve(s).then(i,r)}function zt(t){return function(){var e=this,n=arguments;return new Promise(function(i,r){var a=t.apply(e,n);function o(t){Kt(a,i,r,o,l,"next",t)}function l(t){Kt(a,i,r,o,l,"throw",t)}o(void 0)})}}Mt._withStripped=!0;const Jt=i({name:"JhDrawerForm",components:{JhForm:Tt},props:{value:{type:Boolean,default:!1},title:{type:String,default:"表单"},position:{type:String,default:"right",validator:function(t){return["left","right"].includes(t)}},width:{type:String,default:"90%"},showConfirmButton:{type:Boolean,default:!0},confirmText:{type:String,default:"确认"},cancelText:{type:String,default:"取消"},formRef:{type:String,default:"drawerForm"},validateBeforeConfirm:{type:Boolean,default:!0},fields:{type:Array,default:function(){return[]}},initialData:{type:Object,default:function(){return{}}},rowClass:{type:String,default:"mt-0"},validationRules:{type:Object,default:function(){return{require:[function(t){return!!t||"必填"}],email:[function(t){return!t||/.+@.+\..+/.test(t)||"邮箱格式不正确"}],phone:[function(t){return!t||/^1[3-9]\d{9}$/.test(t)||"手机号格式不正确"}],number:[function(t){return!t||!isNaN(t)||"请输入数字"}],integer:[function(t){return!t||Number.isInteger(Number(t))||"请输入整数"}]}}}},data:function(){return{isShownInternal:this.value}},computed:{slotFields:function(){return this.fields.filter(function(t){return"slot"===t.type})}},watch:{value:function(t){var e=this;this.isShownInternal=t,t&&this.$nextTick(function(){e.resetForm()})},isShownInternal:function(t){t||(this.$emit("input",!1),this.$emit("close"))}},methods:{handleCancel:function(){this.$emit("cancel"),this.isShownInternal=!1},handleConfirm:function(){var t=this;return zt(Et().m(function e(){return Et().w(function(e){for(;;)switch(e.n){case 0:if(!t.validateBeforeConfirm){e.n=2;break}return e.n=1,t.validate();case 1:if(e.v){e.n=2;break}return e.a(2);case 2:t.$emit("confirm",t.getFormData());case 3:return e.a(2)}},e)}))()},handleFieldChange:function(t){this.$emit("field-change",t)},getJhForm:function(){return this.$refs.jhForm},getForm:function(){var t=this.getJhForm();return t?t.getForm():null},getFormData:function(){var t=this.getJhForm();return t?t.getFormData():{}},setFieldsValue:function(t){var e=this.getJhForm();e&&e.setFieldsValue(t)},setFieldValue:function(t,e){var n=this.getJhForm();n&&n.setFieldValue(t,e)},resetForm:function(){var t=this.getJhForm();t&&t.resetForm()},resetValidation:function(){var t=this.getJhForm();t&&t.resetValidation()},validate:function(){var t=this;return zt(Et().m(function e(){var n;return Et().w(function(e){for(;;)switch(e.n){case 0:if(!(n=t.getJhForm())){e.n=2;break}return e.n=1,n.validate();case 1:return e.a(2,e.v);case 2:return e.a(2,!0)}},e)}))()}}},Mt,[],!1,null,"7a237adf",null).exports;var Gt=function(){var t=this,e=t._self._c;return e("div",{class:["jh-steps-form-container",{"is-vertical":t.vertical}],style:t.containerStyle},[t.vertical?[e("div",{staticClass:"jh-steps-form-stepper"},[e("div",{staticClass:"vertical-steps"},t._l(t.steps,function(n,i){return e("div",{key:"step-".concat(i),class:["vertical-step-item",{active:t.currentStepIndex===i+1,completed:t.currentStepIndex>i+1,editable:t.editable&&i<t.currentStepIndex-1}],on:{click:function(e){t.editable&&i<t.currentStepIndex-1&&t.handleStepClick(i)}}},[e("div",{staticClass:"step-number"},[t.currentStepIndex>i+1?e("v-icon",{attrs:{small:"",color:"success"}},[t._v("mdi-check")]):e("span",[t._v(t._s(i+1))])],1),t._v(" "),e("div",{staticClass:"step-info"},[e("div",{staticClass:"step-title"},[t._v(t._s(n.title))]),t._v(" "),n.subTitle?e("div",{staticClass:"step-subtitle"},[t._v(t._s(n.subTitle))]):t._e()])])}),0)]),t._v(" "),e("div",{staticClass:"jh-steps-form-content"},[e("v-card",{attrs:{flat:""}},[e("div",{staticClass:"step-content"},[t._l(t.steps,function(n,i){return[t.currentStepIndex===i+1?e("div",{key:"content-".concat(i)},[n.slot?t._t(n.slot,null,{step:n,index:i,formData:t.formData}):n.fields?e("jh-form",t._b({ref:"stepForm".concat(i),refInFor:!0,attrs:{fields:n.fields,"initial-data":t.formData["step".concat(i)]||{},"show-buttons":!1,outlined:t.outlined,dense:t.dense},on:{change:function(e){return t.handleStepFormChange(i,e)}}},"jh-form",t.mergedFormProps,!1)):e("div",[t._t("default",null,{step:n,index:i,formData:t.formData})],2)],2):t._e()]})],2),t._v(" "),t.submitter&&!1===t.submitter.render?t._e():e("div",{staticClass:"step-actions d-flex justify-space-between mt-6"},[t.submitter&&t.submitter.render?[t._t("submitter",function(){return[e(t.submitter.render,{tag:"component",attrs:{step:t.steps[t.currentStepIndex-1],index:t.currentStepIndex-1,onPrevious:t.handlePrevious,onNext:t.handleNext,onFinish:t.handleFinish,submitting:t.submitting,validating:t.validating}})]},{step:t.steps[t.currentStepIndex-1],index:t.currentStepIndex-1,onPrevious:t.handlePrevious,onNext:t.handleNext,onFinish:t.handleFinish,submitting:t.submitting,validating:t.validating})]:[t.currentStepIndex>1&&(!t.submitter||!1!==t.submitter.showPrevious)?e("v-btn",t._b({attrs:{text:"",disabled:t.submitting},on:{click:t.handlePrevious}},"v-btn",t.submitter&&t.submitter.previousButtonProps,!1),[t._v("\n              "+t._s(t.submitter&&t.submitter.previousText||t.previousButtonText)+"\n            ")]):e("v-spacer"),t._v(" "),e("div",[t.currentStepIndex<t.steps.length?e("v-btn",t._b({attrs:{color:"primary",loading:t.validating,disabled:t.submitting},on:{click:t.handleNext}},"v-btn",t.submitter&&t.submitter.nextButtonProps,!1),[t._v("\n                "+t._s(t.submitter&&t.submitter.nextText||t.nextButtonText)+"\n              ")]):e("v-btn",t._b({attrs:{color:"primary",loading:t.submitting},on:{click:t.handleFinish}},"v-btn",t.submitter&&t.submitter.submitButtonProps,!1),[t._v("\n                "+t._s(t.submitter&&t.submitter.submitText||t.finishButtonText)+"\n              ")])],1)]],2)])],1)]:[e("v-stepper",t._b({staticClass:"w-full",attrs:{"alt-labels":t.altLabels},model:{value:t.currentStepIndex,callback:function(e){t.currentStepIndex=e},expression:"currentStepIndex"}},"v-stepper",t.stepsProps,!1),[e("v-stepper-header",[t._l(t.steps,function(n,i){return[e("v-stepper-step",{key:"step-".concat(i),attrs:{complete:t.currentStepIndex>i+1,step:i+1,editable:t.editable&&i<t.currentStepIndex},on:{click:function(e){t.editable&&t.handleStepClick(i)}}},[t._v("\n            "+t._s(n.title)+"\n            "),n.subTitle?e("small",[t._v(t._s(n.subTitle))]):t._e()]),t._v(" "),i<t.steps.length-1?e("v-divider",{key:"divider-".concat(i)}):t._e()]})],2),t._v(" "),e("v-stepper-items",t._l(t.steps,function(n,i){return e("v-stepper-content",{key:"content-".concat(i),attrs:{step:i+1}},[e("div",{staticClass:"step-content"},[n.slot?t._t(n.slot,null,{step:n,index:i,formData:t.formData}):n.fields?e("jh-form",t._b({ref:"stepForm".concat(i),refInFor:!0,attrs:{fields:n.fields,"initial-data":t.formData["step".concat(i)]||{},"show-buttons":!1,outlined:t.outlined,dense:t.dense},on:{change:function(e){return t.handleStepFormChange(i,e)}}},"jh-form",t.mergedFormProps,!1)):e("div",[t._t("default",null,{step:n,index:i,formData:t.formData})],2)],2),t._v(" "),t.submitter&&!1===t.submitter.render?t._e():e("div",{staticClass:"step-actions d-flex justify-space-between mt-6"},[t.submitter&&t.submitter.render?[t._t("submitter",function(){return[e(t.submitter.render,{tag:"component",attrs:{step:n,index:i,onPrevious:t.handlePrevious,onNext:t.handleNext,onFinish:t.handleFinish,submitting:t.submitting,validating:t.validating}})]},{step:n,index:i,onPrevious:t.handlePrevious,onNext:t.handleNext,onFinish:t.handleFinish,submitting:t.submitting,validating:t.validating})]:[i>0&&(!t.submitter||!1!==t.submitter.showPrevious)?e("v-btn",t._b({attrs:{text:"",disabled:t.submitting},on:{click:t.handlePrevious}},"v-btn",t.submitter&&t.submitter.previousButtonProps,!1),[t._v("\n                "+t._s(t.submitter&&t.submitter.previousText||t.previousButtonText)+"\n              ")]):e("v-spacer"),t._v(" "),e("div",[i<t.steps.length-1?e("v-btn",t._b({attrs:{color:"primary",loading:t.validating,disabled:t.submitting},on:{click:t.handleNext}},"v-btn",t.submitter&&t.submitter.nextButtonProps,!1),[t._v("\n                  "+t._s(t.submitter&&t.submitter.nextText||t.nextButtonText)+"\n                ")]):e("v-btn",t._b({attrs:{color:"primary",loading:t.submitting},on:{click:t.handleFinish}},"v-btn",t.submitter&&t.submitter.submitButtonProps,!1),[t._v("\n                  "+t._s(t.submitter&&t.submitter.submitText||t.finishButtonText)+"\n                ")])],1)]],2)])}),1)],1)]],2)};function Ut(t){return Ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ut(t)}function qt(){var t,e,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",r=n.toStringTag||"@@toStringTag";function a(n,i,r,a){var s=i&&i.prototype instanceof l?i:l,c=Object.create(s.prototype);return Wt(c,"_invoke",function(n,i,r){var a,l,s,c=0,u=r||[],d=!1,f={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return a=e,l=0,s=t,f.n=n,o}};function h(n,i){for(l=n,s=i,e=0;!d&&c&&!r&&e<u.length;e++){var r,a=u[e],h=f.p,p=a[2];n>3?(r=p===i)&&(s=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=t):a[0]<=h&&((r=n<2&&h<a[1])?(l=0,f.v=i,f.n=a[1]):h<p&&(r=n<3||a[0]>i||i>p)&&(a[4]=n,a[5]=i,f.n=p,l=0))}if(r||n>1)return o;throw d=!0,i}return function(r,u,p){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&h(u,p),l=u,s=p;(e=l<2?t:s)||!d;){a||(l?l<3?(l>1&&(f.n=-1),h(l,s)):f.n=s:f.v=s);try{if(c=2,a){if(l||(r="next"),e=a[r]){if(!(e=e.call(a,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,l<2&&(l=0)}else 1===l&&(e=a.return)&&e.call(a),l<2&&(s=TypeError("The iterator does not provide a '"+r+"' method"),l=1);a=t}else if((e=(d=f.n<0)?s:n.call(i,f))!==o)break}catch(e){a=t,l=1,s=e}finally{c=1}}return{value:e,done:d}}}(n,r,a),!0),c}var o={};function l(){}function s(){}function c(){}e=Object.getPrototypeOf;var u=[][i]?e(e([][i]())):(Wt(e={},i,function(){return this}),e),d=c.prototype=l.prototype=Object.create(u);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,Wt(t,r,"GeneratorFunction")),t.prototype=Object.create(d),t}return s.prototype=c,Wt(d,"constructor",c),Wt(c,"constructor",s),s.displayName="GeneratorFunction",Wt(c,r,"GeneratorFunction"),Wt(d),Wt(d,r,"Generator"),Wt(d,i,function(){return this}),Wt(d,"toString",function(){return"[object Generator]"}),(qt=function(){return{w:a,m:f}})()}function Wt(t,e,n,i){var r=Object.defineProperty;try{r({},"",{})}catch(t){r=0}Wt=function(t,e,n,i){function a(e,n){Wt(t,e,function(t){return this._invoke(e,n,t)})}e?r?r(t,e,{value:n,enumerable:!i,configurable:!i,writable:!i}):t[e]=n:(a("next",0),a("throw",1),a("return",2))},Wt(t,e,n,i)}function Ht(t,e,n,i,r,a,o){try{var l=t[a](o),s=l.value}catch(t){return void n(t)}l.done?e(s):Promise.resolve(s).then(i,r)}function Yt(t){return function(){var e=this,n=arguments;return new Promise(function(i,r){var a=t.apply(e,n);function o(t){Ht(a,i,r,o,l,"next",t)}function l(t){Ht(a,i,r,o,l,"throw",t)}o(void 0)})}}function Xt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function Qt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Xt(Object(n),!0).forEach(function(e){Zt(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Xt(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function Zt(t,e,n){return(e=function(t){var e=function(t){if("object"!=Ut(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Ut(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ut(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Gt._withStripped=!0;const te=i({name:"JhStepsForm",components:{JhForm:Tt},props:{steps:{type:Array,required:!0,default:function(){return[]}},initialStep:{type:Number,default:0},value:{type:Number,default:null},current:{type:Number,default:null},editable:{type:Boolean,default:!1},vertical:{type:Boolean,default:!1},altLabels:{type:Boolean,default:!1},outlined:{type:Boolean,default:!0},dense:{type:Boolean,default:!1},submitting:{type:Boolean,default:!1},previousButtonText:{type:String,default:"上一步"},nextButtonText:{type:String,default:"下一步"},finishButtonText:{type:String,default:"完成"},validateStep:{type:Function,default:null},transformBeforeFinish:{type:Function,default:null},onCurrentChange:{type:Function,default:null},onFormChange:{type:Function,default:null},stepsProps:{type:Object,default:function(){return{}}},formProps:{type:Object,default:function(){return{}}},stepFormRender:{type:Function,default:null},submitter:{type:[Object,Boolean],default:null},containerStyle:{type:[Object,String],default:null}},data:function(){return{currentStepIndex:(null!==this.current?this.current:null!==this.value?this.value:this.initialStep)+1,formData:{},validating:!1,formMapRef:{}}},computed:{mergedFormProps:function(){return Qt(Qt({},this.formProps),{},{outlined:this.outlined,dense:this.dense})}},watch:{value:function(t){null!==t&&t+1!==this.currentStepIndex&&(this.currentStepIndex=t+1)},current:function(t){null!==t&&t+1!==this.currentStepIndex&&(this.currentStepIndex=t+1)},currentStepIndex:function(t,e){var n=t-1;this.$emit("input",n),this.$emit("update:current",n),this.$emit("step-change",{current:n,step:this.steps[n]}),this.onCurrentChange&&void 0!==e&&this.onCurrentChange(n)}},mounted:function(){this.updateFormMapRef()},updated:function(){this.updateFormMapRef()},methods:{handleStepClick:function(t){this.editable&&t<this.currentStepIndex-1&&(this.currentStepIndex=t+1)},handleStepFormChange:function(t,e){this.$set(this.formData,"step".concat(t),e),this.$emit("change",this.formData),this.onFormChange&&this.onFormChange({stepIndex:t,values:e,allValues:this.formData})},updateFormMapRef:function(){var t=this,e={};this.steps.forEach(function(n,i){if(n.fields){var r=t.$refs["stepForm".concat(i)];r&&r[0]&&(e[i]=r[0])}}),this.formMapRef=e},handlePrevious:function(){this.currentStepIndex>1&&this.currentStepIndex--},handleNext:function(){var t=this;return Yt(qt().m(function e(){var n;return qt().w(function(e){for(;;)switch(e.n){case 0:return n=t.currentStepIndex-1,e.n=1,t.validateCurrentStep(n);case 1:e.v&&t.currentStepIndex++;case 2:return e.a(2)}},e)}))()},handleFinish:function(){var t=this;return Yt(qt().m(function e(){var n,i;return qt().w(function(e){for(;;)switch(e.n){case 0:return n=t.currentStepIndex-1,e.n=1,t.validateCurrentStep(n);case 1:if(e.v){e.n=2;break}return e.a(2);case 2:i=Qt({},t.formData),t.transformBeforeFinish&&(i=t.transformBeforeFinish(i)),t.$emit("finish",i);case 3:return e.a(2)}},e)}))()},validateCurrentStep:function(t){var e=this;return Yt(qt().m(function n(){var i,r,a;return qt().w(function(n){for(;;)switch(n.p=n.n){case 0:if(e.validating=!0,n.p=1,!(i=e.steps[t]).fields){n.n=3;break}if(!(r=e.$refs["stepForm".concat(t)])||!r[0]){n.n=3;break}return n.n=2,r[0].validate();case 2:if(n.v){n.n=3;break}return n.a(2,!1);case 3:if(!e.validateStep){n.n=5;break}return n.n=4,e.validateStep({step:i,stepIndex:t,formData:e.formData});case 4:if(!1!==n.v){n.n=5;break}return n.a(2,!1);case 5:return n.a(2,!0);case 6:return n.p=6,a=n.v,console.error("步骤验证失败:",a),n.a(2,!1);case 7:return n.p=7,e.validating=!1,n.f(7);case 8:return n.a(2)}},n,null,[[1,6,7,8]])}))()},goToStep:function(t){t>=0&&t<this.steps.length&&(this.currentStepIndex=t+1)},reset:function(){var t=this;this.currentStepIndex=this.initialStep+1,this.formData={},this.steps.forEach(function(e,n){if(e.fields){var i=t.$refs["stepForm".concat(n)];i&&i[0]&&i[0].resetForm()}})},getFormData:function(){return Qt({},this.formData)},setFormData:function(t){this.formData=Qt({},t)},getFormMapRef:function(){return this.formMapRef},getStepFormRef:function(t){return this.formMapRef[t]||null},validateAll:function(){var t=this;return Yt(qt().m(function e(){var n,i,r;return qt().w(function(e){for(;;)switch(e.n){case 0:n=[],i=0;case 1:if(!(i<t.steps.length)){e.n=4;break}return e.n=2,t.validateCurrentStep(i);case 2:r=e.v,n.push(r);case 3:i++,e.n=1;break;case 4:return e.a(2,n.every(function(t){return t}))}},e)}))()}}},Gt,[],!1,null,"7e20b247",null).exports;function ee(t){return ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ee(t)}function ne(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function ie(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ne(Object(n),!0).forEach(function(e){re(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ne(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function re(t,e,n){return(e=function(t){var e=function(t){if("object"!=ee(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=ee(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ee(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ae=function(){var t=this,e=t._self._c;return e("div",{class:t.formListClasses},[t.title||t.description||t.$slots.header?e("div",{staticClass:"jh-form-list-header"},[t._t("header",function(){return[t.title?e("h3",{staticClass:"text-h6 mb-2"},[t._v(t._s(t.title))]):t._e(),t._v(" "),t.description?e("p",{staticClass:"text-caption grey--text mb-0"},[t._v(t._s(t.description))]):t._e()]})],2):t._e(),t._v(" "),0===t.listData.length?e("div",{staticClass:"jh-form-list-empty"},[t._t("empty",function(){return[e("v-icon",{attrs:{size:"48",color:"grey lighten-1"}},[t._v("mdi-inbox")]),t._v(" "),e("p",{staticClass:"grey--text mt-2"},[t._v("暂无数据")])]})],2):"card"===t.mode?e("div",{ref:"listBody",staticClass:"jh-form-list-body jh-form-list-body--card"},t._l(t.listData,function(n,i){return e("v-card",t._b({key:n.__id__,staticClass:"jh-form-list-item jh-form-list-item--card mb-4",class:t.getItemClasses(i)},"v-card",t.cardProps,!1),[e("v-card-title",{staticClass:"jh-form-list-item-header py-2 px-4"},[e("div",{staticClass:"d-flex align-center"},[!t.sortable||t.disabled||t.readonly?t._e():e("v-icon",{staticClass:"jh-form-list-drag-handle mr-2",attrs:{small:""}},[t._v("\n            mdi-drag\n          ")]),t._v(" "),t.collapsible?e("v-btn",{staticClass:"mr-2",attrs:{icon:"","x-small":""},on:{click:function(e){return t.toggleCollapse(n)}}},[e("v-icon",{attrs:{small:""}},[t._v("\n              "+t._s(t.isCollapsed(n)?"mdi-chevron-down":"mdi-chevron-up")+"\n            ")])],1):t._e(),t._v(" "),t.showIndex&&t.alwaysShowItemLabel?e("span",{staticClass:"jh-form-list-item-index"},[t._v("\n            #"+t._s(i+1)+"\n          ")]):t._e()],1),t._v(" "),e("v-spacer"),t._v(" "),!t.showItemActions||t.disabled||t.readonly?t._e():e("div",{staticClass:"jh-form-list-item-actions"},[t._t("item-actions",function(){return[t.actionRender?[e({render:function(){return t.renderActionButtons(n,i)}},{tag:"component"})]:[t.copyable?e("v-btn",{attrs:{icon:"",small:"",title:"复制"},on:{click:function(e){return t.copyItem(i)}}},[e("v-icon",{attrs:{small:""}},[t._v("mdi-content-copy")])],1):t._e(),t._v(" "),e("v-btn",{attrs:{icon:"",small:"",color:"error",disabled:t.listData.length<=t.min,title:"删除"},on:{click:function(e){return t.removeItem(i)}}},[e("v-icon",{attrs:{small:""}},[t._v("mdi-delete")])],1)]]},{item:n,index:i,removeItem:t.removeItem,copyItem:t.copyItem})],2)],1),t._v(" "),t.isCollapsed(n)?t._e():e("v-divider"),t._v(" "),e("v-expand-transition",[e("v-card-text",{directives:[{name:"show",rawName:"v-show",value:!t.isCollapsed(n),expression:"!isCollapsed(item)"}],staticClass:"pa-4"},[t._t("item",function(){return[e("jh-form",{ref:"itemForm_".concat(i),refInFor:!0,attrs:{fields:t.fields,"initial-data":n,layout:t.itemLayout,"label-width":t.itemLabelWidth,dense:t.dense,outlined:t.outlined,disabled:t.disabled,readonly:t.readonly,"hide-details":!1},on:{"field-change":function(e){return t.handleItemFieldChange(i,e)}},scopedSlots:t._u([t._l(t.fields,function(e){return{key:"field-".concat(e.key),fn:function(r){return[t._t("field-".concat(e.key),null,null,ie(ie({},r),{},{index:i,item:n}))]}}})],null,!0)})]},{item:n,index:i,fields:t.fields,updateItem:function(e,n){return t.updateItemField(i,e,n)}})],2)],1),t._v(" "),t.validationErrors[i]&&!t.isCollapsed(n)?e("v-alert",{staticClass:"mx-4 mb-3",attrs:{type:"error",dense:"",text:""}},[t._v("\n        "+t._s(t.validationErrors[i])+"\n      ")]):t._e()],1)}),1):"table"===t.mode?e("div",{staticClass:"jh-form-list-body jh-form-list-body--table"},[e("v-simple-table",{attrs:{dense:t.dense}},[e("thead",[e("tr",[t.showIndex?e("th",{staticClass:"text-center",staticStyle:{width:"60px"}},[t._v("#")]):t._e(),t._v(" "),!t.sortable||t.disabled||t.readonly?t._e():e("th",{staticStyle:{width:"40px"}}),t._v(" "),t._l(t.fields,function(n){return e("th",{key:n.key},[n.required?e("span",{staticClass:"error--text mr-1"},[t._v("*")]):t._e(),t._v("\n            "+t._s(n.label)+"\n          ")])}),t._v(" "),!t.showItemActions||t.disabled||t.readonly?t._e():e("th",{staticClass:"text-center",style:{width:t.actionColumn.width+"px"}},[t._v("\n            操作\n          ")])],2)]),t._v(" "),e("tbody",{ref:"listBody"},t._l(t.listData,function(n,i){return e("tr",{key:n.__id__,class:t.getItemClasses(i)},[t.showIndex?e("td",{staticClass:"text-center"},[t._v(t._s(i+1))]):t._e(),t._v(" "),!t.sortable||t.disabled||t.readonly?t._e():e("td",{staticClass:"text-center"},[e("v-icon",{staticClass:"jh-form-list-drag-handle",attrs:{small:""}},[t._v("mdi-drag")])],1),t._v(" "),t._l(t.fields,function(r){return e("td",{key:r.key},[t._t("field-".concat(r.key),function(){return[e(t.getFieldComponent(r),t._b({tag:"component",attrs:{dense:t.dense,outlined:t.outlined,disabled:t.disabled||t.getFieldDisabled(r,n),readonly:t.readonly,placeholder:r.placeholder,"hide-details":!0},on:{input:function(e){return t.handleItemFieldChange(i,{key:r.key,value:e})}},model:{value:n[r.key],callback:function(e){t.$set(n,r.key,e)},expression:"item[field.key]"}},"component",t.getFieldProps(r),!1))]},{item:n,index:i,field:r,updateItem:function(e,n){return t.updateItemField(i,e,n)}})],2)}),t._v(" "),!t.showItemActions||t.disabled||t.readonly?t._e():e("td",{staticClass:"text-center"},[t._t("item-actions",function(){return[t.copyable?e("v-btn",{staticClass:"mr-1",attrs:{icon:"","x-small":"",title:"复制"},on:{click:function(e){return t.copyItem(i)}}},[e("v-icon",{attrs:{"x-small":""}},[t._v("mdi-content-copy")])],1):t._e(),t._v(" "),e("v-btn",{attrs:{icon:"","x-small":"",color:"error",disabled:t.listData.length<=t.min,title:"删除"},on:{click:function(e){return t.removeItem(i)}}},[e("v-icon",{attrs:{"x-small":""}},[t._v("mdi-delete")])],1)]},{item:n,index:i,removeItem:t.removeItem,copyItem:t.copyItem})],2)],2)}),0)])],1):"inline"===t.mode?e("div",{ref:"listBody",staticClass:"jh-form-list-body jh-form-list-body--inline d-flex flex-wrap align-center"},t._l(t.listData,function(n,i){return e("div",{key:n.__id__,staticClass:"jh-form-list-item jh-form-list-item--inline mr-2 mb-2",class:t.getItemClasses(i)},[t._t("item",function(){return[e("v-chip",{attrs:{close:!t.disabled&&!t.readonly&&t.listData.length>t.min,draggable:t.sortable&&!t.disabled&&!t.readonly},on:{"click:close":function(e){return t.removeItem(i)}}},[!t.sortable||t.disabled||t.readonly?t._e():e("v-icon",{staticClass:"jh-form-list-drag-handle mr-1",attrs:{"x-small":""}},[t._v("\n            mdi-drag\n          ")]),t._v("\n          "+t._s(t.getInlineItemDisplay(n))+"\n        ")],1)]},{item:n,index:i,fields:t.fields,updateItem:function(e,n){return t.updateItemField(i,e,n)}})],2)}),0):t._e(),t._v(" "),t.validationErrors._list?e("v-alert",{staticClass:"mt-3",attrs:{type:"error",dense:"",text:""}},[t._v("\n    "+t._s(t.validationErrors._list)+"\n  ")]):t._e(),t._v(" "),t.showMaxLimitAlert?e("v-alert",{staticClass:"mt-3",attrs:{type:"warning",dense:"",text:"",dismissible:""},on:{input:function(e){t.showMaxLimitAlert=!1}}},[t._v("\n    "+t._s(t.maxLimitText)+" (最大: "+t._s(t.max)+")\n  ")]):t._e(),t._v(" "),t.showMinLimitAlert?e("v-alert",{staticClass:"mt-3",attrs:{type:"warning",dense:"",text:"",dismissible:""},on:{input:function(e){t.showMinLimitAlert=!1}}},[t._v("\n    "+t._s(t.minLimitText)+" (最小: "+t._s(t.min)+")\n  ")]):t._e(),t._v(" "),t.disabled||t.readonly||!1===t.computedCreatorButtonProps?t._e():e("div",{staticClass:"jh-form-list-footer mt-4"},[t._t("footer",function(){return[e("v-btn",t._b({attrs:{disabled:!t.canAdd},on:{click:function(e){return t.addItem()}}},"v-btn",t.computedCreatorButtonProps,!1),[e("v-icon",{attrs:{left:""}},[t._v("mdi-plus")]),t._v("\n        "+t._s(t.computedCreatorButtonProps.text||t.addButtonText)+"\n      ")],1)]},{addItem:t.addItem,canAdd:t.canAdd})],2)],1)};ae._withStripped=!0;var oe=["__id__"],le=["__id__"],se=["__id__"];function ce(t){return ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ce(t)}function ue(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return de(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?de(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){l=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw a}}}}function de(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function fe(){var t,e,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",r=n.toStringTag||"@@toStringTag";function a(n,i,r,a){var s=i&&i.prototype instanceof l?i:l,c=Object.create(s.prototype);return he(c,"_invoke",function(n,i,r){var a,l,s,c=0,u=r||[],d=!1,f={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return a=e,l=0,s=t,f.n=n,o}};function h(n,i){for(l=n,s=i,e=0;!d&&c&&!r&&e<u.length;e++){var r,a=u[e],h=f.p,p=a[2];n>3?(r=p===i)&&(s=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=t):a[0]<=h&&((r=n<2&&h<a[1])?(l=0,f.v=i,f.n=a[1]):h<p&&(r=n<3||a[0]>i||i>p)&&(a[4]=n,a[5]=i,f.n=p,l=0))}if(r||n>1)return o;throw d=!0,i}return function(r,u,p){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&h(u,p),l=u,s=p;(e=l<2?t:s)||!d;){a||(l?l<3?(l>1&&(f.n=-1),h(l,s)):f.n=s:f.v=s);try{if(c=2,a){if(l||(r="next"),e=a[r]){if(!(e=e.call(a,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,l<2&&(l=0)}else 1===l&&(e=a.return)&&e.call(a),l<2&&(s=TypeError("The iterator does not provide a '"+r+"' method"),l=1);a=t}else if((e=(d=f.n<0)?s:n.call(i,f))!==o)break}catch(e){a=t,l=1,s=e}finally{c=1}}return{value:e,done:d}}}(n,r,a),!0),c}var o={};function l(){}function s(){}function c(){}e=Object.getPrototypeOf;var u=[][i]?e(e([][i]())):(he(e={},i,function(){return this}),e),d=c.prototype=l.prototype=Object.create(u);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,he(t,r,"GeneratorFunction")),t.prototype=Object.create(d),t}return s.prototype=c,he(d,"constructor",c),he(c,"constructor",s),s.displayName="GeneratorFunction",he(c,r,"GeneratorFunction"),he(d),he(d,r,"Generator"),he(d,i,function(){return this}),he(d,"toString",function(){return"[object Generator]"}),(fe=function(){return{w:a,m:f}})()}function he(t,e,n,i){var r=Object.defineProperty;try{r({},"",{})}catch(t){r=0}he=function(t,e,n,i){function a(e,n){he(t,e,function(t){return this._invoke(e,n,t)})}e?r?r(t,e,{value:n,enumerable:!i,configurable:!i,writable:!i}):t[e]=n:(a("next",0),a("throw",1),a("return",2))},he(t,e,n,i)}function pe(t,e,n,i,r,a,o){try{var l=t[a](o),s=l.value}catch(t){return void n(t)}l.done?e(s):Promise.resolve(s).then(i,r)}function ve(t){return function(){var e=this,n=arguments;return new Promise(function(i,r){var a=t.apply(e,n);function o(t){pe(a,i,r,o,l,"next",t)}function l(t){pe(a,i,r,o,l,"throw",t)}o(void 0)})}}function me(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(-1!==e.indexOf(i))continue;n[i]=t[i]}return n}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],-1===e.indexOf(n)&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function ye(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function be(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ye(Object(n),!0).forEach(function(e){ge(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ye(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function ge(t,e,n){return(e=function(t){var e=function(t){if("object"!=ce(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=ce(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ce(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const _e=i({name:"JhFormList",components:{JhForm:Tt},props:{value:{type:Array,default:function(){return[]}},fields:{type:Array,default:function(){return[]}},mode:{type:String,default:"card",validator:function(t){return["card","table","inline"].includes(t)}},title:{type:String,default:""},description:{type:String,default:""},min:{type:Number,default:0},max:{type:Number,default:1/0},sortable:{type:Boolean,default:!1},copyable:{type:Boolean,default:!0},showIndex:{type:Boolean,default:!0},showItemActions:{type:Boolean,default:!0},defaultValue:{type:[Object,Function],default:function(){return{}}},addButtonText:{type:String,default:"添加"},addButtonProps:{type:Object,default:function(){return{}}},deleteConfirm:{type:Boolean,default:!1},deleteConfirmText:{type:String,default:"确定要删除这一项吗？"},itemLayout:{type:String,default:"horizontal"},itemLabelWidth:{type:[Number,String],default:"auto"},dense:{type:Boolean,default:!0},outlined:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},rules:{type:Array,default:function(){return[]}},actionColumn:{type:Object,default:function(){return{width:100}}},cardProps:{type:Object,default:function(){return{}}},itemClass:{type:String,default:""},inlineDisplayKey:{type:String,default:""},alwaysShowItemLabel:{type:Boolean,default:!0},itemRender:{type:Function,default:null},creatorButtonProps:{type:[Object,Boolean],default:function(){return{}}},creatorRecord:{type:[Object,Function],default:null},actionGuard:{type:Object,default:function(){return{beforeAddRow:null,beforeRemoveRow:null}}},onAfterRemove:{type:Function,default:null},collapsible:{type:Boolean,default:!1},defaultCollapsed:{type:Boolean,default:!1},actionRender:{type:Function,default:null},maxLimitText:{type:String,default:"已达到最大数量限制"},minLimitText:{type:String,default:"已达到最小数量限制"}},data:function(){return{listData:[],validationErrors:{},sortableInstance:null,collapsedItems:new Set,showMaxLimitAlert:!1,showMinLimitAlert:!1}},computed:{formListClasses:function(){return ge(ge(ge({"jh-form-list":!0},"jh-form-list--".concat(this.mode),!0),"jh-form-list--disabled",this.disabled),"jh-form-list--readonly",this.readonly)},canAdd:function(){return this.listData.length<this.max},computedCreatorButtonProps:function(){return!1!==this.creatorButtonProps&&be({color:"primary",outlined:!0},this.creatorButtonProps)},computedCreatorRecord:function(){var t=this;return this.creatorRecord?"function"==typeof this.creatorRecord?this.creatorRecord:function(){return t.creatorRecord}:"function"==typeof this.defaultValue?this.defaultValue:function(){return t.defaultValue}}},watch:{value:{handler:function(t){this.initListData()},immediate:!0,deep:!0},sortable:function(t){var e=this;t?this.$nextTick(function(){e.initSortable()}):this.destroySortable()}},mounted:function(){this.sortable&&this.initSortable()},beforeDestroy:function(){this.destroySortable()},methods:{generateItemId:function(){return"item_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9))},initListData:function(){var t=this;this.listData=(this.value||[]).map(function(e){return be(be({},e),{},{__id__:e.__id__||t.generateItemId()})})},getCleanData:function(){return this.listData.map(function(t){return t.__id__,me(t,oe)})},addItem:function(){var t=arguments,e=this;return ve(fe().m(function n(){var i,r,a,o,l;return fe().w(function(n){for(;;)switch(n.n){case 0:if(r=t.length>0&&void 0!==t[0]?t[0]:null,a=t.length>1&&void 0!==t[1]?t[1]:null,!(e.listData.length>=e.max)){n.n=1;break}return e.showMaxLimitAlert=!0,setTimeout(function(){e.showMaxLimitAlert=!1},3e3),e.$emit("max-limit",e.max),n.a(2);case 1:if(null===(i=e.actionGuard)||void 0===i||!i.beforeAddRow){n.n=3;break}return n.n=2,e.actionGuard.beforeAddRow(e.listData.length);case 2:if(!1!==n.v){n.n=3;break}return n.a(2);case 3:o=e.computedCreatorRecord(e.listData.length),l=be(be(be({},o),r),{},{__id__:e.generateItemId()}),null!==a&&a>=0&&a<=e.listData.length?e.listData.splice(a,0,l):e.listData.push(l),e.emitInput(),e.$emit("add",e.getCleanItem(l),null!=a?a:e.listData.length-1);case 4:return n.a(2)}},n)}))()},removeItem:function(t){var e=this;return ve(fe().m(function n(){var i,r;return fe().w(function(n){for(;;)switch(n.n){case 0:if(!(e.listData.length<=e.min)){n.n=1;break}return e.showMinLimitAlert=!0,setTimeout(function(){e.showMinLimitAlert=!1},3e3),e.$emit("min-limit",e.min),n.a(2);case 1:if(null===(i=e.actionGuard)||void 0===i||!i.beforeRemoveRow){n.n=3;break}return n.n=2,e.actionGuard.beforeRemoveRow(t,e.listData[t]);case 2:if(!1!==n.v){n.n=3;break}return n.a(2);case 3:if(!e.deleteConfirm){n.n=5;break}return n.n=4,e.confirm(e.deleteConfirmText);case 4:if(n.v){n.n=5;break}return n.a(2);case 5:r=e.listData[t],e.listData.splice(t,1),delete e.validationErrors[t],e.collapsedItems.delete(r.__id__),e.emitInput(),e.$emit("remove",e.getCleanItem(r),t),e.onAfterRemove&&e.onAfterRemove(t,e.getCleanItem(r));case 6:return n.a(2)}},n)}))()},copyItem:function(t){if(this.canAdd){var e=this.listData[t],n=(e.__id__,be(be({},me(e,le)),{},{__id__:this.generateItemId()}));this.listData.splice(t+1,0,n),this.emitInput(),this.$emit("copy",this.getCleanItem(e),this.getCleanItem(n))}else this.$emit("max-limit",this.max)},moveItem:function(t,e){var n=this.listData.splice(t,1)[0];this.listData.splice(e,0,n),this.emitInput(),this.$emit("sort",t,e)},updateItemField:function(t,e,n){this.listData[t]&&(this.$set(this.listData[t],e,n),this.emitInput(),this.$emit("item-change",t,this.getCleanItem(this.listData[t])))},handleItemFieldChange:function(t,e){var n=e.key,i=e.value;this.updateItemField(t,n,i)},getCleanItem:function(t){return t.__id__,me(t,se)},emitInput:function(){this.$emit("input",this.getCleanData()),this.$emit("change",this.getCleanData())},getItemClasses:function(t){var e=[];return this.itemClass&&e.push(this.itemClass),this.validationErrors[t]&&e.push("jh-form-list-item--error"),e.join(" ")},toggleCollapse:function(t){var e=t.__id__;this.collapsedItems.has(e)?this.collapsedItems.delete(e):this.collapsedItems.add(e),this.$forceUpdate()},isCollapsed:function(t){return this.collapsedItems.has(t.__id__)},renderActionButtons:function(t,e){var n=this;return this.actionRender?this.actionRender({item:this.getCleanItem(t),index:e,removeItem:function(){return n.removeItem(e)},copyItem:function(){return n.copyItem(e)}}):null},getFieldComponent:function(t){return{text:"v-text-field",textarea:"v-textarea",number:"v-text-field",select:"v-select",autocomplete:"v-autocomplete",switch:"v-switch",checkbox:"v-checkbox"}[t.type]||"v-text-field"},getFieldProps:function(t){var e=be({},t.props);return"select"!==t.type&&"autocomplete"!==t.type||(e.items=t.options||[],e.itemText=t.itemText||"text",e.itemValue=t.itemValue||"value"),"number"===t.type&&(e.type="number"),e},getFieldDisabled:function(t,e){return"function"==typeof t.disabled?t.disabled(e):t.disabled||!1},getInlineItemDisplay:function(t){if(this.inlineDisplayKey)return t[this.inlineDisplayKey]||"-";var e=this.fields[0];return e&&t[e.key]||"-"},initSortable:function(){var t=this;this.sortable&&!this.sortableInstance&&this.$nextTick(function(){var e=t.$refs.listBody;e&&("undefined"!=typeof window&&window.Sortable?t.sortableInstance=window.Sortable.create(e,{animation:150,handle:".jh-form-list-drag-handle",ghostClass:"jh-form-list-ghost",dragClass:"jh-form-list-dragging",onEnd:function(e){var n=e.oldIndex,i=e.newIndex;n!==i&&t.moveItem(n,i)}}):console.warn("JhFormList: sortable 功能需要引入 SortableJS 库"))})},destroySortable:function(){this.sortableInstance&&(this.sortableInstance.destroy(),this.sortableInstance=null)},validate:function(){var t=this;return ve(fe().m(function e(){var n,i,r,a,o,l,s,c;return fe().w(function(e){for(;;)switch(e.p=e.n){case 0:if(n={},i=!0,!t.rules||!t.rules.length){e.n=7;break}r=ue(t.rules),e.p=1,r.s();case 2:if((a=r.n()).done){e.n=4;break}if(o=a.value,"string"!=typeof(l=o(t.getCleanData()))){e.n=3;break}return n._list=l,i=!1,e.a(3,4);case 3:e.n=2;break;case 4:e.n=6;break;case 5:e.p=5,c=e.v,r.e(c);case 6:return e.p=6,r.f(),e.f(6);case 7:s=0;case 8:if(!(s<t.listData.length)){e.n=11;break}return e.n=9,t.validateItem(s);case 9:e.v||(i=!1,n[s]="该项存在验证错误");case 10:s++,e.n=8;break;case 11:return t.validationErrors=n,t.$emit("validate",i,n),e.a(2,i)}},e,null,[[1,5,6,7]])}))()},validateItem:function(t){var e=this;return ve(fe().m(function n(){var i;return fe().w(function(n){for(;;)switch(n.n){case 0:if(!(i=e.$refs["itemForm_".concat(t)])||!i[0]){n.n=2;break}return n.n=1,i[0].validate();case 1:return n.a(2,n.v);case 2:return n.a(2,!0)}},n)}))()},resetValidation:function(){var t=this;this.validationErrors={},this.listData.forEach(function(e,n){var i=t.$refs["itemForm_".concat(n)];i&&i[0]&&i[0].resetValidation()})},reset:function(){this.listData=[],this.validationErrors={},this.emitInput()},getItems:function(){return this.getCleanData()},setItems:function(t){var e=this;this.listData=t.map(function(t){return be(be({},t),{},{__id__:t.__id__||e.generateItemId()})}),this.emitInput()},getItemValue:function(t){return this.listData[t]?this.getCleanItem(this.listData[t]):null},setItemValue:function(t,e){this.listData[t]&&(this.$set(this.listData,t,be(be({},e),{},{__id__:this.listData[t].__id__})),this.emitInput())},confirm:function(t){return new Promise(function(e){e(window.confirm(t))})}}},ae,[],!1,null,"ce7ba014",null).exports;var Se=function(){var t=this,e=t._self._c;return e("v-app",[e("v-container",{staticClass:"pa-0",attrs:{fluid:""}},[e("div",{staticClass:"w-full"},[e("div",{staticClass:"grid grid-cols-[repeat(auto-fill,minmax(100px,1fr))] gap-4"},[t.value&&t.isString(t.value)?e("div",{staticClass:"relative aspect-square rounded overflow-hidden"},[e("div",{staticClass:"w-full h-full flex flex-col items-center justify-center p-2 bg-gray-100"},[t.isImage(t.value)?e("img",{staticClass:"max-w-full max-h-full object-contain",attrs:{src:t.getImageUrl(t.value)}}):e("v-icon",{staticClass:"text-gray-500",attrs:{size:"40"}},[t._v("mdi-file-document-outline")])],1),t._v(" "),t.readonly?t._e():e("v-btn",{staticClass:"absolute top-1 right-1 !bg-black/50",attrs:{icon:"","x-small":""},on:{click:t.handleRemoveSingleFile}},[e("v-icon",{attrs:{small:"",color:"white"}},[t._v("mdi-close")])],1)],1):t.value&&Array.isArray(t.value)?t._l(t.value,function(n,i){return e("div",{key:i,staticClass:"relative aspect-square border border-gray-200 rounded overflow-hidden"},[t.isString(n)?e("div",{staticClass:"w-full h-full flex flex-col items-center justify-center p-2 bg-gray-100"},[t.isImage(n)?e("img",{staticClass:"max-w-full max-h-full object-contain",attrs:{src:t.getImageUrl(n)}}):e("v-icon",{staticClass:"text-gray-500",attrs:{size:"40"}},[t._v("mdi-file-document-outline")])],1):e("div",{staticClass:"w-full h-full flex flex-col items-center justify-center p-2 bg-gray-100"},[t.isImage(n)?e("img",{staticClass:"max-w-full max-h-full object-contain",attrs:{src:t.getObjectUrl(n)}}):e("v-icon",{staticClass:"text-gray-500",attrs:{size:"40"}},[t._v("mdi-file-document-outline")])],1),t._v(" "),t.readonly?t._e():e("v-btn",{staticClass:"absolute top-1 right-1 !bg-black/50",attrs:{icon:"","x-small":""},on:{click:function(e){return t.removeFile(i)}}},[e("v-icon",{attrs:{small:"",color:"white"}},[t._v("mdi-close")])],1),t._v(" "),e("div",{staticClass:"absolute top-0 left-2 text-xs bg-green-500 text-white px-1 rounded-b-sm"},[t._v("\n            "+t._s(t.getFileExtension(n))+"\n          ")])],1)}):t._e(),t._v(" "),t.isCanUpload?e("div",{staticClass:"aspect-square border-2 border-dashed border-gray-200 rounded flex items-center justify-center cursor-pointer transition-all hover:border-blue-500 hover:bg-blue-50",on:{click:t.triggerFileInput}},[e("input",{ref:"fileInput",staticClass:"hidden",attrs:{type:"file",multiple:t.multiple,accept:t.accept},on:{change:t.handleFileChange}}),t._v(" "),e("v-icon",{staticClass:"text-gray-500 transition-all group-hover:text-blue-500",attrs:{size:"40"}},[t._v("mdi-plus")])],1):t._e()],2),t._v(" "),t.errorMessage?e("div",{staticClass:"text-red-500 text-xs mt-2 pl-0.5"},[t._v("\n        "+t._s(t.errorMessage)+"\n      ")]):t._e(),t._v(" "),t.isShowUploadLimit?e("div",{staticClass:"text-gray-500 text-xs mt-2 pl-0.5"},[t._v("\n        最多可上传 "+t._s(t.maxFiles)+" 个文件 (已上传 "+t._s(t.isString(t.value)?1:(t.value||[]).length)+" 个)\n      ")]):t._e()])])],1)};function we(t){return we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},we(t)}function xe(t){if(null!=t){var e=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}throw new TypeError(we(t)+" is not iterable")}function Ce(){var t,e,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",r=n.toStringTag||"@@toStringTag";function a(n,i,r,a){var s=i&&i.prototype instanceof l?i:l,c=Object.create(s.prototype);return ke(c,"_invoke",function(n,i,r){var a,l,s,c=0,u=r||[],d=!1,f={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return a=e,l=0,s=t,f.n=n,o}};function h(n,i){for(l=n,s=i,e=0;!d&&c&&!r&&e<u.length;e++){var r,a=u[e],h=f.p,p=a[2];n>3?(r=p===i)&&(s=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=t):a[0]<=h&&((r=n<2&&h<a[1])?(l=0,f.v=i,f.n=a[1]):h<p&&(r=n<3||a[0]>i||i>p)&&(a[4]=n,a[5]=i,f.n=p,l=0))}if(r||n>1)return o;throw d=!0,i}return function(r,u,p){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&h(u,p),l=u,s=p;(e=l<2?t:s)||!d;){a||(l?l<3?(l>1&&(f.n=-1),h(l,s)):f.n=s:f.v=s);try{if(c=2,a){if(l||(r="next"),e=a[r]){if(!(e=e.call(a,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,l<2&&(l=0)}else 1===l&&(e=a.return)&&e.call(a),l<2&&(s=TypeError("The iterator does not provide a '"+r+"' method"),l=1);a=t}else if((e=(d=f.n<0)?s:n.call(i,f))!==o)break}catch(e){a=t,l=1,s=e}finally{c=1}}return{value:e,done:d}}}(n,r,a),!0),c}var o={};function l(){}function s(){}function c(){}e=Object.getPrototypeOf;var u=[][i]?e(e([][i]())):(ke(e={},i,function(){return this}),e),d=c.prototype=l.prototype=Object.create(u);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,ke(t,r,"GeneratorFunction")),t.prototype=Object.create(d),t}return s.prototype=c,ke(d,"constructor",c),ke(c,"constructor",s),s.displayName="GeneratorFunction",ke(c,r,"GeneratorFunction"),ke(d),ke(d,r,"Generator"),ke(d,i,function(){return this}),ke(d,"toString",function(){return"[object Generator]"}),(Ce=function(){return{w:a,m:f}})()}function ke(t,e,n,i){var r=Object.defineProperty;try{r({},"",{})}catch(t){r=0}ke=function(t,e,n,i){function a(e,n){ke(t,e,function(t){return this._invoke(e,n,t)})}e?r?r(t,e,{value:n,enumerable:!i,configurable:!i,writable:!i}):t[e]=n:(a("next",0),a("throw",1),a("return",2))},ke(t,e,n,i)}function De(t){return function(t){if(Array.isArray(t))return Oe(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||je(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function je(t,e){if(t){if("string"==typeof t)return Oe(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Oe(t,e):void 0}}function Oe(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function Ie(t,e,n,i,r,a,o){try{var l=t[a](o),s=l.value}catch(t){return void n(t)}l.done?e(s):Promise.resolve(s).then(i,r)}Se._withStripped=!0;const Fe=i({name:"JhFileInput",props:{value:{type:[Array,String],default:function(){return[]}},maxFiles:{type:Number,default:0},accept:{type:String,default:"*/*"},multiple:{type:Boolean,default:!1},rules:{type:Array,default:function(){return[]}},readonly:{type:Boolean,default:!1},uploadPrefix:{type:String,default:"/upload/"}},data:function(){return{errorMessage:""}},watch:{value:{handler:function(){this.validate()},deep:!0}},computed:{isCanUpload:function(){return!this.readonly&&(this.multiple?!this.maxFiles||(this.value||[]).length<this.maxFiles:(this.value||[]).length<1)},isShowUploadLimit:function(){return!this.readonly&&this.multiple&&this.maxFiles>0}},methods:{isString:function(t){return"string"==typeof t},triggerFileInput:function(){this.$refs.fileInput.click()},handleFileChange:function(t){var e,n=this;return(e=Ce().m(function e(){var i,r,a,o,l;return Ce().w(function(e){for(;;)switch(e.n){case 0:if(i=Array.from(t.target.files),!(n.maxFiles&&(n.value||[]).length+i.length>n.maxFiles)){e.n=1;break}return n.errorMessage="最多只能上传 ".concat(n.maxFiles," 个文件"),e.a(2);case 1:r=De(n.value||[]),a=Ce().m(function t(){var e,i;return Ce().w(function(t){for(;;)switch(t.p=t.n){case 0:if(e=l[o],t.p=1,!r.some(function(t){return t.name===e.name&&t.size===e.size})){t.n=2;break}return n.errorMessage="文件 ".concat(e.name," 已存在"),t.a(2,1);case 2:r.push(e),t.n=4;break;case 3:t.p=3,i=t.v,console.error("Upload error:",i),n.errorMessage="上传文件 ".concat(e.name," 失败");case 4:return t.a(2)}},t,null,[[1,3]])}),o=0,l=i;case 2:if(!(o<l.length)){e.n=5;break}return e.d(xe(a()),3);case 3:if(!e.v){e.n=4;break}return e.a(3,4);case 4:o++,e.n=2;break;case 5:n.$emit("input",r),n.$emit("change",r),n.errorMessage||(n.errorMessage=""),t.target.value="";case 6:return e.a(2)}},e)}),function(){var t=this,n=arguments;return new Promise(function(i,r){var a=e.apply(t,n);function o(t){Ie(a,i,r,o,l,"next",t)}function l(t){Ie(a,i,r,o,l,"throw",t)}o(void 0)})})()},handleRemoveSingleFile:function(){this.$emit("input",[]),this.$emit("change",[])},removeFile:function(t){var e=De(this.value);e.splice(t,1),this.$emit("input",e),this.$emit("change",e)},isImage:function(t){return this.isString(t)?["jpg","jpeg","png","gif","bmp","webp","svg"].includes(t.split(".").pop().toLowerCase()):!!t.type&&t.type.startsWith("image/")},getImageUrl:function(t){return"".concat(this.uploadPrefix).concat(t)},getObjectUrl:function(t){return URL.createObjectURL(t)},getFileExtension:function(t){return this.isString(t)?t.split(".").pop():t.name.split(".").pop()},validate:function(){this.errorMessage="";var t,e=function(t){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=je(t))){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,o=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return a=t.done,t},e:function(t){o=!0,r=t},f:function(){try{a||null==e.return||e.return()}finally{if(o)throw r}}}}(this.rules);try{for(e.s();!(t=e.n()).done;){var n=(0,t.value)(this.value);if(!0!==n)return this.errorMessage=n,!1}}catch(t){e.e(t)}finally{e.f()}return!0}}},Se,[],!1,null,"a8e9f800",null).exports;var Pe=function(){var t=this._self._c;return t("v-app",[t("v-container",{staticClass:"pa-0",attrs:{fluid:""}},[t("div",[t("div",{staticClass:"jsoneditor-vue",style:{height:this.height}})])])],1)};function Te(t){return Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Te(t)}function $e(){var t,e,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",r=n.toStringTag||"@@toStringTag";function a(n,i,r,a){var s=i&&i.prototype instanceof l?i:l,c=Object.create(s.prototype);return Be(c,"_invoke",function(n,i,r){var a,l,s,c=0,u=r||[],d=!1,f={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return a=e,l=0,s=t,f.n=n,o}};function h(n,i){for(l=n,s=i,e=0;!d&&c&&!r&&e<u.length;e++){var r,a=u[e],h=f.p,p=a[2];n>3?(r=p===i)&&(s=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=t):a[0]<=h&&((r=n<2&&h<a[1])?(l=0,f.v=i,f.n=a[1]):h<p&&(r=n<3||a[0]>i||i>p)&&(a[4]=n,a[5]=i,f.n=p,l=0))}if(r||n>1)return o;throw d=!0,i}return function(r,u,p){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&h(u,p),l=u,s=p;(e=l<2?t:s)||!d;){a||(l?l<3?(l>1&&(f.n=-1),h(l,s)):f.n=s:f.v=s);try{if(c=2,a){if(l||(r="next"),e=a[r]){if(!(e=e.call(a,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,l<2&&(l=0)}else 1===l&&(e=a.return)&&e.call(a),l<2&&(s=TypeError("The iterator does not provide a '"+r+"' method"),l=1);a=t}else if((e=(d=f.n<0)?s:n.call(i,f))!==o)break}catch(e){a=t,l=1,s=e}finally{c=1}}return{value:e,done:d}}}(n,r,a),!0),c}var o={};function l(){}function s(){}function c(){}e=Object.getPrototypeOf;var u=[][i]?e(e([][i]())):(Be(e={},i,function(){return this}),e),d=c.prototype=l.prototype=Object.create(u);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,Be(t,r,"GeneratorFunction")),t.prototype=Object.create(d),t}return s.prototype=c,Be(d,"constructor",c),Be(c,"constructor",s),s.displayName="GeneratorFunction",Be(c,r,"GeneratorFunction"),Be(d),Be(d,r,"Generator"),Be(d,i,function(){return this}),Be(d,"toString",function(){return"[object Generator]"}),($e=function(){return{w:a,m:f}})()}function Be(t,e,n,i){var r=Object.defineProperty;try{r({},"",{})}catch(t){r=0}Be=function(t,e,n,i){function a(e,n){Be(t,e,function(t){return this._invoke(e,n,t)})}e?r?r(t,e,{value:n,enumerable:!i,configurable:!i,writable:!i}):t[e]=n:(a("next",0),a("throw",1),a("return",2))},Be(t,e,n,i)}function Ae(t,e,n,i,r,a,o){try{var l=t[a](o),s=l.value}catch(t){return void n(t)}l.done?e(s):Promise.resolve(s).then(i,r)}function Re(t){return function(){var e=this,n=arguments;return new Promise(function(i,r){var a=t.apply(e,n);function o(t){Ae(a,i,r,o,l,"next",t)}function l(t){Ae(a,i,r,o,l,"throw",t)}o(void 0)})}}Pe._withStripped=!0;const Le=i({name:"JhJsonEditor",props:{value:{type:[String,Number,Object,Array],default:function(){return{}}},expandedOnStart:{type:Boolean,default:!1},mode:{type:String,default:"code"},modes:{type:Array,default:function(){return["tree","code","form","text","view"]}},height:{type:String,default:"calc(100vh - 240px)"}},watch:{value:{immediate:!0,handler:function(t){var e=this;return Re($e().m(function t(){return $e().w(function(t){for(;;)switch(t.n){case 0:if(e.internalChange){t.n=2;break}return t.n=1,e.setEditor();case 1:e.error=!1,e.expandAll();case 2:return t.a(2)}},t)}))()},deep:!0}},data:function(){return{editor:null,error:!1,internalChange:!1,expandedModes:["tree","view","form"]}},computed:{valueType:function(){return Te(this.value)},formatValue:{get:function(){if("string"===this.valueType&&this.value)try{return JSON.parse(this.value)}catch(t){return this.value}return this.value},set:function(t){"string"!==this.valueType&&this.value?this.value=t:this.value=JSON.stringify(t)}}},mounted:function(){this.$emit("has-error",!1),window.JSONEditor?this.init():console.warn("JSONEditor is not loaded. Please include JSONEditor library.")},beforeDestroy:function(){this.editor&&this.editor.destroy()},methods:{init:function(){var t=this,e={mode:this.mode,modes:this.modes,themeColor:"#4caf50",onChange:function(){try{var e=t.editor.get();t.formatValue=e,t.error=!1,t.$emit("has-error",!1),t.internalChange=!0,t.$emit("input",t.value),t.$nextTick(function(){t.internalChange=!1})}catch(e){t.error=!0,t.$emit("has-error",!0)}},onModeChange:function(){t.expandAll()}};window.JSONEditor&&(this.editor=new window.JSONEditor(t.$el.querySelector(".jsoneditor-vue"),e,t.formatValue))},expandAll:function(){this.expandedOnStart&&this.editor&&this.expandedModes.includes(this.editor.getMode())&&this.editor.expandAll()},setEditor:function(){var t=this;return Re($e().m(function e(){return $e().w(function(e){for(;;)switch(e.n){case 0:t.editor&&t.editor.set(t.formatValue);case 1:return e.a(2)}},e)}))()}}},Pe,[],!1,null,"0d5540e8",null).exports;var Ne=function(){var t=this,e=t._self._c;return e("v-app",[e("v-container",{staticClass:"pa-0",attrs:{fluid:""}},[e("div",[e("div",{style:"overflow-y: auto; height: ".concat(t.height)},[e("div",{attrs:{id:t.editorId}},[e("textarea",{staticStyle:{display:"none"}},[t._v(t._s(t.value))])])])])])],1)};Ne._withStripped=!0;const Me=i({name:"JhMarkdownEditor",props:{value:{type:String,default:""},placeholder:{type:String,default:"请输入内容..."},height:{type:String,default:"calc(100vh - 400px)"},width:{type:Number,default:100},editorPath:{type:String,default:"/public/plugins/editor.md/lib/"},toolbarIcons:{type:Array,default:function(){return["undo","redo","|","watch","preview","|","h1","h2","h3","h4","h5","bold","del","italic","quote","mark","list-ul","list-ol","hr","link","|","image","code","table"]}},readonly:{type:Boolean,default:!1}},data:function(){return{editor:null,isMDChange:!1,editorId:"markdown-editor-".concat(Math.random().toString(36).substr(2,9))}},mounted:function(){var t=this;this.$nextTick(function(){t.initEditorMd()})},beforeDestroy:function(){this.editor&&(this.editor=null)},watch:{value:function(t){this.editor&&!this.isMDChange&&this.editor.setMarkdown(t),this.isMDChange=!1}},methods:{initEditorMd:function(){var t=this,e=document.getElementById(this.editorId);e?window.editormd?(e.innerHTML='<textarea style="display:none;">'.concat(this.value||"","</textarea>"),t.editor=window.editormd(this.editorId,{watch:!this.readonly,saveHTMLToTextarea:!0,path:this.editorPath,toolbarIcons:this.toolbarIcons,placeholder:this.placeholder,readOnly:this.readonly,onchange:function(){t.handleMDChange()}})):console.warn("Editor.md is not loaded. Please include Editor.md library."):console.warn("Editor container not found")},handleMDChange:function(){this.isMDChange=!0;var t=this.editor.getMarkdown();if(this.$emit("input",t),this.$emit("change",t),this.editor.getPreviewedHTML){var e=this.editor.getPreviewedHTML();this.$emit("content-for-seo",e)}},getMarkdown:function(){return this.editor?this.editor.getMarkdown():this.value},setMarkdown:function(t){this.editor&&this.editor.setMarkdown(t)},insertValue:function(t){this.editor&&this.editor.insertValue(t)}}},Ne,[],!1,null,"024b241e",null).exports;var Ee=function(){var t=this,e=t._self._c;return e("v-app",[e("v-container",{attrs:{fluid:""}},[e("v-row",{staticClass:"draggable-container"},[t.showComponentLibrary?e("v-col",{attrs:{cols:"12",md:"3"}},[e("div",{staticClass:"title"},[t._v(t._s(t.componentLibraryTitle))]),t._v(" "),t.isDraggableLoaded?e("draggable",{attrs:{group:{name:t.groupName,pull:"clone",put:!1},animation:t.animation,"drag-class":t.dragClass,"ghost-class":t.ghostClass,"chosen-class":t.chosenClass},on:{start:t.handleStart,end:t.handleEnd},model:{value:t.componentsInternal,callback:function(e){t.componentsInternal=e},expression:"componentsInternal"}},[e("transition-group",t._l(t.componentsInternal,function(n){return e("div",{key:n.id,staticClass:"draggable-item"},[t._v("\n              "+t._s(n.name)+"\n            ")])}),0)],1):t._e()],1):t._e(),t._v(" "),e("v-col",{attrs:{cols:(t.showComponentLibrary,12),md:t.showComponentLibrary?9:12}},[t.isDraggableLoaded?e("draggable",{attrs:{group:t.groupName,animation:t.animation,"drag-class":t.dragClass,"ghost-class":t.ghostClass,"chosen-class":t.chosenClass},on:{start:t.handleStart,end:t.handleEnd},model:{value:t.designAreaInternal,callback:function(e){t.designAreaInternal=e},expression:"designAreaInternal"}},[e("transition-group",t._l(t.designAreaInternal,function(n){return e("div",{key:n.id,staticClass:"draggable-item"},[t._t("item",function(){return[t._v("\n                "+t._s(n.name)+"\n              ")]},{item:n})],2)}),0)],1):t._e(),t._v(" "),e("v-row",{directives:[{name:"show",rawName:"v-show",value:!t.designAreaInternal.length,expression:"!designAreaInternal.length"}],staticClass:"ma-0 pa-0",staticStyle:{width:"100%"}},[e("v-card",{staticClass:"ma-12",staticStyle:{border:"1px dashed #333333"},attrs:{height:"100",width:"100%",color:"#f5f8fa"}},[t.isDraggableLoaded?e("draggable",{staticClass:"d-flex align-center justify-center",staticStyle:{height:"100%"},attrs:{group:t.groupName,animation:t.animation,"drag-class":t.dragClass,"ghost-class":t.ghostClass},model:{value:t.designAreaInternal,callback:function(e){t.designAreaInternal=e},expression:"designAreaInternal"}},[e("v-card-text",{staticClass:"text-center title draggable-placeholder"},[t._v("\n                "+t._s(t.emptyPlaceholder)+"\n              ")])],1):t._e()],1)],1)],1)],1)],1)],1)};function Ve(t){return function(t){if(Array.isArray(t))return Ke(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Ke(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ke(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ke(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}Ee._withStripped=!0;const ze=i({name:"JhDraggable",props:{components:{type:Array,default:function(){return[]}},value:{type:Array,default:function(){return[]}},showComponentLibrary:{type:Boolean,default:!0},componentLibraryTitle:{type:String,default:"组件"},groupName:{type:String,default:"draggable-group"},animation:{type:Number,default:300},dragClass:{type:String,default:"jh-drag-class"},ghostClass:{type:String,default:"jh-ghost-class"},chosenClass:{type:String,default:"jh-chosen-class"},emptyPlaceholder:{type:String,default:"从左侧拖入或点选组件进行内容设计"}},data:function(){return{drag:!1,componentsInternal:[],designAreaInternal:[],isDraggableLoaded:!1}},watch:{components:{handler:function(t){this.componentsInternal=Ve(t)},immediate:!0,deep:!0},value:{handler:function(t){this.designAreaInternal=Ve(t)},immediate:!0,deep:!0},designAreaInternal:{handler:function(t){this.$emit("input",t),this.$emit("change",t)},deep:!0}},mounted:function(){this.checkDraggableLibrary()},methods:{checkDraggableLibrary:function(){this.$options.components.draggable||window.vuedraggable?this.isDraggableLoaded=!0:(console.warn("Vue Draggable library is not loaded. Please include vuedraggable library."),this.isDraggableLoaded=!1)},handleStart:function(){this.drag=!0,this.$emit("start")},handleEnd:function(){this.drag=!1,this.ensureUniqueIds(),this.$emit("end")},ensureUniqueIds:function(){var t=this,e=[].concat(Ve(this.componentsInternal.map(function(t){return t.id})),Ve(this.designAreaInternal.map(function(t){return t.id}))),n=Math.max.apply(Math,Ve(e));this.designAreaInternal.forEach(function(e){t.componentsInternal.some(function(t){return t.id===e.id})&&(e.id=++n)})}}},Ee,[],!1,null,"a384b1a0",null).exports;var Je=function(){var t=this,e=t._self._c;return e("v-app",[e("v-container",{attrs:{fluid:""}},[e("v-card",{staticClass:"px-4"},[e("v-row",{staticClass:"ma-0 pt-0 d-flex"},[t.showCreateButton?e("v-btn",{staticClass:"elevation-0 mr-2",attrs:{color:"success",small:"",dark:""},on:{click:t.handleCreateClick}},[t._v("\n          新增附件\n        ")]):t._e(),t._v(" "),e("v-spacer"),t._v(" "),e("v-col",{staticClass:"pa-0 pt-2 pt-sm-0",attrs:{cols:"12",sm:"6",md:"3",xl:"3"}},[e("v-text-field",{staticClass:"jh-v-input",attrs:{color:"success",prefix:"表格过滤：",dense:"",filled:"","single-line":"","hide-details":""},model:{value:t.searchInput,callback:function(e){t.searchInput=e},expression:"searchInput"}})],1)],1),t._v(" "),t._l(t.groupedAttachments,function(n,i){return e("v-card",{key:i,staticClass:"my-2",attrs:{outlined:""}},[e("v-card-title",{staticClass:"pl-4",staticStyle:{"font-size":"20px","font-weight":"500"}},[t._v("\n          "+t._s(i)+"\n        ")]),t._v(" "),e("v-card-text",{staticStyle:{display:"flex","flex-flow":"wrap"}},t._l(n,function(n){return e("v-card",{key:n.id,staticClass:"mr-2 mb-2",attrs:{width:"200px",outlined:""}},[e("v-img",{staticClass:"white--text align-end",attrs:{src:t.getPreviewUrl(n),gradient:"to bottom, rgba(0,0,0,.1), rgba(0,0,0,.5)",height:"120px"}},[e("v-card-title",{staticClass:"text-subtitle-2"},[t._v(t._s(n.filename))])],1),t._v(" "),e("v-card-actions",[e("v-chip",{attrs:{small:""}},[t._v(t._s(n.fileSubtype||t.getFileType(n.filename)))]),t._v(" "),e("v-spacer"),t._v(" "),t.isImage(n.downloadPath||n.filename)?e("v-btn",{attrs:{icon:"",small:"",title:"预览"},on:{click:function(e){return t.handlePreview(n)}}},[e("v-icon",[t._v("mdi-eye")])],1):t._e(),t._v(" "),n.downloadPath?e("v-btn",{attrs:{icon:"",small:"",title:"下载"},on:{click:function(e){return t.handleDownload(n)}}},[e("v-icon",[t._v("mdi-download")])],1):t._e(),t._v(" "),t.readonly?t._e():e("v-btn",{attrs:{icon:"",small:"",title:"删除"},on:{click:function(e){return t.handleDelete(n)}}},[e("v-icon",[t._v("mdi-trash-can-outline")])],1)],1)],1)}),1)],1)}),t._v(" "),e("v-overlay",{attrs:{absolute:"",value:t.loading,color:"#fff"}},[e("v-progress-circular",{attrs:{color:"success",indeterminate:"",size:"32"}})],1),t._v(" "),t.loading||0!==t.filteredAttachments.length?t._e():e("div",{staticClass:"mt-5 text-center"},[t._v("\n        暂无附件\n      ")])],2),t._v(" "),e("v-dialog",{attrs:{"max-width":"90vw"},model:{value:t.previewDialog,callback:function(e){t.previewDialog=e},expression:"previewDialog"}},[e("v-card",[e("v-card-title",[t._v("\n          "+t._s(t.previewItem?t.previewItem.filename:"")+"\n          "),e("v-spacer"),t._v(" "),e("v-btn",{attrs:{icon:""},on:{click:function(e){t.previewDialog=!1}}},[e("v-icon",[t._v("mdi-close")])],1)],1),t._v(" "),e("v-card-text",{staticClass:"pa-0"},[t.previewItem?e("v-img",{attrs:{src:t.getPreviewUrl(t.previewItem),contain:"","max-height":"70vh"}}):t._e()],1)],1)],1)],1)],1)};Je._withStripped=!0;const Ge=i({name:"JhTableAttachment",props:{attachments:{type:Array,default:function(){return[]}},showCreateButton:{type:Boolean,default:!0},readonly:{type:Boolean,default:!1},groupBy:{type:String,default:"fileType"},previewPrefix:{type:String,default:"/upload/"},loading:{type:Boolean,default:!1}},data:function(){return{searchInput:"",previewDialog:!1,previewItem:null}},computed:{filteredAttachments:function(){var t=this;return this.searchInput?this.attachments.filter(function(e){return e.filename.toLowerCase().includes(t.searchInput.toLowerCase())||e.fileType&&e.fileType.toLowerCase().includes(t.searchInput.toLowerCase())}):this.attachments},groupedAttachments:function(){var t=this,e={};return this.filteredAttachments.forEach(function(n){var i=n[t.groupBy]||"未分类";e[i]||(e[i]=[]),e[i].push(n)}),e}},methods:{getPreviewUrl:function(t){return t.downloadPath?"".concat(this.previewPrefix).concat(t.downloadPath):"/placeholder-image.jpg"},isImage:function(t){return!!t&&/\.(gif|jpg|jpeg|png|webp|svg|bmp)$/i.test(t)},getFileType:function(t){if(!t)return"";var e=t.split(".").pop();return e?e.toLowerCase():""},handleCreateClick:function(){this.$emit("create-click")},handlePreview:function(t){this.previewItem=t,this.previewDialog=!0,this.$emit("preview",t)},handleDownload:function(t){if(this.$emit("download",t),t.downloadPath){var e=document.createElement("a");e.href=this.getPreviewUrl(t),e.download=t.filename,e.click()}},handleDelete:function(t){this.$emit("delete",t)}}},Je,[],!1,null,"5113d453",null).exports;var Ue=function(){var t=this,e=t._self._c;return e("div",{staticClass:"jh-editable-table"},[e("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.tableHeaders,items:t.internalData,"items-per-page":t.itemsPerPage,"hide-default-footer":t.hideFooter,dense:t.dense,"disable-sort":!t.sortable},scopedSlots:t._u([t._l(t.editableColumns,function(n){return{key:"item.".concat(n.key),fn:function(i){var r,a,o=i.item;return[e("div",{key:n.key,staticClass:"jh-editable-cell"},[t.isEditing(o)?[n.type&&"text"!==n.type?"number"===n.type?e("v-text-field",{staticClass:"my-1",attrs:{label:n.label,rules:n.rules,type:"number",dense:"","hide-details":"auto"},model:{value:o[n.key],callback:function(e){t.$set(o,n.key,t._n(e))},expression:"item[column.key]"}}):"select"===n.type?e("v-select",{staticClass:"my-1",attrs:{items:n.options,label:n.label,rules:n.rules,dense:"","hide-details":"auto"},model:{value:o[n.key],callback:function(e){t.$set(o,n.key,e)},expression:"item[column.key]"}}):"date"===n.type?e("v-menu",{attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function(i){var r=i.on,a=i.attrs;return[e("v-text-field",t._g(t._b({staticClass:"my-1",attrs:{label:n.label,"prepend-icon":"mdi-calendar",readonly:"",dense:"","hide-details":"auto"},model:{value:o[n.key],callback:function(e){t.$set(o,n.key,e)},expression:"item[column.key]"}},"v-text-field",a,!1),r))]}}],null,!0),model:{value:t.dateMenus[o._uuid+n.key],callback:function(e){t.$set(t.dateMenus,o._uuid+n.key,e)},expression:"dateMenus[item._uuid + column.key]"}},[t._v(" "),e("v-date-picker",{on:{input:function(e){t.dateMenus[o._uuid+n.key]=!1}},model:{value:o[n.key],callback:function(e){t.$set(o,n.key,e)},expression:"item[column.key]"}})],1):"switch"===n.type?e("v-switch",{staticClass:"my-1",attrs:{label:n.label,dense:"","hide-details":"auto"},model:{value:o[n.key],callback:function(e){t.$set(o,n.key,e)},expression:"item[column.key]"}}):"enum"===n.type&&n.enum?e("v-select",{staticClass:"my-1",attrs:{items:t.getEnumOptions(n.enum),label:n.label,rules:n.rules,dense:"","hide-details":"auto"},model:{value:o[n.key],callback:function(e){t.$set(o,n.key,e)},expression:"item[column.key]"}}):t._e():e("v-text-field",{staticClass:"my-1",attrs:{label:n.label,rules:n.rules,placeholder:n.placeholder,dense:"","hide-details":"auto"},model:{value:o[n.key],callback:function(e){t.$set(o,n.key,e)},expression:"item[column.key]"}})]:[t.$scopedSlots["cell.".concat(n.key)]?t._t("cell.".concat(n.key),null,{item:o,value:o[n.key]}):e("span",["enum"===n.type&&n.enum?e("v-chip",{attrs:{color:null===(r=n.enum[o[n.key]])||void 0===r?void 0:r.color,small:""}},[t._v("\n              "+t._s((null===(a=n.enum[o[n.key]])||void 0===a?void 0:a.text)||o[n.key])+"\n            ")]):"switch"===n.type?e("v-icon",{attrs:{color:o[n.key]?"success":"grey"}},[t._v("\n              "+t._s(o[n.key]?"mdi-check-circle":"mdi-circle-outline")+"\n            ")]):e("span",[t._v(t._s(o[n.key]))])],1)]],2)]}}}),{key:"item.actions",fn:function(n){var i=n.item;return[e("div",{staticClass:"jh-editable-actions"},[t.isEditing(i)?[e("v-btn",{attrs:{icon:"",small:"",color:"success",title:"保存"},on:{click:function(e){return t.handleSave(i)}}},[e("v-icon",{attrs:{small:""}},[t._v("mdi-check")])],1),t._v(" "),e("v-btn",{attrs:{icon:"",small:"",color:"error",title:"取消"},on:{click:function(e){return t.handleCancel(i)}}},[e("v-icon",{attrs:{small:""}},[t._v("mdi-close")])],1)]:[t.editable?e("v-btn",{attrs:{icon:"",small:"",color:"primary",title:"编辑"},on:{click:function(e){return t.handleEdit(i)}}},[e("v-icon",{attrs:{small:""}},[t._v("mdi-pencil")])],1):t._e(),t._v(" "),t.deletable?e("v-btn",{attrs:{icon:"",small:"",color:"error",title:"删除"},on:{click:function(e){return t.handleDelete(i)}}},[e("v-icon",{attrs:{small:""}},[t._v("mdi-delete")])],1):t._e(),t._v(" "),t._t("actions",null,{item:i})]],2)]}},t.recordCreator?{key:"footer",fn:function(){return[e("div",{staticClass:"jh-editable-footer pa-3"},[e("v-btn",{attrs:{color:"primary",small:"",disabled:t.hasEditingRow},on:{click:t.handleAddRow}},[e("v-icon",{attrs:{small:"",left:""}},[t._v("mdi-plus")]),t._v("\n          "+t._s(t.recordCreatorProps.creatorButtonText||"添加一行数据")+"\n        ")],1)],1)]},proxy:!0}:null],null,!0)})],1)};Ue._withStripped=!0;var qe=["_uuid","_isNew"],We=["_uuid","_isNew"];function He(t){return He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},He(t)}function Ye(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(-1!==e.indexOf(i))continue;n[i]=t[i]}return n}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],-1===e.indexOf(n)&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Xe(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return Qe(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qe(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){l=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw a}}}}function Qe(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function Ze(){var t,e,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",r=n.toStringTag||"@@toStringTag";function a(n,i,r,a){var s=i&&i.prototype instanceof l?i:l,c=Object.create(s.prototype);return tn(c,"_invoke",function(n,i,r){var a,l,s,c=0,u=r||[],d=!1,f={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return a=e,l=0,s=t,f.n=n,o}};function h(n,i){for(l=n,s=i,e=0;!d&&c&&!r&&e<u.length;e++){var r,a=u[e],h=f.p,p=a[2];n>3?(r=p===i)&&(s=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=t):a[0]<=h&&((r=n<2&&h<a[1])?(l=0,f.v=i,f.n=a[1]):h<p&&(r=n<3||a[0]>i||i>p)&&(a[4]=n,a[5]=i,f.n=p,l=0))}if(r||n>1)return o;throw d=!0,i}return function(r,u,p){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&h(u,p),l=u,s=p;(e=l<2?t:s)||!d;){a||(l?l<3?(l>1&&(f.n=-1),h(l,s)):f.n=s:f.v=s);try{if(c=2,a){if(l||(r="next"),e=a[r]){if(!(e=e.call(a,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,l<2&&(l=0)}else 1===l&&(e=a.return)&&e.call(a),l<2&&(s=TypeError("The iterator does not provide a '"+r+"' method"),l=1);a=t}else if((e=(d=f.n<0)?s:n.call(i,f))!==o)break}catch(e){a=t,l=1,s=e}finally{c=1}}return{value:e,done:d}}}(n,r,a),!0),c}var o={};function l(){}function s(){}function c(){}e=Object.getPrototypeOf;var u=[][i]?e(e([][i]())):(tn(e={},i,function(){return this}),e),d=c.prototype=l.prototype=Object.create(u);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,tn(t,r,"GeneratorFunction")),t.prototype=Object.create(d),t}return s.prototype=c,tn(d,"constructor",c),tn(c,"constructor",s),s.displayName="GeneratorFunction",tn(c,r,"GeneratorFunction"),tn(d),tn(d,r,"Generator"),tn(d,i,function(){return this}),tn(d,"toString",function(){return"[object Generator]"}),(Ze=function(){return{w:a,m:f}})()}function tn(t,e,n,i){var r=Object.defineProperty;try{r({},"",{})}catch(t){r=0}tn=function(t,e,n,i){function a(e,n){tn(t,e,function(t){return this._invoke(e,n,t)})}e?r?r(t,e,{value:n,enumerable:!i,configurable:!i,writable:!i}):t[e]=n:(a("next",0),a("throw",1),a("return",2))},tn(t,e,n,i)}function en(t,e,n,i,r,a,o){try{var l=t[a](o),s=l.value}catch(t){return void n(t)}l.done?e(s):Promise.resolve(s).then(i,r)}function nn(t){return function(){var e=this,n=arguments;return new Promise(function(i,r){var a=t.apply(e,n);function o(t){en(a,i,r,o,l,"next",t)}function l(t){en(a,i,r,o,l,"throw",t)}o(void 0)})}}function rn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function an(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?rn(Object(n),!0).forEach(function(e){on(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rn(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function on(t,e,n){return(e=function(t){var e=function(t){if("object"!=He(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=He(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==He(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ln(t){return ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ln(t)}function sn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function cn(t,e,n){return(e=function(t){var e=function(t){if("object"!=ln(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=ln(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ln(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var un={JhMenu:r,JhScene:f,JhDateRangePicker:m,JhQueryFilter:$,JhTable:U,JhTreeSelect:et,JhPageContainer:it,JhCard:ut,JhForm:Tt,JhModalForm:Nt,JhDrawerForm:Jt,JhStepsForm:te,JhFormList:_e,JhFileInput:Fe,JhJsonEditor:Le,JhMarkdownEditor:Me,JhDraggable:ze,JhTableAttachment:Ge,JhEditableTable:i({name:"JhEditableTable",props:{value:{type:Array,default:function(){return[]}},columns:{type:Array,required:!0},editable:{type:Boolean,default:!0},deletable:{type:Boolean,default:!0},recordCreator:{type:Boolean,default:!0},recordCreatorProps:{type:Object,default:function(){return{creatorButtonText:"添加一行数据",record:{}}}},itemsPerPage:{type:Number,default:-1},hideFooter:{type:Boolean,default:!0},dense:{type:Boolean,default:!1},sortable:{type:Boolean,default:!1},rowKey:{type:String,default:"id"},editableType:{type:String,default:"multiple",validator:function(t){return["single","multiple"].includes(t)}},maxRows:{type:Number,default:1/0},onValuesChange:{type:Function,default:null},beforeAddRow:{type:Function,default:null},beforeRemoveRow:{type:Function,default:null},actionRender:{type:Function,default:null},editableKeys:{type:Array,default:null},onSave:{type:Function,default:null},onDelete:{type:Function,default:null}},data:function(){return{internalData:[],editingKeys:new Set,originalData:new Map,dateMenus:{}}},computed:{editableColumns:function(){return this.columns.filter(function(t){return!1!==t.editable})},tableHeaders:function(){var t=this,e=this.columns.map(function(e){return{text:e.label||e.key,value:e.key,sortable:!1!==e.sortable&&t.sortable,width:e.width,align:e.align||"start"}});return(this.editable||this.deletable||this.$scopedSlots.actions)&&e.push({text:"操作",value:"actions",sortable:!1,width:120,align:"center"}),e},hasEditingRow:function(){return this.editingKeys.size>0}},watch:{value:{handler:function(t){this.initInternalData(t)},immediate:!0,deep:!0}},methods:{initInternalData:function(t){var e=this;this.internalData=t.map(function(t){return t._uuid||(t._uuid=e.generateUUID()),an({},t)})},generateUUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})},getRowKey:function(t){return t._uuid||t[this.rowKey]},isEditing:function(t){return this.editingKeys.has(this.getRowKey(t))},getEnumOptions:function(t){return Object.keys(t).map(function(e){return{text:t[e].text||e,value:e}})},handleEdit:function(t){var e=this;return nn(Ze().m(function n(){var i,r,a;return Ze().w(function(n){for(;;)switch(n.n){case 0:if(i=e.getRowKey(t),!("single"===e.editableType&&e.editingKeys.size>0)){n.n=1;break}if(r=Array.from(e.editingKeys)[0],!(a=e.internalData.find(function(t){return e.getRowKey(t)===r}))){n.n=1;break}return n.n=1,e.handleCancel(a);case 1:e.originalData.set(i,an({},t)),e.editingKeys.add(i),e.$emit("edit",t),e.$emit("update:editableKeys",Array.from(e.editingKeys));case 2:return n.a(2)}},n)}))()},handleSave:function(t){var e=this;return nn(Ze().m(function n(){var i;return Ze().w(function(n){for(;;)switch(n.n){case 0:if(i=e.getRowKey(t),e.validateRow(t)){n.n=1;break}return n.a(2);case 1:if(!e.onSave){n.n=3;break}return n.n=2,e.onSave(i,t,e.originalData.get(i));case 2:if(!1!==n.v){n.n=3;break}return n.a(2);case 3:e.editingKeys.delete(i),e.originalData.delete(i),e.syncToParent(),e.$emit("save",t),e.$emit("change",e.internalData),e.$emit("update:editableKeys",Array.from(e.editingKeys)),e.onValuesChange&&e.onValuesChange(t,e.internalData);case 4:return n.a(2)}},n)}))()},handleCancel:function(t){var e=this,n=this.getRowKey(t);if(t._isNew){var i=this.internalData.findIndex(function(t){return e.getRowKey(t)===n});i>-1&&this.internalData.splice(i,1)}else{var r=this.originalData.get(n);if(r){var a=this.internalData.findIndex(function(t){return e.getRowKey(t)===n});a>-1&&this.internalData.splice(a,1,an({},r))}}this.editingKeys.delete(n),this.originalData.delete(n),this.syncToParent(),this.$emit("cancel",t)},handleDelete:function(t){var e=this;return nn(Ze().m(function n(){var i,r;return Ze().w(function(n){for(;;)switch(n.n){case 0:if(i=e.getRowKey(t),r=e.internalData.findIndex(function(t){return e.getRowKey(t)===i}),!e.beforeRemoveRow){n.n=2;break}return n.n=1,e.beforeRemoveRow(t,r);case 1:if(!1!==n.v){n.n=2;break}return n.a(2);case 2:if(!e.onDelete){n.n=4;break}return n.n=3,e.onDelete(i,t);case 3:if(!1!==n.v){n.n=4;break}return n.a(2);case 4:r>-1&&(e.internalData.splice(r,1),e.syncToParent(),e.$emit("delete",t,r),e.$emit("change",e.internalData));case 5:return n.a(2)}},n)}))()},handleAddRow:function(){var t=this;return nn(Ze().m(function e(){var n;return Ze().w(function(e){for(;;)switch(e.n){case 0:if(!(t.internalData.length>=t.maxRows)){e.n=1;break}return t.$emit("max-rows",t.maxRows),e.a(2);case 1:if(!t.beforeAddRow){e.n=3;break}return e.n=2,t.beforeAddRow();case 2:if(!1!==e.v){e.n=3;break}return e.a(2);case 3:n=an({_uuid:t.generateUUID(),_isNew:!0},t.recordCreatorProps.record),t.columns.forEach(function(t){t.key&&void 0===n[t.key]&&("switch"===t.type?n[t.key]=!1:"number"===t.type?n[t.key]=0:n[t.key]="")}),t.internalData.push(n),t.$nextTick(function(){t.handleEdit(n)}),t.$emit("add",n);case 4:return e.a(2)}},e)}))()},validateRow:function(t){var e,n=Xe(this.columns);try{for(n.s();!(e=n.n()).done;){var i=e.value;if(i.rules&&!1!==i.editable){var r,a=Xe(i.rules);try{for(a.s();!(r=a.n()).done;){var o=(0,r.value)(t[i.key]);if("string"==typeof o)return this.$emit("validation-error",{item:t,column:i,message:o}),!1}}catch(t){a.e(t)}finally{a.f()}}}}catch(t){n.e(t)}finally{n.f()}return!0},syncToParent:function(){var t=this.internalData.map(function(t){return t._uuid,t._isNew,Ye(t,qe)});this.$emit("input",t)},getData:function(){return this.internalData.map(function(t){return t._uuid,t._isNew,Ye(t,We)})},setData:function(t){this.initInternalData(t),this.syncToParent()},clearData:function(){this.internalData=[],this.editingKeys.clear(),this.originalData.clear(),this.syncToParent()}}},Ue,[],!1,null,"52ef24ea",null).exports,JhMask:ft,JhToast:pt,JhConfirmDialog:_t},dn=function(t){dn.installed||(dn.installed=!0,Object.keys(un).forEach(function(e){t.component(e,un[e])}))};"undefined"!=typeof window&&window.Vue&&dn(window.Vue);const fn=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?sn(Object(n),!0).forEach(function(e){cn(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sn(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({install:dn},un);return e.default})());