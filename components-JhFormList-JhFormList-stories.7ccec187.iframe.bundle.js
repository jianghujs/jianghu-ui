/*! For license information please see components-JhFormList-JhFormList-stories.7ccec187.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunk_jianghujs_jianghu_ui=self.webpackChunk_jianghujs_jianghu_ui||[]).push([[3521],{"./node_modules/.pnpm/css-loader@6.11.0_webpack@5.102.1_@swc+core@1.13.5_esbuild@0.18.20_webpack-cli@5.1.4_webpack@5.102.1__/node_modules/css-loader/dist/cjs.js??clonedRuleSet-11.use[1]!./node_modules/.pnpm/vue-loader@15.11.1_@vue+compiler-sfc@3.5.22_css-loader@6.11.0_webpack@5.102.1_@swc+core_acb67284a4be633df1055a74f961e4b4/node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@5.9.3_webpack@5.102.1_@swc+core@1.13.5_es_397d8c6b9860a09288c2bf2dc9668002/node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-11.use[2]!./node_modules/.pnpm/vue-loader@15.11.1_@vue+compiler-sfc@3.5.22_css-loader@6.11.0_webpack@5.102.1_@swc+core_acb67284a4be633df1055a74f961e4b4/node_modules/vue-loader/lib/index.js??vue-loader-options!./src/components/JhFormList/JhFormList.vue?vue&type=style&index=0&id=ce7ba014&prod&scoped=true&lang=css":(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _node_modules_pnpm_css_loader_6_11_0_webpack_5_102_1_swc_core_1_13_5_esbuild_0_18_20_webpack_cli_5_1_4_webpack_5_102_1_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/css-loader@6.11.0_webpack@5.102.1_@swc+core@1.13.5_esbuild@0.18.20_webpack-cli@5.1.4_webpack@5.102.1__/node_modules/css-loader/dist/runtime/sourceMaps.js"),_node_modules_pnpm_css_loader_6_11_0_webpack_5_102_1_swc_core_1_13_5_esbuild_0_18_20_webpack_cli_5_1_4_webpack_5_102_1_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_pnpm_css_loader_6_11_0_webpack_5_102_1_swc_core_1_13_5_esbuild_0_18_20_webpack_cli_5_1_4_webpack_5_102_1_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_pnpm_css_loader_6_11_0_webpack_5_102_1_swc_core_1_13_5_esbuild_0_18_20_webpack_cli_5_1_4_webpack_5_102_1_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/css-loader@6.11.0_webpack@5.102.1_@swc+core@1.13.5_esbuild@0.18.20_webpack-cli@5.1.4_webpack@5.102.1__/node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_pnpm_css_loader_6_11_0_webpack_5_102_1_swc_core_1_13_5_esbuild_0_18_20_webpack_cli_5_1_4_webpack_5_102_1_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_pnpm_css_loader_6_11_0_webpack_5_102_1_swc_core_1_13_5_esbuild_0_18_20_webpack_cli_5_1_4_webpack_5_102_1_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,"\n/* 表单列表容器 */\n.jh-form-list[data-v-ce7ba014] {\n  width: 100%;\n}\n\n/* 列表头部 */\n.jh-form-list-header[data-v-ce7ba014] {\n  margin-bottom: 16px;\n}\n\n/* 列表主体 */\n.jh-form-list-body[data-v-ce7ba014] {\n  position: relative;\n}\n.jh-form-list-body--inline[data-v-ce7ba014] {\n  gap: 8px;\n}\n\n/* 列表项 */\n.jh-form-list-item[data-v-ce7ba014] {\n  position: relative;\n}\n.jh-form-list-item--card[data-v-ce7ba014] {\n  transition: box-shadow 0.2s ease;\n}\n.jh-form-list-item--card[data-v-ce7ba014]:hover {\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n}\n.jh-form-list-item--error[data-v-ce7ba014] {\n  border-color: #f44336 !important;\n}\n\n/* 列表项头部 */\n.jh-form-list-item-header[data-v-ce7ba014] {\n  min-height: 48px;\n}\n.jh-form-list-item-index[data-v-ce7ba014] {\n  font-weight: 500;\n  font-size: 14px;\n  color: rgba(0, 0, 0, 0.6);\n}\n\n/* 列表项操作 */\n.jh-form-list-item-actions[data-v-ce7ba014] {\n  display: flex;\n  gap: 4px;\n}\n\n/* 拖拽把手 */\n.jh-form-list-drag-handle[data-v-ce7ba014] {\n  cursor: move;\n  color: rgba(0, 0, 0, 0.4);\n}\n.jh-form-list-drag-handle[data-v-ce7ba014]:hover {\n  color: rgba(0, 0, 0, 0.6);\n}\n\n/* 拖拽状态 */\n.jh-form-list-ghost[data-v-ce7ba014] {\n  opacity: 0.5;\n  background: rgba(0, 0, 0, 0.05);\n}\n.jh-form-list-dragging[data-v-ce7ba014] {\n  cursor: move;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n}\n\n/* 列表底部 */\n.jh-form-list-footer[data-v-ce7ba014] {\n  display: flex;\n  justify-content: center;\n}\n\n/* 空列表占位 */\n.jh-form-list-empty[data-v-ce7ba014] {\n  padding: 60px 20px;\n  text-align: center;\n  color: rgba(0, 0, 0, 0.4);\n}\n.jh-form-list-empty p[data-v-ce7ba014] {\n  margin: 0;\n  font-size: 14px;\n}\n\n/* 禁用状态 */\n.jh-form-list--disabled[data-v-ce7ba014] {\n  opacity: 0.6;\n  pointer-events: none;\n}\n\n/* 只读状态 */\n.jh-form-list--readonly .jh-form-list-item-actions[data-v-ce7ba014],\n.jh-form-list--readonly .jh-form-list-footer[data-v-ce7ba014] {\n  display: none;\n}\n\n/* Table 模式样式优化 */\n.jh-form-list-body--table[data-v-ce7ba014] .v-data-table tbody tr:hover {\n  background-color: rgba(0, 0, 0, 0.02);\n}\n.jh-form-list-body--table[data-v-ce7ba014] .v-input {\n  margin-top: 0;\n  padding-top: 0;\n}\n\n/* 响应式 */\n@media (max-width: 600px) {\n.jh-form-list-item-header[data-v-ce7ba014] {\n    flex-wrap: wrap;\n}\n.jh-form-list-item-actions[data-v-ce7ba014] {\n    margin-top: 8px;\n}\n}\n","",{version:3,sources:["webpack://./src/components/JhFormList/JhFormList.vue"],names:[],mappings:";AA0+BA,WAAA;AACA;EACA,WAAA;AACA;;AAEA,SAAA;AACA;EACA,mBAAA;AACA;;AAEA,SAAA;AACA;EACA,kBAAA;AACA;AAEA;EACA,QAAA;AACA;;AAEA,QAAA;AACA;EACA,kBAAA;AACA;AAEA;EACA,gCAAA;AACA;AAEA;EACA,wCAAA;AACA;AAEA;EACA,gCAAA;AACA;;AAEA,UAAA;AACA;EACA,gBAAA;AACA;AAEA;EACA,gBAAA;EACA,eAAA;EACA,yBAAA;AACA;;AAEA,UAAA;AACA;EACA,aAAA;EACA,QAAA;AACA;;AAEA,SAAA;AACA;EACA,YAAA;EACA,yBAAA;AACA;AAEA;EACA,yBAAA;AACA;;AAEA,SAAA;AACA;EACA,YAAA;EACA,+BAAA;AACA;AAEA;EACA,YAAA;EACA,0CAAA;AACA;;AAEA,SAAA;AACA;EACA,aAAA;EACA,uBAAA;AACA;;AAEA,UAAA;AACA;EACA,kBAAA;EACA,kBAAA;EACA,yBAAA;AACA;AAEA;EACA,SAAA;EACA,eAAA;AACA;;AAEA,SAAA;AACA;EACA,YAAA;EACA,oBAAA;AACA;;AAEA,SAAA;AACA;;EAEA,aAAA;AACA;;AAEA,iBAAA;AACA;EACA,qCAAA;AACA;AAEA;EACA,aAAA;EACA,cAAA;AACA;;AAEA,QAAA;AACA;AACA;IACA,eAAA;AACA;AAEA;IACA,eAAA;AACA;AACA",sourcesContent:['<template>\n  <div :class="formListClasses">\n    \x3c!-- 列表头部 --\x3e\n    <div v-if="title || description || $slots.header" class="jh-form-list-header">\n      <slot name="header">\n        <h3 v-if="title" class="text-h6 mb-2">{{ title }}</h3>\n        <p v-if="description" class="text-caption grey--text mb-0">{{ description }}</p>\n      </slot>\n    </div>\n\n    \x3c!-- 空列表占位 --\x3e\n    <div v-if="listData.length === 0" class="jh-form-list-empty">\n      <slot name="empty">\n        <v-icon size="48" color="grey lighten-1">mdi-inbox</v-icon>\n        <p class="grey--text mt-2">暂无数据</p>\n      </slot>\n    </div>\n\n    \x3c!-- 列表主体 - Card 模式 --\x3e\n    <div\n      v-else-if="mode === \'card\'"\n      ref="listBody"\n      class="jh-form-list-body jh-form-list-body--card"\n    >\n      <v-card\n        v-for="(item, index) in listData"\n        :key="item.__id__"\n        :class="getItemClasses(index)"\n        v-bind="cardProps"\n        class="jh-form-list-item jh-form-list-item--card mb-4"\n      >\n        \x3c!-- 列表项头部 --\x3e\n        <v-card-title class="jh-form-list-item-header py-2 px-4">\n          <div class="d-flex align-center">\n            \x3c!-- 拖拽把手 --\x3e\n            <v-icon\n              v-if="sortable && !disabled && !readonly"\n              class="jh-form-list-drag-handle mr-2"\n              small\n            >\n              mdi-drag\n            </v-icon>\n            \x3c!-- 折叠按钮 --\x3e\n            <v-btn\n              v-if="collapsible"\n              icon\n              x-small\n              @click="toggleCollapse(item)"\n              class="mr-2"\n            >\n              <v-icon small>\n                {{ isCollapsed(item) ? \'mdi-chevron-down\' : \'mdi-chevron-up\' }}\n              </v-icon>\n            </v-btn>\n            \x3c!-- 序号 --\x3e\n            <span v-if="showIndex && alwaysShowItemLabel" class="jh-form-list-item-index">\n              #{{ index + 1 }}\n            </span>\n          </div>\n          <v-spacer></v-spacer>\n          \x3c!-- 操作按钮 --\x3e\n          <div v-if="showItemActions && !disabled && !readonly" class="jh-form-list-item-actions">\n            <slot name="item-actions" :item="item" :index="index" :removeItem="removeItem" :copyItem="copyItem">\n              <template v-if="actionRender">\n                <component :is="{ render: () => renderActionButtons(item, index) }" />\n              </template>\n              <template v-else>\n                <v-btn\n                  v-if="copyable"\n                  icon\n                  small\n                  @click="copyItem(index)"\n                  title="复制"\n                >\n                  <v-icon small>mdi-content-copy</v-icon>\n                </v-btn>\n                <v-btn\n                  icon\n                  small\n                  color="error"\n                  @click="removeItem(index)"\n                  :disabled="listData.length <= min"\n                  title="删除"\n                >\n                  <v-icon small>mdi-delete</v-icon>\n                </v-btn>\n              </template>\n            </slot>\n          </div>\n        </v-card-title>\n\n        <v-divider v-if="!isCollapsed(item)"></v-divider>\n\n        \x3c!-- 列表项内容 --\x3e\n        <v-expand-transition>\n          <v-card-text v-show="!isCollapsed(item)" class="pa-4">\n            <slot name="item" :item="item" :index="index" :fields="fields" :updateItem="(key, value) => updateItemField(index, key, value)">\n              <jh-form\n                :ref="`itemForm_${index}`"\n                :fields="fields"\n                :initial-data="item"\n                :layout="itemLayout"\n                :label-width="itemLabelWidth"\n                :dense="dense"\n                :outlined="outlined"\n                :disabled="disabled"\n                :readonly="readonly"\n                :hide-details="false"\n                @field-change="handleItemFieldChange(index, $event)"\n              >\n                \x3c!-- 传递字段插槽 --\x3e\n                <template v-for="field in fields" v-slot:[`field-${field.key}`]="slotProps">\n                  <slot\n                    :name="`field-${field.key}`"\n                    v-bind="{ ...slotProps, index, item }"\n                  ></slot>\n                </template>\n              </jh-form>\n            </slot>\n          </v-card-text>\n        </v-expand-transition>\n\n        \x3c!-- 验证错误提示 --\x3e\n        <v-alert\n          v-if="validationErrors[index] && !isCollapsed(item)"\n          type="error"\n          dense\n          text\n          class="mx-4 mb-3"\n        >\n          {{ validationErrors[index] }}\n        </v-alert>\n      </v-card>\n    </div>\n\n    \x3c!-- 列表主体 - Table 模式 --\x3e\n    <div\n      v-else-if="mode === \'table\'"\n      class="jh-form-list-body jh-form-list-body--table"\n    >\n      <v-simple-table :dense="dense">\n        <thead>\n          <tr>\n            <th v-if="showIndex" class="text-center" style="width: 60px">#</th>\n            <th v-if="sortable && !disabled && !readonly" style="width: 40px"></th>\n            <th v-for="field in fields" :key="field.key">\n              <span v-if="field.required" class="error--text mr-1">*</span>\n              {{ field.label }}\n            </th>\n            <th v-if="showItemActions && !disabled && !readonly" class="text-center" :style="{ width: actionColumn.width + \'px\' }">\n              操作\n            </th>\n          </tr>\n        </thead>\n        <tbody ref="listBody">\n          <tr\n            v-for="(item, index) in listData"\n            :key="item.__id__"\n            :class="getItemClasses(index)"\n          >\n            \x3c!-- 序号 --\x3e\n            <td v-if="showIndex" class="text-center">{{ index + 1 }}</td>\n            \x3c!-- 拖拽把手 --\x3e\n            <td v-if="sortable && !disabled && !readonly" class="text-center">\n              <v-icon class="jh-form-list-drag-handle" small>mdi-drag</v-icon>\n            </td>\n            \x3c!-- 字段列 --\x3e\n            <td v-for="field in fields" :key="field.key">\n              <slot :name="`field-${field.key}`" :item="item" :index="index" :field="field" :updateItem="(key, value) => updateItemField(index, key, value)">\n                <component\n                  :is="getFieldComponent(field)"\n                  v-model="item[field.key]"\n                  :dense="dense"\n                  :outlined="outlined"\n                  :disabled="disabled || getFieldDisabled(field, item)"\n                  :readonly="readonly"\n                  :placeholder="field.placeholder"\n                  :hide-details="true"\n                  v-bind="getFieldProps(field)"\n                  @input="handleItemFieldChange(index, { key: field.key, value: $event })"\n                ></component>\n              </slot>\n            </td>\n            \x3c!-- 操作列 --\x3e\n            <td v-if="showItemActions && !disabled && !readonly" class="text-center">\n              <slot name="item-actions" :item="item" :index="index" :removeItem="removeItem" :copyItem="copyItem">\n                <v-btn\n                  v-if="copyable"\n                  icon\n                  x-small\n                  @click="copyItem(index)"\n                  title="复制"\n                  class="mr-1"\n                >\n                  <v-icon x-small>mdi-content-copy</v-icon>\n                </v-btn>\n                <v-btn\n                  icon\n                  x-small\n                  color="error"\n                  @click="removeItem(index)"\n                  :disabled="listData.length <= min"\n                  title="删除"\n                >\n                  <v-icon x-small>mdi-delete</v-icon>\n                </v-btn>\n              </slot>\n            </td>\n          </tr>\n        </tbody>\n      </v-simple-table>\n    </div>\n\n    \x3c!-- 列表主体 - Inline 模式 --\x3e\n    <div\n      v-else-if="mode === \'inline\'"\n      ref="listBody"\n      class="jh-form-list-body jh-form-list-body--inline d-flex flex-wrap align-center"\n    >\n      <div\n        v-for="(item, index) in listData"\n        :key="item.__id__"\n        :class="getItemClasses(index)"\n        class="jh-form-list-item jh-form-list-item--inline mr-2 mb-2"\n      >\n        <slot name="item" :item="item" :index="index" :fields="fields" :updateItem="(key, value) => updateItemField(index, key, value)">\n          <v-chip\n            :close="!disabled && !readonly && listData.length > min"\n            @click:close="removeItem(index)"\n            :draggable="sortable && !disabled && !readonly"\n          >\n            <v-icon v-if="sortable && !disabled && !readonly" class="jh-form-list-drag-handle mr-1" x-small>\n              mdi-drag\n            </v-icon>\n            {{ getInlineItemDisplay(item) }}\n          </v-chip>\n        </slot>\n      </div>\n    </div>\n\n    \x3c!-- 列表级验证错误 --\x3e\n    <v-alert\n      v-if="validationErrors._list"\n      type="error"\n      dense\n      text\n      class="mt-3"\n    >\n      {{ validationErrors._list }}\n    </v-alert>\n\n    \x3c!-- 最大数量限制提示 --\x3e\n    <v-alert\n      v-if="showMaxLimitAlert"\n      type="warning"\n      dense\n      text\n      dismissible\n      class="mt-3"\n      @input="showMaxLimitAlert = false"\n    >\n      {{ maxLimitText }} (最大: {{ max }})\n    </v-alert>\n\n    \x3c!-- 最小数量限制提示 --\x3e\n    <v-alert\n      v-if="showMinLimitAlert"\n      type="warning"\n      dense\n      text\n      dismissible\n      class="mt-3"\n      @input="showMinLimitAlert = false"\n    >\n      {{ minLimitText }} (最小: {{ min }})\n    </v-alert>\n\n    \x3c!-- 列表底部 - 添加按钮 --\x3e\n    <div v-if="!disabled && !readonly && computedCreatorButtonProps !== false" class="jh-form-list-footer mt-4">\n      <slot name="footer" :addItem="addItem" :canAdd="canAdd">\n        <v-btn\n          v-bind="computedCreatorButtonProps"\n          :disabled="!canAdd"\n          @click="addItem()"\n        >\n          <v-icon left>mdi-plus</v-icon>\n          {{ computedCreatorButtonProps.text || addButtonText }}\n        </v-btn>\n      </slot>\n    </div>\n  </div>\n</template>\n\n<script>\nimport JhForm from \'../JhForm/JhForm.vue\';\n\nexport default {\n  name: \'JhFormList\',\n\n  components: {\n    JhForm,\n  },\n\n  props: {\n    // 列表数据 (v-model)\n    value: {\n      type: Array,\n      default: () => [],\n    },\n\n    // 字段配置\n    fields: {\n      type: Array,\n      default: () => [],\n    },\n\n    // 渲染模式\n    mode: {\n      type: String,\n      default: \'card\',\n      validator: (v) => [\'card\', \'table\', \'inline\'].includes(v),\n    },\n\n    // 列表标题\n    title: {\n      type: String,\n      default: \'\',\n    },\n\n    // 列表说明\n    description: {\n      type: String,\n      default: \'\',\n    },\n\n    // 最小项数\n    min: {\n      type: Number,\n      default: 0,\n    },\n\n    // 最大项数\n    max: {\n      type: Number,\n      default: Infinity,\n    },\n\n    // 是否可排序\n    sortable: {\n      type: Boolean,\n      default: false,\n    },\n\n    // 是否可复制\n    copyable: {\n      type: Boolean,\n      default: true,\n    },\n\n    // 是否显示序号\n    showIndex: {\n      type: Boolean,\n      default: true,\n    },\n\n    // 是否显示项操作按钮\n    showItemActions: {\n      type: Boolean,\n      default: true,\n    },\n\n    // 新增项的默认值\n    defaultValue: {\n      type: [Object, Function],\n      default: () => ({}),\n    },\n\n    // 添加按钮文本\n    addButtonText: {\n      type: String,\n      default: \'添加\',\n    },\n\n    // 添加按钮 props\n    addButtonProps: {\n      type: Object,\n      default: () => ({}),\n    },\n\n    // 删除确认\n    deleteConfirm: {\n      type: Boolean,\n      default: false,\n    },\n\n    // 删除确认文本\n    deleteConfirmText: {\n      type: String,\n      default: \'确定要删除这一项吗？\',\n    },\n\n    // 列表项表单布局\n    itemLayout: {\n      type: String,\n      default: \'horizontal\',\n    },\n\n    // 列表项标签宽度\n    itemLabelWidth: {\n      type: [Number, String],\n      default: \'auto\',\n    },\n\n    // 紧凑模式\n    dense: {\n      type: Boolean,\n      default: true,\n    },\n\n    // 边框样式\n    outlined: {\n      type: Boolean,\n      default: true,\n    },\n\n    // 禁用\n    disabled: {\n      type: Boolean,\n      default: false,\n    },\n\n    // 只读\n    readonly: {\n      type: Boolean,\n      default: false,\n    },\n\n    // 列表级验证规则\n    rules: {\n      type: Array,\n      default: () => [],\n    },\n\n    // 操作列配置 (table 模式)\n    actionColumn: {\n      type: Object,\n      default: () => ({ width: 100 }),\n    },\n\n    // 卡片 props (card 模式)\n    cardProps: {\n      type: Object,\n      default: () => ({}),\n    },\n\n    // 列表项自定义样式类\n    itemClass: {\n      type: String,\n      default: \'\',\n    },\n\n    // Inline 模式显示字段\n    inlineDisplayKey: {\n      type: String,\n      default: \'\',\n    },\n\n    // 始终显示项标签 (card 模式)\n    alwaysShowItemLabel: {\n      type: Boolean,\n      default: true,\n    },\n\n    // 自定义项渲染函数\n    itemRender: {\n      type: Function,\n      default: null,\n    },\n\n    // 创建按钮配置 (ProFormList 风格)\n    creatorButtonProps: {\n      type: [Object, Boolean],\n      default: () => ({}),\n    },\n\n    // 创建记录的初始值 (ProFormList 风格)\n    creatorRecord: {\n      type: [Object, Function],\n      default: null,\n    },\n\n    // 操作守卫 (删除前确认)\n    actionGuard: {\n      type: Object,\n      default: () => ({\n        beforeAddRow: null,\n        beforeRemoveRow: null,\n      }),\n    },\n\n    // 删除后回调\n    onAfterRemove: {\n      type: Function,\n      default: null,\n    },\n\n    // 卡片是否可折叠\n    collapsible: {\n      type: Boolean,\n      default: false,\n    },\n\n    // 默认折叠状态\n    defaultCollapsed: {\n      type: Boolean,\n      default: false,\n    },\n\n    // 操作按钮渲染配置\n    actionRender: {\n      type: Function,\n      default: null,\n    },\n\n    // 最大数量提示文本\n    maxLimitText: {\n      type: String,\n      default: \'已达到最大数量限制\',\n    },\n\n    // 最小数量提示文本\n    minLimitText: {\n      type: String,\n      default: \'已达到最小数量限制\',\n    },\n  },\n\n  data() {\n    return {\n      listData: [],\n      validationErrors: {},\n      sortableInstance: null,\n      collapsedItems: new Set(), // 折叠状态管理\n      showMaxLimitAlert: false, // 显示最大数量提示\n      showMinLimitAlert: false, // 显示最小数量提示\n    };\n  },\n\n  computed: {\n    formListClasses() {\n      return {\n        \'jh-form-list\': true,\n        [`jh-form-list--${this.mode}`]: true,\n        \'jh-form-list--disabled\': this.disabled,\n        \'jh-form-list--readonly\': this.readonly,\n      };\n    },\n\n    canAdd() {\n      return this.listData.length < this.max;\n    },\n\n    // 计算创建按钮配置\n    computedCreatorButtonProps() {\n      if (this.creatorButtonProps === false) return false;\n      return {\n        color: \'primary\',\n        outlined: true,\n        ...this.creatorButtonProps,\n      };\n    },\n\n    // 计算创建记录初始值\n    computedCreatorRecord() {\n      if (this.creatorRecord) {\n        return typeof this.creatorRecord === \'function\'\n          ? this.creatorRecord\n          : () => this.creatorRecord;\n      }\n      return typeof this.defaultValue === \'function\'\n        ? this.defaultValue\n        : () => this.defaultValue;\n    },\n  },\n\n  watch: {\n    value: {\n      handler(val) {\n        this.initListData();\n      },\n      immediate: true,\n      deep: true,\n    },\n\n    sortable(val) {\n      if (val) {\n        this.$nextTick(() => {\n          this.initSortable();\n        });\n      } else {\n        this.destroySortable();\n      }\n    },\n  },\n\n  mounted() {\n    if (this.sortable) {\n      this.initSortable();\n    }\n  },\n\n  beforeDestroy() {\n    this.destroySortable();\n  },\n\n  methods: {\n    // 生成唯一 ID\n    generateItemId() {\n      return `item_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n    },\n\n    // 初始化列表数据\n    initListData() {\n      this.listData = (this.value || []).map(item => ({\n        ...item,\n        __id__: item.__id__ || this.generateItemId(),\n      }));\n    },\n\n    // 获取清理后的数据（移除 __id__）\n    getCleanData() {\n      return this.listData.map(item => {\n        const { __id__, ...cleanItem } = item;\n        return cleanItem;\n      });\n    },\n\n    // 添加项\n    async addItem(item = null, index = null) {\n      // 检查最大数量限制\n      if (this.listData.length >= this.max) {\n        this.showMaxLimitAlert = true;\n        setTimeout(() => {\n          this.showMaxLimitAlert = false;\n        }, 3000);\n        this.$emit(\'max-limit\', this.max);\n        return;\n      }\n\n      // 执行添加前守卫\n      if (this.actionGuard?.beforeAddRow) {\n        const canAdd = await this.actionGuard.beforeAddRow(this.listData.length);\n        if (canAdd === false) return;\n      }\n\n      // 获取默认值\n      const defaultValue = this.computedCreatorRecord(this.listData.length);\n\n      // 创建新项\n      const newItem = {\n        ...defaultValue,\n        ...item,\n        __id__: this.generateItemId(),\n      };\n\n      // 插入列表\n      if (index !== null && index >= 0 && index <= this.listData.length) {\n        this.listData.splice(index, 0, newItem);\n      } else {\n        this.listData.push(newItem);\n      }\n\n      // 触发事件\n      this.emitInput();\n      this.$emit(\'add\', this.getCleanItem(newItem), index ?? this.listData.length - 1);\n    },\n\n    // 删除项\n    async removeItem(index) {\n      // 检查最小数量限制\n      if (this.listData.length <= this.min) {\n        this.showMinLimitAlert = true;\n        setTimeout(() => {\n          this.showMinLimitAlert = false;\n        }, 3000);\n        this.$emit(\'min-limit\', this.min);\n        return;\n      }\n\n      // 执行删除前守卫\n      if (this.actionGuard?.beforeRemoveRow) {\n        const canRemove = await this.actionGuard.beforeRemoveRow(index, this.listData[index]);\n        if (canRemove === false) return;\n      }\n\n      // 确认弹窗\n      if (this.deleteConfirm) {\n        const confirmed = await this.confirm(this.deleteConfirmText);\n        if (!confirmed) return;\n      }\n\n      const removedItem = this.listData[index];\n      this.listData.splice(index, 1);\n\n      // 清理验证错误\n      delete this.validationErrors[index];\n      // 清理折叠状态\n      this.collapsedItems.delete(removedItem.__id__);\n\n      this.emitInput();\n      this.$emit(\'remove\', this.getCleanItem(removedItem), index);\n      \n      // 执行删除后回调\n      if (this.onAfterRemove) {\n        this.onAfterRemove(index, this.getCleanItem(removedItem));\n      }\n    },\n\n    // 复制项\n    copyItem(index) {\n      if (!this.canAdd) {\n        this.$emit(\'max-limit\', this.max);\n        return;\n      }\n\n      const sourceItem = this.listData[index];\n      const { __id__, ...cleanSource } = sourceItem;\n      const newItem = {\n        ...cleanSource,\n        __id__: this.generateItemId(),\n      };\n\n      // 在源项后面插入\n      this.listData.splice(index + 1, 0, newItem);\n\n      this.emitInput();\n      this.$emit(\'copy\', this.getCleanItem(sourceItem), this.getCleanItem(newItem));\n    },\n\n    // 移动项\n    moveItem(oldIndex, newIndex) {\n      const item = this.listData.splice(oldIndex, 1)[0];\n      this.listData.splice(newIndex, 0, item);\n\n      this.emitInput();\n      this.$emit(\'sort\', oldIndex, newIndex);\n    },\n\n    // 更新项字段\n    updateItemField(index, key, value) {\n      if (this.listData[index]) {\n        this.$set(this.listData[index], key, value);\n        this.emitInput();\n        this.$emit(\'item-change\', index, this.getCleanItem(this.listData[index]));\n      }\n    },\n\n    // 处理项字段变化\n    handleItemFieldChange(index, { key, value }) {\n      this.updateItemField(index, key, value);\n    },\n\n    // 获取清理后的单个项\n    getCleanItem(item) {\n      const { __id__, ...cleanItem } = item;\n      return cleanItem;\n    },\n\n    // 触发 input 事件\n    emitInput() {\n      this.$emit(\'input\', this.getCleanData());\n      this.$emit(\'change\', this.getCleanData());\n    },\n\n    // 获取项样式类\n    getItemClasses(index) {\n      const classes = [];\n      if (this.itemClass) {\n        classes.push(this.itemClass);\n      }\n      if (this.validationErrors[index]) {\n        classes.push(\'jh-form-list-item--error\');\n      }\n      return classes.join(\' \');\n    },\n\n    // 切换折叠状态\n    toggleCollapse(item) {\n      const id = item.__id__;\n      if (this.collapsedItems.has(id)) {\n        this.collapsedItems.delete(id);\n      } else {\n        this.collapsedItems.add(id);\n      }\n      this.$forceUpdate();\n    },\n\n    // 判断是否折叠\n    isCollapsed(item) {\n      return this.collapsedItems.has(item.__id__);\n    },\n\n    // 渲染操作按钮\n    renderActionButtons(item, index) {\n      if (this.actionRender) {\n        return this.actionRender({\n          item: this.getCleanItem(item),\n          index,\n          removeItem: () => this.removeItem(index),\n          copyItem: () => this.copyItem(index),\n        });\n      }\n      return null;\n    },\n\n    // 获取字段组件\n    getFieldComponent(field) {\n      const componentMap = {\n        text: \'v-text-field\',\n        textarea: \'v-textarea\',\n        number: \'v-text-field\',\n        select: \'v-select\',\n        autocomplete: \'v-autocomplete\',\n        switch: \'v-switch\',\n        checkbox: \'v-checkbox\',\n      };\n      return componentMap[field.type] || \'v-text-field\';\n    },\n\n    // 获取字段 props\n    getFieldProps(field) {\n      const props = { ...field.props };\n\n      if (field.type === \'select\' || field.type === \'autocomplete\') {\n        props.items = field.options || [];\n        props.itemText = field.itemText || \'text\';\n        props.itemValue = field.itemValue || \'value\';\n      }\n\n      if (field.type === \'number\') {\n        props.type = \'number\';\n      }\n\n      return props;\n    },\n\n    // 获取字段禁用状态\n    getFieldDisabled(field, item) {\n      if (typeof field.disabled === \'function\') {\n        return field.disabled(item);\n      }\n      return field.disabled || false;\n    },\n\n    // Inline 模式显示内容\n    getInlineItemDisplay(item) {\n      if (this.inlineDisplayKey) {\n        return item[this.inlineDisplayKey] || \'-\';\n      }\n      // 默认显示第一个字段的值\n      const firstField = this.fields[0];\n      return firstField ? (item[firstField.key] || \'-\') : \'-\';\n    },\n\n    // 初始化拖拽排序\n    initSortable() {\n      if (!this.sortable || this.sortableInstance) return;\n\n      this.$nextTick(() => {\n        const container = this.$refs.listBody;\n        if (!container) return;\n\n        // 动态导入 sortablejs\n        if (typeof window !== \'undefined\' && window.Sortable) {\n          this.sortableInstance = window.Sortable.create(container, {\n            animation: 150,\n            handle: \'.jh-form-list-drag-handle\',\n            ghostClass: \'jh-form-list-ghost\',\n            dragClass: \'jh-form-list-dragging\',\n            onEnd: (evt) => {\n              const { oldIndex, newIndex } = evt;\n              if (oldIndex !== newIndex) {\n                this.moveItem(oldIndex, newIndex);\n              }\n            },\n          });\n        } else {\n          console.warn(\'JhFormList: sortable 功能需要引入 SortableJS 库\');\n        }\n      });\n    },\n\n    // 销毁拖拽实例\n    destroySortable() {\n      if (this.sortableInstance) {\n        this.sortableInstance.destroy();\n        this.sortableInstance = null;\n      }\n    },\n\n    // 验证整个列表\n    async validate() {\n      const errors = {};\n      let isValid = true;\n\n      // 1. 验证列表规则\n      if (this.rules && this.rules.length) {\n        for (const rule of this.rules) {\n          const result = rule(this.getCleanData());\n          if (typeof result === \'string\') {\n            errors._list = result;\n            isValid = false;\n            break;\n          }\n        }\n      }\n\n      // 2. 验证每个项\n      for (let i = 0; i < this.listData.length; i++) {\n        const itemValid = await this.validateItem(i);\n        if (!itemValid) {\n          isValid = false;\n          errors[i] = \'该项存在验证错误\';\n        }\n      }\n\n      this.validationErrors = errors;\n      this.$emit(\'validate\', isValid, errors);\n      return isValid;\n    },\n\n    // 验证指定项\n    async validateItem(index) {\n      const formRef = this.$refs[`itemForm_${index}`];\n      if (formRef && formRef[0]) {\n        return await formRef[0].validate();\n      }\n      return true;\n    },\n\n    // 重置验证\n    resetValidation() {\n      this.validationErrors = {};\n      // 重置每个项的表单验证\n      this.listData.forEach((item, index) => {\n        const formRef = this.$refs[`itemForm_${index}`];\n        if (formRef && formRef[0]) {\n          formRef[0].resetValidation();\n        }\n      });\n    },\n\n    // 重置列表\n    reset() {\n      this.listData = [];\n      this.validationErrors = {};\n      this.emitInput();\n    },\n\n    // 获取列表数据\n    getItems() {\n      return this.getCleanData();\n    },\n\n    // 设置列表数据\n    setItems(items) {\n      this.listData = items.map(item => ({\n        ...item,\n        __id__: item.__id__ || this.generateItemId(),\n      }));\n      this.emitInput();\n    },\n\n    // 获取指定项数据\n    getItemValue(index) {\n      return this.listData[index] ? this.getCleanItem(this.listData[index]) : null;\n    },\n\n    // 设置指定项数据\n    setItemValue(index, value) {\n      if (this.listData[index]) {\n        this.$set(this.listData, index, {\n          ...value,\n          __id__: this.listData[index].__id__,\n        });\n        this.emitInput();\n      }\n    },\n\n    // 确认对话框\n    confirm(message) {\n      // 简单的确认实现，实际项目中可以使用 JhConfirmDialog\n      return new Promise((resolve) => {\n        const result = window.confirm(message);\n        resolve(result);\n      });\n    },\n  },\n};\n<\/script>\n\n<style scoped>\n/* 表单列表容器 */\n.jh-form-list {\n  width: 100%;\n}\n\n/* 列表头部 */\n.jh-form-list-header {\n  margin-bottom: 16px;\n}\n\n/* 列表主体 */\n.jh-form-list-body {\n  position: relative;\n}\n\n.jh-form-list-body--inline {\n  gap: 8px;\n}\n\n/* 列表项 */\n.jh-form-list-item {\n  position: relative;\n}\n\n.jh-form-list-item--card {\n  transition: box-shadow 0.2s ease;\n}\n\n.jh-form-list-item--card:hover {\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n}\n\n.jh-form-list-item--error {\n  border-color: #f44336 !important;\n}\n\n/* 列表项头部 */\n.jh-form-list-item-header {\n  min-height: 48px;\n}\n\n.jh-form-list-item-index {\n  font-weight: 500;\n  font-size: 14px;\n  color: rgba(0, 0, 0, 0.6);\n}\n\n/* 列表项操作 */\n.jh-form-list-item-actions {\n  display: flex;\n  gap: 4px;\n}\n\n/* 拖拽把手 */\n.jh-form-list-drag-handle {\n  cursor: move;\n  color: rgba(0, 0, 0, 0.4);\n}\n\n.jh-form-list-drag-handle:hover {\n  color: rgba(0, 0, 0, 0.6);\n}\n\n/* 拖拽状态 */\n.jh-form-list-ghost {\n  opacity: 0.5;\n  background: rgba(0, 0, 0, 0.05);\n}\n\n.jh-form-list-dragging {\n  cursor: move;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n}\n\n/* 列表底部 */\n.jh-form-list-footer {\n  display: flex;\n  justify-content: center;\n}\n\n/* 空列表占位 */\n.jh-form-list-empty {\n  padding: 60px 20px;\n  text-align: center;\n  color: rgba(0, 0, 0, 0.4);\n}\n\n.jh-form-list-empty p {\n  margin: 0;\n  font-size: 14px;\n}\n\n/* 禁用状态 */\n.jh-form-list--disabled {\n  opacity: 0.6;\n  pointer-events: none;\n}\n\n/* 只读状态 */\n.jh-form-list--readonly .jh-form-list-item-actions,\n.jh-form-list--readonly .jh-form-list-footer {\n  display: none;\n}\n\n/* Table 模式样式优化 */\n.jh-form-list-body--table >>> .v-data-table tbody tr:hover {\n  background-color: rgba(0, 0, 0, 0.02);\n}\n\n.jh-form-list-body--table >>> .v-input {\n  margin-top: 0;\n  padding-top: 0;\n}\n\n/* 响应式 */\n@media (max-width: 600px) {\n  .jh-form-list-item-header {\n    flex-wrap: wrap;\n  }\n\n  .jh-form-list-item-actions {\n    margin-top: 8px;\n  }\n}\n</style>\n'],sourceRoot:""}]);const __WEBPACK_DEFAULT_EXPORT__=___CSS_LOADER_EXPORT___},"./src/components/JhFormList/JhFormList.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function _defineProperty(e,r,t){return(r=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==_typeof(i)?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{AdvancedValidation:()=>AdvancedValidation,BasicCard:()=>BasicCard,CustomRender:()=>CustomRender,DisabledState:()=>DisabledState,DynamicDefaultValue:()=>DynamicDefaultValue,InlineMode:()=>InlineMode,NestedList:()=>NestedList,ReadonlyMode:()=>ReadonlyMode,TableMode:()=>TableMode,__namedExportsOrder:()=>__namedExportsOrder,default:()=>JhFormList_stories});var JhForm=__webpack_require__("./src/components/JhForm/JhForm.vue"),_excluded=["__id__"],_excluded2=["__id__"],_excluded3=["__id__"];function JhFormListvue_type_script_lang_js_typeof(o){return JhFormListvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},JhFormListvue_type_script_lang_js_typeof(o)}function _createForOfIteratorHelper(r,e){var t="undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0}}(r))||e&&r&&"number"==typeof r.length){t&&(r=t);var _n=0,F=function F(){};return{s:F,n:function n(){return _n>=r.length?{done:!0}:{done:!1,value:r[_n++]}},e:function e(r){throw r},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function s(){t=t.call(r)},n:function n(){var r=t.next();return a=r.done,r},e:function e(r){u=!0,o=r},f:function f(){try{a||null==t.return||t.return()}finally{if(u)throw o}}}}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}function _regenerator(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var c=n&&n.prototype instanceof Generator?n:Generator,u=Object.create(c.prototype);return _regeneratorDefine2(u,"_invoke",function(r,n,o){var i,c,u,f=0,p=o||[],y=!1,G={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function d(t,r){return i=t,c=0,u=e,G.n=r,a}};function d(r,n){for(c=r,u=n,t=0;!y&&f&&!o&&t<p.length;t++){var o,i=p[t],d=G.p,l=i[2];r>3?(o=l===n)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=e):i[0]<=d&&((o=r<2&&d<i[1])?(c=0,G.v=n,G.n=i[1]):d<l&&(o=r<3||i[0]>n||n>l)&&(i[4]=r,i[5]=n,G.n=l,c=0))}if(o||r>1)return a;throw y=!0,n}return function(o,p,l){if(f>1)throw TypeError("Generator is already running");for(y&&1===p&&d(p,l),c=p,u=l;(t=c<2?e:u)||!y;){i||(c?c<3?(c>1&&(G.n=-1),d(c,u)):G.n=u:G.v=u);try{if(f=2,i){if(c||(o="next"),t=i[o]){if(!(t=t.call(i,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,c<2&&(c=0)}else 1===c&&(t=i.return)&&t.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=e}else if((t=(y=G.n<0)?u:r.call(n,G))!==a)break}catch(t){i=e,c=1,u=t}finally{f=1}}return{value:t,done:y}}}(r,o,i),!0),u}var a={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}t=Object.getPrototypeOf;var c=[][n]?t(t([][n]())):(_regeneratorDefine2(t={},n,function(){return this}),t),u=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,GeneratorFunctionPrototype):(e.__proto__=GeneratorFunctionPrototype,_regeneratorDefine2(e,o,"GeneratorFunction")),e.prototype=Object.create(u),e}return GeneratorFunction.prototype=GeneratorFunctionPrototype,_regeneratorDefine2(u,"constructor",GeneratorFunctionPrototype),_regeneratorDefine2(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName="GeneratorFunction",_regeneratorDefine2(GeneratorFunctionPrototype,o,"GeneratorFunction"),_regeneratorDefine2(u),_regeneratorDefine2(u,o,"Generator"),_regeneratorDefine2(u,n,function(){return this}),_regeneratorDefine2(u,"toString",function(){return"[object Generator]"}),(_regenerator=function _regenerator(){return{w:i,m:f}})()}function _regeneratorDefine2(e,r,n,t){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}_regeneratorDefine2=function _regeneratorDefine(e,r,n,t){function o(r,n){_regeneratorDefine2(e,r,function(e){return this._invoke(r,n,e)})}r?i?i(e,r,{value:n,enumerable:!t,configurable:!t,writable:!t}):e[r]=n:(o("next",0),o("throw",1),o("return",2))},_regeneratorDefine2(e,r,n,t)}function asyncGeneratorStep(n,t,e,r,o,a,c){try{var i=n[a](c),u=i.value}catch(n){return void e(n)}i.done?t(u):Promise.resolve(u).then(r,o)}function _asyncToGenerator(n){return function(){var t=this,e=arguments;return new Promise(function(r,o){var a=n.apply(t,e);function _next(n){asyncGeneratorStep(a,r,o,_next,_throw,"next",n)}function _throw(n){asyncGeneratorStep(a,r,o,_next,_throw,"throw",n)}_next(void 0)})}}function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}function JhFormListvue_type_script_lang_js_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function JhFormListvue_type_script_lang_js_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?JhFormListvue_type_script_lang_js_ownKeys(Object(t),!0).forEach(function(r){JhFormListvue_type_script_lang_js_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):JhFormListvue_type_script_lang_js_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function JhFormListvue_type_script_lang_js_defineProperty(e,r,t){return(r=function JhFormListvue_type_script_lang_js_toPropertyKey(t){var i=function JhFormListvue_type_script_lang_js_toPrimitive(t,r){if("object"!=JhFormListvue_type_script_lang_js_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=JhFormListvue_type_script_lang_js_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==JhFormListvue_type_script_lang_js_typeof(i)?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}const JhFormList_JhFormListvue_type_script_lang_js={name:"JhFormList",components:{JhForm:JhForm.A},props:{value:{type:Array,default:function _default(){return[]}},fields:{type:Array,default:function _default(){return[]}},mode:{type:String,default:"card",validator:function validator(v){return["card","table","inline"].includes(v)}},title:{type:String,default:""},description:{type:String,default:""},min:{type:Number,default:0},max:{type:Number,default:1/0},sortable:{type:Boolean,default:!1},copyable:{type:Boolean,default:!0},showIndex:{type:Boolean,default:!0},showItemActions:{type:Boolean,default:!0},defaultValue:{type:[Object,Function],default:function _default(){return{}}},addButtonText:{type:String,default:"添加"},addButtonProps:{type:Object,default:function _default(){return{}}},deleteConfirm:{type:Boolean,default:!1},deleteConfirmText:{type:String,default:"确定要删除这一项吗？"},itemLayout:{type:String,default:"horizontal"},itemLabelWidth:{type:[Number,String],default:"auto"},dense:{type:Boolean,default:!0},outlined:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},rules:{type:Array,default:function _default(){return[]}},actionColumn:{type:Object,default:function _default(){return{width:100}}},cardProps:{type:Object,default:function _default(){return{}}},itemClass:{type:String,default:""},inlineDisplayKey:{type:String,default:""},alwaysShowItemLabel:{type:Boolean,default:!0},itemRender:{type:Function,default:null},creatorButtonProps:{type:[Object,Boolean],default:function _default(){return{}}},creatorRecord:{type:[Object,Function],default:null},actionGuard:{type:Object,default:function _default(){return{beforeAddRow:null,beforeRemoveRow:null}}},onAfterRemove:{type:Function,default:null},collapsible:{type:Boolean,default:!1},defaultCollapsed:{type:Boolean,default:!1},actionRender:{type:Function,default:null},maxLimitText:{type:String,default:"已达到最大数量限制"},minLimitText:{type:String,default:"已达到最小数量限制"}},data:function data(){return{listData:[],validationErrors:{},sortableInstance:null,collapsedItems:new Set,showMaxLimitAlert:!1,showMinLimitAlert:!1}},computed:{formListClasses:function formListClasses(){return JhFormListvue_type_script_lang_js_defineProperty(JhFormListvue_type_script_lang_js_defineProperty(JhFormListvue_type_script_lang_js_defineProperty({"jh-form-list":!0},"jh-form-list--".concat(this.mode),!0),"jh-form-list--disabled",this.disabled),"jh-form-list--readonly",this.readonly)},canAdd:function canAdd(){return this.listData.length<this.max},computedCreatorButtonProps:function computedCreatorButtonProps(){return!1!==this.creatorButtonProps&&JhFormListvue_type_script_lang_js_objectSpread({color:"primary",outlined:!0},this.creatorButtonProps)},computedCreatorRecord:function computedCreatorRecord(){var _this=this;return this.creatorRecord?"function"==typeof this.creatorRecord?this.creatorRecord:function(){return _this.creatorRecord}:"function"==typeof this.defaultValue?this.defaultValue:function(){return _this.defaultValue}}},watch:{value:{handler:function handler(val){this.initListData()},immediate:!0,deep:!0},sortable:function sortable(val){var _this2=this;val?this.$nextTick(function(){_this2.initSortable()}):this.destroySortable()}},mounted:function mounted(){this.sortable&&this.initSortable()},beforeDestroy:function beforeDestroy(){this.destroySortable()},methods:{generateItemId:function generateItemId(){return"item_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9))},initListData:function initListData(){var _this3=this;this.listData=(this.value||[]).map(function(item){return JhFormListvue_type_script_lang_js_objectSpread(JhFormListvue_type_script_lang_js_objectSpread({},item),{},{__id__:item.__id__||_this3.generateItemId()})})},getCleanData:function getCleanData(){return this.listData.map(function(item){item.__id__;return _objectWithoutProperties(item,_excluded)})},addItem:function addItem(){var _arguments=arguments,_this4=this;return _asyncToGenerator(_regenerator().m(function _callee(){var _this4$actionGuard,item,index,defaultValue,newItem;return _regenerator().w(function(_context){for(;;)switch(_context.n){case 0:if(item=_arguments.length>0&&void 0!==_arguments[0]?_arguments[0]:null,index=_arguments.length>1&&void 0!==_arguments[1]?_arguments[1]:null,!(_this4.listData.length>=_this4.max)){_context.n=1;break}return _this4.showMaxLimitAlert=!0,setTimeout(function(){_this4.showMaxLimitAlert=!1},3e3),_this4.$emit("max-limit",_this4.max),_context.a(2);case 1:if(null===(_this4$actionGuard=_this4.actionGuard)||void 0===_this4$actionGuard||!_this4$actionGuard.beforeAddRow){_context.n=3;break}return _context.n=2,_this4.actionGuard.beforeAddRow(_this4.listData.length);case 2:if(!1!==_context.v){_context.n=3;break}return _context.a(2);case 3:defaultValue=_this4.computedCreatorRecord(_this4.listData.length),newItem=JhFormListvue_type_script_lang_js_objectSpread(JhFormListvue_type_script_lang_js_objectSpread(JhFormListvue_type_script_lang_js_objectSpread({},defaultValue),item),{},{__id__:_this4.generateItemId()}),null!==index&&index>=0&&index<=_this4.listData.length?_this4.listData.splice(index,0,newItem):_this4.listData.push(newItem),_this4.emitInput(),_this4.$emit("add",_this4.getCleanItem(newItem),null!=index?index:_this4.listData.length-1);case 4:return _context.a(2)}},_callee)}))()},removeItem:function removeItem(index){var _this5=this;return _asyncToGenerator(_regenerator().m(function _callee2(){var _this5$actionGuard,removedItem;return _regenerator().w(function(_context2){for(;;)switch(_context2.n){case 0:if(!(_this5.listData.length<=_this5.min)){_context2.n=1;break}return _this5.showMinLimitAlert=!0,setTimeout(function(){_this5.showMinLimitAlert=!1},3e3),_this5.$emit("min-limit",_this5.min),_context2.a(2);case 1:if(null===(_this5$actionGuard=_this5.actionGuard)||void 0===_this5$actionGuard||!_this5$actionGuard.beforeRemoveRow){_context2.n=3;break}return _context2.n=2,_this5.actionGuard.beforeRemoveRow(index,_this5.listData[index]);case 2:if(!1!==_context2.v){_context2.n=3;break}return _context2.a(2);case 3:if(!_this5.deleteConfirm){_context2.n=5;break}return _context2.n=4,_this5.confirm(_this5.deleteConfirmText);case 4:if(_context2.v){_context2.n=5;break}return _context2.a(2);case 5:removedItem=_this5.listData[index],_this5.listData.splice(index,1),delete _this5.validationErrors[index],_this5.collapsedItems.delete(removedItem.__id__),_this5.emitInput(),_this5.$emit("remove",_this5.getCleanItem(removedItem),index),_this5.onAfterRemove&&_this5.onAfterRemove(index,_this5.getCleanItem(removedItem));case 6:return _context2.a(2)}},_callee2)}))()},copyItem:function copyItem(index){if(this.canAdd){var sourceItem=this.listData[index],newItem=(sourceItem.__id__,JhFormListvue_type_script_lang_js_objectSpread(JhFormListvue_type_script_lang_js_objectSpread({},_objectWithoutProperties(sourceItem,_excluded2)),{},{__id__:this.generateItemId()}));this.listData.splice(index+1,0,newItem),this.emitInput(),this.$emit("copy",this.getCleanItem(sourceItem),this.getCleanItem(newItem))}else this.$emit("max-limit",this.max)},moveItem:function moveItem(oldIndex,newIndex){var item=this.listData.splice(oldIndex,1)[0];this.listData.splice(newIndex,0,item),this.emitInput(),this.$emit("sort",oldIndex,newIndex)},updateItemField:function updateItemField(index,key,value){this.listData[index]&&(this.$set(this.listData[index],key,value),this.emitInput(),this.$emit("item-change",index,this.getCleanItem(this.listData[index])))},handleItemFieldChange:function handleItemFieldChange(index,_ref2){var key=_ref2.key,value=_ref2.value;this.updateItemField(index,key,value)},getCleanItem:function getCleanItem(item){item.__id__;return _objectWithoutProperties(item,_excluded3)},emitInput:function emitInput(){this.$emit("input",this.getCleanData()),this.$emit("change",this.getCleanData())},getItemClasses:function getItemClasses(index){var classes=[];return this.itemClass&&classes.push(this.itemClass),this.validationErrors[index]&&classes.push("jh-form-list-item--error"),classes.join(" ")},toggleCollapse:function toggleCollapse(item){var id=item.__id__;this.collapsedItems.has(id)?this.collapsedItems.delete(id):this.collapsedItems.add(id),this.$forceUpdate()},isCollapsed:function isCollapsed(item){return this.collapsedItems.has(item.__id__)},renderActionButtons:function renderActionButtons(item,index){var _this6=this;return this.actionRender?this.actionRender({item:this.getCleanItem(item),index,removeItem:function removeItem(){return _this6.removeItem(index)},copyItem:function copyItem(){return _this6.copyItem(index)}}):null},getFieldComponent:function getFieldComponent(field){return{text:"v-text-field",textarea:"v-textarea",number:"v-text-field",select:"v-select",autocomplete:"v-autocomplete",switch:"v-switch",checkbox:"v-checkbox"}[field.type]||"v-text-field"},getFieldProps:function getFieldProps(field){var props=JhFormListvue_type_script_lang_js_objectSpread({},field.props);return"select"!==field.type&&"autocomplete"!==field.type||(props.items=field.options||[],props.itemText=field.itemText||"text",props.itemValue=field.itemValue||"value"),"number"===field.type&&(props.type="number"),props},getFieldDisabled:function getFieldDisabled(field,item){return"function"==typeof field.disabled?field.disabled(item):field.disabled||!1},getInlineItemDisplay:function getInlineItemDisplay(item){if(this.inlineDisplayKey)return item[this.inlineDisplayKey]||"-";var firstField=this.fields[0];return firstField&&item[firstField.key]||"-"},initSortable:function initSortable(){var _this7=this;this.sortable&&!this.sortableInstance&&this.$nextTick(function(){var container=_this7.$refs.listBody;container&&("undefined"!=typeof window&&window.Sortable?_this7.sortableInstance=window.Sortable.create(container,{animation:150,handle:".jh-form-list-drag-handle",ghostClass:"jh-form-list-ghost",dragClass:"jh-form-list-dragging",onEnd:function onEnd(evt){var oldIndex=evt.oldIndex,newIndex=evt.newIndex;oldIndex!==newIndex&&_this7.moveItem(oldIndex,newIndex)}}):console.warn("JhFormList: sortable 功能需要引入 SortableJS 库"))})},destroySortable:function destroySortable(){this.sortableInstance&&(this.sortableInstance.destroy(),this.sortableInstance=null)},validate:function validate(){var _this8=this;return _asyncToGenerator(_regenerator().m(function _callee3(){var errors,isValid,_iterator,_step,rule,result,i,_t;return _regenerator().w(function(_context3){for(;;)switch(_context3.p=_context3.n){case 0:if(errors={},isValid=!0,!_this8.rules||!_this8.rules.length){_context3.n=7;break}_iterator=_createForOfIteratorHelper(_this8.rules),_context3.p=1,_iterator.s();case 2:if((_step=_iterator.n()).done){_context3.n=4;break}if(rule=_step.value,"string"!=typeof(result=rule(_this8.getCleanData()))){_context3.n=3;break}return errors._list=result,isValid=!1,_context3.a(3,4);case 3:_context3.n=2;break;case 4:_context3.n=6;break;case 5:_context3.p=5,_t=_context3.v,_iterator.e(_t);case 6:return _context3.p=6,_iterator.f(),_context3.f(6);case 7:i=0;case 8:if(!(i<_this8.listData.length)){_context3.n=11;break}return _context3.n=9,_this8.validateItem(i);case 9:_context3.v||(isValid=!1,errors[i]="该项存在验证错误");case 10:i++,_context3.n=8;break;case 11:return _this8.validationErrors=errors,_this8.$emit("validate",isValid,errors),_context3.a(2,isValid)}},_callee3,null,[[1,5,6,7]])}))()},validateItem:function validateItem(index){var _this9=this;return _asyncToGenerator(_regenerator().m(function _callee4(){var formRef;return _regenerator().w(function(_context4){for(;;)switch(_context4.n){case 0:if(!(formRef=_this9.$refs["itemForm_".concat(index)])||!formRef[0]){_context4.n=2;break}return _context4.n=1,formRef[0].validate();case 1:return _context4.a(2,_context4.v);case 2:return _context4.a(2,!0)}},_callee4)}))()},resetValidation:function resetValidation(){var _this0=this;this.validationErrors={},this.listData.forEach(function(item,index){var formRef=_this0.$refs["itemForm_".concat(index)];formRef&&formRef[0]&&formRef[0].resetValidation()})},reset:function reset(){this.listData=[],this.validationErrors={},this.emitInput()},getItems:function getItems(){return this.getCleanData()},setItems:function setItems(items){var _this1=this;this.listData=items.map(function(item){return JhFormListvue_type_script_lang_js_objectSpread(JhFormListvue_type_script_lang_js_objectSpread({},item),{},{__id__:item.__id__||_this1.generateItemId()})}),this.emitInput()},getItemValue:function getItemValue(index){return this.listData[index]?this.getCleanItem(this.listData[index]):null},setItemValue:function setItemValue(index,value){this.listData[index]&&(this.$set(this.listData,index,JhFormListvue_type_script_lang_js_objectSpread(JhFormListvue_type_script_lang_js_objectSpread({},value),{},{__id__:this.listData[index].__id__})),this.emitInput())},confirm:function confirm(message){return new Promise(function(resolve){resolve(window.confirm(message))})}}};var injectStylesIntoStyleTag=__webpack_require__("./node_modules/.pnpm/style-loader@3.3.4_webpack@5.102.1_@swc+core@1.13.5_esbuild@0.18.20_webpack-cli@5.1.4_webpack@5.102.1__/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),styleDomAPI=__webpack_require__("./node_modules/.pnpm/style-loader@3.3.4_webpack@5.102.1_@swc+core@1.13.5_esbuild@0.18.20_webpack-cli@5.1.4_webpack@5.102.1__/node_modules/style-loader/dist/runtime/styleDomAPI.js"),styleDomAPI_default=__webpack_require__.n(styleDomAPI),insertBySelector=__webpack_require__("./node_modules/.pnpm/style-loader@3.3.4_webpack@5.102.1_@swc+core@1.13.5_esbuild@0.18.20_webpack-cli@5.1.4_webpack@5.102.1__/node_modules/style-loader/dist/runtime/insertBySelector.js"),insertBySelector_default=__webpack_require__.n(insertBySelector),setAttributesWithoutAttributes=__webpack_require__("./node_modules/.pnpm/style-loader@3.3.4_webpack@5.102.1_@swc+core@1.13.5_esbuild@0.18.20_webpack-cli@5.1.4_webpack@5.102.1__/node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),setAttributesWithoutAttributes_default=__webpack_require__.n(setAttributesWithoutAttributes),insertStyleElement=__webpack_require__("./node_modules/.pnpm/style-loader@3.3.4_webpack@5.102.1_@swc+core@1.13.5_esbuild@0.18.20_webpack-cli@5.1.4_webpack@5.102.1__/node_modules/style-loader/dist/runtime/insertStyleElement.js"),insertStyleElement_default=__webpack_require__.n(insertStyleElement),styleTagTransform=__webpack_require__("./node_modules/.pnpm/style-loader@3.3.4_webpack@5.102.1_@swc+core@1.13.5_esbuild@0.18.20_webpack-cli@5.1.4_webpack@5.102.1__/node_modules/style-loader/dist/runtime/styleTagTransform.js"),styleTagTransform_default=__webpack_require__.n(styleTagTransform),JhFormListvue_type_style_index_0_id_ce7ba014_prod_scoped_true_lang_css=__webpack_require__("./node_modules/.pnpm/css-loader@6.11.0_webpack@5.102.1_@swc+core@1.13.5_esbuild@0.18.20_webpack-cli@5.1.4_webpack@5.102.1__/node_modules/css-loader/dist/cjs.js??clonedRuleSet-11.use[1]!./node_modules/.pnpm/vue-loader@15.11.1_@vue+compiler-sfc@3.5.22_css-loader@6.11.0_webpack@5.102.1_@swc+core_acb67284a4be633df1055a74f961e4b4/node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@5.9.3_webpack@5.102.1_@swc+core@1.13.5_es_397d8c6b9860a09288c2bf2dc9668002/node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-11.use[2]!./node_modules/.pnpm/vue-loader@15.11.1_@vue+compiler-sfc@3.5.22_css-loader@6.11.0_webpack@5.102.1_@swc+core_acb67284a4be633df1055a74f961e4b4/node_modules/vue-loader/lib/index.js??vue-loader-options!./src/components/JhFormList/JhFormList.vue?vue&type=style&index=0&id=ce7ba014&prod&scoped=true&lang=css"),options={};options.styleTagTransform=styleTagTransform_default(),options.setAttributes=setAttributesWithoutAttributes_default(),options.insert=insertBySelector_default().bind(null,"head"),options.domAPI=styleDomAPI_default(),options.insertStyleElement=insertStyleElement_default();injectStylesIntoStyleTag_default()(JhFormListvue_type_style_index_0_id_ce7ba014_prod_scoped_true_lang_css.A,options);JhFormListvue_type_style_index_0_id_ce7ba014_prod_scoped_true_lang_css.A&&JhFormListvue_type_style_index_0_id_ce7ba014_prod_scoped_true_lang_css.A.locals&&JhFormListvue_type_style_index_0_id_ce7ba014_prod_scoped_true_lang_css.A.locals;const __vuedocgen_export_0=(0,__webpack_require__("./node_modules/.pnpm/vue-loader@15.11.1_@vue+compiler-sfc@3.5.22_css-loader@6.11.0_webpack@5.102.1_@swc+core_acb67284a4be633df1055a74f961e4b4/node_modules/vue-loader/lib/runtime/componentNormalizer.js").A)(JhFormList_JhFormListvue_type_script_lang_js,function render(){var _vm=this,_c=_vm._self._c;return _c("div",{class:_vm.formListClasses},[_vm.title||_vm.description||_vm.$slots.header?_c("div",{staticClass:"jh-form-list-header"},[_vm._t("header",function(){return[_vm.title?_c("h3",{staticClass:"text-h6 mb-2"},[_vm._v(_vm._s(_vm.title))]):_vm._e(),_vm._v(" "),_vm.description?_c("p",{staticClass:"text-caption grey--text mb-0"},[_vm._v(_vm._s(_vm.description))]):_vm._e()]})],2):_vm._e(),_vm._v(" "),0===_vm.listData.length?_c("div",{staticClass:"jh-form-list-empty"},[_vm._t("empty",function(){return[_c("v-icon",{attrs:{size:"48",color:"grey lighten-1"}},[_vm._v("mdi-inbox")]),_vm._v(" "),_c("p",{staticClass:"grey--text mt-2"},[_vm._v("暂无数据")])]})],2):"card"===_vm.mode?_c("div",{ref:"listBody",staticClass:"jh-form-list-body jh-form-list-body--card"},_vm._l(_vm.listData,function(item,index){return _c("v-card",_vm._b({key:item.__id__,staticClass:"jh-form-list-item jh-form-list-item--card mb-4",class:_vm.getItemClasses(index)},"v-card",_vm.cardProps,!1),[_c("v-card-title",{staticClass:"jh-form-list-item-header py-2 px-4"},[_c("div",{staticClass:"d-flex align-center"},[!_vm.sortable||_vm.disabled||_vm.readonly?_vm._e():_c("v-icon",{staticClass:"jh-form-list-drag-handle mr-2",attrs:{small:""}},[_vm._v("\n            mdi-drag\n          ")]),_vm._v(" "),_vm.collapsible?_c("v-btn",{staticClass:"mr-2",attrs:{icon:"","x-small":""},on:{click:function click($event){return _vm.toggleCollapse(item)}}},[_c("v-icon",{attrs:{small:""}},[_vm._v("\n              "+_vm._s(_vm.isCollapsed(item)?"mdi-chevron-down":"mdi-chevron-up")+"\n            ")])],1):_vm._e(),_vm._v(" "),_vm.showIndex&&_vm.alwaysShowItemLabel?_c("span",{staticClass:"jh-form-list-item-index"},[_vm._v("\n            #"+_vm._s(index+1)+"\n          ")]):_vm._e()],1),_vm._v(" "),_c("v-spacer"),_vm._v(" "),!_vm.showItemActions||_vm.disabled||_vm.readonly?_vm._e():_c("div",{staticClass:"jh-form-list-item-actions"},[_vm._t("item-actions",function(){return[_vm.actionRender?[_c({render:function render(){return _vm.renderActionButtons(item,index)}},{tag:"component"})]:[_vm.copyable?_c("v-btn",{attrs:{icon:"",small:"",title:"复制"},on:{click:function click($event){return _vm.copyItem(index)}}},[_c("v-icon",{attrs:{small:""}},[_vm._v("mdi-content-copy")])],1):_vm._e(),_vm._v(" "),_c("v-btn",{attrs:{icon:"",small:"",color:"error",disabled:_vm.listData.length<=_vm.min,title:"删除"},on:{click:function click($event){return _vm.removeItem(index)}}},[_c("v-icon",{attrs:{small:""}},[_vm._v("mdi-delete")])],1)]]},{item,index,removeItem:_vm.removeItem,copyItem:_vm.copyItem})],2)],1),_vm._v(" "),_vm.isCollapsed(item)?_vm._e():_c("v-divider"),_vm._v(" "),_c("v-expand-transition",[_c("v-card-text",{directives:[{name:"show",rawName:"v-show",value:!_vm.isCollapsed(item),expression:"!isCollapsed(item)"}],staticClass:"pa-4"},[_vm._t("item",function(){return[_c("jh-form",{ref:"itemForm_".concat(index),refInFor:!0,attrs:{fields:_vm.fields,"initial-data":item,layout:_vm.itemLayout,"label-width":_vm.itemLabelWidth,dense:_vm.dense,outlined:_vm.outlined,disabled:_vm.disabled,readonly:_vm.readonly,"hide-details":!1},on:{"field-change":function fieldChange($event){return _vm.handleItemFieldChange(index,$event)}},scopedSlots:_vm._u([_vm._l(_vm.fields,function(field){return{key:"field-".concat(field.key),fn:function fn(slotProps){return[_vm._t("field-".concat(field.key),null,null,_objectSpread(_objectSpread({},slotProps),{},{index,item}))]}}})],null,!0)})]},{item,index,fields:_vm.fields,updateItem:function updateItem(key,value){return _vm.updateItemField(index,key,value)}})],2)],1),_vm._v(" "),_vm.validationErrors[index]&&!_vm.isCollapsed(item)?_c("v-alert",{staticClass:"mx-4 mb-3",attrs:{type:"error",dense:"",text:""}},[_vm._v("\n        "+_vm._s(_vm.validationErrors[index])+"\n      ")]):_vm._e()],1)}),1):"table"===_vm.mode?_c("div",{staticClass:"jh-form-list-body jh-form-list-body--table"},[_c("v-simple-table",{attrs:{dense:_vm.dense}},[_c("thead",[_c("tr",[_vm.showIndex?_c("th",{staticClass:"text-center",staticStyle:{width:"60px"}},[_vm._v("#")]):_vm._e(),_vm._v(" "),!_vm.sortable||_vm.disabled||_vm.readonly?_vm._e():_c("th",{staticStyle:{width:"40px"}}),_vm._v(" "),_vm._l(_vm.fields,function(field){return _c("th",{key:field.key},[field.required?_c("span",{staticClass:"error--text mr-1"},[_vm._v("*")]):_vm._e(),_vm._v("\n            "+_vm._s(field.label)+"\n          ")])}),_vm._v(" "),!_vm.showItemActions||_vm.disabled||_vm.readonly?_vm._e():_c("th",{staticClass:"text-center",style:{width:_vm.actionColumn.width+"px"}},[_vm._v("\n            操作\n          ")])],2)]),_vm._v(" "),_c("tbody",{ref:"listBody"},_vm._l(_vm.listData,function(item,index){return _c("tr",{key:item.__id__,class:_vm.getItemClasses(index)},[_vm.showIndex?_c("td",{staticClass:"text-center"},[_vm._v(_vm._s(index+1))]):_vm._e(),_vm._v(" "),!_vm.sortable||_vm.disabled||_vm.readonly?_vm._e():_c("td",{staticClass:"text-center"},[_c("v-icon",{staticClass:"jh-form-list-drag-handle",attrs:{small:""}},[_vm._v("mdi-drag")])],1),_vm._v(" "),_vm._l(_vm.fields,function(field){return _c("td",{key:field.key},[_vm._t("field-".concat(field.key),function(){return[_c(_vm.getFieldComponent(field),_vm._b({tag:"component",attrs:{dense:_vm.dense,outlined:_vm.outlined,disabled:_vm.disabled||_vm.getFieldDisabled(field,item),readonly:_vm.readonly,placeholder:field.placeholder,"hide-details":!0},on:{input:function input($event){return _vm.handleItemFieldChange(index,{key:field.key,value:$event})}},model:{value:item[field.key],callback:function callback($$v){_vm.$set(item,field.key,$$v)},expression:"item[field.key]"}},"component",_vm.getFieldProps(field),!1))]},{item,index,field,updateItem:function updateItem(key,value){return _vm.updateItemField(index,key,value)}})],2)}),_vm._v(" "),!_vm.showItemActions||_vm.disabled||_vm.readonly?_vm._e():_c("td",{staticClass:"text-center"},[_vm._t("item-actions",function(){return[_vm.copyable?_c("v-btn",{staticClass:"mr-1",attrs:{icon:"","x-small":"",title:"复制"},on:{click:function click($event){return _vm.copyItem(index)}}},[_c("v-icon",{attrs:{"x-small":""}},[_vm._v("mdi-content-copy")])],1):_vm._e(),_vm._v(" "),_c("v-btn",{attrs:{icon:"","x-small":"",color:"error",disabled:_vm.listData.length<=_vm.min,title:"删除"},on:{click:function click($event){return _vm.removeItem(index)}}},[_c("v-icon",{attrs:{"x-small":""}},[_vm._v("mdi-delete")])],1)]},{item,index,removeItem:_vm.removeItem,copyItem:_vm.copyItem})],2)],2)}),0)])],1):"inline"===_vm.mode?_c("div",{ref:"listBody",staticClass:"jh-form-list-body jh-form-list-body--inline d-flex flex-wrap align-center"},_vm._l(_vm.listData,function(item,index){return _c("div",{key:item.__id__,staticClass:"jh-form-list-item jh-form-list-item--inline mr-2 mb-2",class:_vm.getItemClasses(index)},[_vm._t("item",function(){return[_c("v-chip",{attrs:{close:!_vm.disabled&&!_vm.readonly&&_vm.listData.length>_vm.min,draggable:_vm.sortable&&!_vm.disabled&&!_vm.readonly},on:{"click:close":function clickClose($event){return _vm.removeItem(index)}}},[!_vm.sortable||_vm.disabled||_vm.readonly?_vm._e():_c("v-icon",{staticClass:"jh-form-list-drag-handle mr-1",attrs:{"x-small":""}},[_vm._v("\n            mdi-drag\n          ")]),_vm._v("\n          "+_vm._s(_vm.getInlineItemDisplay(item))+"\n        ")],1)]},{item,index,fields:_vm.fields,updateItem:function updateItem(key,value){return _vm.updateItemField(index,key,value)}})],2)}),0):_vm._e(),_vm._v(" "),_vm.validationErrors._list?_c("v-alert",{staticClass:"mt-3",attrs:{type:"error",dense:"",text:""}},[_vm._v("\n    "+_vm._s(_vm.validationErrors._list)+"\n  ")]):_vm._e(),_vm._v(" "),_vm.showMaxLimitAlert?_c("v-alert",{staticClass:"mt-3",attrs:{type:"warning",dense:"",text:"",dismissible:""},on:{input:function input($event){_vm.showMaxLimitAlert=!1}}},[_vm._v("\n    "+_vm._s(_vm.maxLimitText)+" (最大: "+_vm._s(_vm.max)+")\n  ")]):_vm._e(),_vm._v(" "),_vm.showMinLimitAlert?_c("v-alert",{staticClass:"mt-3",attrs:{type:"warning",dense:"",text:"",dismissible:""},on:{input:function input($event){_vm.showMinLimitAlert=!1}}},[_vm._v("\n    "+_vm._s(_vm.minLimitText)+" (最小: "+_vm._s(_vm.min)+")\n  ")]):_vm._e(),_vm._v(" "),_vm.disabled||_vm.readonly||!1===_vm.computedCreatorButtonProps?_vm._e():_c("div",{staticClass:"jh-form-list-footer mt-4"},[_vm._t("footer",function(){return[_c("v-btn",_vm._b({attrs:{disabled:!_vm.canAdd},on:{click:function click($event){return _vm.addItem()}}},"v-btn",_vm.computedCreatorButtonProps,!1),[_c("v-icon",{attrs:{left:""}},[_vm._v("mdi-plus")]),_vm._v("\n        "+_vm._s(_vm.computedCreatorButtonProps.text||_vm.addButtonText)+"\n      ")],1)]},{addItem:_vm.addItem,canAdd:_vm.canAdd})],2)],1)},[],!1,null,"ce7ba014",null).exports,JhFormList=__vuedocgen_export_0;function JhFormList_stories_regenerator(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var c=n&&n.prototype instanceof Generator?n:Generator,u=Object.create(c.prototype);return JhFormList_stories_regeneratorDefine2(u,"_invoke",function(r,n,o){var i,c,u,f=0,p=o||[],y=!1,G={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function d(t,r){return i=t,c=0,u=e,G.n=r,a}};function d(r,n){for(c=r,u=n,t=0;!y&&f&&!o&&t<p.length;t++){var o,i=p[t],d=G.p,l=i[2];r>3?(o=l===n)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=e):i[0]<=d&&((o=r<2&&d<i[1])?(c=0,G.v=n,G.n=i[1]):d<l&&(o=r<3||i[0]>n||n>l)&&(i[4]=r,i[5]=n,G.n=l,c=0))}if(o||r>1)return a;throw y=!0,n}return function(o,p,l){if(f>1)throw TypeError("Generator is already running");for(y&&1===p&&d(p,l),c=p,u=l;(t=c<2?e:u)||!y;){i||(c?c<3?(c>1&&(G.n=-1),d(c,u)):G.n=u:G.v=u);try{if(f=2,i){if(c||(o="next"),t=i[o]){if(!(t=t.call(i,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,c<2&&(c=0)}else 1===c&&(t=i.return)&&t.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=e}else if((t=(y=G.n<0)?u:r.call(n,G))!==a)break}catch(t){i=e,c=1,u=t}finally{f=1}}return{value:t,done:y}}}(r,o,i),!0),u}var a={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}t=Object.getPrototypeOf;var c=[][n]?t(t([][n]())):(JhFormList_stories_regeneratorDefine2(t={},n,function(){return this}),t),u=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,GeneratorFunctionPrototype):(e.__proto__=GeneratorFunctionPrototype,JhFormList_stories_regeneratorDefine2(e,o,"GeneratorFunction")),e.prototype=Object.create(u),e}return GeneratorFunction.prototype=GeneratorFunctionPrototype,JhFormList_stories_regeneratorDefine2(u,"constructor",GeneratorFunctionPrototype),JhFormList_stories_regeneratorDefine2(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName="GeneratorFunction",JhFormList_stories_regeneratorDefine2(GeneratorFunctionPrototype,o,"GeneratorFunction"),JhFormList_stories_regeneratorDefine2(u),JhFormList_stories_regeneratorDefine2(u,o,"Generator"),JhFormList_stories_regeneratorDefine2(u,n,function(){return this}),JhFormList_stories_regeneratorDefine2(u,"toString",function(){return"[object Generator]"}),(JhFormList_stories_regenerator=function _regenerator(){return{w:i,m:f}})()}function JhFormList_stories_regeneratorDefine2(e,r,n,t){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}JhFormList_stories_regeneratorDefine2=function _regeneratorDefine(e,r,n,t){function o(r,n){JhFormList_stories_regeneratorDefine2(e,r,function(e){return this._invoke(r,n,e)})}r?i?i(e,r,{value:n,enumerable:!t,configurable:!t,writable:!t}):e[r]=n:(o("next",0),o("throw",1),o("return",2))},JhFormList_stories_regeneratorDefine2(e,r,n,t)}function JhFormList_stories_asyncGeneratorStep(n,t,e,r,o,a,c){try{var i=n[a](c),u=i.value}catch(n){return void e(n)}i.done?t(u):Promise.resolve(u).then(r,o)}__vuedocgen_export_0.__docgenInfo={displayName:"JhFormList",exportName:"default",description:"",tags:{},props:[{name:"value",type:{name:"array"},defaultValue:{func:!1,value:"[]"}},{name:"fields",type:{name:"array"},defaultValue:{func:!1,value:"[]"}},{name:"mode",type:{name:"string"},defaultValue:{func:!1,value:"'card'"},values:["card","table","inline"]},{name:"title",type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"description",type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"min",type:{name:"number"},defaultValue:{func:!1,value:"0"}},{name:"max",type:{name:"number"},defaultValue:{func:!1,value:"Infinity"}},{name:"sortable",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"copyable",type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"showIndex",type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"showItemActions",type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"defaultValue",type:{name:"object|func"},defaultValue:{func:!0,value:"() => ({})"}},{name:"addButtonText",type:{name:"string"},defaultValue:{func:!1,value:"'添加'"}},{name:"addButtonProps",type:{name:"object"},defaultValue:{func:!1,value:"{}"}},{name:"deleteConfirm",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"deleteConfirmText",type:{name:"string"},defaultValue:{func:!1,value:"'确定要删除这一项吗？'"}},{name:"itemLayout",type:{name:"string"},defaultValue:{func:!1,value:"'horizontal'"}},{name:"itemLabelWidth",type:{name:"number|string"},defaultValue:{func:!1,value:"'auto'"}},{name:"dense",type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"outlined",type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"disabled",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"readonly",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"rules",type:{name:"array"},defaultValue:{func:!1,value:"[]"}},{name:"actionColumn",type:{name:"object"},defaultValue:{func:!1,value:"{\n  width: 100\n}"}},{name:"cardProps",type:{name:"object"},defaultValue:{func:!1,value:"{}"}},{name:"itemClass",type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"inlineDisplayKey",type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"alwaysShowItemLabel",type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"itemRender",type:{name:"func"},defaultValue:{func:!1,value:"null"}},{name:"creatorButtonProps",type:{name:"object|boolean"},defaultValue:{func:!0,value:"() => ({})"}},{name:"creatorRecord",type:{name:"object|func"},defaultValue:{func:!1,value:"null"}},{name:"actionGuard",type:{name:"object"},defaultValue:{func:!1,value:"{\n  beforeAddRow: null,\n  beforeRemoveRow: null\n}"}},{name:"onAfterRemove",type:{name:"func"},defaultValue:{func:!1,value:"null"}},{name:"collapsible",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"defaultCollapsed",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"actionRender",type:{name:"func"},defaultValue:{func:!1,value:"null"}},{name:"maxLimitText",type:{name:"string"},defaultValue:{func:!1,value:"'已达到最大数量限制'"}},{name:"minLimitText",type:{name:"string"},defaultValue:{func:!1,value:"'已达到最小数量限制'"}}],events:[{name:"max-limit",type:{names:["undefined"]}},{name:"add",type:{names:["undefined"]},properties:[{type:{names:["undefined"]},name:"<anonymous1>"}]},{name:"min-limit",type:{names:["undefined"]}},{name:"remove",type:{names:["undefined"]},properties:[{type:{names:["undefined"]},name:"<anonymous1>"}]},{name:"copy",type:{names:["undefined"]},properties:[{type:{names:["undefined"]},name:"<anonymous1>"}]},{name:"sort",type:{names:["undefined"]},properties:[{type:{names:["undefined"]},name:"<anonymous1>"}]},{name:"item-change",type:{names:["undefined"]},properties:[{type:{names:["undefined"]},name:"<anonymous1>"}]},{name:"input",type:{names:["undefined"]}},{name:"change",type:{names:["undefined"]}},{name:"validate",type:{names:["undefined"]},properties:[{type:{names:["undefined"]},name:"<anonymous1>"}]}],slots:[{name:"header"},{name:"empty"},{name:"item-actions",scoped:!0,bindings:[{name:"item",title:"binding"},{name:"index",title:"binding"},{name:"removeItem",title:"binding"},{name:"copyItem",title:"binding"}]},{name:"item",scoped:!0,bindings:[{name:"item",title:"binding"},{name:"index",title:"binding"},{name:"fields",title:"binding"},{name:"updateItem",title:"binding"}]},{name:"`field-${field.key}`",scoped:!0,bindings:[{name:"name",title:"binding"},{name:"item",title:"binding"},{name:"index",title:"binding"},{name:"field",title:"binding"},{name:"updateItem",title:"binding"}]},{name:"footer",scoped:!0,bindings:[{name:"addItem",title:"binding"},{name:"canAdd",title:"binding"}]}],sourceFiles:["/Users/zhongchubing/Documents/work/jianghujs/jianghu-ui/src/components/JhFormList/JhFormList.vue"]};const JhFormList_stories={parameters:{storySource:{source:"import JhFormList from './JhFormList.vue';\n\nexport default {\n  title: '数据录入/JhFormList - 数据结构化',\n  component: JhFormList,\n  tags: ['autodocs'],\n  argTypes: {\n    mode: {\n      control: 'select',\n      options: ['card', 'table', 'inline'],\n      description: '渲染模式',\n    },\n    min: {\n      control: 'number',\n      description: '最小项数',\n    },\n    max: {\n      control: 'number',\n      description: '最大项数',\n    },\n    sortable: {\n      control: 'boolean',\n      description: '是否可拖拽排序',\n    },\n    copyable: {\n      control: 'boolean',\n      description: '是否可复制',\n    },\n    showIndex: {\n      control: 'boolean',\n      description: '是否显示序号',\n    },\n    dense: {\n      control: 'boolean',\n      description: '紧凑模式',\n    },\n    outlined: {\n      control: 'boolean',\n      description: '边框样式',\n    },\n    disabled: {\n      control: 'boolean',\n      description: '禁用状态',\n    },\n    readonly: {\n      control: 'boolean',\n      description: '只读状态',\n    },\n  },\n};\n\n// 基础示例 - Card 模式\nexport const BasicCard = {\n  render: (args, { argTypes }) => ({\n    components: { JhFormList },\n    props: Object.keys(argTypes),\n    data() {\n      return {\n        contacts: [\n          { name: '张三', phone: '13800138000', email: 'zhangsan@example.com', role: 'manager' },\n          { name: '李四', phone: '13900139000', email: 'lisi@example.com', role: 'developer' },\n        ],\n        fields: [\n          {\n            key: 'name',\n            label: '姓名',\n            type: 'text',\n            required: true,\n            cols: 6,\n            placeholder: '请输入姓名'\n          },\n          {\n            key: 'phone',\n            label: '电话',\n            type: 'text',\n            rules: [(v) => !v || /^1[3-9]\\d{9}$/.test(v) || '请输入正确的手机号'],\n            cols: 6,\n            placeholder: '请输入电话'\n          },\n          {\n            key: 'email',\n            label: '邮箱',\n            type: 'text',\n            rules: [(v) => !v || /.+@.+\\..+/.test(v) || '请输入正确的邮箱'],\n            cols: 6,\n            placeholder: '请输入邮箱'\n          },\n          {\n            key: 'role',\n            label: '角色',\n            type: 'select',\n            options: [\n              { text: '管理员', value: 'manager' },\n              { text: '开发者', value: 'developer' },\n              { text: '测试', value: 'tester' },\n            ],\n            cols: 6,\n          },\n        ],\n      };\n    },\n    template: `\n      <v-app>\n        <v-container>\n          <jh-form-list\n            v-model=\"contacts\"\n            :fields=\"fields\"\n            v-bind=\"$props\"\n            title=\"联系人列表\"\n            description=\"请填写联系人信息，至少需要一位联系人\"\n            :min=\"1\"\n            :max=\"5\"\n            @add=\"(item, index) => console.log('添加:', item, index)\"\n            @remove=\"(item, index) => console.log('删除:', item, index)\"\n            @copy=\"(source, newItem) => console.log('复制:', source, newItem)\"\n          />\n          <v-divider class=\"my-6\"></v-divider>\n          <div>\n            <h4 class=\"mb-2\">当前数据:</h4>\n            <pre class=\"grey lighten-4 pa-3\">{{ contacts }}</pre>\n          </div>\n        </v-container>\n      </v-app>\n    `,\n  }),\n  args: {\n    mode: 'card',\n    sortable: false,\n    copyable: true,\n    showIndex: true,\n    dense: true,\n    outlined: true,\n    disabled: false,\n    readonly: false,\n  },\n};\n\n// Table 模式\nexport const TableMode = {\n  render: () => ({\n    components: { JhFormList },\n    data() {\n      return {\n        items: [\n          { product: 'MacBook Pro', quantity: 2, price: 12999, note: '16寸 M3' },\n          { product: 'iPhone 15', quantity: 1, price: 5999, note: '128GB' },\n          { product: 'AirPods Pro', quantity: 3, price: 1999, note: '第二代' },\n        ],\n        fields: [\n          {\n            key: 'product',\n            label: '商品名称',\n            type: 'text',\n            required: true,\n            placeholder: '请输入商品名称'\n          },\n          {\n            key: 'quantity',\n            label: '数量',\n            type: 'number',\n            required: true,\n            placeholder: '请输入数量'\n          },\n          {\n            key: 'price',\n            label: '单价',\n            type: 'number',\n            required: true,\n            placeholder: '请输入单价'\n          },\n          {\n            key: 'note',\n            label: '备注',\n            type: 'text',\n            placeholder: '请输入备注'\n          },\n        ],\n      };\n    },\n    computed: {\n      totalAmount() {\n        return this.items.reduce((sum, item) => {\n          return sum + (item.quantity || 0) * (item.price || 0);\n        }, 0);\n      },\n    },\n    template: `\n      <v-app>\n        <v-container>\n          <jh-form-list\n            v-model=\"items\"\n            :fields=\"fields\"\n            mode=\"table\"\n            title=\"订单商品\"\n            :min=\"1\"\n            :sortable=\"true\"\n            :show-index=\"true\"\n          />\n          <v-card class=\"mt-4 pa-4\">\n            <div class=\"text-right\">\n              <span class=\"text-h6\">总金额: </span>\n              <span class=\"text-h5 error--text\">¥{{ totalAmount.toFixed(2) }}</span>\n            </div>\n          </v-card>\n        </v-container>\n      </v-app>\n    `,\n  }),\n};\n\n// Inline 模式\nexport const InlineMode = {\n  render: () => ({\n    components: { JhFormList },\n    data() {\n      return {\n        tags: [\n          { name: 'Vue.js' },\n          { name: 'React' },\n          { name: 'Angular' },\n          { name: 'Svelte' },\n        ],\n        fields: [\n          {\n            key: 'name',\n            label: '标签名称',\n            type: 'text',\n            required: true,\n          },\n        ],\n      };\n    },\n    template: `\n      <v-app>\n        <v-container>\n          <div class=\"mb-2\">\n            <strong>技术栈标签:</strong>\n          </div>\n          <jh-form-list\n            v-model=\"tags\"\n            :fields=\"fields\"\n            mode=\"inline\"\n            inline-display-key=\"name\"\n            :sortable=\"true\"\n            add-button-text=\"添加标签\"\n          />\n        </v-container>\n      </v-app>\n    `,\n  }),\n};\n\n// 自定义渲染\nexport const CustomRender = {\n  render: () => ({\n    components: { JhFormList },\n    data() {\n      return {\n        members: [\n          {\n            name: '张三',\n            avatar: 'https://i.pravatar.cc/150?img=1',\n            role: 'admin',\n            status: 'active'\n          },\n          {\n            name: '李四',\n            avatar: 'https://i.pravatar.cc/150?img=2',\n            role: 'member',\n            status: 'active'\n          },\n        ],\n        fields: [\n          {\n            key: 'name',\n            label: '姓名',\n            type: 'text',\n            required: true,\n            cols: 6,\n          },\n          {\n            key: 'role',\n            label: '角色',\n            type: 'select',\n            options: [\n              { text: '管理员', value: 'admin' },\n              { text: '普通成员', value: 'member' },\n            ],\n            cols: 6,\n          },\n          {\n            key: 'avatar',\n            label: '头像URL',\n            type: 'text',\n            cols: 12,\n          },\n        ],\n      };\n    },\n    template: `\n      <v-app>\n        <v-container>\n          <jh-form-list\n            v-model=\"members\"\n            :fields=\"fields\"\n            title=\"团队成员\"\n            mode=\"card\"\n          >\n            \x3c!-- 自定义列表项头部 --\x3e\n            <template #item=\"{ item, index, fields, updateItem }\">\n              <div class=\"d-flex align-center mb-4\">\n                <v-avatar size=\"48\" class=\"mr-3\">\n                  <v-img :src=\"item.avatar || 'https://i.pravatar.cc/150?img=' + index\"></v-img>\n                </v-avatar>\n                <div>\n                  <div class=\"font-weight-medium\">{{ item.name || '未命名' }}</div>\n                  <div class=\"text-caption grey--text\">\n                    {{ item.role === 'admin' ? '管理员' : '普通成员' }}\n                  </div>\n                </div>\n              </div>\n\n              \x3c!-- 使用默认表单字段 --\x3e\n              <jh-form\n                :fields=\"fields\"\n                :initial-data=\"item\"\n                layout=\"horizontal\"\n                @field-change=\"({ key, value }) => updateItem(key, value)\"\n              />\n            </template>\n          </jh-form-list>\n        </v-container>\n      </v-app>\n    `,\n  }),\n};\n\n// 嵌套列表\nexport const NestedList = {\n  render: () => ({\n    components: { JhFormList },\n    data() {\n      return {\n        projects: [\n          {\n            name: '项目A',\n            description: '电商平台',\n            members: [\n              { name: '张三', role: 'frontend' },\n              { name: '李四', role: 'backend' },\n            ],\n          },\n        ],\n        projectFields: [\n          {\n            key: 'name',\n            label: '项目名称',\n            type: 'text',\n            required: true,\n            cols: 6,\n          },\n          {\n            key: 'description',\n            label: '项目描述',\n            type: 'text',\n            cols: 6,\n          },\n        ],\n        memberFields: [\n          {\n            key: 'name',\n            label: '成员姓名',\n            type: 'text',\n            required: true,\n          },\n          {\n            key: 'role',\n            label: '角色',\n            type: 'select',\n            options: [\n              { text: '前端', value: 'frontend' },\n              { text: '后端', value: 'backend' },\n              { text: '测试', value: 'tester' },\n            ],\n          },\n        ],\n      };\n    },\n    template: `\n      <v-app>\n        <v-container>\n          <jh-form-list\n            v-model=\"projects\"\n            :fields=\"projectFields\"\n            title=\"项目列表\"\n            mode=\"card\"\n          >\n            <template #field-members=\"{ item, updateItem }\">\n              <div class=\"mt-4\">\n                <div class=\"text-subtitle-2 mb-2\">项目成员:</div>\n                <jh-form-list\n                  :value=\"item.members || []\"\n                  @input=\"updateItem('members', $event)\"\n                  :fields=\"memberFields\"\n                  mode=\"table\"\n                  :show-index=\"false\"\n                  :dense=\"true\"\n                  add-button-text=\"添加成员\"\n                />\n              </div>\n            </template>\n          </jh-form-list>\n        </v-container>\n      </v-app>\n    `,\n  }),\n};\n\n// 高级验证\nexport const AdvancedValidation = {\n  render: () => ({\n    components: { JhFormList },\n    data() {\n      return {\n        emails: [\n          { email: 'admin@example.com', isPrimary: true },\n        ],\n        fields: [\n          {\n            key: 'email',\n            label: '邮箱地址',\n            type: 'text',\n            required: true,\n            rules: [(v) => /.+@.+\\..+/.test(v) || '请输入正确的邮箱格式'],\n            cols: 8,\n          },\n          {\n            key: 'isPrimary',\n            label: '主邮箱',\n            type: 'switch',\n            cols: 4,\n          },\n        ],\n        listRules: [\n          (items) => items.length >= 1 || '至少需要一个邮箱',\n          (items) => items.length <= 5 || '最多只能添加5个邮箱',\n          (items) => {\n            const emails = items.map(i => i.email).filter(Boolean);\n            const unique = new Set(emails);\n            return emails.length === unique.size || '邮箱地址不能重复';\n          },\n          (items) => {\n            const primaryCount = items.filter(i => i.isPrimary).length;\n            return primaryCount <= 1 || '只能有一个主邮箱';\n          },\n        ],\n      };\n    },\n    methods: {\n      async handleValidate() {\n        const isValid = await this.$refs.formList.validate();\n        if (isValid) {\n          alert('验证通过！');\n        } else {\n          alert('验证失败，请检查输入');\n        }\n      },\n    },\n    template: `\n      <v-app>\n        <v-container>\n          <jh-form-list\n            ref=\"formList\"\n            v-model=\"emails\"\n            :fields=\"fields\"\n            :rules=\"listRules\"\n            title=\"邮箱列表\"\n            description=\"请添加您的邮箱地址，至少一个，最多五个\"\n            :min=\"1\"\n            :max=\"5\"\n          />\n          <v-btn color=\"primary\" class=\"mt-4\" @click=\"handleValidate\">\n            验证表单\n          </v-btn>\n        </v-container>\n      </v-app>\n    `,\n  }),\n};\n\n// 只读模式\nexport const ReadonlyMode = {\n  render: () => ({\n    components: { JhFormList },\n    data() {\n      return {\n        educations: [\n          {\n            school: '清华大学',\n            major: '计算机科学与技术',\n            degree: 'bachelor',\n            startDate: '2015-09',\n            endDate: '2019-06',\n          },\n          {\n            school: '北京大学',\n            major: '软件工程',\n            degree: 'master',\n            startDate: '2019-09',\n            endDate: '2022-06',\n          },\n        ],\n        fields: [\n          { key: 'school', label: '学校', type: 'text', cols: 6 },\n          { key: 'major', label: '专业', type: 'text', cols: 6 },\n          {\n            key: 'degree',\n            label: '学历',\n            type: 'select',\n            options: [\n              { text: '本科', value: 'bachelor' },\n              { text: '硕士', value: 'master' },\n              { text: '博士', value: 'doctor' },\n            ],\n            cols: 4,\n          },\n          { key: 'startDate', label: '开始时间', type: 'text', cols: 4 },\n          { key: 'endDate', label: '结束时间', type: 'text', cols: 4 },\n        ],\n      };\n    },\n    template: `\n      <v-app>\n        <v-container>\n          <jh-form-list\n            v-model=\"educations\"\n            :fields=\"fields\"\n            title=\"教育经历\"\n            mode=\"card\"\n            :readonly=\"true\"\n          />\n        </v-container>\n      </v-app>\n    `,\n  }),\n};\n\n// 禁用状态\nexport const DisabledState = {\n  render: () => ({\n    components: { JhFormList },\n    data() {\n      return {\n        items: [\n          { name: '项目A', status: 'completed' },\n          { name: '项目B', status: 'pending' },\n        ],\n        fields: [\n          { key: 'name', label: '项目名称', type: 'text', cols: 8 },\n          {\n            key: 'status',\n            label: '状态',\n            type: 'select',\n            options: [\n              { text: '待处理', value: 'pending' },\n              { text: '进行中', value: 'processing' },\n              { text: '已完成', value: 'completed' },\n            ],\n            cols: 4,\n          },\n        ],\n      };\n    },\n    template: `\n      <v-app>\n        <v-container>\n          <jh-form-list\n            v-model=\"items\"\n            :fields=\"fields\"\n            title=\"项目列表（禁用状态）\"\n            :disabled=\"true\"\n          />\n        </v-container>\n      </v-app>\n    `,\n  }),\n};\n\n// 动态默认值\nexport const DynamicDefaultValue = {\n  render: () => ({\n    components: { JhFormList },\n    data() {\n      return {\n        tasks: [],\n        fields: [\n          {\n            key: 'title',\n            label: '任务标题',\n            type: 'text',\n            required: true,\n            cols: 8,\n          },\n          {\n            key: 'priority',\n            label: '优先级',\n            type: 'select',\n            options: [\n              { text: '低', value: 'low' },\n              { text: '中', value: 'medium' },\n              { text: '高', value: 'high' },\n            ],\n            cols: 4,\n          },\n          {\n            key: 'dueDate',\n            label: '截止日期',\n            type: 'date',\n            cols: 6,\n          },\n          {\n            key: 'assignee',\n            label: '负责人',\n            type: 'text',\n            cols: 6,\n          },\n        ],\n      };\n    },\n    methods: {\n      getDefaultValue(index) {\n        const today = new Date();\n        const dueDate = new Date(today);\n        dueDate.setDate(today.getDate() + 7);\n\n        return {\n          title: `任务 ${index + 1}`,\n          priority: 'medium',\n          dueDate: dueDate.toISOString().split('T')[0],\n          assignee: '',\n        };\n      },\n    },\n    template: `\n      <v-app>\n        <v-container>\n          <jh-form-list\n            v-model=\"tasks\"\n            :fields=\"fields\"\n            :default-value=\"getDefaultValue\"\n            title=\"任务列表\"\n            description=\"新增任务会自动填充默认值\"\n          />\n          <div class=\"mt-4\">\n            <pre class=\"grey lighten-4 pa-3\">{{ tasks }}</pre>\n          </div>\n        </v-container>\n      </v-app>\n    `,\n  }),\n};\n",locationsMap:{"basic-card":{startLoc:{col:25,line:53},endLoc:{col:1,line:136},startBody:{col:25,line:53},endBody:{col:1,line:136}},"table-mode":{startLoc:{col:25,line:139},endLoc:{col:1,line:209},startBody:{col:25,line:139},endBody:{col:1,line:209}},"inline-mode":{startLoc:{col:26,line:212},endLoc:{col:1,line:251},startBody:{col:26,line:212},endBody:{col:1,line:251}},"custom-render":{startLoc:{col:28,line:254},endLoc:{col:1,line:336},startBody:{col:28,line:254},endBody:{col:1,line:336}},"nested-list":{startLoc:{col:26,line:339},endLoc:{col:1,line:417},startBody:{col:26,line:339},endBody:{col:1,line:417}},"advanced-validation":{startLoc:{col:34,line:420},endLoc:{col:1,line:489},startBody:{col:34,line:420},endBody:{col:1,line:489}},"readonly-mode":{startLoc:{col:28,line:492},endLoc:{col:1,line:546},startBody:{col:28,line:492},endBody:{col:1,line:546}},"disabled-state":{startLoc:{col:29,line:549},endLoc:{col:1,line:587},startBody:{col:29,line:549},endBody:{col:1,line:587}},"dynamic-default-value":{startLoc:{col:35,line:590},endLoc:{col:1,line:661},startBody:{col:35,line:590},endBody:{col:1,line:661}}}}},title:"数据录入/JhFormList - 数据结构化",component:JhFormList,tags:["autodocs"],argTypes:{mode:{control:"select",options:["card","table","inline"],description:"渲染模式"},min:{control:"number",description:"最小项数"},max:{control:"number",description:"最大项数"},sortable:{control:"boolean",description:"是否可拖拽排序"},copyable:{control:"boolean",description:"是否可复制"},showIndex:{control:"boolean",description:"是否显示序号"},dense:{control:"boolean",description:"紧凑模式"},outlined:{control:"boolean",description:"边框样式"},disabled:{control:"boolean",description:"禁用状态"},readonly:{control:"boolean",description:"只读状态"}}};var BasicCard={render:function render(args,_ref){var argTypes=_ref.argTypes;return{components:{JhFormList},props:Object.keys(argTypes),data:function data(){return{contacts:[{name:"张三",phone:"13800138000",email:"zhangsan@example.com",role:"manager"},{name:"李四",phone:"13900139000",email:"lisi@example.com",role:"developer"}],fields:[{key:"name",label:"姓名",type:"text",required:!0,cols:6,placeholder:"请输入姓名"},{key:"phone",label:"电话",type:"text",rules:[function(v){return!v||/^1[3-9]\d{9}$/.test(v)||"请输入正确的手机号"}],cols:6,placeholder:"请输入电话"},{key:"email",label:"邮箱",type:"text",rules:[function(v){return!v||/.+@.+\..+/.test(v)||"请输入正确的邮箱"}],cols:6,placeholder:"请输入邮箱"},{key:"role",label:"角色",type:"select",options:[{text:"管理员",value:"manager"},{text:"开发者",value:"developer"},{text:"测试",value:"tester"}],cols:6}]}},template:'\n      <v-app>\n        <v-container>\n          <jh-form-list\n            v-model="contacts"\n            :fields="fields"\n            v-bind="$props"\n            title="联系人列表"\n            description="请填写联系人信息，至少需要一位联系人"\n            :min="1"\n            :max="5"\n            @add="(item, index) => console.log(\'添加:\', item, index)"\n            @remove="(item, index) => console.log(\'删除:\', item, index)"\n            @copy="(source, newItem) => console.log(\'复制:\', source, newItem)"\n          />\n          <v-divider class="my-6"></v-divider>\n          <div>\n            <h4 class="mb-2">当前数据:</h4>\n            <pre class="grey lighten-4 pa-3">{{ contacts }}</pre>\n          </div>\n        </v-container>\n      </v-app>\n    '}},args:{mode:"card",sortable:!1,copyable:!0,showIndex:!0,dense:!0,outlined:!0,disabled:!1,readonly:!1}},TableMode={render:function render(){return{components:{JhFormList},data:function data(){return{items:[{product:"MacBook Pro",quantity:2,price:12999,note:"16寸 M3"},{product:"iPhone 15",quantity:1,price:5999,note:"128GB"},{product:"AirPods Pro",quantity:3,price:1999,note:"第二代"}],fields:[{key:"product",label:"商品名称",type:"text",required:!0,placeholder:"请输入商品名称"},{key:"quantity",label:"数量",type:"number",required:!0,placeholder:"请输入数量"},{key:"price",label:"单价",type:"number",required:!0,placeholder:"请输入单价"},{key:"note",label:"备注",type:"text",placeholder:"请输入备注"}]}},computed:{totalAmount:function totalAmount(){return this.items.reduce(function(sum,item){return sum+(item.quantity||0)*(item.price||0)},0)}},template:'\n      <v-app>\n        <v-container>\n          <jh-form-list\n            v-model="items"\n            :fields="fields"\n            mode="table"\n            title="订单商品"\n            :min="1"\n            :sortable="true"\n            :show-index="true"\n          />\n          <v-card class="mt-4 pa-4">\n            <div class="text-right">\n              <span class="text-h6">总金额: </span>\n              <span class="text-h5 error--text">¥{{ totalAmount.toFixed(2) }}</span>\n            </div>\n          </v-card>\n        </v-container>\n      </v-app>\n    '}}},InlineMode={render:function render(){return{components:{JhFormList},data:function data(){return{tags:[{name:"Vue.js"},{name:"React"},{name:"Angular"},{name:"Svelte"}],fields:[{key:"name",label:"标签名称",type:"text",required:!0}]}},template:'\n      <v-app>\n        <v-container>\n          <div class="mb-2">\n            <strong>技术栈标签:</strong>\n          </div>\n          <jh-form-list\n            v-model="tags"\n            :fields="fields"\n            mode="inline"\n            inline-display-key="name"\n            :sortable="true"\n            add-button-text="添加标签"\n          />\n        </v-container>\n      </v-app>\n    '}}},CustomRender={render:function render(){return{components:{JhFormList},data:function data(){return{members:[{name:"张三",avatar:"https://i.pravatar.cc/150?img=1",role:"admin",status:"active"},{name:"李四",avatar:"https://i.pravatar.cc/150?img=2",role:"member",status:"active"}],fields:[{key:"name",label:"姓名",type:"text",required:!0,cols:6},{key:"role",label:"角色",type:"select",options:[{text:"管理员",value:"admin"},{text:"普通成员",value:"member"}],cols:6},{key:"avatar",label:"头像URL",type:"text",cols:12}]}},template:'\n      <v-app>\n        <v-container>\n          <jh-form-list\n            v-model="members"\n            :fields="fields"\n            title="团队成员"\n            mode="card"\n          >\n            \x3c!-- 自定义列表项头部 --\x3e\n            <template #item="{ item, index, fields, updateItem }">\n              <div class="d-flex align-center mb-4">\n                <v-avatar size="48" class="mr-3">\n                  <v-img :src="item.avatar || \'https://i.pravatar.cc/150?img=\' + index"></v-img>\n                </v-avatar>\n                <div>\n                  <div class="font-weight-medium">{{ item.name || \'未命名\' }}</div>\n                  <div class="text-caption grey--text">\n                    {{ item.role === \'admin\' ? \'管理员\' : \'普通成员\' }}\n                  </div>\n                </div>\n              </div>\n\n              \x3c!-- 使用默认表单字段 --\x3e\n              <jh-form\n                :fields="fields"\n                :initial-data="item"\n                layout="horizontal"\n                @field-change="({ key, value }) => updateItem(key, value)"\n              />\n            </template>\n          </jh-form-list>\n        </v-container>\n      </v-app>\n    '}}},NestedList={render:function render(){return{components:{JhFormList},data:function data(){return{projects:[{name:"项目A",description:"电商平台",members:[{name:"张三",role:"frontend"},{name:"李四",role:"backend"}]}],projectFields:[{key:"name",label:"项目名称",type:"text",required:!0,cols:6},{key:"description",label:"项目描述",type:"text",cols:6}],memberFields:[{key:"name",label:"成员姓名",type:"text",required:!0},{key:"role",label:"角色",type:"select",options:[{text:"前端",value:"frontend"},{text:"后端",value:"backend"},{text:"测试",value:"tester"}]}]}},template:'\n      <v-app>\n        <v-container>\n          <jh-form-list\n            v-model="projects"\n            :fields="projectFields"\n            title="项目列表"\n            mode="card"\n          >\n            <template #field-members="{ item, updateItem }">\n              <div class="mt-4">\n                <div class="text-subtitle-2 mb-2">项目成员:</div>\n                <jh-form-list\n                  :value="item.members || []"\n                  @input="updateItem(\'members\', $event)"\n                  :fields="memberFields"\n                  mode="table"\n                  :show-index="false"\n                  :dense="true"\n                  add-button-text="添加成员"\n                />\n              </div>\n            </template>\n          </jh-form-list>\n        </v-container>\n      </v-app>\n    '}}},AdvancedValidation={render:function render(){return{components:{JhFormList},data:function data(){return{emails:[{email:"admin@example.com",isPrimary:!0}],fields:[{key:"email",label:"邮箱地址",type:"text",required:!0,rules:[function(v){return/.+@.+\..+/.test(v)||"请输入正确的邮箱格式"}],cols:8},{key:"isPrimary",label:"主邮箱",type:"switch",cols:4}],listRules:[function(items){return items.length>=1||"至少需要一个邮箱"},function(items){return items.length<=5||"最多只能添加5个邮箱"},function(items){var emails=items.map(function(i){return i.email}).filter(Boolean),unique=new Set(emails);return emails.length===unique.size||"邮箱地址不能重复"},function(items){return items.filter(function(i){return i.isPrimary}).length<=1||"只能有一个主邮箱"}]}},methods:{handleValidate:function handleValidate(){var _this=this;return function JhFormList_stories_asyncToGenerator(n){return function(){var t=this,e=arguments;return new Promise(function(r,o){var a=n.apply(t,e);function _next(n){JhFormList_stories_asyncGeneratorStep(a,r,o,_next,_throw,"next",n)}function _throw(n){JhFormList_stories_asyncGeneratorStep(a,r,o,_next,_throw,"throw",n)}_next(void 0)})}}(JhFormList_stories_regenerator().m(function _callee(){return JhFormList_stories_regenerator().w(function(_context){for(;;)switch(_context.n){case 0:return _context.n=1,_this.$refs.formList.validate();case 1:_context.v?alert("验证通过！"):alert("验证失败，请检查输入");case 2:return _context.a(2)}},_callee)}))()}},template:'\n      <v-app>\n        <v-container>\n          <jh-form-list\n            ref="formList"\n            v-model="emails"\n            :fields="fields"\n            :rules="listRules"\n            title="邮箱列表"\n            description="请添加您的邮箱地址，至少一个，最多五个"\n            :min="1"\n            :max="5"\n          />\n          <v-btn color="primary" class="mt-4" @click="handleValidate">\n            验证表单\n          </v-btn>\n        </v-container>\n      </v-app>\n    '}}},ReadonlyMode={render:function render(){return{components:{JhFormList},data:function data(){return{educations:[{school:"清华大学",major:"计算机科学与技术",degree:"bachelor",startDate:"2015-09",endDate:"2019-06"},{school:"北京大学",major:"软件工程",degree:"master",startDate:"2019-09",endDate:"2022-06"}],fields:[{key:"school",label:"学校",type:"text",cols:6},{key:"major",label:"专业",type:"text",cols:6},{key:"degree",label:"学历",type:"select",options:[{text:"本科",value:"bachelor"},{text:"硕士",value:"master"},{text:"博士",value:"doctor"}],cols:4},{key:"startDate",label:"开始时间",type:"text",cols:4},{key:"endDate",label:"结束时间",type:"text",cols:4}]}},template:'\n      <v-app>\n        <v-container>\n          <jh-form-list\n            v-model="educations"\n            :fields="fields"\n            title="教育经历"\n            mode="card"\n            :readonly="true"\n          />\n        </v-container>\n      </v-app>\n    '}}},DisabledState={render:function render(){return{components:{JhFormList},data:function data(){return{items:[{name:"项目A",status:"completed"},{name:"项目B",status:"pending"}],fields:[{key:"name",label:"项目名称",type:"text",cols:8},{key:"status",label:"状态",type:"select",options:[{text:"待处理",value:"pending"},{text:"进行中",value:"processing"},{text:"已完成",value:"completed"}],cols:4}]}},template:'\n      <v-app>\n        <v-container>\n          <jh-form-list\n            v-model="items"\n            :fields="fields"\n            title="项目列表（禁用状态）"\n            :disabled="true"\n          />\n        </v-container>\n      </v-app>\n    '}}},DynamicDefaultValue={render:function render(){return{components:{JhFormList},data:function data(){return{tasks:[],fields:[{key:"title",label:"任务标题",type:"text",required:!0,cols:8},{key:"priority",label:"优先级",type:"select",options:[{text:"低",value:"low"},{text:"中",value:"medium"},{text:"高",value:"high"}],cols:4},{key:"dueDate",label:"截止日期",type:"date",cols:6},{key:"assignee",label:"负责人",type:"text",cols:6}]}},methods:{getDefaultValue:function getDefaultValue(index){var today=new Date,dueDate=new Date(today);return dueDate.setDate(today.getDate()+7),{title:"任务 ".concat(index+1),priority:"medium",dueDate:dueDate.toISOString().split("T")[0],assignee:""}}},template:'\n      <v-app>\n        <v-container>\n          <jh-form-list\n            v-model="tasks"\n            :fields="fields"\n            :default-value="getDefaultValue"\n            title="任务列表"\n            description="新增任务会自动填充默认值"\n          />\n          <div class="mt-4">\n            <pre class="grey lighten-4 pa-3">{{ tasks }}</pre>\n          </div>\n        </v-container>\n      </v-app>\n    '}}};BasicCard.parameters={...BasicCard.parameters,docs:{...BasicCard.parameters?.docs,source:{originalSource:"{\n  render: (args, {\n    argTypes\n  }) => ({\n    components: {\n      JhFormList\n    },\n    props: Object.keys(argTypes),\n    data() {\n      return {\n        contacts: [{\n          name: '张三',\n          phone: '13800138000',\n          email: 'zhangsan@example.com',\n          role: 'manager'\n        }, {\n          name: '李四',\n          phone: '13900139000',\n          email: 'lisi@example.com',\n          role: 'developer'\n        }],\n        fields: [{\n          key: 'name',\n          label: '姓名',\n          type: 'text',\n          required: true,\n          cols: 6,\n          placeholder: '请输入姓名'\n        }, {\n          key: 'phone',\n          label: '电话',\n          type: 'text',\n          rules: [v => !v || /^1[3-9]\\d{9}$/.test(v) || '请输入正确的手机号'],\n          cols: 6,\n          placeholder: '请输入电话'\n        }, {\n          key: 'email',\n          label: '邮箱',\n          type: 'text',\n          rules: [v => !v || /.+@.+\\..+/.test(v) || '请输入正确的邮箱'],\n          cols: 6,\n          placeholder: '请输入邮箱'\n        }, {\n          key: 'role',\n          label: '角色',\n          type: 'select',\n          options: [{\n            text: '管理员',\n            value: 'manager'\n          }, {\n            text: '开发者',\n            value: 'developer'\n          }, {\n            text: '测试',\n            value: 'tester'\n          }],\n          cols: 6\n        }]\n      };\n    },\n    template: `\n      <v-app>\n        <v-container>\n          <jh-form-list\n            v-model=\"contacts\"\n            :fields=\"fields\"\n            v-bind=\"$props\"\n            title=\"联系人列表\"\n            description=\"请填写联系人信息，至少需要一位联系人\"\n            :min=\"1\"\n            :max=\"5\"\n            @add=\"(item, index) => console.log('添加:', item, index)\"\n            @remove=\"(item, index) => console.log('删除:', item, index)\"\n            @copy=\"(source, newItem) => console.log('复制:', source, newItem)\"\n          />\n          <v-divider class=\"my-6\"></v-divider>\n          <div>\n            <h4 class=\"mb-2\">当前数据:</h4>\n            <pre class=\"grey lighten-4 pa-3\">{{ contacts }}</pre>\n          </div>\n        </v-container>\n      </v-app>\n    `\n  }),\n  args: {\n    mode: 'card',\n    sortable: false,\n    copyable: true,\n    showIndex: true,\n    dense: true,\n    outlined: true,\n    disabled: false,\n    readonly: false\n  }\n}",...BasicCard.parameters?.docs?.source}}},TableMode.parameters={...TableMode.parameters,docs:{...TableMode.parameters?.docs,source:{originalSource:"{\n  render: () => ({\n    components: {\n      JhFormList\n    },\n    data() {\n      return {\n        items: [{\n          product: 'MacBook Pro',\n          quantity: 2,\n          price: 12999,\n          note: '16寸 M3'\n        }, {\n          product: 'iPhone 15',\n          quantity: 1,\n          price: 5999,\n          note: '128GB'\n        }, {\n          product: 'AirPods Pro',\n          quantity: 3,\n          price: 1999,\n          note: '第二代'\n        }],\n        fields: [{\n          key: 'product',\n          label: '商品名称',\n          type: 'text',\n          required: true,\n          placeholder: '请输入商品名称'\n        }, {\n          key: 'quantity',\n          label: '数量',\n          type: 'number',\n          required: true,\n          placeholder: '请输入数量'\n        }, {\n          key: 'price',\n          label: '单价',\n          type: 'number',\n          required: true,\n          placeholder: '请输入单价'\n        }, {\n          key: 'note',\n          label: '备注',\n          type: 'text',\n          placeholder: '请输入备注'\n        }]\n      };\n    },\n    computed: {\n      totalAmount() {\n        return this.items.reduce((sum, item) => {\n          return sum + (item.quantity || 0) * (item.price || 0);\n        }, 0);\n      }\n    },\n    template: `\n      <v-app>\n        <v-container>\n          <jh-form-list\n            v-model=\"items\"\n            :fields=\"fields\"\n            mode=\"table\"\n            title=\"订单商品\"\n            :min=\"1\"\n            :sortable=\"true\"\n            :show-index=\"true\"\n          />\n          <v-card class=\"mt-4 pa-4\">\n            <div class=\"text-right\">\n              <span class=\"text-h6\">总金额: </span>\n              <span class=\"text-h5 error--text\">¥{{ totalAmount.toFixed(2) }}</span>\n            </div>\n          </v-card>\n        </v-container>\n      </v-app>\n    `\n  })\n}",...TableMode.parameters?.docs?.source}}},InlineMode.parameters={...InlineMode.parameters,docs:{...InlineMode.parameters?.docs,source:{originalSource:"{\n  render: () => ({\n    components: {\n      JhFormList\n    },\n    data() {\n      return {\n        tags: [{\n          name: 'Vue.js'\n        }, {\n          name: 'React'\n        }, {\n          name: 'Angular'\n        }, {\n          name: 'Svelte'\n        }],\n        fields: [{\n          key: 'name',\n          label: '标签名称',\n          type: 'text',\n          required: true\n        }]\n      };\n    },\n    template: `\n      <v-app>\n        <v-container>\n          <div class=\"mb-2\">\n            <strong>技术栈标签:</strong>\n          </div>\n          <jh-form-list\n            v-model=\"tags\"\n            :fields=\"fields\"\n            mode=\"inline\"\n            inline-display-key=\"name\"\n            :sortable=\"true\"\n            add-button-text=\"添加标签\"\n          />\n        </v-container>\n      </v-app>\n    `\n  })\n}",...InlineMode.parameters?.docs?.source}}},CustomRender.parameters={...CustomRender.parameters,docs:{...CustomRender.parameters?.docs,source:{originalSource:"{\n  render: () => ({\n    components: {\n      JhFormList\n    },\n    data() {\n      return {\n        members: [{\n          name: '张三',\n          avatar: 'https://i.pravatar.cc/150?img=1',\n          role: 'admin',\n          status: 'active'\n        }, {\n          name: '李四',\n          avatar: 'https://i.pravatar.cc/150?img=2',\n          role: 'member',\n          status: 'active'\n        }],\n        fields: [{\n          key: 'name',\n          label: '姓名',\n          type: 'text',\n          required: true,\n          cols: 6\n        }, {\n          key: 'role',\n          label: '角色',\n          type: 'select',\n          options: [{\n            text: '管理员',\n            value: 'admin'\n          }, {\n            text: '普通成员',\n            value: 'member'\n          }],\n          cols: 6\n        }, {\n          key: 'avatar',\n          label: '头像URL',\n          type: 'text',\n          cols: 12\n        }]\n      };\n    },\n    template: `\n      <v-app>\n        <v-container>\n          <jh-form-list\n            v-model=\"members\"\n            :fields=\"fields\"\n            title=\"团队成员\"\n            mode=\"card\"\n          >\n            \x3c!-- 自定义列表项头部 --\x3e\n            <template #item=\"{ item, index, fields, updateItem }\">\n              <div class=\"d-flex align-center mb-4\">\n                <v-avatar size=\"48\" class=\"mr-3\">\n                  <v-img :src=\"item.avatar || 'https://i.pravatar.cc/150?img=' + index\"></v-img>\n                </v-avatar>\n                <div>\n                  <div class=\"font-weight-medium\">{{ item.name || '未命名' }}</div>\n                  <div class=\"text-caption grey--text\">\n                    {{ item.role === 'admin' ? '管理员' : '普通成员' }}\n                  </div>\n                </div>\n              </div>\n\n              \x3c!-- 使用默认表单字段 --\x3e\n              <jh-form\n                :fields=\"fields\"\n                :initial-data=\"item\"\n                layout=\"horizontal\"\n                @field-change=\"({ key, value }) => updateItem(key, value)\"\n              />\n            </template>\n          </jh-form-list>\n        </v-container>\n      </v-app>\n    `\n  })\n}",...CustomRender.parameters?.docs?.source}}},NestedList.parameters={...NestedList.parameters,docs:{...NestedList.parameters?.docs,source:{originalSource:"{\n  render: () => ({\n    components: {\n      JhFormList\n    },\n    data() {\n      return {\n        projects: [{\n          name: '项目A',\n          description: '电商平台',\n          members: [{\n            name: '张三',\n            role: 'frontend'\n          }, {\n            name: '李四',\n            role: 'backend'\n          }]\n        }],\n        projectFields: [{\n          key: 'name',\n          label: '项目名称',\n          type: 'text',\n          required: true,\n          cols: 6\n        }, {\n          key: 'description',\n          label: '项目描述',\n          type: 'text',\n          cols: 6\n        }],\n        memberFields: [{\n          key: 'name',\n          label: '成员姓名',\n          type: 'text',\n          required: true\n        }, {\n          key: 'role',\n          label: '角色',\n          type: 'select',\n          options: [{\n            text: '前端',\n            value: 'frontend'\n          }, {\n            text: '后端',\n            value: 'backend'\n          }, {\n            text: '测试',\n            value: 'tester'\n          }]\n        }]\n      };\n    },\n    template: `\n      <v-app>\n        <v-container>\n          <jh-form-list\n            v-model=\"projects\"\n            :fields=\"projectFields\"\n            title=\"项目列表\"\n            mode=\"card\"\n          >\n            <template #field-members=\"{ item, updateItem }\">\n              <div class=\"mt-4\">\n                <div class=\"text-subtitle-2 mb-2\">项目成员:</div>\n                <jh-form-list\n                  :value=\"item.members || []\"\n                  @input=\"updateItem('members', $event)\"\n                  :fields=\"memberFields\"\n                  mode=\"table\"\n                  :show-index=\"false\"\n                  :dense=\"true\"\n                  add-button-text=\"添加成员\"\n                />\n              </div>\n            </template>\n          </jh-form-list>\n        </v-container>\n      </v-app>\n    `\n  })\n}",...NestedList.parameters?.docs?.source}}},AdvancedValidation.parameters={...AdvancedValidation.parameters,docs:{...AdvancedValidation.parameters?.docs,source:{originalSource:"{\n  render: () => ({\n    components: {\n      JhFormList\n    },\n    data() {\n      return {\n        emails: [{\n          email: 'admin@example.com',\n          isPrimary: true\n        }],\n        fields: [{\n          key: 'email',\n          label: '邮箱地址',\n          type: 'text',\n          required: true,\n          rules: [v => /.+@.+\\..+/.test(v) || '请输入正确的邮箱格式'],\n          cols: 8\n        }, {\n          key: 'isPrimary',\n          label: '主邮箱',\n          type: 'switch',\n          cols: 4\n        }],\n        listRules: [items => items.length >= 1 || '至少需要一个邮箱', items => items.length <= 5 || '最多只能添加5个邮箱', items => {\n          const emails = items.map(i => i.email).filter(Boolean);\n          const unique = new Set(emails);\n          return emails.length === unique.size || '邮箱地址不能重复';\n        }, items => {\n          const primaryCount = items.filter(i => i.isPrimary).length;\n          return primaryCount <= 1 || '只能有一个主邮箱';\n        }]\n      };\n    },\n    methods: {\n      async handleValidate() {\n        const isValid = await this.$refs.formList.validate();\n        if (isValid) {\n          alert('验证通过！');\n        } else {\n          alert('验证失败，请检查输入');\n        }\n      }\n    },\n    template: `\n      <v-app>\n        <v-container>\n          <jh-form-list\n            ref=\"formList\"\n            v-model=\"emails\"\n            :fields=\"fields\"\n            :rules=\"listRules\"\n            title=\"邮箱列表\"\n            description=\"请添加您的邮箱地址，至少一个，最多五个\"\n            :min=\"1\"\n            :max=\"5\"\n          />\n          <v-btn color=\"primary\" class=\"mt-4\" @click=\"handleValidate\">\n            验证表单\n          </v-btn>\n        </v-container>\n      </v-app>\n    `\n  })\n}",...AdvancedValidation.parameters?.docs?.source}}},ReadonlyMode.parameters={...ReadonlyMode.parameters,docs:{...ReadonlyMode.parameters?.docs,source:{originalSource:"{\n  render: () => ({\n    components: {\n      JhFormList\n    },\n    data() {\n      return {\n        educations: [{\n          school: '清华大学',\n          major: '计算机科学与技术',\n          degree: 'bachelor',\n          startDate: '2015-09',\n          endDate: '2019-06'\n        }, {\n          school: '北京大学',\n          major: '软件工程',\n          degree: 'master',\n          startDate: '2019-09',\n          endDate: '2022-06'\n        }],\n        fields: [{\n          key: 'school',\n          label: '学校',\n          type: 'text',\n          cols: 6\n        }, {\n          key: 'major',\n          label: '专业',\n          type: 'text',\n          cols: 6\n        }, {\n          key: 'degree',\n          label: '学历',\n          type: 'select',\n          options: [{\n            text: '本科',\n            value: 'bachelor'\n          }, {\n            text: '硕士',\n            value: 'master'\n          }, {\n            text: '博士',\n            value: 'doctor'\n          }],\n          cols: 4\n        }, {\n          key: 'startDate',\n          label: '开始时间',\n          type: 'text',\n          cols: 4\n        }, {\n          key: 'endDate',\n          label: '结束时间',\n          type: 'text',\n          cols: 4\n        }]\n      };\n    },\n    template: `\n      <v-app>\n        <v-container>\n          <jh-form-list\n            v-model=\"educations\"\n            :fields=\"fields\"\n            title=\"教育经历\"\n            mode=\"card\"\n            :readonly=\"true\"\n          />\n        </v-container>\n      </v-app>\n    `\n  })\n}",...ReadonlyMode.parameters?.docs?.source}}},DisabledState.parameters={...DisabledState.parameters,docs:{...DisabledState.parameters?.docs,source:{originalSource:"{\n  render: () => ({\n    components: {\n      JhFormList\n    },\n    data() {\n      return {\n        items: [{\n          name: '项目A',\n          status: 'completed'\n        }, {\n          name: '项目B',\n          status: 'pending'\n        }],\n        fields: [{\n          key: 'name',\n          label: '项目名称',\n          type: 'text',\n          cols: 8\n        }, {\n          key: 'status',\n          label: '状态',\n          type: 'select',\n          options: [{\n            text: '待处理',\n            value: 'pending'\n          }, {\n            text: '进行中',\n            value: 'processing'\n          }, {\n            text: '已完成',\n            value: 'completed'\n          }],\n          cols: 4\n        }]\n      };\n    },\n    template: `\n      <v-app>\n        <v-container>\n          <jh-form-list\n            v-model=\"items\"\n            :fields=\"fields\"\n            title=\"项目列表（禁用状态）\"\n            :disabled=\"true\"\n          />\n        </v-container>\n      </v-app>\n    `\n  })\n}",...DisabledState.parameters?.docs?.source}}},DynamicDefaultValue.parameters={...DynamicDefaultValue.parameters,docs:{...DynamicDefaultValue.parameters?.docs,source:{originalSource:"{\n  render: () => ({\n    components: {\n      JhFormList\n    },\n    data() {\n      return {\n        tasks: [],\n        fields: [{\n          key: 'title',\n          label: '任务标题',\n          type: 'text',\n          required: true,\n          cols: 8\n        }, {\n          key: 'priority',\n          label: '优先级',\n          type: 'select',\n          options: [{\n            text: '低',\n            value: 'low'\n          }, {\n            text: '中',\n            value: 'medium'\n          }, {\n            text: '高',\n            value: 'high'\n          }],\n          cols: 4\n        }, {\n          key: 'dueDate',\n          label: '截止日期',\n          type: 'date',\n          cols: 6\n        }, {\n          key: 'assignee',\n          label: '负责人',\n          type: 'text',\n          cols: 6\n        }]\n      };\n    },\n    methods: {\n      getDefaultValue(index) {\n        const today = new Date();\n        const dueDate = new Date(today);\n        dueDate.setDate(today.getDate() + 7);\n        return {\n          title: `任务 ${index + 1}`,\n          priority: 'medium',\n          dueDate: dueDate.toISOString().split('T')[0],\n          assignee: ''\n        };\n      }\n    },\n    template: `\n      <v-app>\n        <v-container>\n          <jh-form-list\n            v-model=\"tasks\"\n            :fields=\"fields\"\n            :default-value=\"getDefaultValue\"\n            title=\"任务列表\"\n            description=\"新增任务会自动填充默认值\"\n          />\n          <div class=\"mt-4\">\n            <pre class=\"grey lighten-4 pa-3\">{{ tasks }}</pre>\n          </div>\n        </v-container>\n      </v-app>\n    `\n  })\n}",...DynamicDefaultValue.parameters?.docs?.source}}};const __namedExportsOrder=["BasicCard","TableMode","InlineMode","CustomRender","NestedList","AdvancedValidation","ReadonlyMode","DisabledState","DynamicDefaultValue"]}}]);