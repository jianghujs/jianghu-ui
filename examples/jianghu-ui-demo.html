<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Jianghu UI ç»„ä»¶æµ‹è¯•é¡µ</title>
    <link
      rel="stylesheet"
      href="https://jianghujs.github.io/jianghu-ui/cdn/jianghu-ui.css"
    />
    <style>
      body {
        background-color: #f5f5f5;
      }
      .section-card {
        margin-bottom: 32px;
      }
      .section-title {
        font-size: 20px;
        font-weight: 600;
        margin-bottom: 12px;
      }
    </style>
  </head>
  <body>
    <div id="app">
      <v-app>
        <v-main>
          <v-container>
            <h1 class="mb-8">Jianghu UI ç»„ä»¶æµ‹è¯•é¡µ</h1>

            <v-card class="pa-6 section-card">
              <div class="section-title">ğŸ“Š JhTable æ•°æ®åˆ—è¡¨ç¤ºä¾‹</div>
              <p class="text-body-2 mb-4">
                åŒ…å«å·¥å…·æ ã€é€‰æ‹©åˆ—ä¸è‡ªå®šä¹‰æ“ä½œï¼Œæ¼”ç¤ºé™æ€æ•°æ®æ¸²æŸ“ã€‚
              </p>
              <jh-table
                header-title="å›¢é˜Ÿæˆå‘˜"
                tooltip="æ¼”ç¤º JhTable åŸºç¡€èƒ½åŠ›"
                :headers="tableHeaders"
                :items="tableItems"
                :toolbar="tableToolbar"
                :show-select="true"
                @selection-change="handleSelectionChange"
              >
                <template v-slot:toolbar-actions>
                  <v-btn color="primary" small @click="refreshTable">
                    <v-icon left small>mdi-refresh</v-icon>
                    æ‰‹åŠ¨åˆ·æ–°
                  </v-btn>
                </template>
                <template v-slot:action-column="{ item }">
                  <v-btn text small color="primary" @click="openDrawerWithUser(item)">
                    <v-icon left small>mdi-pencil</v-icon>
                    ç¼–è¾‘
                  </v-btn>
                </template>
              </jh-table>
            </v-card>

            <v-card class="pa-6 section-card">
              <div class="section-title">ğŸ§¾ JhForm è¡¨å•ç¤ºä¾‹</div>
              <p class="text-body-2 mb-4">
                é€šè¿‡å­—æ®µé…ç½®æ¸²æŸ“è¡¨å•ï¼ŒåŒ…å«åŸºç¡€éªŒè¯å’Œäº‹ä»¶å›è°ƒã€‚
              </p>
              <jh-form
                :fields="profileFields"
                :initial-data="profileData"
                layout="horizontal"
                @submit="handleProfileSubmit"
                @change="handleFieldChange"
              >
                <template v-slot:actions="{ validate, resetForm }">
                  <v-btn outlined color="primary" class="mr-3" @click="resetForm">
                    é‡ç½®
                  </v-btn>
                  <v-btn color="primary" @click="validate">
                    æäº¤
                  </v-btn>
                </template>
              </jh-form>
            </v-card>

            <v-card class="pa-6 section-card">
              <div class="section-title">ğŸ“‚ JhDrawer æŠ½å±‰ç¤ºä¾‹</div>
              <p class="text-body-2">
                æ¼”ç¤ºå¦‚ä½•åœ¨æŠ½å±‰ä¸­ç»“åˆ JhFormï¼Œé€‚ç”¨äºè¯¦æƒ…ç¼–è¾‘åœºæ™¯ã€‚
              </p>
              <v-btn color="primary" class="mt-4" @click="drawer.visible = true">
                æ‰“å¼€æŠ½å±‰
              </v-btn>
              <jh-drawer
                v-model="drawer.visible"
                title="ç¼–è¾‘æˆå‘˜ä¿¡æ¯"
                width="520px"
                @confirm="submitDrawerForm"
                @cancel="resetDrawerForm"
              >
                <div class="pa-4">
                  <jh-form
                    ref="drawerFormRef"
                    :fields="drawer.fields"
                    :initial-data="drawer.data"
                    layout="vertical"
                    @submit="submitDrawerForm"
                  >
                    <template v-slot:actions="{ validate, resetForm }">
                      <v-btn text color="primary" class="mr-2" @click="resetForm">
                        é‡ç½®
                      </v-btn>
                      <v-btn color="primary" @click="validate">
                        ä¿å­˜
                      </v-btn>
                    </template>
                  </jh-form>
                </div>
              </jh-drawer>
            </v-card>

            <v-card class="pa-4">
              <div class="section-title">ğŸ“ äº‹ä»¶æ—¥å¿—</div>
              <v-list dense>
                <v-list-item
                  v-for="(log, index) in logs"
                  :key="index"
                  class="py-1"
                >
                  <v-list-item-content>
                    <v-list-item-title class="text-body-2">
                      {{ log }}
                    </v-list-item-title>
                  </v-list-item-content>
                </v-list-item>
                <v-list-item v-if="logs.length === 0">
                  <v-list-item-content>
                    <v-list-item-title class="text-body-2 grey--text">
                      æš‚æ— æ“ä½œï¼Œå°è¯•ç‚¹å‡»ä¸Šé¢çš„ç¤ºä¾‹ç»„ä»¶ã€‚
                    </v-list-item-title>
                  </v-list-item-content>
                </v-list-item>
              </v-list>
            </v-card>
          </v-container>
        </v-main>
      </v-app>
    </div>

    <script src="https://jianghujs.github.io/jianghu-ui/cdn/jianghu-ui.js"></script>
    <script>
      new Vue({
        el: '#app',
        vuetify: new Vuetify(),
        data: {
          logs: [],
          tableToolbar: {
            search: true,
            refresh: true,
            setting: true,
            density: true,
            fullscreen: true,
          },
          tableHeaders: [
            { text: 'ID', value: 'id', width: 80 },
            { text: 'å§“å', value: 'name', width: 140 },
            { text: 'é‚®ç®±', value: 'email' },
            { text: 'è§’è‰²', value: 'role', width: 120 },
            { text: 'åŠ å…¥æ—¶é—´', value: 'joinDate', width: 140 },
            {
              text: 'æ“ä½œ',
              value: 'actions',
              sortable: false,
              width: 140,
            },
          ],
          tableItems: [
            { id: 1, name: 'å¼ æ— å¿Œ', email: 'wz@jianghujs.com', role: 'å¹³å°ç®¡ç†å‘˜', joinDate: '2024-02-12' },
            { id: 2, name: 'èµµæ•', email: 'zm@jianghujs.com', role: 'äº§å“ç»ç†', joinDate: '2024-03-08' },
            { id: 3, name: 'å‘¨èŠ·è‹¥', email: 'zzr@jianghujs.com', role: 'å‰ç«¯å¼€å‘', joinDate: '2024-05-15' },
            { id: 4, name: 'å°æ˜­', email: 'xz@jianghujs.com', role: 'æµ‹è¯•å·¥ç¨‹å¸ˆ', joinDate: '2024-07-02' },
          ],
          profileData: {
            nickname: '',
            city: null,
            notify: true,
            description: '',
          },
          profileFields: [
            { key: 'nickname', label: 'æ˜µç§°', type: 'text', placeholder: 'è¯·è¾“å…¥æ˜µç§°', required: true },
            {
              key: 'city',
              label: 'æ‰€åœ¨åŸå¸‚',
              type: 'select',
              options: [
                { text: 'æ­å·', value: 'hangzhou' },
                { text: 'æˆéƒ½', value: 'chengdu' },
                { text: 'åŒ—äº¬', value: 'beijing' },
              ],
              placeholder: 'è¯·é€‰æ‹©åŸå¸‚',
              cols: { md: 6 },
            },
            {
              key: 'notify',
              label: 'å¼€å¯é€šçŸ¥',
              type: 'switch',
              defaultValue: true,
              cols: { md: 6 },
            },
            {
              key: 'description',
              label: 'ä¸ªäººä»‹ç»',
              type: 'textarea',
              rows: 3,
              placeholder: 'å¡«å†™ç®€å•ä»‹ç»',
              cols: { md: 12 },
            },
          ],
          drawer: {
            visible: false,
            data: {
              id: null,
              name: '',
              role: '',
              email: '',
              remark: '',
            },
            fields: [
              { key: 'name', label: 'å§“å', type: 'text', required: true, placeholder: 'è¯·è¾“å…¥å§“å' },
              {
                key: 'role',
                label: 'è§’è‰²',
                type: 'select',
                options: [
                  { text: 'å¹³å°ç®¡ç†å‘˜', value: 'å¹³å°ç®¡ç†å‘˜' },
                  { text: 'ç ”å‘è´Ÿè´£äºº', value: 'ç ”å‘è´Ÿè´£äºº' },
                  { text: 'äº§å“ç»ç†', value: 'äº§å“ç»ç†' },
                  { text: 'æµ‹è¯•å·¥ç¨‹å¸ˆ', value: 'æµ‹è¯•å·¥ç¨‹å¸ˆ' },
                ],
                required: true,
              },
              {
                key: 'email',
                label: 'é‚®ç®±',
                type: 'text',
                placeholder: 'è¯·è¾“å…¥é‚®ç®±',
                rules: 'email',
              },
              {
                key: 'remark',
                label: 'å¤‡æ³¨',
                type: 'textarea',
                rows: 3,
              },
            ],
          },
        },
        methods: {
          log(message) {
            this.logs.unshift(`${new Date().toLocaleTimeString()} - ${message}`);
            this.logs = this.logs.slice(0, 6);
          },
          refreshTable() {
            this.log('è§¦å‘æ‰‹åŠ¨åˆ·æ–°');
          },
          handleSelectionChange(selectedRows) {
            this.log(`å½“å‰é€‰æ‹© ${selectedRows.length} è¡Œ`);
          },
          handleProfileSubmit(values) {
            this.log(`JhForm æäº¤: ${JSON.stringify(values)}`);
          },
          handleFieldChange({ key, value }) {
            this.log(`å­—æ®µå˜åŒ–: ${key} => ${value}`);
          },
          openDrawerWithUser(user) {
            this.drawer.data = { ...user };
            this.drawer.visible = true;
            this.log(`å‡†å¤‡ç¼–è¾‘ ${user.name}`);
          },
          submitDrawerForm(values) {
            this.log(`æŠ½å±‰ä¿å­˜: ${JSON.stringify(values || this.drawer.data)}`);
            this.drawer.visible = false;
          },
          resetDrawerForm() {
            this.log('æŠ½å±‰å–æ¶ˆç¼–è¾‘');
            this.drawer.visible = false;
          },
        },
      });
    </script>
  </body>
</html>
