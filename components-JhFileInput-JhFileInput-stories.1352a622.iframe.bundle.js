/*! For license information please see components-JhFileInput-JhFileInput-stories.1352a622.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunk_jianghujs_jianghu_ui=self.webpackChunk_jianghujs_jianghu_ui||[]).push([[5323],{"./node_modules/.pnpm/css-loader@6.11.0_webpack@5.102.1_@swc+core@1.13.5_esbuild@0.18.20_webpack-cli@5.1.4_webpack@5.102.1__/node_modules/css-loader/dist/cjs.js??clonedRuleSet-11.use[1]!./node_modules/.pnpm/vue-loader@15.11.1_@vue+compiler-sfc@3.5.22_css-loader@6.11.0_webpack@5.102.1_@swc+core_acb67284a4be633df1055a74f961e4b4/node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@5.9.3_webpack@5.102.1_@swc+core@1.13.5_es_397d8c6b9860a09288c2bf2dc9668002/node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-11.use[2]!./node_modules/.pnpm/vue-loader@15.11.1_@vue+compiler-sfc@3.5.22_css-loader@6.11.0_webpack@5.102.1_@swc+core_acb67284a4be633df1055a74f961e4b4/node_modules/vue-loader/lib/index.js??vue-loader-options!./src/components/JhFileInput/JhFileInput.vue?vue&type=style&index=0&id=a8e9f800&prod&scoped=true&lang=css":(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _node_modules_pnpm_css_loader_6_11_0_webpack_5_102_1_swc_core_1_13_5_esbuild_0_18_20_webpack_cli_5_1_4_webpack_5_102_1_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/css-loader@6.11.0_webpack@5.102.1_@swc+core@1.13.5_esbuild@0.18.20_webpack-cli@5.1.4_webpack@5.102.1__/node_modules/css-loader/dist/runtime/sourceMaps.js"),_node_modules_pnpm_css_loader_6_11_0_webpack_5_102_1_swc_core_1_13_5_esbuild_0_18_20_webpack_cli_5_1_4_webpack_5_102_1_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_pnpm_css_loader_6_11_0_webpack_5_102_1_swc_core_1_13_5_esbuild_0_18_20_webpack_cli_5_1_4_webpack_5_102_1_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_pnpm_css_loader_6_11_0_webpack_5_102_1_swc_core_1_13_5_esbuild_0_18_20_webpack_cli_5_1_4_webpack_5_102_1_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/css-loader@6.11.0_webpack@5.102.1_@swc+core@1.13.5_esbuild@0.18.20_webpack-cli@5.1.4_webpack@5.102.1__/node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_pnpm_css_loader_6_11_0_webpack_5_102_1_swc_core_1_13_5_esbuild_0_18_20_webpack_cli_5_1_4_webpack_5_102_1_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_pnpm_css_loader_6_11_0_webpack_5_102_1_swc_core_1_13_5_esbuild_0_18_20_webpack_cli_5_1_4_webpack_5_102_1_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,"\n.aspect-square[data-v-a8e9f800] {\n  aspect-ratio: 1 / 1;\n}\n.grid[data-v-a8e9f800] {\n  display: grid;\n}\n","",{version:3,sources:["webpack://./src/components/JhFileInput/JhFileInput.vue"],names:[],mappings:";AAqPA;EACA,mBAAA;AACA;AAEA;EACA,aAAA;AACA",sourcesContent:['<template>\n  <v-app>\n    <v-container fluid class="pa-0">\n      <div class="w-full">\n        \x3c!-- 文件上传区域 --\x3e\n        <div class="grid grid-cols-[repeat(auto-fill,minmax(100px,1fr))] gap-4">\n          \x3c!-- 已上传的文件 --\x3e\n          <div v-if="value && isString(value)" class="relative aspect-square rounded overflow-hidden">\n            <div class="w-full h-full flex flex-col items-center justify-center p-2 bg-gray-100">\n              <img v-if="isImage(value)" :src="getImageUrl(value)" class="max-w-full max-h-full object-contain">\n              <v-icon v-else size="40" class="text-gray-500">mdi-file-document-outline</v-icon>\n            </div>\n            \x3c!-- 删除按钮 --\x3e\n            <v-btn\n              v-if="!readonly"\n              icon\n              x-small\n              class="absolute top-1 right-1 !bg-black/50"\n              @click="handleRemoveSingleFile"\n            >\n              <v-icon small color="white">mdi-close</v-icon>\n            </v-btn>\n          </div>\n          <div v-else-if="value && Array.isArray(value)" v-for="(file, index) in value" :key="index" class="relative aspect-square border border-gray-200 rounded overflow-hidden">\n            \x3c!-- 预览图 --\x3e\n            <div v-if="isString(file)" class="w-full h-full flex flex-col items-center justify-center p-2 bg-gray-100">\n              <img v-if="isImage(file)" :src="getImageUrl(file)" class="max-w-full max-h-full object-contain">\n              <v-icon v-else size="40" class="text-gray-500">mdi-file-document-outline</v-icon>\n            </div>\n            <div v-else class="w-full h-full flex flex-col items-center justify-center p-2 bg-gray-100">\n              <img v-if="isImage(file)" :src="getObjectUrl(file)" class="max-w-full max-h-full object-contain">\n              <v-icon v-else size="40" class="text-gray-500">mdi-file-document-outline</v-icon>\n            </div>\n            \x3c!-- 删除按钮 --\x3e\n            <v-btn\n              v-if="!readonly"\n              icon\n              x-small\n              class="absolute top-1 right-1 !bg-black/50"\n              @click="removeFile(index)"\n            >\n              <v-icon small color="white">mdi-close</v-icon>\n            </v-btn>\n            \x3c!-- 类型 --\x3e\n            <div class="absolute top-0 left-2 text-xs bg-green-500 text-white px-1 rounded-b-sm">\n              {{ getFileExtension(file) }}\n            </div>\n          </div>\n\n          \x3c!-- 上传按钮 --\x3e\n          <div class="aspect-square border-2 border-dashed border-gray-200 rounded flex items-center justify-center cursor-pointer transition-all hover:border-blue-500 hover:bg-blue-50" @click="triggerFileInput" v-if="isCanUpload">\n            <input\n              type="file"\n              ref="fileInput"\n              :multiple="multiple"\n              :accept="accept"\n              @change="handleFileChange"\n              class="hidden"\n            >\n            <v-icon size="40" class="text-gray-500 transition-all group-hover:text-blue-500">mdi-plus</v-icon>\n          </div>\n        </div>\n\n        \x3c!-- 错误提示 --\x3e\n        <div v-if="errorMessage" class="text-red-500 text-xs mt-2 pl-0.5">\n          {{ errorMessage }}\n        </div>\n\n        \x3c!-- 上传限制提示 --\x3e\n        <div v-if="isShowUploadLimit" class="text-gray-500 text-xs mt-2 pl-0.5">\n          最多可上传 {{ maxFiles }} 个文件 (已上传 {{ isString(value) ? 1 : (value || []).length }} 个)\n        </div>\n      </div>\n    </v-container>\n  </v-app>\n</template>\n\n<script>\nexport default {\n  name: \'JhFileInput\',\n  props: {\n    // 已选文件集合，可为 File[]、字符串路径数组或单个字符串\n    value: {\n      type: [Array, String],\n      default: () => []\n    },\n    // 限制最大可上传文件数，0 表示不限制\n    maxFiles: {\n      type: Number,\n      default: 0  // 0 表示不限制\n    },\n    // input accept 属性，控制允许的文件类型\n    accept: {\n      type: String,\n      default: \'*/*\'  // 默认接受所有文件类型\n    },\n    // 是否允许多选\n    multiple: {\n      type: Boolean,\n      default: false\n    },\n    // 额外的校验规则\n    rules: {\n      type: Array,\n      default: () => []\n    },\n    // 只读模式（禁用上传和删除）\n    readonly: {\n      type: Boolean,\n      default: false\n    },\n    // 上传接口需要拼接的路径前缀\n    uploadPrefix: {\n      type: String,\n      default: \'/upload/\'\n    }\n  },\n  data() {\n    return {\n      errorMessage: \'\'\n    }\n  },\n  watch: {\n    value: {\n      handler() {\n        this.validate();\n      },\n      deep: true\n    }\n  },\n  computed: {\n    isCanUpload() {\n      if (this.readonly) return false;\n\n      if (this.multiple) {\n        return !this.maxFiles || ((this.value || []).length < this.maxFiles);\n      } else {\n        return (this.value || []).length < 1;\n      }\n    },\n    isShowUploadLimit() {\n      return !this.readonly && this.multiple && this.maxFiles > 0;\n    }\n  },\n  methods: {\n    isString(val) {\n      return typeof val === \'string\';\n    },\n    triggerFileInput() {\n      this.$refs.fileInput.click();\n    },\n\n    async handleFileChange(event) {\n      const files = Array.from(event.target.files);\n\n      // 检查文件数量限制\n      if (this.maxFiles && (this.value || []).length + files.length > this.maxFiles) {\n        this.errorMessage = `最多只能上传 ${this.maxFiles} 个文件`;\n        return;\n      }\n\n      let newFiles = [...(this.value || [])];\n      for (const file of files) {\n        try {\n          // 检查是否已存在相同文件\n          const isDuplicate = newFiles.some(existingFile =>\n            existingFile.name === file.name &&\n            existingFile.size === file.size\n          );\n\n          if (isDuplicate) {\n            this.errorMessage = `文件 ${file.name} 已存在`;\n            continue;\n          }\n\n          newFiles.push(file);\n        } catch (error) {\n          console.error(\'Upload error:\', error);\n          this.errorMessage = `上传文件 ${file.name} 失败`;\n        }\n      }\n\n      this.$emit(\'input\', newFiles);\n      this.$emit(\'change\', newFiles);\n      if (!this.errorMessage) {\n        this.errorMessage = \'\';\n      }\n\n      // 清空 input，以便重复选择同一文件\n      event.target.value = \'\';\n    },\n\n    handleRemoveSingleFile() {\n      this.$emit(\'input\', []);\n      this.$emit(\'change\', []);\n    },\n\n    removeFile(index) {\n      const files = [...this.value];\n      files.splice(index, 1);\n      this.$emit(\'input\', files);\n      this.$emit(\'change\', files);\n    },\n\n    isImage(file) {\n      if (this.isString(file)) {\n        return [\'jpg\', \'jpeg\', \'png\', \'gif\', \'bmp\', \'webp\', \'svg\'].includes(file.split(\'.\').pop().toLowerCase());\n      }\n      return file.type ? file.type.startsWith(\'image/\') : false;\n    },\n\n    getImageUrl(path) {\n      return `${this.uploadPrefix}${path}`;\n    },\n\n    getObjectUrl(file) {\n      return URL.createObjectURL(file);\n    },\n\n    getFileExtension(file) {\n      if (this.isString(file)) {\n        return file.split(\'.\').pop();\n      }\n      return file.name.split(\'.\').pop();\n    },\n\n    validate() {\n      this.errorMessage = \'\';\n\n      // 执行验证规则\n      for (const rule of this.rules) {\n        const result = rule(this.value);\n        if (result !== true) {\n          this.errorMessage = result;\n          return false;\n        }\n      }\n\n      return true;\n    }\n  }\n}\n<\/script>\n\n<style scoped>\n.aspect-square {\n  aspect-ratio: 1 / 1;\n}\n\n.grid {\n  display: grid;\n}\n</style>\n'],sourceRoot:""}]);const __WEBPACK_DEFAULT_EXPORT__=___CSS_LOADER_EXPORT___},"./node_modules/.pnpm/vue-loader@15.11.1_@vue+compiler-sfc@3.5.22_css-loader@6.11.0_webpack@5.102.1_@swc+core_acb67284a4be633df1055a74f961e4b4/node_modules/vue-loader/lib/runtime/componentNormalizer.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function normalizeComponent(scriptExports,render,staticRenderFns,functionalTemplate,injectStyles,scopeId,moduleIdentifier,shadowMode){var hook,options="function"==typeof scriptExports?scriptExports.options:scriptExports;if(render&&(options.render=render,options.staticRenderFns=staticRenderFns,options._compiled=!0),functionalTemplate&&(options.functional=!0),scopeId&&(options._scopeId="data-v-"+scopeId),moduleIdentifier?(hook=function(context){(context=context||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(context=__VUE_SSR_CONTEXT__),injectStyles&&injectStyles.call(this,context),context&&context._registeredComponents&&context._registeredComponents.add(moduleIdentifier)},options._ssrRegister=hook):injectStyles&&(hook=shadowMode?function(){injectStyles.call(this,(options.functional?this.parent:this).$root.$options.shadowRoot)}:injectStyles),hook)if(options.functional){options._injectStyles=hook;var originalRender=options.render;options.render=function renderWithStyleInjection(h,context){return hook.call(context),originalRender(h,context)}}else{var existing=options.beforeCreate;options.beforeCreate=existing?[].concat(existing,hook):[hook]}return{exports:scriptExports,options}}__webpack_require__.d(__webpack_exports__,{A:()=>normalizeComponent})},"./src/components/JhFileInput/JhFileInput.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{__namedExportsOrder:()=>__namedExportsOrder,default:()=>JhFileInput_stories,单图上传:()=>单图上传,只读模式:()=>只读模式,基础示例:()=>基础示例,多图上传:()=>多图上传,已有文件:()=>已有文件,带验证:()=>带验证});function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function _regeneratorValues(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],r=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function next(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}throw new TypeError(_typeof(e)+" is not iterable")}function _regenerator(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var c=n&&n.prototype instanceof Generator?n:Generator,u=Object.create(c.prototype);return _regeneratorDefine2(u,"_invoke",function(r,n,o){var i,c,u,f=0,p=o||[],y=!1,G={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function d(t,r){return i=t,c=0,u=e,G.n=r,a}};function d(r,n){for(c=r,u=n,t=0;!y&&f&&!o&&t<p.length;t++){var o,i=p[t],d=G.p,l=i[2];r>3?(o=l===n)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=e):i[0]<=d&&((o=r<2&&d<i[1])?(c=0,G.v=n,G.n=i[1]):d<l&&(o=r<3||i[0]>n||n>l)&&(i[4]=r,i[5]=n,G.n=l,c=0))}if(o||r>1)return a;throw y=!0,n}return function(o,p,l){if(f>1)throw TypeError("Generator is already running");for(y&&1===p&&d(p,l),c=p,u=l;(t=c<2?e:u)||!y;){i||(c?c<3?(c>1&&(G.n=-1),d(c,u)):G.n=u:G.v=u);try{if(f=2,i){if(c||(o="next"),t=i[o]){if(!(t=t.call(i,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,c<2&&(c=0)}else 1===c&&(t=i.return)&&t.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=e}else if((t=(y=G.n<0)?u:r.call(n,G))!==a)break}catch(t){i=e,c=1,u=t}finally{f=1}}return{value:t,done:y}}}(r,o,i),!0),u}var a={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}t=Object.getPrototypeOf;var c=[][n]?t(t([][n]())):(_regeneratorDefine2(t={},n,function(){return this}),t),u=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,GeneratorFunctionPrototype):(e.__proto__=GeneratorFunctionPrototype,_regeneratorDefine2(e,o,"GeneratorFunction")),e.prototype=Object.create(u),e}return GeneratorFunction.prototype=GeneratorFunctionPrototype,_regeneratorDefine2(u,"constructor",GeneratorFunctionPrototype),_regeneratorDefine2(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName="GeneratorFunction",_regeneratorDefine2(GeneratorFunctionPrototype,o,"GeneratorFunction"),_regeneratorDefine2(u),_regeneratorDefine2(u,o,"Generator"),_regeneratorDefine2(u,n,function(){return this}),_regeneratorDefine2(u,"toString",function(){return"[object Generator]"}),(_regenerator=function _regenerator(){return{w:i,m:f}})()}function _regeneratorDefine2(e,r,n,t){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}_regeneratorDefine2=function _regeneratorDefine(e,r,n,t){function o(r,n){_regeneratorDefine2(e,r,function(e){return this._invoke(r,n,e)})}r?i?i(e,r,{value:n,enumerable:!t,configurable:!t,writable:!t}):e[r]=n:(o("next",0),o("throw",1),o("return",2))},_regeneratorDefine2(e,r,n,t)}function _toConsumableArray(r){return function _arrayWithoutHoles(r){if(Array.isArray(r))return _arrayLikeToArray(r)}(r)||function _iterableToArray(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(r)||_unsupportedIterableToArray(r)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0}}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}function asyncGeneratorStep(n,t,e,r,o,a,c){try{var i=n[a](c),u=i.value}catch(n){return void e(n)}i.done?t(u):Promise.resolve(u).then(r,o)}const JhFileInput_JhFileInputvue_type_script_lang_js={name:"JhFileInput",props:{value:{type:[Array,String],default:function _default(){return[]}},maxFiles:{type:Number,default:0},accept:{type:String,default:"*/*"},multiple:{type:Boolean,default:!1},rules:{type:Array,default:function _default(){return[]}},readonly:{type:Boolean,default:!1},uploadPrefix:{type:String,default:"/upload/"}},data:function data(){return{errorMessage:""}},watch:{value:{handler:function handler(){this.validate()},deep:!0}},computed:{isCanUpload:function isCanUpload(){return!this.readonly&&(this.multiple?!this.maxFiles||(this.value||[]).length<this.maxFiles:(this.value||[]).length<1)},isShowUploadLimit:function isShowUploadLimit(){return!this.readonly&&this.multiple&&this.maxFiles>0}},methods:{isString:function isString(val){return"string"==typeof val},triggerFileInput:function triggerFileInput(){this.$refs.fileInput.click()},handleFileChange:function handleFileChange(event){var _this=this;return function _asyncToGenerator(n){return function(){var t=this,e=arguments;return new Promise(function(r,o){var a=n.apply(t,e);function _next(n){asyncGeneratorStep(a,r,o,_next,_throw,"next",n)}function _throw(n){asyncGeneratorStep(a,r,o,_next,_throw,"throw",n)}_next(void 0)})}}(_regenerator().m(function _callee(){var files,newFiles,_loop,_i,_files;return _regenerator().w(function(_context2){for(;;)switch(_context2.n){case 0:if(files=Array.from(event.target.files),!(_this.maxFiles&&(_this.value||[]).length+files.length>_this.maxFiles)){_context2.n=1;break}return _this.errorMessage="最多只能上传 ".concat(_this.maxFiles," 个文件"),_context2.a(2);case 1:newFiles=_toConsumableArray(_this.value||[]),_loop=_regenerator().m(function _loop(){var file,_t;return _regenerator().w(function(_context){for(;;)switch(_context.p=_context.n){case 0:if(file=_files[_i],_context.p=1,!newFiles.some(function(existingFile){return existingFile.name===file.name&&existingFile.size===file.size})){_context.n=2;break}return _this.errorMessage="文件 ".concat(file.name," 已存在"),_context.a(2,1);case 2:newFiles.push(file),_context.n=4;break;case 3:_context.p=3,_t=_context.v,console.error("Upload error:",_t),_this.errorMessage="上传文件 ".concat(file.name," 失败");case 4:return _context.a(2)}},_loop,null,[[1,3]])}),_i=0,_files=files;case 2:if(!(_i<_files.length)){_context2.n=5;break}return _context2.d(_regeneratorValues(_loop()),3);case 3:if(!_context2.v){_context2.n=4;break}return _context2.a(3,4);case 4:_i++,_context2.n=2;break;case 5:_this.$emit("input",newFiles),_this.$emit("change",newFiles),_this.errorMessage||(_this.errorMessage=""),event.target.value="";case 6:return _context2.a(2)}},_callee)}))()},handleRemoveSingleFile:function handleRemoveSingleFile(){this.$emit("input",[]),this.$emit("change",[])},removeFile:function removeFile(index){var files=_toConsumableArray(this.value);files.splice(index,1),this.$emit("input",files),this.$emit("change",files)},isImage:function isImage(file){return this.isString(file)?["jpg","jpeg","png","gif","bmp","webp","svg"].includes(file.split(".").pop().toLowerCase()):!!file.type&&file.type.startsWith("image/")},getImageUrl:function getImageUrl(path){return"".concat(this.uploadPrefix).concat(path)},getObjectUrl:function getObjectUrl(file){return URL.createObjectURL(file)},getFileExtension:function getFileExtension(file){return this.isString(file)?file.split(".").pop():file.name.split(".").pop()},validate:function validate(){this.errorMessage="";var _step,_iterator=function _createForOfIteratorHelper(r,e){var t="undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=_unsupportedIterableToArray(r))||e&&r&&"number"==typeof r.length){t&&(r=t);var _n=0,F=function F(){};return{s:F,n:function n(){return _n>=r.length?{done:!0}:{done:!1,value:r[_n++]}},e:function e(r){throw r},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function s(){t=t.call(r)},n:function n(){var r=t.next();return a=r.done,r},e:function e(r){u=!0,o=r},f:function f(){try{a||null==t.return||t.return()}finally{if(u)throw o}}}}(this.rules);try{for(_iterator.s();!(_step=_iterator.n()).done;){var result=(0,_step.value)(this.value);if(!0!==result)return this.errorMessage=result,!1}}catch(err){_iterator.e(err)}finally{_iterator.f()}return!0}}};var injectStylesIntoStyleTag=__webpack_require__("./node_modules/.pnpm/style-loader@3.3.4_webpack@5.102.1_@swc+core@1.13.5_esbuild@0.18.20_webpack-cli@5.1.4_webpack@5.102.1__/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),styleDomAPI=__webpack_require__("./node_modules/.pnpm/style-loader@3.3.4_webpack@5.102.1_@swc+core@1.13.5_esbuild@0.18.20_webpack-cli@5.1.4_webpack@5.102.1__/node_modules/style-loader/dist/runtime/styleDomAPI.js"),styleDomAPI_default=__webpack_require__.n(styleDomAPI),insertBySelector=__webpack_require__("./node_modules/.pnpm/style-loader@3.3.4_webpack@5.102.1_@swc+core@1.13.5_esbuild@0.18.20_webpack-cli@5.1.4_webpack@5.102.1__/node_modules/style-loader/dist/runtime/insertBySelector.js"),insertBySelector_default=__webpack_require__.n(insertBySelector),setAttributesWithoutAttributes=__webpack_require__("./node_modules/.pnpm/style-loader@3.3.4_webpack@5.102.1_@swc+core@1.13.5_esbuild@0.18.20_webpack-cli@5.1.4_webpack@5.102.1__/node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),setAttributesWithoutAttributes_default=__webpack_require__.n(setAttributesWithoutAttributes),insertStyleElement=__webpack_require__("./node_modules/.pnpm/style-loader@3.3.4_webpack@5.102.1_@swc+core@1.13.5_esbuild@0.18.20_webpack-cli@5.1.4_webpack@5.102.1__/node_modules/style-loader/dist/runtime/insertStyleElement.js"),insertStyleElement_default=__webpack_require__.n(insertStyleElement),styleTagTransform=__webpack_require__("./node_modules/.pnpm/style-loader@3.3.4_webpack@5.102.1_@swc+core@1.13.5_esbuild@0.18.20_webpack-cli@5.1.4_webpack@5.102.1__/node_modules/style-loader/dist/runtime/styleTagTransform.js"),styleTagTransform_default=__webpack_require__.n(styleTagTransform),JhFileInputvue_type_style_index_0_id_a8e9f800_prod_scoped_true_lang_css=__webpack_require__("./node_modules/.pnpm/css-loader@6.11.0_webpack@5.102.1_@swc+core@1.13.5_esbuild@0.18.20_webpack-cli@5.1.4_webpack@5.102.1__/node_modules/css-loader/dist/cjs.js??clonedRuleSet-11.use[1]!./node_modules/.pnpm/vue-loader@15.11.1_@vue+compiler-sfc@3.5.22_css-loader@6.11.0_webpack@5.102.1_@swc+core_acb67284a4be633df1055a74f961e4b4/node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@5.9.3_webpack@5.102.1_@swc+core@1.13.5_es_397d8c6b9860a09288c2bf2dc9668002/node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-11.use[2]!./node_modules/.pnpm/vue-loader@15.11.1_@vue+compiler-sfc@3.5.22_css-loader@6.11.0_webpack@5.102.1_@swc+core_acb67284a4be633df1055a74f961e4b4/node_modules/vue-loader/lib/index.js??vue-loader-options!./src/components/JhFileInput/JhFileInput.vue?vue&type=style&index=0&id=a8e9f800&prod&scoped=true&lang=css"),options={};options.styleTagTransform=styleTagTransform_default(),options.setAttributes=setAttributesWithoutAttributes_default(),options.insert=insertBySelector_default().bind(null,"head"),options.domAPI=styleDomAPI_default(),options.insertStyleElement=insertStyleElement_default();injectStylesIntoStyleTag_default()(JhFileInputvue_type_style_index_0_id_a8e9f800_prod_scoped_true_lang_css.A,options);JhFileInputvue_type_style_index_0_id_a8e9f800_prod_scoped_true_lang_css.A&&JhFileInputvue_type_style_index_0_id_a8e9f800_prod_scoped_true_lang_css.A.locals&&JhFileInputvue_type_style_index_0_id_a8e9f800_prod_scoped_true_lang_css.A.locals;const __vuedocgen_export_0=(0,__webpack_require__("./node_modules/.pnpm/vue-loader@15.11.1_@vue+compiler-sfc@3.5.22_css-loader@6.11.0_webpack@5.102.1_@swc+core_acb67284a4be633df1055a74f961e4b4/node_modules/vue-loader/lib/runtime/componentNormalizer.js").A)(JhFileInput_JhFileInputvue_type_script_lang_js,function render(){var _vm=this,_c=_vm._self._c;return _c("v-app",[_c("v-container",{staticClass:"pa-0",attrs:{fluid:""}},[_c("div",{staticClass:"w-full"},[_c("div",{staticClass:"grid grid-cols-[repeat(auto-fill,minmax(100px,1fr))] gap-4"},[_vm.value&&_vm.isString(_vm.value)?_c("div",{staticClass:"relative aspect-square rounded overflow-hidden"},[_c("div",{staticClass:"w-full h-full flex flex-col items-center justify-center p-2 bg-gray-100"},[_vm.isImage(_vm.value)?_c("img",{staticClass:"max-w-full max-h-full object-contain",attrs:{src:_vm.getImageUrl(_vm.value)}}):_c("v-icon",{staticClass:"text-gray-500",attrs:{size:"40"}},[_vm._v("mdi-file-document-outline")])],1),_vm._v(" "),_vm.readonly?_vm._e():_c("v-btn",{staticClass:"absolute top-1 right-1 !bg-black/50",attrs:{icon:"","x-small":""},on:{click:_vm.handleRemoveSingleFile}},[_c("v-icon",{attrs:{small:"",color:"white"}},[_vm._v("mdi-close")])],1)],1):_vm.value&&Array.isArray(_vm.value)?_vm._l(_vm.value,function(file,index){return _c("div",{key:index,staticClass:"relative aspect-square border border-gray-200 rounded overflow-hidden"},[_vm.isString(file)?_c("div",{staticClass:"w-full h-full flex flex-col items-center justify-center p-2 bg-gray-100"},[_vm.isImage(file)?_c("img",{staticClass:"max-w-full max-h-full object-contain",attrs:{src:_vm.getImageUrl(file)}}):_c("v-icon",{staticClass:"text-gray-500",attrs:{size:"40"}},[_vm._v("mdi-file-document-outline")])],1):_c("div",{staticClass:"w-full h-full flex flex-col items-center justify-center p-2 bg-gray-100"},[_vm.isImage(file)?_c("img",{staticClass:"max-w-full max-h-full object-contain",attrs:{src:_vm.getObjectUrl(file)}}):_c("v-icon",{staticClass:"text-gray-500",attrs:{size:"40"}},[_vm._v("mdi-file-document-outline")])],1),_vm._v(" "),_vm.readonly?_vm._e():_c("v-btn",{staticClass:"absolute top-1 right-1 !bg-black/50",attrs:{icon:"","x-small":""},on:{click:function click($event){return _vm.removeFile(index)}}},[_c("v-icon",{attrs:{small:"",color:"white"}},[_vm._v("mdi-close")])],1),_vm._v(" "),_c("div",{staticClass:"absolute top-0 left-2 text-xs bg-green-500 text-white px-1 rounded-b-sm"},[_vm._v("\n            "+_vm._s(_vm.getFileExtension(file))+"\n          ")])],1)}):_vm._e(),_vm._v(" "),_vm.isCanUpload?_c("div",{staticClass:"aspect-square border-2 border-dashed border-gray-200 rounded flex items-center justify-center cursor-pointer transition-all hover:border-blue-500 hover:bg-blue-50",on:{click:_vm.triggerFileInput}},[_c("input",{ref:"fileInput",staticClass:"hidden",attrs:{type:"file",multiple:_vm.multiple,accept:_vm.accept},on:{change:_vm.handleFileChange}}),_vm._v(" "),_c("v-icon",{staticClass:"text-gray-500 transition-all group-hover:text-blue-500",attrs:{size:"40"}},[_vm._v("mdi-plus")])],1):_vm._e()],2),_vm._v(" "),_vm.errorMessage?_c("div",{staticClass:"text-red-500 text-xs mt-2 pl-0.5"},[_vm._v("\n        "+_vm._s(_vm.errorMessage)+"\n      ")]):_vm._e(),_vm._v(" "),_vm.isShowUploadLimit?_c("div",{staticClass:"text-gray-500 text-xs mt-2 pl-0.5"},[_vm._v("\n        最多可上传 "+_vm._s(_vm.maxFiles)+" 个文件 (已上传 "+_vm._s(_vm.isString(_vm.value)?1:(_vm.value||[]).length)+" 个)\n      ")]):_vm._e()])])],1)},[],!1,null,"a8e9f800",null).exports,JhFileInput=__vuedocgen_export_0;__vuedocgen_export_0.__docgenInfo={displayName:"JhFileInput",exportName:"default",description:"",tags:{},props:[{name:"value",type:{name:"array|string"},defaultValue:{func:!0,value:"() => []"}},{name:"maxFiles",type:{name:"number"},defaultValue:{func:!1,value:"0"}},{name:"accept",type:{name:"string"},defaultValue:{func:!1,value:"'*/*'"}},{name:"multiple",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"rules",type:{name:"array"},defaultValue:{func:!1,value:"[]"}},{name:"readonly",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"uploadPrefix",type:{name:"string"},defaultValue:{func:!1,value:"'/upload/'"}}],events:[{name:"input",type:{names:["undefined"]}},{name:"change",type:{names:["undefined"]}}],sourceFiles:["/Users/zhongchubing/Documents/work/jianghujs/jianghu-ui/src/components/JhFileInput/JhFileInput.vue"]};const JhFileInput_stories={parameters:{storySource:{source:"import JhFileInput from './JhFileInput.vue';\n\nexport default {\n  title: '基础组件/JhFileInput - 文件上传',\n  component: JhFileInput,\n  tags: ['autodocs'],\n  argTypes: {\n    value: {\n      control: 'object',\n      description: '文件值，可以是数组、字符串或文件对象',\n    },\n    maxFiles: {\n      control: 'number',\n      description: '最多可上传的文件数量，0 表示不限制',\n    },\n    accept: {\n      control: 'text',\n      description: '接受的文件类型，如 \"image/*\" 或 \".jpg,.png\"',\n    },\n    multiple: {\n      control: 'boolean',\n      description: '是否允许多文件上传',\n    },\n    readonly: {\n      control: 'boolean',\n      description: '是否只读模式',\n    },\n    uploadPrefix: {\n      control: 'text',\n      description: '上传文件的 URL 前缀',\n    },\n  },\n};\n\nexport const 基础示例 = {\n  args: {\n    value: [],\n    maxFiles: 0,\n    accept: '*/*',\n    multiple: false,\n    readonly: false,\n    uploadPrefix: '/upload/',\n  },\n};\n\nexport const 单图上传 = {\n  args: {\n    value: [],\n    maxFiles: 1,\n    accept: 'image/*',\n    multiple: false,\n    readonly: false,\n    uploadPrefix: '/upload/',\n  },\n};\n\nexport const 多图上传 = {\n  args: {\n    value: [],\n    maxFiles: 5,\n    accept: 'image/*',\n    multiple: true,\n    readonly: false,\n    uploadPrefix: '/upload/',\n  },\n};\n\nexport const 已有文件 = {\n  args: {\n    value: ['images/photo1.jpg', 'images/photo2.png', 'documents/file.pdf'],\n    maxFiles: 5,\n    accept: '*/*',\n    multiple: true,\n    readonly: false,\n    uploadPrefix: '/upload/',\n  },\n};\n\nexport const 只读模式 = {\n  args: {\n    value: ['images/photo1.jpg', 'images/photo2.png'],\n    maxFiles: 0,\n    accept: '*/*',\n    multiple: true,\n    readonly: true,\n    uploadPrefix: '/upload/',\n  },\n};\n\nexport const 带验证 = {\n  args: {\n    value: [],\n    maxFiles: 3,\n    accept: 'image/*',\n    multiple: true,\n    readonly: false,\n    uploadPrefix: '/upload/',\n    rules: [\n      (v) => (v && v.length > 0) || '请至少上传一个文件',\n      (v) => (v && v.length <= 3) || '最多只能上传3个文件',\n    ],\n  },\n};\n",locationsMap:{基础示例:{startLoc:{col:20,line:35},endLoc:{col:1,line:44},startBody:{col:20,line:35},endBody:{col:1,line:44}},单图上传:{startLoc:{col:20,line:46},endLoc:{col:1,line:55},startBody:{col:20,line:46},endBody:{col:1,line:55}},多图上传:{startLoc:{col:20,line:57},endLoc:{col:1,line:66},startBody:{col:20,line:57},endBody:{col:1,line:66}},已有文件:{startLoc:{col:20,line:68},endLoc:{col:1,line:77},startBody:{col:20,line:68},endBody:{col:1,line:77}},只读模式:{startLoc:{col:20,line:79},endLoc:{col:1,line:88},startBody:{col:20,line:79},endBody:{col:1,line:88}},带验证:{startLoc:{col:19,line:90},endLoc:{col:1,line:103},startBody:{col:19,line:90},endBody:{col:1,line:103}}}}},title:"基础组件/JhFileInput - 文件上传",component:JhFileInput,tags:["autodocs"],argTypes:{value:{control:"object",description:"文件值，可以是数组、字符串或文件对象"},maxFiles:{control:"number",description:"最多可上传的文件数量，0 表示不限制"},accept:{control:"text",description:'接受的文件类型，如 "image/*" 或 ".jpg,.png"'},multiple:{control:"boolean",description:"是否允许多文件上传"},readonly:{control:"boolean",description:"是否只读模式"},uploadPrefix:{control:"text",description:"上传文件的 URL 前缀"}}};var 基础示例={args:{value:[],maxFiles:0,accept:"*/*",multiple:!1,readonly:!1,uploadPrefix:"/upload/"}},单图上传={args:{value:[],maxFiles:1,accept:"image/*",multiple:!1,readonly:!1,uploadPrefix:"/upload/"}},多图上传={args:{value:[],maxFiles:5,accept:"image/*",multiple:!0,readonly:!1,uploadPrefix:"/upload/"}},已有文件={args:{value:["images/photo1.jpg","images/photo2.png","documents/file.pdf"],maxFiles:5,accept:"*/*",multiple:!0,readonly:!1,uploadPrefix:"/upload/"}},只读模式={args:{value:["images/photo1.jpg","images/photo2.png"],maxFiles:0,accept:"*/*",multiple:!0,readonly:!0,uploadPrefix:"/upload/"}},带验证={args:{value:[],maxFiles:3,accept:"image/*",multiple:!0,readonly:!1,uploadPrefix:"/upload/",rules:[function(v){return v&&v.length>0||"请至少上传一个文件"},function(v){return v&&v.length<=3||"最多只能上传3个文件"}]}};基础示例.parameters={...基础示例.parameters,docs:{...基础示例.parameters?.docs,source:{originalSource:"{\n  args: {\n    value: [],\n    maxFiles: 0,\n    accept: '*/*',\n    multiple: false,\n    readonly: false,\n    uploadPrefix: '/upload/'\n  }\n}",...基础示例.parameters?.docs?.source}}},单图上传.parameters={...单图上传.parameters,docs:{...单图上传.parameters?.docs,source:{originalSource:"{\n  args: {\n    value: [],\n    maxFiles: 1,\n    accept: 'image/*',\n    multiple: false,\n    readonly: false,\n    uploadPrefix: '/upload/'\n  }\n}",...单图上传.parameters?.docs?.source}}},多图上传.parameters={...多图上传.parameters,docs:{...多图上传.parameters?.docs,source:{originalSource:"{\n  args: {\n    value: [],\n    maxFiles: 5,\n    accept: 'image/*',\n    multiple: true,\n    readonly: false,\n    uploadPrefix: '/upload/'\n  }\n}",...多图上传.parameters?.docs?.source}}},已有文件.parameters={...已有文件.parameters,docs:{...已有文件.parameters?.docs,source:{originalSource:"{\n  args: {\n    value: ['images/photo1.jpg', 'images/photo2.png', 'documents/file.pdf'],\n    maxFiles: 5,\n    accept: '*/*',\n    multiple: true,\n    readonly: false,\n    uploadPrefix: '/upload/'\n  }\n}",...已有文件.parameters?.docs?.source}}},只读模式.parameters={...只读模式.parameters,docs:{...只读模式.parameters?.docs,source:{originalSource:"{\n  args: {\n    value: ['images/photo1.jpg', 'images/photo2.png'],\n    maxFiles: 0,\n    accept: '*/*',\n    multiple: true,\n    readonly: true,\n    uploadPrefix: '/upload/'\n  }\n}",...只读模式.parameters?.docs?.source}}},带验证.parameters={...带验证.parameters,docs:{...带验证.parameters?.docs,source:{originalSource:"{\n  args: {\n    value: [],\n    maxFiles: 3,\n    accept: 'image/*',\n    multiple: true,\n    readonly: false,\n    uploadPrefix: '/upload/',\n    rules: [v => v && v.length > 0 || '请至少上传一个文件', v => v && v.length <= 3 || '最多只能上传3个文件']\n  }\n}",...带验证.parameters?.docs?.source}}};const __namedExportsOrder=["基础示例","单图上传","多图上传","已有文件","只读模式","带验证"]}}]);