<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Jianghu UI 组件测试页</title>
  <!-- iconfont -->
   <!-- materialdesignicons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@mdi/font@7.4.47/css/materialdesignicons.min.css" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Material+Icons" />

  <!-- tailwindcss -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/vuetify@2.6.1/dist/vuetify.min.css" />
  <link rel="stylesheet" href="../dist/jianghu-ui.css" />
  <style>
    .section-card {
      margin-bottom: 32px;
    }

    .section-title {
      font-size: 20px;
      font-weight: 600;
      margin-bottom: 12px;
    }
  </style>
</head>

<body>
  <div id="app">
    <jh-layout title="test">
      <jh-page-container page-name="123">

        <template slot="content">
          <jh-table 
            :headers="tableHeaders"
            :items="tableItems"
            :toolbar="tableToolbar"
          />
        </template>
      </jh-page-container>
    </jh-layout>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/vuetify@2.6.1/dist/vuetify.min.js"></script>
  <script src="../dist/jianghu-ui.js"></script>
  <script>
    new Vue({
      el: '#app',
      vuetify: new Vuetify({

      }),
      data: {
        logs: [],
        tableToolbar: {
          search: true,
          refresh: true,
          setting: true,
          density: true,
          fullscreen: true,
        },
        tableHeaders: [
          { text: 'ID', value: 'id', width: 80 },
          { text: '姓名', value: 'name', width: 140 },
          { text: '邮箱', value: 'email' },
          { text: '角色', value: 'role', width: 120 },
          { text: '加入时间', value: 'joinDate', width: 140 },
          {
            text: '操作',
            value: 'actions',
            sortable: false,
            width: 140,
          },
        ],
        tableItems: [
          { id: 1, name: '张无忌', email: 'wz@jianghujs.com', role: '平台管理员', joinDate: '2024-02-12' },
          { id: 2, name: '赵敏', email: 'zm@jianghujs.com', role: '产品经理', joinDate: '2024-03-08' },
          { id: 3, name: '周芷若', email: 'zzr@jianghujs.com', role: '前端开发', joinDate: '2024-05-15' },
          { id: 4, name: '小昭', email: 'xz@jianghujs.com', role: '测试工程师', joinDate: '2024-07-02' },
        ],
        profileData: {
          nickname: '',
          city: null,
          notify: true,
          description: '',
        },
        profileFields: [
          { key: 'nickname', label: '昵称', type: 'text', placeholder: '请输入昵称', required: true },
          {
            key: 'city',
            label: '所在城市',
            type: 'select',
            options: [
              { text: '杭州', value: 'hangzhou' },
              { text: '成都', value: 'chengdu' },
              { text: '北京', value: 'beijing' },
            ],
            placeholder: '请选择城市',
            cols: { md: 6 },
          },
          {
            key: 'notify',
            label: '开启通知',
            type: 'switch',
            defaultValue: true,
            cols: { md: 6 },
          },
          {
            key: 'description',
            label: '个人介绍',
            type: 'textarea',
            rows: 3,
            placeholder: '填写简单介绍',
            cols: { md: 12 },
          },
        ],
        drawer: {
          visible: false,
          data: {
            id: null,
            name: '',
            role: '',
            email: '',
            remark: '',
          },
          fields: [
            { key: 'name', label: '姓名', type: 'text', required: true, placeholder: '请输入姓名' },
            {
              key: 'role',
              label: '角色',
              type: 'select',
              options: [
                { text: '平台管理员', value: '平台管理员' },
                { text: '研发负责人', value: '研发负责人' },
                { text: '产品经理', value: '产品经理' },
                { text: '测试工程师', value: '测试工程师' },
              ],
              required: true,
            },
            {
              key: 'email',
              label: '邮箱',
              type: 'text',
              placeholder: '请输入邮箱',
              rules: 'email',
            },
            {
              key: 'remark',
              label: '备注',
              type: 'textarea',
              rows: 3,
            },
          ],
        },
      },
      methods: {
        log(message) {
          this.logs.unshift(`${new Date().toLocaleTimeString()} - ${message}`);
          this.logs = this.logs.slice(0, 6);
        },
        refreshTable() {
          this.log('触发手动刷新');
        },
        handleSelectionChange(selectedRows) {
          this.log(`当前选择 ${selectedRows.length} 行`);
        },
        handleProfileSubmit(values) {
          this.log(`JhForm 提交: ${JSON.stringify(values)}`);
        },
        handleFieldChange({ key, value }) {
          this.log(`字段变化: ${key} => ${value}`);
        },
        openDrawerWithUser(user) {
          this.drawer.data = { ...user };
          this.drawer.visible = true;
          this.log(`准备编辑 ${user.name}`);
        },
        submitDrawerForm(values) {
          this.log(`抽屉保存: ${JSON.stringify(values || this.drawer.data)}`);
          this.drawer.visible = false;
        },
        resetDrawerForm() {
          this.log('抽屉取消编辑');
          this.drawer.visible = false;
        },
      },
    });
  </script>
</body>

</html>